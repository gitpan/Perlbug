            ================ SmallProf version 0.9 ================
                             Profile of (eval 10)                      Page 1
       =================================================================
    count wall tm  cpu time line
      187 0.000000 0.000000     1:The code for (eval 10) is not in the symbol
      188 0.002122 0.010000     2:table.
            ================ SmallProf version 0.9 ================
                             Profile of (eval 11)                      Page 2
       =================================================================
    count wall tm  cpu time line
      187 0.000000 0.000000     1:The code for (eval 11) is not in the symbol
      188 0.013568 0.020000     2:table.
      188 0.000717 0.000000     3:
      188 0.001893 0.000000     4:
            ================ SmallProf version 0.9 ================
                             Profile of (eval 12)                      Page 3
       =================================================================
    count wall tm  cpu time line
      187 0.000000 0.000000     1:The code for (eval 12) is not in the symbol
      188 0.002090 0.000000     2:table.
            ================ SmallProf version 0.9 ================
                             Profile of (eval 13)                      Page 4
       =================================================================
    count wall tm  cpu time line
      187 0.000000 0.000000     1:The code for (eval 13) is not in the symbol
      188 0.000840 0.000000     2:table.
        0 0.000000 0.000000     3:
      188 0.002658 0.020000     4:
            ================ SmallProf version 0.9 ================
                             Profile of (eval 14)                      Page 5
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000     1:The code for (eval 14) is not in the symbol
        1 0.000097 0.000000     2:table.
        1 0.000004 0.000000     3:
        0 0.000000 0.000000     4:
        1 0.000008 0.000000     5:
        0 0.000000 0.000000     6:
        1 0.000100 0.000000     7:
        0 0.000000 0.000000     8:
        0 0.000000 0.000000     9:
        0 0.000000 0.000000    10:
        1 0.000005 0.000000    11:
        0 0.000000 0.000000    12:
        0 0.000000 0.000000    13:
        1 0.000006 0.000000    14:
        0 0.000000 0.000000    15:
        0 0.000000 0.000000    16:
        0 0.000000 0.000000    17:
        0 0.000000 0.000000    18:
        1 0.000002 0.000000    19:
        0 0.000000 0.000000    20:
        0 0.000000 0.000000    21:
        1 0.000005 0.000000    22:
        1 0.000001 0.000000    23:
        0 0.000000 0.000000    24:
        1 0.000002 0.000000    25:
        1 0.000002 0.000000    26:
        0 0.000000 0.000000    27:
        1 0.000002 0.000000    28:
        0 0.000000 0.000000    29:
        0 0.000000 0.000000    30:
        0 0.000000 0.000000    31:
        0 0.000000 0.000000    32:
        0 0.000000 0.000000    33:
        0 0.000000 0.000000    34:
        0 0.000000 0.000000    35:
        0 0.000000 0.000000    36:
        0 0.000000 0.000000    37:
        1 0.000109 0.000000    38:
        0 0.000000 0.000000    39:
        1 0.000071 0.000000    40:
        1 0.000106 0.000000    41:
        1 0.000006 0.000000    42:
        1 0.000009 0.000000    43:
        0 0.000000 0.000000    44:
        1 0.000015 0.000000    45:
        1 0.000003 0.000000    46:
        0 0.000000 0.000000    47:
        0 0.000000 0.000000    48:
        0 0.000000 0.000000    49:
        0 0.000000 0.000000    50:
        1 0.000020 0.000000    51:
            ================ SmallProf version 0.9 ================
                             Profile of (eval 15)                      Page 6
       =================================================================
    count wall tm  cpu time line
        1 0.000000 0.000000     1:The code for (eval 15) is not in the symbol
        2 0.000010 0.000000     2:table.
        2 0.000005 0.000000     3:
        0 0.000000 0.000000     4:
        2 0.000053 0.000000     5:
        2 0.000031 0.000000     6:
        0 0.000000 0.000000     7:
        0 0.000000 0.000000     8:
        2 0.000169 0.000000     9:
        2 0.000101 0.000000    10:
        0 0.000000 0.000000    11:
        0 0.000000 0.000000    12:
        0 0.000000 0.000000    13:
        2 0.000007 0.000000    14:
        2 0.000005 0.000000    15:
        2 0.000084 0.000000    16:
        2 0.000008 0.000000    17:
        2 0.000094 0.000000    18:
            ================ SmallProf version 0.9 ================
                             Profile of (eval 16)                      Page 7
       =================================================================
    count wall tm  cpu time line
        1 0.000000 0.000000     1:The code for (eval 16) is not in the symbol
        2 0.000011 0.000000     2:table.
        2 0.000032 0.000000     3:
        0 0.000000 0.000000     4:
        0 0.000000 0.000000     5:
        0 0.000000 0.000000     6:
        0 0.000000 0.000000     7:
        0 0.000000 0.000000     8:
        0 0.000000 0.000000     9:
        0 0.000000 0.000000    10:
        0 0.000000 0.000000    11:
        0 0.000000 0.000000    12:
        0 0.000000 0.000000    13:
        0 0.000000 0.000000    14:
        0 0.000000 0.000000    15:
        0 0.000000 0.000000    16:
        0 0.000000 0.000000    17:
        0 0.000000 0.000000    18:
        0 0.000000 0.000000    19:
        2 0.000003 0.000000    20:
        2 0.000008 0.000000    21:
        1 0.000003 0.000000    22:
        1 0.000017 0.000000    23:
        1 0.000025 0.000000    24:
        0 0.000000 0.000000    25:
        0 0.000000 0.000000    26:
        0 0.000000 0.000000    27:
        2 0.000030 0.000000    28:
            ================ SmallProf version 0.9 ================
                             Profile of (eval 17)                      Page 8
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000     1:package CGI; sub cache {
        1 0.000085 0.000000     2:    my($self,$new_value) =
        1 0.000003 0.000000     3:    $new_value = '' unless $new_value;
        1 0.000002 0.000000     4:    if ($new_value ne '') {
        0 0.000000 0.000000     5: $self->{'cache'} = $new_value;
        0 0.000000 0.000000     6:    }
        1 0.000009 0.000000     7:    return $self->{'cache'};
        0 0.000000 0.000000     8:}
        0 0.000000 0.000000     9:
        0 0.000000 0.000000    10:;
            ================ SmallProf version 0.9 ================
                             Profile of (eval 18)                      Page 9
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000     1:The code for (eval 18) is not in the symbol
        1 0.000097 0.000000     2:table.
        1 0.000086 0.000000     3:
        0 0.000000 0.000000     4:
        0 0.000000 0.000000     5:
        0 0.000000 0.000000     6:
        0 0.000000 0.000000     7:
        1 0.000096 0.000000     8:
        1 0.000088 0.000000     9:
        1 0.000002 0.000000    10:
        1 0.000006 0.000000    11:
        1 0.000012 0.000000    12:
        1 0.000010 0.000000    13:
        1 0.000002 0.000000    14:
        0 0.000000 0.000000    15:
        1 0.000002 0.000000    16:
        0 0.000000 0.000000    17:
        0 0.000000 0.000000    18:
        0 0.000000 0.000000    19:
        0 0.000000 0.000000    20:
        0 0.000000 0.000000    21:
        1 0.000002 0.000000    22:
        0 0.000000 0.000000    23:
        0 0.000000 0.000000    24:
        0 0.000000 0.000000    25:
        1 0.000002 0.000000    26:
        0 0.000000 0.000000    27:
        0 0.000000 0.000000    28:
        1 0.000001 0.000000    29:
        1 0.000093 0.000000    30:
        0 0.000000 0.000000    31:
        0 0.000000 0.000000    32:
        1 0.000001 0.000000    33:
        0 0.000000 0.000000    34:
        0 0.000000 0.000000    35:
        0 0.000000 0.000000    36:
        0 0.000000 0.000000    37:
        0 0.000000 0.000000    38:
        1 0.000005 0.000000    39:
        1 0.000008 0.000000    40:
        1 0.000072 0.000000    41:
            ================ SmallProf version 0.9 ================
                             Profile of (eval 19)                      Page 10
       =================================================================
    count wall tm  cpu time line
        5 0.000000 0.000000     1:package CGI; sub escapeHTML {
        6 0.000036 0.000000     2:    my($self,$toencode) = @_;
        6 0.000021 0.000000     3:    $toencode = $self unless ref($self);
        6 0.000010 0.000000     4:    return undef unless defined($toencode);
        6 0.000030 0.000000     5:    return $toencode if ref($self) && $self-
        0 0.000000 0.000000     6:
        6 0.000018 0.000000     7:    $toencode=~s/&/&amp;/g;
        6 0.000013 0.000000     8:    $toencode=~s/\"/&quot;/g;
        6 0.000012 0.000000     9:    $toencode=~s/>/&gt;/g;
        6 0.000012 0.000000    10:    $toencode=~s/</&lt;/g;
        6 0.000055 0.000000    11:    return $toencode;
        0 0.000000 0.000000    12:}
        0 0.000000 0.000000    13:
        0 0.000000 0.000000    14:;
            ================ SmallProf version 0.9 ================
                              Profile of (eval 2)                      Page 11
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000     1:package CGI;
        1 0.001001 0.000000     2:%SUBS = (
        0 0.000000 0.000000     3:
        0 0.000000 0.000000     4:'URL_ENCODED'=> <<'END_OF_FUNC',
        0 0.000000 0.000000     5:sub URL_ENCODED { 'application/x-www-form-
        0 0.000000 0.000000     6:END_OF_FUNC
        0 0.000000 0.000000     7:
        0 0.000000 0.000000     8:'MULTIPART' => <<'END_OF_FUNC',
        0 0.000000 0.000000     9:sub MULTIPART {  'multipart/form-data'; }
        0 0.000000 0.000000    10:END_OF_FUNC
        0 0.000000 0.000000    11:
        0 0.000000 0.000000    12:'SERVER_PUSH' => <<'END_OF_FUNC',
        0 0.000000 0.000000    13:sub SERVER_PUSH { 'multipart/x-mixed-replace;
        0 0.000000 0.000000    14:END_OF_FUNC
        0 0.000000 0.000000    15:
        0 0.000000 0.000000    16:'use_named_parameters' => <<'END_OF_FUNC',
        0 0.000000 0.000000    17:#### Method: use_named_parameters
        0 0.000000 0.000000    18:# Force CGI.pm to use named parameter-style
        0 0.000000 0.000000    19:# rather than positional parameters.  The
        0 0.000000 0.000000    20:# will happen automatically if the first
        0 0.000000 0.000000    21:# begins with a -.
        0 0.000000 0.000000    22:sub use_named_parameters {
        0 0.000000 0.000000    23:    my($self,$use_named) =
        0 0.000000 0.000000    24:    return $self->{'.named'} unless defined
        0 0.000000 0.000000    25:
        0 0.000000 0.000000    26:    # stupidity to avoid annoying warnings
        0 0.000000 0.000000    27:    return $self->{'.named'}=$use_named;
        0 0.000000 0.000000    28:}
        0 0.000000 0.000000    29:END_OF_FUNC
        0 0.000000 0.000000    30:
        0 0.000000 0.000000    31:'new_MultipartBuffer' => <<'END_OF_FUNC',
        0 0.000000 0.000000    32:# Create a new multipart buffer
        0 0.000000 0.000000    33:sub new_MultipartBuffer {
        0 0.000000 0.000000    34:    my($self,$boundary,$length,$filehandle) =
        0 0.000000 0.000000    35:    return MultipartBuffer-
        0 0.000000 0.000000    36:}
        0 0.000000 0.000000    37:END_OF_FUNC
        0 0.000000 0.000000    38:
        0 0.000000 0.000000    39:'read_from_client' => <<'END_OF_FUNC',
        0 0.000000 0.000000    40:# Read data from a file handle
        0 0.000000 0.000000    41:sub read_from_client {
        0 0.000000 0.000000    42:    my($self, $fh, $buff, $len, $offset) =
        0 0.000000 0.000000    43:    local $^W=0;                # prevent a
        0 0.000000 0.000000    44:    return undef unless defined($fh);
        0 0.000000 0.000000    45:    return read($fh, $$buff, $len, $offset);
        0 0.000000 0.000000    46:}
        0 0.000000 0.000000    47:END_OF_FUNC
        0 0.000000 0.000000    48:
        0 0.000000 0.000000    49:'delete' => <<'END_OF_FUNC',
        0 0.000000 0.000000    50:#### Method: delete
        0 0.000000 0.000000    51:# Deletes the named parameter entirely.
        0 0.000000 0.000000    52:####
        0 0.000000 0.000000    53:sub delete {
        0 0.000000 0.000000    54:    my($self,$name) = self_or_default(@_);
        0 0.000000 0.000000    55:    delete $self->{$name};
        0 0.000000 0.000000    56:    delete $self->{'.fieldnames'}->{$name};
            ================ SmallProf version 0.9 ================
                              Profile of (eval 2)                      Page 12
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000    57:    @{$self->{'.parameters'}}=grep($_ ne
        0 0.000000 0.000000    58:    return wantarray ? () : undef;
        0 0.000000 0.000000    59:}
        0 0.000000 0.000000    60:END_OF_FUNC
        0 0.000000 0.000000    61:
        0 0.000000 0.000000    62:#### Method: import_names
        0 0.000000 0.000000    63:# Import all parameters into the given
        0 0.000000 0.000000    64:# Assumes namespace 'Q' if not specified
        0 0.000000 0.000000    65:####
        0 0.000000 0.000000    66:'import_names' => <<'END_OF_FUNC',
        0 0.000000 0.000000    67:sub import_names {
        0 0.000000 0.000000    68:    my($self,$namespace,$delete) =
        0 0.000000 0.000000    69:    $namespace = 'Q' unless
        0 0.000000 0.000000    70:    die "Can't import names into \"main\"\n"
        0 0.000000 0.000000    71:    if ($delete || $MOD_PERL) {
        0 0.000000 0.000000    72: # can anyone find an easier way to do this?
        0 0.000000 0.000000    73: foreach (keys %{"${namespace}::"}) {
        0 0.000000 0.000000    74:     local *symbol = "${namespace}::${_}";
        0 0.000000 0.000000    75:     undef $symbol;
        0 0.000000 0.000000    76:     undef @symbol;
        0 0.000000 0.000000    77:     undef %symbol;
        0 0.000000 0.000000    78: }
        0 0.000000 0.000000    79:    }
        0 0.000000 0.000000    80:    my($param,@value,$var);
        0 0.000000 0.000000    81:    foreach $param ($self->param) {
        0 0.000000 0.000000    82: # protect against silly names
        0 0.000000 0.000000    83: ($var = $param)=~tr/a-zA-Z0-9_/_/c;
        0 0.000000 0.000000    84: $var =~ s/^(?=\d)/_/;
        0 0.000000 0.000000    85: local *symbol = "${namespace}::$var";
        0 0.000000 0.000000    86: @value = $self->param($param);
        0 0.000000 0.000000    87: @symbol = @value;
        0 0.000000 0.000000    88: $symbol = $value[0];
        0 0.000000 0.000000    89:    }
        0 0.000000 0.000000    90:}
        0 0.000000 0.000000    91:END_OF_FUNC
        0 0.000000 0.000000    92:
        0 0.000000 0.000000    93:#### Method: keywords
        0 0.000000 0.000000    94:# Keywords acts a bit differently.  Calling
        0 0.000000 0.000000    95:# returns the list of keywords.
        0 0.000000 0.000000    96:# Calling it in a scalar context gives you
        0 0.000000 0.000000    97:####
        0 0.000000 0.000000    98:'keywords' => <<'END_OF_FUNC',
        0 0.000000 0.000000    99:sub keywords {
        0 0.000000 0.000000   100:    my($self,@values) = self_or_default(@_);
        0 0.000000 0.000000   101:    # If values is provided, then we set it.
        0 0.000000 0.000000   102:    $self->{'keywords'}=[@values] if
        0 0.000000 0.000000   103:    my(@result) = defined($self-
        0 0.000000 0.000000   104:    @result;
        0 0.000000 0.000000   105:}
        0 0.000000 0.000000   106:END_OF_FUNC
        0 0.000000 0.000000   107:
        0 0.000000 0.000000   108:# These are some tie() interfaces for
        0 0.000000 0.000000   109:# with Steve Brenner's cgi-lib.pl routines
        0 0.000000 0.000000   110:'ReadParse' => <<'END_OF_FUNC',
        0 0.000000 0.000000   111:sub ReadParse {
        0 0.000000 0.000000   112:    local(*in);
            ================ SmallProf version 0.9 ================
                              Profile of (eval 2)                      Page 13
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   113:    if (@_) {
        0 0.000000 0.000000   114: *in = $_[0];
        0 0.000000 0.000000   115:    } else {
        0 0.000000 0.000000   116: my $pkg = caller();
        0 0.000000 0.000000   117: *in=*{"${pkg}::in"};
        0 0.000000 0.000000   118:    }
        0 0.000000 0.000000   119:    tie(%in,CGI);
        0 0.000000 0.000000   120:    return scalar(keys %in);
        0 0.000000 0.000000   121:}
        0 0.000000 0.000000   122:END_OF_FUNC
        0 0.000000 0.000000   123:
        0 0.000000 0.000000   124:'PrintHeader' => <<'END_OF_FUNC',
        0 0.000000 0.000000   125:sub PrintHeader {
        0 0.000000 0.000000   126:    my($self) = self_or_default(@_);
        0 0.000000 0.000000   127:    return $self->header();
        0 0.000000 0.000000   128:}
        0 0.000000 0.000000   129:END_OF_FUNC
        0 0.000000 0.000000   130:
        0 0.000000 0.000000   131:'HtmlTop' => <<'END_OF_FUNC',
        0 0.000000 0.000000   132:sub HtmlTop {
        0 0.000000 0.000000   133:    my($self,@p) = self_or_default(@_);
        0 0.000000 0.000000   134:    return $self->start_html(@p);
        0 0.000000 0.000000   135:}
        0 0.000000 0.000000   136:END_OF_FUNC
        0 0.000000 0.000000   137:
        0 0.000000 0.000000   138:'HtmlBot' => <<'END_OF_FUNC',
        0 0.000000 0.000000   139:sub HtmlBot {
        0 0.000000 0.000000   140:    my($self,@p) = self_or_default(@_);
        0 0.000000 0.000000   141:    return $self->end_html(@p);
        0 0.000000 0.000000   142:}
        0 0.000000 0.000000   143:END_OF_FUNC
        0 0.000000 0.000000   144:
        0 0.000000 0.000000   145:'SplitParam' => <<'END_OF_FUNC',
        0 0.000000 0.000000   146:sub SplitParam {
        0 0.000000 0.000000   147:    my ($param) = @_;
        0 0.000000 0.000000   148:    my (@params) = split ("\0", $param);
        0 0.000000 0.000000   149:    return (wantarray ? @params :
        0 0.000000 0.000000   150:}
        0 0.000000 0.000000   151:END_OF_FUNC
        0 0.000000 0.000000   152:
        0 0.000000 0.000000   153:'MethGet' => <<'END_OF_FUNC',
        0 0.000000 0.000000   154:sub MethGet {
        0 0.000000 0.000000   155:    return request_method() eq 'GET';
        0 0.000000 0.000000   156:}
        0 0.000000 0.000000   157:END_OF_FUNC
        0 0.000000 0.000000   158:
        0 0.000000 0.000000   159:'MethPost' => <<'END_OF_FUNC',
        0 0.000000 0.000000   160:sub MethPost {
        0 0.000000 0.000000   161:    return request_method() eq 'POST';
        0 0.000000 0.000000   162:}
        0 0.000000 0.000000   163:END_OF_FUNC
        0 0.000000 0.000000   164:
        0 0.000000 0.000000   165:'TIEHASH' => <<'END_OF_FUNC',
        0 0.000000 0.000000   166:sub TIEHASH {
        0 0.000000 0.000000   167:    return $Q || new CGI;
        0 0.000000 0.000000   168:}
            ================ SmallProf version 0.9 ================
                              Profile of (eval 2)                      Page 14
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   169:END_OF_FUNC
        0 0.000000 0.000000   170:
        0 0.000000 0.000000   171:'STORE' => <<'END_OF_FUNC',
        0 0.000000 0.000000   172:sub STORE {
        0 0.000000 0.000000   173:    $_[0]->param($_[1],split("\0",$_[2]));
        0 0.000000 0.000000   174:}
        0 0.000000 0.000000   175:END_OF_FUNC
        0 0.000000 0.000000   176:
        0 0.000000 0.000000   177:'FETCH' => <<'END_OF_FUNC',
        0 0.000000 0.000000   178:sub FETCH {
        0 0.000000 0.000000   179:    return $_[0] if $_[1] eq 'CGI';
        0 0.000000 0.000000   180:    return undef unless defined $_[0]-
        0 0.000000 0.000000   181:    return join("\0",$_[0]->param($_[1]));
        0 0.000000 0.000000   182:}
        0 0.000000 0.000000   183:END_OF_FUNC
        0 0.000000 0.000000   184:
        0 0.000000 0.000000   185:'FIRSTKEY' => <<'END_OF_FUNC',
        0 0.000000 0.000000   186:sub FIRSTKEY {
        0 0.000000 0.000000   187:    $_[0]->{'.iterator'}=0;
        0 0.000000 0.000000   188:    $_[0]->{'.parameters'}->[$_[0]-
        0 0.000000 0.000000   189:}
        0 0.000000 0.000000   190:END_OF_FUNC
        0 0.000000 0.000000   191:
        0 0.000000 0.000000   192:'NEXTKEY' => <<'END_OF_FUNC',
        0 0.000000 0.000000   193:sub NEXTKEY {
        0 0.000000 0.000000   194:    $_[0]->{'.parameters'}->[$_[0]-
        0 0.000000 0.000000   195:}
        0 0.000000 0.000000   196:END_OF_FUNC
        0 0.000000 0.000000   197:
        0 0.000000 0.000000   198:'EXISTS' => <<'END_OF_FUNC',
        0 0.000000 0.000000   199:sub EXISTS {
        0 0.000000 0.000000   200:    exists $_[0]->{$_[1]};
        0 0.000000 0.000000   201:}
        0 0.000000 0.000000   202:END_OF_FUNC
        0 0.000000 0.000000   203:
        0 0.000000 0.000000   204:'DELETE' => <<'END_OF_FUNC',
        0 0.000000 0.000000   205:sub DELETE {
        0 0.000000 0.000000   206:    $_[0]->delete($_[1]);
        0 0.000000 0.000000   207:}
        0 0.000000 0.000000   208:END_OF_FUNC
        0 0.000000 0.000000   209:
        0 0.000000 0.000000   210:'CLEAR' => <<'END_OF_FUNC',
        0 0.000000 0.000000   211:sub CLEAR {
        0 0.000000 0.000000   212:    %{$_[0]}=();
        0 0.000000 0.000000   213:}
        0 0.000000 0.000000   214:####
        0 0.000000 0.000000   215:END_OF_FUNC
        0 0.000000 0.000000   216:
        0 0.000000 0.000000   217:####
        0 0.000000 0.000000   218:# Append a new value to an existing query
        0 0.000000 0.000000   219:####
        0 0.000000 0.000000   220:'append' => <<'EOF',
        0 0.000000 0.000000   221:sub append {
        0 0.000000 0.000000   222:    my($self,@p) = @_;
        0 0.000000 0.000000   223:    my($name,$value) = $self-
        0 0.000000 0.000000   224:    my(@values) = defined($value) ?
            ================ SmallProf version 0.9 ================
                              Profile of (eval 2)                      Page 15
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   225:    if (@values) {
        0 0.000000 0.000000   226: $self->add_parameter($name);
        0 0.000000 0.000000   227: push(@{$self->{$name}},@values);
        0 0.000000 0.000000   228:    }
        0 0.000000 0.000000   229:    return $self->param($name);
        0 0.000000 0.000000   230:}
        0 0.000000 0.000000   231:EOF
        0 0.000000 0.000000   232:
        0 0.000000 0.000000   233:#### Method: delete_all
        0 0.000000 0.000000   234:# Delete all parameters
        0 0.000000 0.000000   235:####
        0 0.000000 0.000000   236:'delete_all' => <<'EOF',
        0 0.000000 0.000000   237:sub delete_all {
        0 0.000000 0.000000   238:    my($self) = self_or_default(@_);
        0 0.000000 0.000000   239:    undef %{$self};
        0 0.000000 0.000000   240:}
        0 0.000000 0.000000   241:EOF
        0 0.000000 0.000000   242:
        0 0.000000 0.000000   243:'Delete' => <<'EOF',
        0 0.000000 0.000000   244:sub Delete {
        0 0.000000 0.000000   245:    my($self,@p) = self_or_default(@_);
        0 0.000000 0.000000   246:    $self->delete(@p);
        0 0.000000 0.000000   247:}
        0 0.000000 0.000000   248:EOF
        0 0.000000 0.000000   249:
        0 0.000000 0.000000   250:'Delete_all' => <<'EOF',
        0 0.000000 0.000000   251:sub Delete_all {
        0 0.000000 0.000000   252:    my($self,@p) = self_or_default(@_);
        0 0.000000 0.000000   253:    $self->delete_all(@p);
        0 0.000000 0.000000   254:}
        0 0.000000 0.000000   255:EOF
        0 0.000000 0.000000   256:
        0 0.000000 0.000000   257:#### Method: autoescape
        0 0.000000 0.000000   258:# If you want to turn off the autoescaping
        0 0.000000 0.000000   259:# call this method with undef as the argument
        0 0.000000 0.000000   260:'autoEscape' => <<'END_OF_FUNC',
        0 0.000000 0.000000   261:sub autoEscape {
        0 0.000000 0.000000   262:    my($self,$escape) = self_or_default(@_);
        0 0.000000 0.000000   263:    $self->{'dontescape'}=!$escape;
        0 0.000000 0.000000   264:}
        0 0.000000 0.000000   265:END_OF_FUNC
        0 0.000000 0.000000   266:
        0 0.000000 0.000000   267:
        0 0.000000 0.000000   268:#### Method: version
        0 0.000000 0.000000   269:# Return the current version
        0 0.000000 0.000000   270:####
        0 0.000000 0.000000   271:'version' => <<'END_OF_FUNC',
        0 0.000000 0.000000   272:sub version {
        0 0.000000 0.000000   273:    return $VERSION;
        0 0.000000 0.000000   274:}
        0 0.000000 0.000000   275:END_OF_FUNC
        0 0.000000 0.000000   276:
        0 0.000000 0.000000   277:'make_attributes' => <<'END_OF_FUNC',
        0 0.000000 0.000000   278:sub make_attributes {
        0 0.000000 0.000000   279:    my($self,$attr) = @_;
        0 0.000000 0.000000   280:    return () unless $attr && ref($attr) &&
            ================ SmallProf version 0.9 ================
                              Profile of (eval 2)                      Page 16
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   281:    my(@att);
        0 0.000000 0.000000   282:    foreach (keys %{$attr}) {
        0 0.000000 0.000000   283: my($key) = $_;
        0 0.000000 0.000000   284: $key=~s/^\-//;     # get rid of initial - if
        0 0.000000 0.000000   285: $key=~tr/a-z_/A-Z-/; # parameters are upper
        0 0.000000 0.000000   286: push(@att,defined($attr->{$_}) ?
        0 0.000000 0.000000   287:    }
        0 0.000000 0.000000   288:    return @att;
        0 0.000000 0.000000   289:}
        0 0.000000 0.000000   290:END_OF_FUNC
        0 0.000000 0.000000   291:
        0 0.000000 0.000000   292:#### Method: url_param
        0 0.000000 0.000000   293:# Return a parameter in the QUERY_STRING,
        0 0.000000 0.000000   294:# whether this was a POST or a GET
        0 0.000000 0.000000   295:####
        0 0.000000 0.000000   296:'url_param' => <<'END_OF_FUNC',
        0 0.000000 0.000000   297:sub url_param {
        0 0.000000 0.000000   298:    my ($self,@p) = self_or_default(@_);
        0 0.000000 0.000000   299:    my $name = shift(@p);
        0 0.000000 0.000000   300:    return undef unless
        0 0.000000 0.000000   301:    unless (exists($self->{'.url_param'})) {
        0 0.000000 0.000000   302: $self->{'.url_param'}={}; # empty hash
        0 0.000000 0.000000   303: if ($ENV{QUERY_STRING} =~ /=/) {
        0 0.000000 0.000000   304:     my(@pairs) =
        0 0.000000 0.000000   305:     my($param,$value);
        0 0.000000 0.000000   306:     foreach (@pairs) {
        0 0.000000 0.000000   307:  ($param,$value) = split('=',$_,2);
        0 0.000000 0.000000   308:  $param = unescape($param);
        0 0.000000 0.000000   309:  $value = unescape($value);
        0 0.000000 0.000000   310:  push(@{$self->{'.url_param'}-
        0 0.000000 0.000000   311:     }
        0 0.000000 0.000000   312: } else {
        0 0.000000 0.000000   313:     $self->{'.url_param'}->{'keywords'} =
        0 0.000000 0.000000   314: }
        0 0.000000 0.000000   315:    }
        0 0.000000 0.000000   316:    return keys %{$self->{'.url_param'}}
        0 0.000000 0.000000   317:    return () unless $self->{'.url_param'}-
        0 0.000000 0.000000   318:    return wantarray ? @{$self-
        0 0.000000 0.000000   319:                     : $self->{'.url_param'}-
        0 0.000000 0.000000   320:}
        0 0.000000 0.000000   321:END_OF_FUNC
        0 0.000000 0.000000   322:
        0 0.000000 0.000000   323:#### Method: dump
        0 0.000000 0.000000   324:# Returns a string in which all the known
        0 0.000000 0.000000   325:# pairs are represented as nested lists,
        0 0.000000 0.000000   326:# of debugging.
        0 0.000000 0.000000   327:####
        0 0.000000 0.000000   328:'dump' => <<'END_OF_FUNC',
        0 0.000000 0.000000   329:sub dump {
        0 0.000000 0.000000   330:    my($self) = self_or_default(@_);
        0 0.000000 0.000000   331:    my($param,$value,@result);
        0 0.000000 0.000000   332:    return '<UL></UL>' unless $self->param;
        0 0.000000 0.000000   333:    push(@result,"<UL>");
        0 0.000000 0.000000   334:    foreach $param ($self->param) {
        0 0.000000 0.000000   335: my($name)=$self->escapeHTML($param);
        0 0.000000 0.000000   336: push(@result,"<LI><STRONG>$param</STRONG>");
            ================ SmallProf version 0.9 ================
                              Profile of (eval 2)                      Page 17
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   337: push(@result,"<UL>");
        0 0.000000 0.000000   338: foreach $value ($self->param($param)) {
        0 0.000000 0.000000   339:     $value = $self->escapeHTML($value);
        0 0.000000 0.000000   340:     push(@result,"<LI>$value");
        0 0.000000 0.000000   341: }
        0 0.000000 0.000000   342: push(@result,"</UL>");
        0 0.000000 0.000000   343:    }
        0 0.000000 0.000000   344:    push(@result,"</UL>\n");
        0 0.000000 0.000000   345:    return join("\n",@result);
        0 0.000000 0.000000   346:}
        0 0.000000 0.000000   347:END_OF_FUNC
        0 0.000000 0.000000   348:
        0 0.000000 0.000000   349:#### Method as_string
        0 0.000000 0.000000   350:#
        0 0.000000 0.000000   351:# synonym for "dump"
        0 0.000000 0.000000   352:####
        0 0.000000 0.000000   353:'as_string' => <<'END_OF_FUNC',
        0 0.000000 0.000000   354:sub as_string {
        0 0.000000 0.000000   355:    &dump(@_);
        0 0.000000 0.000000   356:}
        0 0.000000 0.000000   357:END_OF_FUNC
        0 0.000000 0.000000   358:
        0 0.000000 0.000000   359:#### Method: save
        0 0.000000 0.000000   360:# Write values out to a filehandle in such a
        0 0.000000 0.000000   361:# be reinitialized by the filehandle form of
        0 0.000000 0.000000   362:####
        0 0.000000 0.000000   363:'save' => <<'END_OF_FUNC',
        0 0.000000 0.000000   364:sub save {
        0 0.000000 0.000000   365:    my($self,$filehandle) =
        0 0.000000 0.000000   366:    $filehandle = to_filehandle($filehandle);
        0 0.000000 0.000000   367:    my($param);
        0 0.000000 0.000000   368:    local($,) = '';  # set print field
        0 0.000000 0.000000   369:    local($\) = '';  # set output line
        0 0.000000 0.000000   370:    foreach $param ($self->param) {
        0 0.000000 0.000000   371: my($escaped_param) = escape($param);
        0 0.000000 0.000000   372: my($value);
        0 0.000000 0.000000   373: foreach $value ($self->param($param)) {
        0 0.000000 0.000000   374:     print $filehandle
        0 0.000000 0.000000   375: }
        0 0.000000 0.000000   376:    }
        0 0.000000 0.000000   377:    print $filehandle "=\n";    # end of
        0 0.000000 0.000000   378:}
        0 0.000000 0.000000   379:END_OF_FUNC
        0 0.000000 0.000000   380:
        0 0.000000 0.000000   381:
        0 0.000000 0.000000   382:#### Method: save_parameters
        0 0.000000 0.000000   383:# An alias for save() that is a better name
        0 0.000000 0.000000   384:# Only intended to be used with the function
        0 0.000000 0.000000   385:####
        0 0.000000 0.000000   386:'save_parameters' => <<'END_OF_FUNC',
        0 0.000000 0.000000   387:sub save_parameters {
        0 0.000000 0.000000   388:    my $fh = shift;
        0 0.000000 0.000000   389:    return save(to_filehandle($fh));
        0 0.000000 0.000000   390:}
        0 0.000000 0.000000   391:END_OF_FUNC
        0 0.000000 0.000000   392:
            ================ SmallProf version 0.9 ================
                              Profile of (eval 2)                      Page 18
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   393:#### Method: restore_parameters
        0 0.000000 0.000000   394:# A way to restore CGI parameters from an
        0 0.000000 0.000000   395:# Only intended to be used with the function
        0 0.000000 0.000000   396:####
        0 0.000000 0.000000   397:'restore_parameters' => <<'END_OF_FUNC',
        0 0.000000 0.000000   398:sub restore_parameters {
        0 0.000000 0.000000   399:    $Q = $CGI::DefaultClass->new(@_);
        0 0.000000 0.000000   400:}
        0 0.000000 0.000000   401:END_OF_FUNC
        0 0.000000 0.000000   402:
        0 0.000000 0.000000   403:#### Method: multipart_init
        0 0.000000 0.000000   404:# Return a Content-Type: style header for
        0 0.000000 0.000000   405:# This has to be NPH, and it is advisable to
        0 0.000000 0.000000   406:#
        0 0.000000 0.000000   407:# Many thanks to Ed Jordan <ed@fidalgo.net>
        0 0.000000 0.000000   408:# contribution
        0 0.000000 0.000000   409:####
        0 0.000000 0.000000   410:'multipart_init' => <<'END_OF_FUNC',
        0 0.000000 0.000000   411:sub multipart_init {
        0 0.000000 0.000000   412:    my($self,@p) = self_or_default(@_);
        0 0.000000 0.000000   413:    my($boundary,@other) = $self-
        0 0.000000 0.000000   414:    $boundary = $boundary || '-------
        0 0.000000 0.000000   415:    $self->{'separator'} = "\n--$boundary\n";
        0 0.000000 0.000000   416:    $type = SERVER_PUSH($boundary);
        0 0.000000 0.000000   417:    return $self->header(
        0 0.000000 0.000000   418: -nph => 1,
        0 0.000000 0.000000   419: -type => $type,
        0 0.000000 0.000000   420: (map { split "=", $_, 2 } @other),
        0 0.000000 0.000000   421:    ) . $self->multipart_end;
        0 0.000000 0.000000   422:}
        0 0.000000 0.000000   423:END_OF_FUNC
        0 0.000000 0.000000   424:
        0 0.000000 0.000000   425:
        0 0.000000 0.000000   426:#### Method: multipart_start
        0 0.000000 0.000000   427:# Return a Content-Type: style header for
        0 0.000000 0.000000   428:#
        0 0.000000 0.000000   429:# Many thanks to Ed Jordan <ed@fidalgo.net>
        0 0.000000 0.000000   430:# contribution
        0 0.000000 0.000000   431:####
        0 0.000000 0.000000   432:'multipart_start' => <<'END_OF_FUNC',
        0 0.000000 0.000000   433:sub multipart_start {
        0 0.000000 0.000000   434:    my($self,@p) = self_or_default(@_);
        0 0.000000 0.000000   435:    my($type,@other) = $self-
        0 0.000000 0.000000   436:    $type = $type || 'text/html';
        0 0.000000 0.000000   437:    return $self->header(
        0 0.000000 0.000000   438: -type => $type,
        0 0.000000 0.000000   439: (map { split "=", $_, 2 } @other),
        0 0.000000 0.000000   440:    );
        0 0.000000 0.000000   441:}
        0 0.000000 0.000000   442:END_OF_FUNC
        0 0.000000 0.000000   443:
        0 0.000000 0.000000   444:
        0 0.000000 0.000000   445:#### Method: multipart_end
        0 0.000000 0.000000   446:# Return a Content-Type: style header for
        0 0.000000 0.000000   447:#
        0 0.000000 0.000000   448:# Many thanks to Ed Jordan <ed@fidalgo.net>
            ================ SmallProf version 0.9 ================
                              Profile of (eval 2)                      Page 19
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   449:# contribution
        0 0.000000 0.000000   450:####
        0 0.000000 0.000000   451:'multipart_end' => <<'END_OF_FUNC',
        0 0.000000 0.000000   452:sub multipart_end {
        0 0.000000 0.000000   453:    my($self,@p) = self_or_default(@_);
        0 0.000000 0.000000   454:    return $self->{'separator'};
        0 0.000000 0.000000   455:}
        0 0.000000 0.000000   456:END_OF_FUNC
        0 0.000000 0.000000   457:
        0 0.000000 0.000000   458:
        0 0.000000 0.000000   459:#### Method: header
        0 0.000000 0.000000   460:# Return a Content-Type: style header
        0 0.000000 0.000000   461:#
        0 0.000000 0.000000   462:####
        0 0.000000 0.000000   463:'header' => <<'END_OF_FUNC',
        0 0.000000 0.000000   464:sub header {
        0 0.000000 0.000000   465:    my($self,@p) = self_or_default(@_);
        0 0.000000 0.000000   466:    my(@header);
        0 0.000000 0.000000   467:
        0 0.000000 0.000000   468:    return undef if $self-
        0 0.000000 0.000000   469:
        0 0.000000 0.000000   470:
        0 0.000000 0.000000   471: $self-
        0 0.000000 0.000000   472:
        0 0.000000 0.000000   473:
        0 0.000000 0.000000   474:    $nph ||= $NPH;
        0 0.000000 0.000000   475:    # rearrange() was designed for the HTML
        0 0.000000 0.000000   476:    # need to fix it up a little.
        0 0.000000 0.000000   477:    foreach (@other) {
        0 0.000000 0.000000   478:        next unless my($header,$value) =
        0 0.000000 0.000000   479: ($_ = $header) =~ s/^(\w)(.*)/$1 . lc ($2) .
        0 0.000000 0.000000   480:    }
        0 0.000000 0.000000   481:
        0 0.000000 0.000000   482:    $type ||= 'text/html' unless
        0 0.000000 0.000000   483:
        0 0.000000 0.000000   484:    # Maybe future compatibility.  Maybe not.
        0 0.000000 0.000000   485:    my $protocol = $ENV{SERVER_PROTOCOL} ||
        0 0.000000 0.000000   486:    push(@header,$protocol . ' ' . ($status
        0 0.000000 0.000000   487:
        0 0.000000 0.000000   488:    push(@header,"Status: $status") if
        0 0.000000 0.000000   489:    push(@header,"Window-Target: $target") if
        0 0.000000 0.000000   490:    # push all the cookies -- there may be
        0 0.000000 0.000000   491:    if ($cookie) {
        0 0.000000 0.000000   492: my(@cookie) = ref($cookie) && ref($cookie)
        0 0.000000 0.000000   493: foreach (@cookie) {
        0 0.000000 0.000000   494:            my $cs =
        0 0.000000 0.000000   495:     push(@header,"Set-Cookie: $cs") if $cs
        0 0.000000 0.000000   496: }
        0 0.000000 0.000000   497:    }
        0 0.000000 0.000000   498:    # if the user indicates an expiration
        0 0.000000 0.000000   499:    # both an Expires and a Date header (so
        0 0.000000 0.000000   500:    # uses OUR clock)
        0 0.000000 0.000000   501:    push(@header,"Expires: " .
        0 0.000000 0.000000   502: if $expires;
        0 0.000000 0.000000   503:    push(@header,"Date: " .
        0 0.000000 0.000000   504:    push(@header,"Pragma: no-cache") if
            ================ SmallProf version 0.9 ================
                              Profile of (eval 2)                      Page 20
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   505:    push(@header,@other);
        0 0.000000 0.000000   506:    push(@header,"Content-Type: $type") if
        0 0.000000 0.000000   507:
        0 0.000000 0.000000   508:    my $header =
        0 0.000000 0.000000   509:    if ($MOD_PERL and not $nph) {
        0 0.000000 0.000000   510: my $r = Apache->request;
        0 0.000000 0.000000   511: $r->send_cgi_header($header);
        0 0.000000 0.000000   512: return '';
        0 0.000000 0.000000   513:    }
        0 0.000000 0.000000   514:    return $header;
        0 0.000000 0.000000   515:}
        0 0.000000 0.000000   516:END_OF_FUNC
        0 0.000000 0.000000   517:
        0 0.000000 0.000000   518:
        0 0.000000 0.000000   519:#### Method: cache
        0 0.000000 0.000000   520:# Control whether header() will produce the
        0 0.000000 0.000000   521:# Pragma directive.
        0 0.000000 0.000000   522:####
        0 0.000000 0.000000   523:'cache' => <<'END_OF_FUNC',
        0 0.000000 0.000000   524:sub cache {
        0 0.000000 0.000000   525:    my($self,$new_value) =
        0 0.000000 0.000000   526:    $new_value = '' unless $new_value;
        0 0.000000 0.000000   527:    if ($new_value ne '') {
        0 0.000000 0.000000   528: $self->{'cache'} = $new_value;
        0 0.000000 0.000000   529:    }
        0 0.000000 0.000000   530:    return $self->{'cache'};
        0 0.000000 0.000000   531:}
        0 0.000000 0.000000   532:END_OF_FUNC
        0 0.000000 0.000000   533:
        0 0.000000 0.000000   534:
        0 0.000000 0.000000   535:#### Method: redirect
        0 0.000000 0.000000   536:# Return a Location: style header
        0 0.000000 0.000000   537:#
        0 0.000000 0.000000   538:####
        0 0.000000 0.000000   539:'redirect' => <<'END_OF_FUNC',
        0 0.000000 0.000000   540:sub redirect {
        0 0.000000 0.000000   541:    my($self,@p) = self_or_default(@_);
        0 0.000000 0.000000   542:    my($url,$target,$cookie,$nph,@other) =
        0 0.000000 0.000000   543:    $url = $url || $self->self_url;
        0 0.000000 0.000000   544:    my(@o);
        0 0.000000 0.000000   545:    foreach (@other) { tr/\"//d;
        0 0.000000 0.000000   546:    unshift(@o,
        0 0.000000 0.000000   547:  '-Status'=>'302 Moved',
        0 0.000000 0.000000   548:  '-Location'=>$url,
        0 0.000000 0.000000   549:  '-nph'=>$nph);
        0 0.000000 0.000000   550:    unshift(@o,'-Target'=>$target) if
        0 0.000000 0.000000   551:    unshift(@o,'-Cookie'=>$cookie) if
        0 0.000000 0.000000   552:    unshift(@o,'-Type'=>'');
        0 0.000000 0.000000   553:    return $self->header(@o);
        0 0.000000 0.000000   554:}
        0 0.000000 0.000000   555:END_OF_FUNC
        0 0.000000 0.000000   556:
        0 0.000000 0.000000   557:
        0 0.000000 0.000000   558:#### Method: start_html
        0 0.000000 0.000000   559:# Canned HTML header
        0 0.000000 0.000000   560:#
            ================ SmallProf version 0.9 ================
                              Profile of (eval 2)                      Page 21
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   561:# Parameters:
        0 0.000000 0.000000   562:# $title -> (optional) The title for this
        0 0.000000 0.000000   563:# $author -> (optional) e-mail address of the
        0 0.000000 0.000000   564:# $base -> (optional) if set to true, will
        0 0.000000 0.000000   565:#          for resolving relative references
        0 0.000000 0.000000   566:# $xbase -> (optional) alternative base at
        0 0.000000 0.000000   567:# $target -> (optional) target window to load
        0 0.000000 0.000000   568:# $script -> (option) Javascript code (-
        0 0.000000 0.000000   569:# $no_script -> (option) Javascript
        0 0.000000 0.000000   570:# $meta -> (optional) Meta information tags
        0 0.000000 0.000000   571:# $head -> (optional) any other elements
        0 0.000000 0.000000   572:#           (a scalar or array ref)
        0 0.000000 0.000000   573:# $style -> (optional) reference to an
        0 0.000000 0.000000   574:# @other -> (optional) any other named
        0 0.000000 0.000000   575:#           the <BODY> tag.
        0 0.000000 0.000000   576:####
        0 0.000000 0.000000   577:'start_html' => <<'END_OF_FUNC',
        0 0.000000 0.000000   578:sub start_html {
        0 0.000000 0.000000   579:    my($self,@p) = &self_or_default(@_);
        0 0.000000 0.000000   580:
        0 0.000000 0.000000   581: $self-
        0 0.000000 0.000000   582:
        0 0.000000 0.000000   583:    # strangely enough, the title needs to be
        0 0.000000 0.000000   584:    # while the author needs to be escaped as
        0 0.000000 0.000000   585:    $title = $self->escapeHTML($title ||
        0 0.000000 0.000000   586:    $author = $self->escape($author);
        0 0.000000 0.000000   587:    my(@result);
        0 0.000000 0.000000   588:    $dtd = $DEFAULT_DTD unless $dtd && $dtd
        0 0.000000 0.000000   589:    push(@result,qq(<!DOCTYPE HTML PUBLIC
        0 0.000000 0.000000   590:
        0 0.000000 0.000000   591:    push(@result,"<LINK REV=MADE
        0 0.000000 0.000000   592:
        0 0.000000 0.000000   593:    if ($base || $xbase || $target) {
        0 0.000000 0.000000   594: my $href = $xbase || $self->url('-path'=>1);
        0 0.000000 0.000000   595: my $t = $target ? qq/ TARGET="$target"/ :
        0 0.000000 0.000000   596: push(@result,qq/<BASE HREF="$href"$t>/);
        0 0.000000 0.000000   597:    }
        0 0.000000 0.000000   598:
        0 0.000000 0.000000   599:    if ($meta && ref($meta) && (ref($meta) eq
        0 0.000000 0.000000   600: foreach (keys %$meta) {
        0 0.000000 0.000000   601:    }
        0 0.000000 0.000000   602:
        0 0.000000 0.000000   603:    push(@result,ref($head) ? @$head : $head)
        0 0.000000 0.000000   604:
        0 0.000000 0.000000   605:    # handle the infrequently-used -style and
        0 0.000000 0.000000   606:    push(@result,$self->_style($style)) if
        0 0.000000 0.000000   607:    push(@result,$self->_script($script)) if
        0 0.000000 0.000000   608:
        0 0.000000 0.000000   609:    # handle -noscript parameter
        0 0.000000 0.000000   610:    push(@result,<<END) if $noscript;
        0 0.000000 0.000000   611:<NOSCRIPT>
        0 0.000000 0.000000   612:$noscript
        0 0.000000 0.000000   613:</NOSCRIPT>
        0 0.000000 0.000000   614:END
        0 0.000000 0.000000   615:    ;
        0 0.000000 0.000000   616:    my($other) = @other ? " @other" : '';
            ================ SmallProf version 0.9 ================
                              Profile of (eval 2)                      Page 22
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   617:    push(@result,"</HEAD><BODY$other>");
        0 0.000000 0.000000   618:    return join("\n",@result);
        0 0.000000 0.000000   619:}
        0 0.000000 0.000000   620:END_OF_FUNC
        0 0.000000 0.000000   621:
        0 0.000000 0.000000   622:### Method: _style
        0 0.000000 0.000000   623:# internal method for generating a CSS style
        0 0.000000 0.000000   624:####
        0 0.000000 0.000000   625:'_style' => <<'END_OF_FUNC',
        0 0.000000 0.000000   626:sub _style {
        0 0.000000 0.000000   627:    my ($self,$style) = @_;
        0 0.000000 0.000000   628:    my (@result);
        0 0.000000 0.000000   629:    my $type = 'text/css';
        0 0.000000 0.000000   630:    if (ref($style)) {
        0 0.000000 0.000000   631: my($src,$code,$stype,@other) =
        0 0.000000 0.000000   632:     $self->rearrange([SRC,CODE,TYPE],
        0 0.000000 0.000000   633:        '-foo'=>'bar', # a trick to allow the
        0 0.000000 0.000000   634:        ref($style) eq 'ARRAY' ? @$style :
        0 0.000000 0.000000   635: $type = $stype if $stype;
        0 0.000000 0.000000   636: push(@result,qq/<LINK REL="stylesheet"
        0 0.000000 0.000000   637: push(@result,style({'type'=>$type},"<!--
        0 0.000000 0.000000   638:    } else {
        0 0.000000 0.000000   639: push(@result,style({'type'=>$type},"<!--
        0 0.000000 0.000000   640:    }
        0 0.000000 0.000000   641:    @result;
        0 0.000000 0.000000   642:}
        0 0.000000 0.000000   643:END_OF_FUNC
        0 0.000000 0.000000   644:
        0 0.000000 0.000000   645:
        0 0.000000 0.000000   646:'_script' => <<'END_OF_FUNC',
        0 0.000000 0.000000   647:sub _script {
        0 0.000000 0.000000   648:    my ($self,$script) = @_;
        0 0.000000 0.000000   649:    my (@result);
        0 0.000000 0.000000   650:    my (@scripts) = ref($script) eq 'ARRAY' ?
        0 0.000000 0.000000   651:    foreach $script (@scripts) {
        0 0.000000 0.000000   652: my($src,$code,$language);
        0 0.000000 0.000000   653: if (ref($script)) { # script is a hash
        0 0.000000 0.000000   654:     ($src,$code,$language) =
        0 0.000000 0.000000   655:  $self->rearrange([SRC,CODE,LANGUAGE],
        0 0.000000 0.000000   656:     '-foo'=>'bar', # a trick to allow the '-
        0 0.000000 0.000000   657:     ref($style) eq 'ARRAY' ? @$script :
        0 0.000000 0.000000   658:
        0 0.000000 0.000000   659: } else {
        0 0.000000 0.000000   660:     ($src,$code,$language) =
        0 0.000000 0.000000   661: }
        0 0.000000 0.000000   662: my(@satts);
        0 0.000000 0.000000   663: push(@satts,'src'=>$src) if $src;
        0 0.000000 0.000000   664: push(@satts,'language'=>$language ||
        0 0.000000 0.000000   665: $code = "<!-- Hide script\n$code\n// End
        0 0.000000 0.000000   666:     if $code && $language=~/javascript/i;
        0 0.000000 0.000000   667: $code = "<!-- Hide script\n$code\n\# End
        0 0.000000 0.000000   668:     if $code && $language=~/perl/i;
        0 0.000000 0.000000   669: push(@result,script({@satts},$code));
        0 0.000000 0.000000   670:    }
        0 0.000000 0.000000   671:    @result;
        0 0.000000 0.000000   672:}
            ================ SmallProf version 0.9 ================
                              Profile of (eval 2)                      Page 23
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   673:END_OF_FUNC
        0 0.000000 0.000000   674:
        0 0.000000 0.000000   675:#### Method: end_html
        0 0.000000 0.000000   676:# End an HTML document.
        0 0.000000 0.000000   677:# Trivial method for completeness.  Just
        0 0.000000 0.000000   678:####
        0 0.000000 0.000000   679:'end_html' => <<'END_OF_FUNC',
        0 0.000000 0.000000   680:sub end_html {
        0 0.000000 0.000000   681:    return "</BODY></HTML>";
        0 0.000000 0.000000   682:}
        0 0.000000 0.000000   683:END_OF_FUNC
        0 0.000000 0.000000   684:
        0 0.000000 0.000000   685:
        0 0.000000 0.000000   686:################################
        0 0.000000 0.000000   687:# METHODS USED IN BUILDING FORMS
        0 0.000000 0.000000   688:################################
        0 0.000000 0.000000   689:
        0 0.000000 0.000000   690:#### Method: isindex
        0 0.000000 0.000000   691:# Just prints out the isindex tag.
        0 0.000000 0.000000   692:# Parameters:
        0 0.000000 0.000000   693:#  $action -> optional URL of script to run
        0 0.000000 0.000000   694:# Returns:
        0 0.000000 0.000000   695:#   A string containing a <ISINDEX> tag
        0 0.000000 0.000000   696:'isindex' => <<'END_OF_FUNC',
        0 0.000000 0.000000   697:sub isindex {
        0 0.000000 0.000000   698:    my($self,@p) = self_or_default(@_);
        0 0.000000 0.000000   699:    my($action,@other) = $self-
        0 0.000000 0.000000   700:    $action = qq/ACTION="$action"/ if
        0 0.000000 0.000000   701:    my($other) = @other ? " @other" : '';
        0 0.000000 0.000000   702:    return "<ISINDEX $action$other>";
        0 0.000000 0.000000   703:}
        0 0.000000 0.000000   704:END_OF_FUNC
        0 0.000000 0.000000   705:
        0 0.000000 0.000000   706:
        0 0.000000 0.000000   707:#### Method: startform
        0 0.000000 0.000000   708:# Start a form
        0 0.000000 0.000000   709:# Parameters:
        0 0.000000 0.000000   710:#   $method -> optional submission method to
        0 0.000000 0.000000   711:#   $action -> optional URL of script to run
        0 0.000000 0.000000   712:#   $enctype ->encoding to use (URL_ENCODED
        0 0.000000 0.000000   713:'startform' => <<'END_OF_FUNC',
        0 0.000000 0.000000   714:sub startform {
        0 0.000000 0.000000   715:    my($self,@p) = self_or_default(@_);
        0 0.000000 0.000000   716:
        0 0.000000 0.000000   717:    my($method,$action,$enctype,@other) =
        0 0.000000 0.000000   718: $self-
        0 0.000000 0.000000   719:
        0 0.000000 0.000000   720:    $method = $method || 'POST';
        0 0.000000 0.000000   721:    $enctype = $enctype || &URL_ENCODED;
        0 0.000000 0.000000   722:    $action = $action ? qq/ACTION="$action"/
        0 0.000000 0.000000   723: 'ACTION="'.$self->script_name.'"' : '';
        0 0.000000 0.000000   724:    my($other) = @other ? " @other" : '';
        0 0.000000 0.000000   725:    $self->{'.parametersToAdd'}={};
        0 0.000000 0.000000   726:    return qq/<FORM METHOD="$method" $action
        0 0.000000 0.000000   727:}
        0 0.000000 0.000000   728:END_OF_FUNC
            ================ SmallProf version 0.9 ================
                              Profile of (eval 2)                      Page 24
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   729:
        0 0.000000 0.000000   730:
        0 0.000000 0.000000   731:#### Method: start_form
        0 0.000000 0.000000   732:# synonym for startform
        0 0.000000 0.000000   733:'start_form' => <<'END_OF_FUNC',
        0 0.000000 0.000000   734:sub start_form {
        0 0.000000 0.000000   735:    &startform;
        0 0.000000 0.000000   736:}
        0 0.000000 0.000000   737:END_OF_FUNC
        0 0.000000 0.000000   738:
        0 0.000000 0.000000   739:'end_multipart_form' => <<'END_OF_FUNC',
        0 0.000000 0.000000   740:sub end_multipart_form {
        0 0.000000 0.000000   741:    &endform;
        0 0.000000 0.000000   742:}
        0 0.000000 0.000000   743:END_OF_FUNC
        0 0.000000 0.000000   744:
        0 0.000000 0.000000   745:#### Method: start_multipart_form
        0 0.000000 0.000000   746:# synonym for startform
        0 0.000000 0.000000   747:'start_multipart_form' => <<'END_OF_FUNC',
        0 0.000000 0.000000   748:sub start_multipart_form {
        0 0.000000 0.000000   749:    my($self,@p) = self_or_default(@_);
        0 0.000000 0.000000   750:    if ($self->use_named_parameters ||
        0 0.000000 0.000000   751: (defined($param[0]) && substr($param[0],0,1)
        0 0.000000 0.000000   752: my(%p) = @p;
        0 0.000000 0.000000   753: $p{'-enctype'}=&MULTIPART;
        0 0.000000 0.000000   754: return $self->startform(%p);
        0 0.000000 0.000000   755:    } else {
        0 0.000000 0.000000   756: my($method,$action,@other) =
        0 0.000000 0.000000   757:     $self->rearrange([METHOD,ACTION],@p);
        0 0.000000 0.000000   758: return $self-
        0 0.000000 0.000000   759:    }
        0 0.000000 0.000000   760:}
        0 0.000000 0.000000   761:END_OF_FUNC
        0 0.000000 0.000000   762:
        0 0.000000 0.000000   763:
        0 0.000000 0.000000   764:#### Method: endform
        0 0.000000 0.000000   765:# End a form
        0 0.000000 0.000000   766:'endform' => <<'END_OF_FUNC',
        0 0.000000 0.000000   767:sub endform {
        0 0.000000 0.000000   768:    my($self,@p) = self_or_default(@_);
        0 0.000000 0.000000   769:    return ($self->get_fields,"</FORM>");
        0 0.000000 0.000000   770:}
        0 0.000000 0.000000   771:END_OF_FUNC
        0 0.000000 0.000000   772:
        0 0.000000 0.000000   773:
        0 0.000000 0.000000   774:#### Method: end_form
        0 0.000000 0.000000   775:# synonym for endform
        0 0.000000 0.000000   776:'end_form' => <<'END_OF_FUNC',
        0 0.000000 0.000000   777:sub end_form {
        0 0.000000 0.000000   778:    &endform;
        0 0.000000 0.000000   779:}
        0 0.000000 0.000000   780:END_OF_FUNC
        0 0.000000 0.000000   781:
        0 0.000000 0.000000   782:
        0 0.000000 0.000000   783:'_textfield' => <<'END_OF_FUNC',
        0 0.000000 0.000000   784:sub _textfield {
            ================ SmallProf version 0.9 ================
                              Profile of (eval 2)                      Page 25
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   785:    my($self,$tag,@p) = self_or_default(@_);
        0 0.000000 0.000000   786:
        0 0.000000 0.000000   787: $self-
        0 0.000000 0.000000   788:
        0 0.000000 0.000000   789:    my $current = $override ? $default :
        0 0.000000 0.000000   790: (defined($self->param($name)) ? $self-
        0 0.000000 0.000000   791:
        0 0.000000 0.000000   792:    $current = defined($current) ? $self-
        0 0.000000 0.000000   793:    $name = defined($name) ? $self-
        0 0.000000 0.000000   794:    my($s) = defined($size) ? qq/ SIZE=$size/
        0 0.000000 0.000000   795:    my($m) = defined($maxlength) ? qq/
        0 0.000000 0.000000   796:    my($other) = @other ? " @other" : '';
        0 0.000000 0.000000   797:    # this entered at cristy's request to fix
        0 0.000000 0.000000   798:    # and WebTV -- not sure it won't break
        0 0.000000 0.000000   799:    my($value) = $current ne '' ?
        0 0.000000 0.000000   800:    return qq/<INPUT TYPE="$tag" NAME="$name"
        0 0.000000 0.000000   801:}
        0 0.000000 0.000000   802:END_OF_FUNC
        0 0.000000 0.000000   803:
        0 0.000000 0.000000   804:#### Method: textfield
        0 0.000000 0.000000   805:# Parameters:
        0 0.000000 0.000000   806:#   $name -> Name of the text field
        0 0.000000 0.000000   807:#   $default -> Optional default value of the
        0 0.000000 0.000000   808:#                already defined.
        0 0.000000 0.000000   809:#   $size ->  Optional width of field in
        0 0.000000 0.000000   810:#   $maxlength -> Optional maximum number of
        0 0.000000 0.000000   811:# Returns:
        0 0.000000 0.000000   812:#   A string containing a <INPUT TYPE="text">
        0 0.000000 0.000000   813:#
        0 0.000000 0.000000   814:'textfield' => <<'END_OF_FUNC',
        0 0.000000 0.000000   815:sub textfield {
        0 0.000000 0.000000   816:    my($self,@p) = self_or_default(@_);
        0 0.000000 0.000000   817:    $self->_textfield('text',@p);
        0 0.000000 0.000000   818:}
        0 0.000000 0.000000   819:END_OF_FUNC
        0 0.000000 0.000000   820:
        0 0.000000 0.000000   821:
        0 0.000000 0.000000   822:#### Method: filefield
        0 0.000000 0.000000   823:# Parameters:
        0 0.000000 0.000000   824:#   $name -> Name of the file upload field
        0 0.000000 0.000000   825:#   $size ->  Optional width of field in
        0 0.000000 0.000000   826:#   $maxlength -> Optional maximum number of
        0 0.000000 0.000000   827:# Returns:
        0 0.000000 0.000000   828:#   A string containing a <INPUT TYPE="text">
        0 0.000000 0.000000   829:#
        0 0.000000 0.000000   830:'filefield' => <<'END_OF_FUNC',
        0 0.000000 0.000000   831:sub filefield {
        0 0.000000 0.000000   832:    my($self,@p) = self_or_default(@_);
        0 0.000000 0.000000   833:    $self->_textfield('file',@p);
        0 0.000000 0.000000   834:}
        0 0.000000 0.000000   835:END_OF_FUNC
        0 0.000000 0.000000   836:
        0 0.000000 0.000000   837:
        0 0.000000 0.000000   838:#### Method: password
        0 0.000000 0.000000   839:# Create a "secret password" entry field
        0 0.000000 0.000000   840:# Parameters:
            ================ SmallProf version 0.9 ================
                              Profile of (eval 2)                      Page 26
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   841:#   $name -> Name of the field
        0 0.000000 0.000000   842:#   $default -> Optional default value of the
        0 0.000000 0.000000   843:#                already defined.
        0 0.000000 0.000000   844:#   $size ->  Optional width of field in
        0 0.000000 0.000000   845:#   $maxlength -> Optional maximum characters
        0 0.000000 0.000000   846:# Returns:
        0 0.000000 0.000000   847:#   A string containing a <INPUT
        0 0.000000 0.000000   848:#
        0 0.000000 0.000000   849:'password_field' => <<'END_OF_FUNC',
        0 0.000000 0.000000   850:sub password_field {
        0 0.000000 0.000000   851:    my ($self,@p) = self_or_default(@_);
        0 0.000000 0.000000   852:    $self->_textfield('password',@p);
        0 0.000000 0.000000   853:}
        0 0.000000 0.000000   854:END_OF_FUNC
        0 0.000000 0.000000   855:
        0 0.000000 0.000000   856:#### Method: textarea
        0 0.000000 0.000000   857:# Parameters:
        0 0.000000 0.000000   858:#   $name -> Name of the text field
        0 0.000000 0.000000   859:#   $default -> Optional default value of the
        0 0.000000 0.000000   860:#                already defined.
        0 0.000000 0.000000   861:#   $rows ->  Optional number of rows in text
        0 0.000000 0.000000   862:#   $columns -> Optional number of columns in
        0 0.000000 0.000000   863:# Returns:
        0 0.000000 0.000000   864:#   A string containing a
        0 0.000000 0.000000   865:#
        0 0.000000 0.000000   866:'textarea' => <<'END_OF_FUNC',
        0 0.000000 0.000000   867:sub textarea {
        0 0.000000 0.000000   868:    my($self,@p) = self_or_default(@_);
        0 0.000000 0.000000   869:
        0 0.000000 0.000000   870:
        0 0.000000 0.000000   871: $self-
        0 0.000000 0.000000   872:
        0 0.000000 0.000000   873:    my($current)= $override ? $default :
        0 0.000000 0.000000   874: (defined($self->param($name)) ? $self-
        0 0.000000 0.000000   875:
        0 0.000000 0.000000   876:    $name = defined($name) ? $self-
        0 0.000000 0.000000   877:    $current = defined($current) ? $self-
        0 0.000000 0.000000   878:    my($r) = $rows ? " ROWS=$rows" : '';
        0 0.000000 0.000000   879:    my($c) = $cols ? " COLS=$cols" : '';
        0 0.000000 0.000000   880:    my($other) = @other ? " @other" : '';
        0 0.000000 0.000000   881:    return qq{<TEXTAREA
        0 0.000000 0.000000   882:}
        0 0.000000 0.000000   883:END_OF_FUNC
        0 0.000000 0.000000   884:
        0 0.000000 0.000000   885:
        0 0.000000 0.000000   886:#### Method: button
        0 0.000000 0.000000   887:# Create a javascript button.
        0 0.000000 0.000000   888:# Parameters:
        0 0.000000 0.000000   889:#   $name ->  (optional) Name for the button.
        0 0.000000 0.000000   890:#   $value -> (optional) Value of the button
        0 0.000000 0.000000   891:#   $onclick -> (optional) Text of the
        0 0.000000 0.000000   892:#                clicked.
        0 0.000000 0.000000   893:# Returns:
        0 0.000000 0.000000   894:#   A string containing a <INPUT
        0 0.000000 0.000000   895:####
        0 0.000000 0.000000   896:'button' => <<'END_OF_FUNC',
            ================ SmallProf version 0.9 ================
                              Profile of (eval 2)                      Page 27
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   897:sub button {
        0 0.000000 0.000000   898:    my($self,@p) = self_or_default(@_);
        0 0.000000 0.000000   899:
        0 0.000000 0.000000   900:    my($label,$value,$script,@other) = $self-
        0 0.000000 0.000000   901:        [ONCLICK,SCRIPT]],@p);
        0 0.000000 0.000000   902:
        0 0.000000 0.000000   903:    $label=$self->escapeHTML($label);
        0 0.000000 0.000000   904:    $value=$self->escapeHTML($value);
        0 0.000000 0.000000   905:    $script=$self->escapeHTML($script);
        0 0.000000 0.000000   906:
        0 0.000000 0.000000   907:    my($name) = '';
        0 0.000000 0.000000   908:    $name = qq/ NAME="$label"/ if $label;
        0 0.000000 0.000000   909:    $value = $value || $label;
        0 0.000000 0.000000   910:    my($val) = '';
        0 0.000000 0.000000   911:    $val = qq/ VALUE="$value"/ if $value;
        0 0.000000 0.000000   912:    $script = qq/ ONCLICK="$script"/ if
        0 0.000000 0.000000   913:    my($other) = @other ? " @other" : '';
        0 0.000000 0.000000   914:    return qq/<INPUT
        0 0.000000 0.000000   915:}
        0 0.000000 0.000000   916:END_OF_FUNC
        0 0.000000 0.000000   917:
        0 0.000000 0.000000   918:
        0 0.000000 0.000000   919:#### Method: submit
        0 0.000000 0.000000   920:# Create a "submit query" button.
        0 0.000000 0.000000   921:# Parameters:
        0 0.000000 0.000000   922:#   $name ->  (optional) Name for the button.
        0 0.000000 0.000000   923:#   $value -> (optional) Value of the button
        0 0.000000 0.000000   924:#   $label -> (optional) Label printed on the
        0 0.000000 0.000000   925:# Returns:
        0 0.000000 0.000000   926:#   A string containing a <INPUT
        0 0.000000 0.000000   927:####
        0 0.000000 0.000000   928:'submit' => <<'END_OF_FUNC',
        0 0.000000 0.000000   929:sub submit {
        0 0.000000 0.000000   930:    my($self,@p) = self_or_default(@_);
        0 0.000000 0.000000   931:
        0 0.000000 0.000000   932:    my($label,$value,@other) = $self-
        0 0.000000 0.000000   933:
        0 0.000000 0.000000   934:    $label=$self->escapeHTML($label);
        0 0.000000 0.000000   935:    $value=$self->escapeHTML($value);
        0 0.000000 0.000000   936:
        0 0.000000 0.000000   937:    my($name) = ' NAME=".submit"';
        0 0.000000 0.000000   938:    $name = qq/ NAME="$label"/ if
        0 0.000000 0.000000   939:    $value = defined($value) ? $value :
        0 0.000000 0.000000   940:    my($val) = '';
        0 0.000000 0.000000   941:    $val = qq/ VALUE="$value"/ if
        0 0.000000 0.000000   942:    my($other) = @other ? " @other" : '';
        0 0.000000 0.000000   943:    return qq/<INPUT
        0 0.000000 0.000000   944:}
        0 0.000000 0.000000   945:END_OF_FUNC
        0 0.000000 0.000000   946:
        0 0.000000 0.000000   947:
        0 0.000000 0.000000   948:#### Method: reset
        0 0.000000 0.000000   949:# Create a "reset" button.
        0 0.000000 0.000000   950:# Parameters:
        0 0.000000 0.000000   951:#   $name -> (optional) Name for the button.
        0 0.000000 0.000000   952:# Returns:
            ================ SmallProf version 0.9 ================
                              Profile of (eval 2)                      Page 28
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   953:#   A string containing a <INPUT
        0 0.000000 0.000000   954:####
        0 0.000000 0.000000   955:'reset' => <<'END_OF_FUNC',
        0 0.000000 0.000000   956:sub reset {
        0 0.000000 0.000000   957:    my($self,@p) = self_or_default(@_);
        0 0.000000 0.000000   958:    my($label,@other) = $self-
        0 0.000000 0.000000   959:    $label=$self->escapeHTML($label);
        0 0.000000 0.000000   960:    my($value) = defined($label) ? qq/
        0 0.000000 0.000000   961:    my($other) = @other ? " @other" : '';
        0 0.000000 0.000000   962:    return qq/<INPUT
        0 0.000000 0.000000   963:}
        0 0.000000 0.000000   964:END_OF_FUNC
        0 0.000000 0.000000   965:
        0 0.000000 0.000000   966:
        0 0.000000 0.000000   967:#### Method: defaults
        0 0.000000 0.000000   968:# Create a "defaults" button.
        0 0.000000 0.000000   969:# Parameters:
        0 0.000000 0.000000   970:#   $name -> (optional) Name for the button.
        0 0.000000 0.000000   971:# Returns:
        0 0.000000 0.000000   972:#   A string containing a <INPUT
        0 0.000000 0.000000   973:#
        0 0.000000 0.000000   974:# Note: this button has a special meaning to
        0 0.000000 0.000000   975:# and tells it to ERASE the current query
        0 0.000000 0.000000   976:# are used again!
        0 0.000000 0.000000   977:####
        0 0.000000 0.000000   978:'defaults' => <<'END_OF_FUNC',
        0 0.000000 0.000000   979:sub defaults {
        0 0.000000 0.000000   980:    my($self,@p) = self_or_default(@_);
        0 0.000000 0.000000   981:
        0 0.000000 0.000000   982:    my($label,@other) = $self-
        0 0.000000 0.000000   983:
        0 0.000000 0.000000   984:    $label=$self->escapeHTML($label);
        0 0.000000 0.000000   985:    $label = $label || "Defaults";
        0 0.000000 0.000000   986:    my($value) = qq/ VALUE="$label"/;
        0 0.000000 0.000000   987:    my($other) = @other ? " @other" : '';
        0 0.000000 0.000000   988:    return qq/<INPUT TYPE="submit"
        0 0.000000 0.000000   989:}
        0 0.000000 0.000000   990:END_OF_FUNC
        0 0.000000 0.000000   991:
        0 0.000000 0.000000   992:
        0 0.000000 0.000000   993:#### Method: comment
        0 0.000000 0.000000   994:# Create an HTML <!-- comment -->
        0 0.000000 0.000000   995:# Parameters: a string
        0 0.000000 0.000000   996:'comment' => <<'END_OF_FUNC',
        0 0.000000 0.000000   997:sub comment {
        0 0.000000 0.000000   998:    my($self,@p) = self_or_CGI(@_);
        0 0.000000 0.000000   999:    return "<!-- @p -->";
        0 0.000000 0.000000  1000:}
        0 0.000000 0.000000  1001:END_OF_FUNC
        0 0.000000 0.000000  1002:
        0 0.000000 0.000000  1003:#### Method: checkbox
        0 0.000000 0.000000  1004:# Create a checkbox that is not logically
        0 0.000000 0.000000  1005:# The field value is "on" when the button is
        0 0.000000 0.000000  1006:# Parameters:
        0 0.000000 0.000000  1007:#   $name -> Name of the checkbox
        0 0.000000 0.000000  1008:#   $checked -> (optional) turned on by
            ================ SmallProf version 0.9 ================
                              Profile of (eval 2)                      Page 29
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000  1009:#   $value -> (optional) value of the
        0 0.000000 0.000000  1010:#   $label -> (optional) a user-readable
        0 0.000000 0.000000  1011:#             Otherwise the checkbox name is
        0 0.000000 0.000000  1012:# Returns:
        0 0.000000 0.000000  1013:#   A string containing a <INPUT
        0 0.000000 0.000000  1014:####
        0 0.000000 0.000000  1015:'checkbox' => <<'END_OF_FUNC',
        0 0.000000 0.000000  1016:sub checkbox {
        0 0.000000 0.000000  1017:    my($self,@p) = self_or_default(@_);
        0 0.000000 0.000000  1018:
        0 0.000000 0.000000  1019:
        0 0.000000 0.000000  1020: $self-
        0 0.000000 0.000000  1021:
        0 0.000000 0.000000  1022:    $value = defined $value ? $value : 'on';
        0 0.000000 0.000000  1023:
        0 0.000000 0.000000  1024:    if (!$override && ($self-
        0 0.000000 0.000000  1025:         defined $self->param($name))) {
        0 0.000000 0.000000  1026: $checked = grep($_ eq $value,$self-
        0 0.000000 0.000000  1027:    } else {
        0 0.000000 0.000000  1028: $checked = $checked ? ' CHECKED' : '';
        0 0.000000 0.000000  1029:    }
        0 0.000000 0.000000  1030:    my($the_label) = defined $label ? $label
        0 0.000000 0.000000  1031:    $name = $self->escapeHTML($name);
        0 0.000000 0.000000  1032:    $value = $self->escapeHTML($value);
        0 0.000000 0.000000  1033:    $the_label = $self-
        0 0.000000 0.000000  1034:    my($other) = @other ? " @other" : '';
        0 0.000000 0.000000  1035:    $self->register_parameter($name);
        0 0.000000 0.000000  1036:    return <<END;
        0 0.000000 0.000000  1037:<INPUT TYPE="checkbox" NAME="$name"
        0 0.000000 0.000000  1038:END
        0 0.000000 0.000000  1039:}
        0 0.000000 0.000000  1040:END_OF_FUNC
        0 0.000000 0.000000  1041:
        0 0.000000 0.000000  1042:
        0 0.000000 0.000000  1043:#### Method: checkbox_group
        0 0.000000 0.000000  1044:# Create a list of logically-linked
        0 0.000000 0.000000  1045:# Parameters:
        0 0.000000 0.000000  1046:#   $name -> Common name for all the check
        0 0.000000 0.000000  1047:#   $values -> A pointer to a regular array
        0 0.000000 0.000000  1048:#             values for each checkbox in the
        0 0.000000 0.000000  1049:#   $defaults -> (optional)
        0 0.000000 0.000000  1050:#             1. If a pointer to a regular
        0 0.000000 0.000000  1051:#             then this will be used to
        0 0.000000 0.000000  1052:#             checkboxes to turn on by
        0 0.000000 0.000000  1053:#             2. If a scalar, will be assumed
        0 0.000000 0.000000  1054:#             value of a single checkbox in
        0 0.000000 0.000000  1055:#   $linebreak -> (optional) Set to true to
        0 0.000000 0.000000  1056:#             between the buttons.
        0 0.000000 0.000000  1057:#   $labels -> (optional)
        0 0.000000 0.000000  1058:#             A pointer to an associative
        0 0.000000 0.000000  1059:#             in the form
        0 0.000000 0.000000  1060:#             Otherwise the provided values
        0 0.000000 0.000000  1061:# Returns:
        0 0.000000 0.000000  1062:#   An ARRAY containing a series of <INPUT
        0 0.000000 0.000000  1063:####
        0 0.000000 0.000000  1064:'checkbox_group' => <<'END_OF_FUNC',
            ================ SmallProf version 0.9 ================
                              Profile of (eval 2)                      Page 30
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000  1065:sub checkbox_group {
        0 0.000000 0.000000  1066:    my($self,@p) = self_or_default(@_);
        0 0.000000 0.000000  1067:
        0 0.000000 0.000000  1068:
        0 0.000000 0.000000  1069:
        0 0.000000 0.000000  1070: $self-
        0 0.000000 0.000000  1071:     LINEBREAK,LABELS,ROWS,[COLUMNS,COLS],
        0 0.000000 0.000000  1072:     ROWHEADERS,COLHEADERS,
        0 0.000000 0.000000  1073:     [OVERRIDE,FORCE],NOLABELS],@p);
        0 0.000000 0.000000  1074:
        0 0.000000 0.000000  1075:    my($checked,$break,$result,$label);
        0 0.000000 0.000000  1076:
        0 0.000000 0.000000  1077:    my(%checked) = $self-
        0 0.000000 0.000000  1078:
        0 0.000000 0.000000  1079:    $break = $linebreak ? "<BR>" : '';
        0 0.000000 0.000000  1080:    $name=$self->escapeHTML($name);
        0 0.000000 0.000000  1081:
        0 0.000000 0.000000  1082:    # Create the elements
        0 0.000000 0.000000  1083:    my(@elements,@values);
        0 0.000000 0.000000  1084:
        0 0.000000 0.000000  1085:    @values = $self-
        0 0.000000 0.000000  1086:
        0 0.000000 0.000000  1087:    my($other) = @other ? " @other" : '';
        0 0.000000 0.000000  1088:    foreach (@values) {
        0 0.000000 0.000000  1089: $checked = $checked{$_} ? ' CHECKED' : '';
        0 0.000000 0.000000  1090: $label = '';
        0 0.000000 0.000000  1091: unless (defined($nolabels) && $nolabels) {
        0 0.000000 0.000000  1092:     $label = $_;
        0 0.000000 0.000000  1093:     $label = $labels->{$_} if
        0 0.000000 0.000000  1094:     $label = $self->escapeHTML($label);
        0 0.000000 0.000000  1095: }
        0 0.000000 0.000000  1096: $_ = $self->escapeHTML($_);
        0 0.000000 0.000000  1097: push(@elements,qq/<INPUT TYPE="checkbox"
        0 0.000000 0.000000  1098:    }
        0 0.000000 0.000000  1099:    $self->register_parameter($name);
        0 0.000000 0.000000  1100:    return wantarray ? @elements : join('
        0 0.000000 0.000000  1101:        unless defined($columns) ||
        0 0.000000 0.000000  1102:    return
        0 0.000000 0.000000  1103:}
        0 0.000000 0.000000  1104:END_OF_FUNC
        0 0.000000 0.000000  1105:
        0 0.000000 0.000000  1106:# Escape HTML -- used internally
        0 0.000000 0.000000  1107:'escapeHTML' => <<'END_OF_FUNC',
        0 0.000000 0.000000  1108:sub escapeHTML {
        0 0.000000 0.000000  1109:    my($self,$toencode) = @_;
        0 0.000000 0.000000  1110:    $toencode = $self unless ref($self);
        0 0.000000 0.000000  1111:    return undef unless defined($toencode);
        0 0.000000 0.000000  1112:    return $toencode if ref($self) && $self-
        0 0.000000 0.000000  1113:
        0 0.000000 0.000000  1114:    $toencode=~s/&/&amp;/g;
        0 0.000000 0.000000  1115:    $toencode=~s/\"/&quot;/g;
        0 0.000000 0.000000  1116:    $toencode=~s/>/&gt;/g;
        0 0.000000 0.000000  1117:    $toencode=~s/</&lt;/g;
        0 0.000000 0.000000  1118:    return $toencode;
        0 0.000000 0.000000  1119:}
        0 0.000000 0.000000  1120:END_OF_FUNC
            ================ SmallProf version 0.9 ================
                              Profile of (eval 2)                      Page 31
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000  1121:
        0 0.000000 0.000000  1122:# unescape HTML -- used internally
        0 0.000000 0.000000  1123:'unescapeHTML' => <<'END_OF_FUNC',
        0 0.000000 0.000000  1124:sub unescapeHTML {
        0 0.000000 0.000000  1125:    my $string = ref($_[0]) ? $_[1] : $_[0];
        0 0.000000 0.000000  1126:    return undef unless defined($string);
        0 0.000000 0.000000  1127:    # thanks to Randal Schwartz for the
        0 0.000000 0.000000  1128:    $string=~ s[&(.*?);]{
        0 0.000000 0.000000  1129: local $_ = $1;
        0 0.000000 0.000000  1130: /^amp$/i ? "&" :
        0 0.000000 0.000000  1131: /^quot$/i ? '"' :
        0 0.000000 0.000000  1132:        /^gt$/i  ? ">" :
        0 0.000000 0.000000  1133: /^lt$/i  ? "<" :
        0 0.000000 0.000000  1134: /^#(\d+)$/ ? chr($1) :
        0 0.000000 0.000000  1135: /^#x([0-9a-f]+)$/i ? chr(hex($1)) :
        0 0.000000 0.000000  1136: $_
        0 0.000000 0.000000  1137: }gex;
        0 0.000000 0.000000  1138:    return $string;
        0 0.000000 0.000000  1139:}
        0 0.000000 0.000000  1140:END_OF_FUNC
        0 0.000000 0.000000  1141:
        0 0.000000 0.000000  1142:# Internal procedure - don't use
        0 0.000000 0.000000  1143:'_tableize' => <<'END_OF_FUNC',
        0 0.000000 0.000000  1144:sub _tableize {
        0 0.000000 0.000000  1145:
        0 0.000000 0.000000  1146:    my($result);
        0 0.000000 0.000000  1147:
        0 0.000000 0.000000  1148:    if (defined($columns)) {
        0 0.000000 0.000000  1149: $rows = int(0.99 + @elements/$columns)
        0 0.000000 0.000000  1150:    }
        0 0.000000 0.000000  1151:    if (defined($rows)) {
        0 0.000000 0.000000  1152: $columns = int(0.99 + @elements/$rows)
        0 0.000000 0.000000  1153:    }
        0 0.000000 0.000000  1154:
        0 0.000000 0.000000  1155:    # rearrange into a pretty table
        0 0.000000 0.000000  1156:    $result = "<TABLE>";
        0 0.000000 0.000000  1157:    my($row,$column);
        0 0.000000 0.000000  1158:    unshift(@$colheaders,'') if
        0 0.000000 0.000000  1159:    $result .= "<TR>" if
        0 0.000000 0.000000  1160:    foreach (@{$colheaders}) {
        0 0.000000 0.000000  1161: $result .= "<TH>$_</TH>";
        0 0.000000 0.000000  1162:    }
        0 0.000000 0.000000  1163:    for ($row=0;$row<$rows;$row++) {
        0 0.000000 0.000000  1164: $result .= "<TR>";
        0 0.000000 0.000000  1165: $result .= "<TH>$rowheaders->[$row]</TH>" if
        0 0.000000 0.000000  1166: for ($column=0;$column<$columns;$column++) {
        0 0.000000 0.000000  1167:     $result .= "<TD>" .
        0 0.000000 0.000000  1168:  if defined($elements[$column*$rows +
        0 0.000000 0.000000  1169: }
        0 0.000000 0.000000  1170: $result .= "</TR>";
        0 0.000000 0.000000  1171:    }
        0 0.000000 0.000000  1172:    $result .= "</TABLE>";
        0 0.000000 0.000000  1173:    return $result;
        0 0.000000 0.000000  1174:}
        0 0.000000 0.000000  1175:END_OF_FUNC
        0 0.000000 0.000000  1176:
            ================ SmallProf version 0.9 ================
                              Profile of (eval 2)                      Page 32
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000  1177:
        0 0.000000 0.000000  1178:#### Method: radio_group
        0 0.000000 0.000000  1179:# Create a list of logically-linked radio
        0 0.000000 0.000000  1180:# Parameters:
        0 0.000000 0.000000  1181:#   $name -> Common name for all the buttons.
        0 0.000000 0.000000  1182:#   $values -> A pointer to a regular array
        0 0.000000 0.000000  1183:#             values for each button in the
        0 0.000000 0.000000  1184:#   $default -> (optional) Value of the
        0 0.000000 0.000000  1185:#               to turn _nothing_ on.
        0 0.000000 0.000000  1186:#   $linebreak -> (optional) Set to true to
        0 0.000000 0.000000  1187:#             between the buttons.
        0 0.000000 0.000000  1188:#   $labels -> (optional)
        0 0.000000 0.000000  1189:#             A pointer to an associative
        0 0.000000 0.000000  1190:#             in the form
        0 0.000000 0.000000  1191:#             Otherwise the provided values
        0 0.000000 0.000000  1192:# Returns:
        0 0.000000 0.000000  1193:#   An ARRAY containing a series of <INPUT
        0 0.000000 0.000000  1194:####
        0 0.000000 0.000000  1195:'radio_group' => <<'END_OF_FUNC',
        0 0.000000 0.000000  1196:sub radio_group {
        0 0.000000 0.000000  1197:    my($self,@p) = self_or_default(@_);
        0 0.000000 0.000000  1198:
        0 0.000000 0.000000  1199:
        0 0.000000 0.000000  1200:
        0 0.000000 0.000000  1201: $self-
        0 0.000000 0.000000  1202:     ROWS,[COLUMNS,COLS],
        0 0.000000 0.000000  1203:     ROWHEADERS,COLHEADERS,
        0 0.000000 0.000000  1204:     [OVERRIDE,FORCE],NOLABELS],@p);
        0 0.000000 0.000000  1205:    my($result,$checked);
        0 0.000000 0.000000  1206:
        0 0.000000 0.000000  1207:    if (!$override && defined($self-
        0 0.000000 0.000000  1208: $checked = $self->param($name);
        0 0.000000 0.000000  1209:    } else {
        0 0.000000 0.000000  1210: $checked = $default;
        0 0.000000 0.000000  1211:    }
        0 0.000000 0.000000  1212:    my(@elements,@values);
        0 0.000000 0.000000  1213:    @values = $self-
        0 0.000000 0.000000  1214:
        0 0.000000 0.000000  1215:    # If no check array is specified, check
        0 0.000000 0.000000  1216:    $checked = $values[0] unless
        0 0.000000 0.000000  1217:    $name=$self->escapeHTML($name);
        0 0.000000 0.000000  1218:
        0 0.000000 0.000000  1219:    my($other) = @other ? " @other" : '';
        0 0.000000 0.000000  1220:    foreach (@values) {
        0 0.000000 0.000000  1221: my($checkit) = $checked eq $_ ? ' CHECKED' :
        0 0.000000 0.000000  1222: my($break) = $linebreak ? '<BR>' : '';
        0 0.000000 0.000000  1223: my($label)='';
        0 0.000000 0.000000  1224: unless (defined($nolabels) && $nolabels) {
        0 0.000000 0.000000  1225:     $label = $_;
        0 0.000000 0.000000  1226:     $label = $labels->{$_} if
        0 0.000000 0.000000  1227:     $label = $self->escapeHTML($label);
        0 0.000000 0.000000  1228: }
        0 0.000000 0.000000  1229: $_=$self->escapeHTML($_);
        0 0.000000 0.000000  1230: push(@elements,qq/<INPUT TYPE="radio"
        0 0.000000 0.000000  1231:    }
        0 0.000000 0.000000  1232:    $self->register_parameter($name);
            ================ SmallProf version 0.9 ================
                              Profile of (eval 2)                      Page 33
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000  1233:    return wantarray ? @elements : join('
        0 0.000000 0.000000  1234:           unless defined($columns) ||
        0 0.000000 0.000000  1235:    return
        0 0.000000 0.000000  1236:}
        0 0.000000 0.000000  1237:END_OF_FUNC
        0 0.000000 0.000000  1238:
        0 0.000000 0.000000  1239:
        0 0.000000 0.000000  1240:#### Method: popup_menu
        0 0.000000 0.000000  1241:# Create a popup menu.
        0 0.000000 0.000000  1242:# Parameters:
        0 0.000000 0.000000  1243:#   $name -> Name for all the menu
        0 0.000000 0.000000  1244:#   $values -> A pointer to a regular array
        0 0.000000 0.000000  1245:#             text of each menu item.
        0 0.000000 0.000000  1246:#   $default -> (optional) Default item to
        0 0.000000 0.000000  1247:#   $labels -> (optional)
        0 0.000000 0.000000  1248:#             A pointer to an associative
        0 0.000000 0.000000  1249:#             in the form
        0 0.000000 0.000000  1250:#             Otherwise the provided values
        0 0.000000 0.000000  1251:# Returns:
        0 0.000000 0.000000  1252:#   A string containing the definition of a
        0 0.000000 0.000000  1253:####
        0 0.000000 0.000000  1254:'popup_menu' => <<'END_OF_FUNC',
        0 0.000000 0.000000  1255:sub popup_menu {
        0 0.000000 0.000000  1256:    my($self,@p) = self_or_default(@_);
        0 0.000000 0.000000  1257:
        0 0.000000 0.000000  1258:
        0 0.000000 0.000000  1259: $self-
        0 0.000000 0.000000  1260:    my($result,$selected);
        0 0.000000 0.000000  1261:
        0 0.000000 0.000000  1262:    if (!$override && defined($self-
        0 0.000000 0.000000  1263: $selected = $self->param($name);
        0 0.000000 0.000000  1264:    } else {
        0 0.000000 0.000000  1265: $selected = $default;
        0 0.000000 0.000000  1266:    }
        0 0.000000 0.000000  1267:    $name=$self->escapeHTML($name);
        0 0.000000 0.000000  1268:    my($other) = @other ? " @other" : '';
        0 0.000000 0.000000  1269:
        0 0.000000 0.000000  1270:    my(@values);
        0 0.000000 0.000000  1271:    @values = $self-
        0 0.000000 0.000000  1272:
        0 0.000000 0.000000  1273:    $result = qq/<SELECT
        0 0.000000 0.000000  1274:    foreach (@values) {
        0 0.000000 0.000000  1275: my($selectit) = defined($selected) ?
        0 0.000000 0.000000  1276: my($label) = $_;
        0 0.000000 0.000000  1277: $label = $labels->{$_} if defined($labels)
        0 0.000000 0.000000  1278: my($value) = $self->escapeHTML($_);
        0 0.000000 0.000000  1279: $label=$self->escapeHTML($label);
        0 0.000000 0.000000  1280: $result .= "<OPTION $selectit
        0 0.000000 0.000000  1281:    }
        0 0.000000 0.000000  1282:
        0 0.000000 0.000000  1283:    $result .= "</SELECT>\n";
        0 0.000000 0.000000  1284:    return $result;
        0 0.000000 0.000000  1285:}
        0 0.000000 0.000000  1286:END_OF_FUNC
        0 0.000000 0.000000  1287:
        0 0.000000 0.000000  1288:
            ================ SmallProf version 0.9 ================
                              Profile of (eval 2)                      Page 34
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000  1289:#### Method: scrolling_list
        0 0.000000 0.000000  1290:# Create a scrolling list.
        0 0.000000 0.000000  1291:# Parameters:
        0 0.000000 0.000000  1292:#   $name -> name for the list
        0 0.000000 0.000000  1293:#   $values -> A pointer to a regular array
        0 0.000000 0.000000  1294:#             values for each option line in
        0 0.000000 0.000000  1295:#   $defaults -> (optional)
        0 0.000000 0.000000  1296:#             1. If a pointer to a regular
        0 0.000000 0.000000  1297:#             then this will be used to
        0 0.000000 0.000000  1298:#             lines to turn on by default.
        0 0.000000 0.000000  1299:#             2. Otherwise holds the value of
        0 0.000000 0.000000  1300:#   $size -> (optional) Size of the list.
        0 0.000000 0.000000  1301:#   $multiple -> (optional) If set, allow
        0 0.000000 0.000000  1302:#   $labels -> (optional)
        0 0.000000 0.000000  1303:#             A pointer to an associative
        0 0.000000 0.000000  1304:#             in the form
        0 0.000000 0.000000  1305:#             Otherwise the provided values
        0 0.000000 0.000000  1306:# Returns:
        0 0.000000 0.000000  1307:#   A string containing the definition of a
        0 0.000000 0.000000  1308:####
        0 0.000000 0.000000  1309:'scrolling_list' => <<'END_OF_FUNC',
        0 0.000000 0.000000  1310:sub scrolling_list {
        0 0.000000 0.000000  1311:    my($self,@p) = self_or_default(@_);
        0 0.000000 0.000000  1312:
        0 0.000000 0.000000  1313: = $self-
        0 0.000000 0.000000  1314:
        0 0.000000 0.000000  1315:
        0 0.000000 0.000000  1316:    my($result,@values);
        0 0.000000 0.000000  1317:    @values = $self-
        0 0.000000 0.000000  1318:
        0 0.000000 0.000000  1319:    $size = $size || scalar(@values);
        0 0.000000 0.000000  1320:
        0 0.000000 0.000000  1321:    my(%selected) = $self-
        0 0.000000 0.000000  1322:    my($is_multiple) = $multiple ? '
        0 0.000000 0.000000  1323:    my($has_size) = $size ? " SIZE=$size" :
        0 0.000000 0.000000  1324:    my($other) = @other ? " @other" : '';
        0 0.000000 0.000000  1325:
        0 0.000000 0.000000  1326:    $name=$self->escapeHTML($name);
        0 0.000000 0.000000  1327:    $result = qq/<SELECT
        0 0.000000 0.000000  1328:    foreach (@values) {
        0 0.000000 0.000000  1329: my($selectit) = $selected{$_} ? 'SELECTED' :
        0 0.000000 0.000000  1330: my($label) = $_;
        0 0.000000 0.000000  1331: $label = $labels->{$_} if defined($labels)
        0 0.000000 0.000000  1332: $label=$self->escapeHTML($label);
        0 0.000000 0.000000  1333: my($value)=$self->escapeHTML($_);
        0 0.000000 0.000000  1334: $result .= "<OPTION $selectit
        0 0.000000 0.000000  1335:    }
        0 0.000000 0.000000  1336:    $result .= "</SELECT>\n";
        0 0.000000 0.000000  1337:    $self->register_parameter($name);
        0 0.000000 0.000000  1338:    return $result;
        0 0.000000 0.000000  1339:}
        0 0.000000 0.000000  1340:END_OF_FUNC
        0 0.000000 0.000000  1341:
        0 0.000000 0.000000  1342:
        0 0.000000 0.000000  1343:#### Method: hidden
        0 0.000000 0.000000  1344:# Parameters:
            ================ SmallProf version 0.9 ================
                              Profile of (eval 2)                      Page 35
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000  1345:#   $name -> Name of the hidden field
        0 0.000000 0.000000  1346:#   @default -> (optional) Initial values of
        0 0.000000 0.000000  1347:#      or
        0 0.000000 0.000000  1348:#   $default->[initial values of field]
        0 0.000000 0.000000  1349:# Returns:
        0 0.000000 0.000000  1350:#   A string containing a <INPUT
        0 0.000000 0.000000  1351:####
        0 0.000000 0.000000  1352:'hidden' => <<'END_OF_FUNC',
        0 0.000000 0.000000  1353:sub hidden {
        0 0.000000 0.000000  1354:    my($self,@p) = self_or_default(@_);
        0 0.000000 0.000000  1355:
        0 0.000000 0.000000  1356:    # this is the one place where we departed
        0 0.000000 0.000000  1357:    # calling scheme, so we have to special-
        0 0.000000 0.000000  1358:    my(@result,@value);
        0 0.000000 0.000000  1359:    my($name,$default,$override,@other) =
        0 0.000000 0.000000  1360: $self-
        0 0.000000 0.000000  1361:
        0 0.000000 0.000000  1362:    my $do_override = 0;
        0 0.000000 0.000000  1363:    if ( ref($p[0]) || substr($p[0],0,1) eq
        0 0.000000 0.000000  1364: @value = ref($default) ? @{$default} :
        0 0.000000 0.000000  1365: $do_override = $override;
        0 0.000000 0.000000  1366:    } else {
        0 0.000000 0.000000  1367: foreach ($default,$override,@other) {
        0 0.000000 0.000000  1368:     push(@value,$_) if defined($_);
        0 0.000000 0.000000  1369: }
        0 0.000000 0.000000  1370:    }
        0 0.000000 0.000000  1371:
        0 0.000000 0.000000  1372:    # use previous values if override is not
        0 0.000000 0.000000  1373:    my @prev = $self->param($name);
        0 0.000000 0.000000  1374:    @value = @prev if !$do_override && @prev;
        0 0.000000 0.000000  1375:
        0 0.000000 0.000000  1376:    $name=$self->escapeHTML($name);
        0 0.000000 0.000000  1377:    foreach (@value) {
        0 0.000000 0.000000  1378: $_=$self->escapeHTML($_);
        0 0.000000 0.000000  1379: push(@result,qq/<INPUT TYPE="hidden"
        0 0.000000 0.000000  1380:    }
        0 0.000000 0.000000  1381:    return wantarray ? @result :
        0 0.000000 0.000000  1382:}
        0 0.000000 0.000000  1383:END_OF_FUNC
        0 0.000000 0.000000  1384:
        0 0.000000 0.000000  1385:
        0 0.000000 0.000000  1386:#### Method: image_button
        0 0.000000 0.000000  1387:# Parameters:
        0 0.000000 0.000000  1388:#   $name -> Name of the button
        0 0.000000 0.000000  1389:#   $src ->  URL of the image source
        0 0.000000 0.000000  1390:#   $align -> Alignment style (TOP, BOTTOM or
        0 0.000000 0.000000  1391:# Returns:
        0 0.000000 0.000000  1392:#   A string containing a <INPUT TYPE="image"
        0 0.000000 0.000000  1393:####
        0 0.000000 0.000000  1394:'image_button' => <<'END_OF_FUNC',
        0 0.000000 0.000000  1395:sub image_button {
        0 0.000000 0.000000  1396:    my($self,@p) = self_or_default(@_);
        0 0.000000 0.000000  1397:
        0 0.000000 0.000000  1398:    my($name,$src,$alignment,@other) =
        0 0.000000 0.000000  1399: $self->rearrange([NAME,SRC,ALIGN],@p);
        0 0.000000 0.000000  1400:
            ================ SmallProf version 0.9 ================
                              Profile of (eval 2)                      Page 36
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000  1401:    my($align) = $alignment ? "
        0 0.000000 0.000000  1402:    my($other) = @other ? " @other" : '';
        0 0.000000 0.000000  1403:    $name=$self->escapeHTML($name);
        0 0.000000 0.000000  1404:    return qq/<INPUT TYPE="image"
        0 0.000000 0.000000  1405:}
        0 0.000000 0.000000  1406:END_OF_FUNC
        0 0.000000 0.000000  1407:
        0 0.000000 0.000000  1408:
        0 0.000000 0.000000  1409:#### Method: self_url
        0 0.000000 0.000000  1410:# Returns a URL containing the current script
        0 0.000000 0.000000  1411:# param/value pairs arranged as a query.  You
        0 0.000000 0.000000  1412:# to create a link that, when selected, will
        0 0.000000 0.000000  1413:# script with all its state information
        0 0.000000 0.000000  1414:####
        0 0.000000 0.000000  1415:'self_url' => <<'END_OF_FUNC',
        0 0.000000 0.000000  1416:sub self_url {
        0 0.000000 0.000000  1417:    my($self,@p) = self_or_default(@_);
        0 0.000000 0.000000  1418:    return $self->url('-path_info'=>1,'-
        0 0.000000 0.000000  1419:}
        0 0.000000 0.000000  1420:END_OF_FUNC
        0 0.000000 0.000000  1421:
        0 0.000000 0.000000  1422:
        0 0.000000 0.000000  1423:# This is provided as a synonym to self_url()
        0 0.000000 0.000000  1424:# enough to have incorporated it into their
        0 0.000000 0.000000  1425:'state' => <<'END_OF_FUNC',
        0 0.000000 0.000000  1426:sub state {
        0 0.000000 0.000000  1427:    &self_url;
        0 0.000000 0.000000  1428:}
        0 0.000000 0.000000  1429:END_OF_FUNC
        0 0.000000 0.000000  1430:
        0 0.000000 0.000000  1431:
        0 0.000000 0.000000  1432:#### Method: url
        0 0.000000 0.000000  1433:# Like self_url, but doesn't return the query
        0 0.000000 0.000000  1434:# the URL.
        0 0.000000 0.000000  1435:####
        0 0.000000 0.000000  1436:'url' => <<'END_OF_FUNC',
        0 0.000000 0.000000  1437:sub url {
        0 0.000000 0.000000  1438:    my($self,@p) = self_or_default(@_);
        0 0.000000 0.000000  1439:    my
        0 0.000000 0.000000  1440: $self-
        0 0.000000 0.000000  1441:    my $url;
        0 0.000000 0.000000  1442:    $full++ if !($relative || $absolute);
        0 0.000000 0.000000  1443:
        0 0.000000 0.000000  1444:    if ($full) {
        0 0.000000 0.000000  1445: my $protocol = $self->protocol();
        0 0.000000 0.000000  1446: $url = "$protocol://";
        0 0.000000 0.000000  1447: my $vh = http('host');
        0 0.000000 0.000000  1448: if ($vh) {
        0 0.000000 0.000000  1449:     $url .= $vh;
        0 0.000000 0.000000  1450: } else {
        0 0.000000 0.000000  1451:     $url .= server_name();
        0 0.000000 0.000000  1452:     my $port = $self->server_port;
        0 0.000000 0.000000  1453:     $url .= ":" . $port
        0 0.000000 0.000000  1454:  unless (lc($protocol) eq 'http' && $port ==
        0 0.000000 0.000000  1455:      || (lc($protocol) eq 'https' && $port
        0 0.000000 0.000000  1456: }
            ================ SmallProf version 0.9 ================
                              Profile of (eval 2)                      Page 37
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000  1457: $url .= $self->script_name;
        0 0.000000 0.000000  1458:    } elsif ($relative) {
        0 0.000000 0.000000  1459: ($url) = $self->script_name =~ m!([^/]+)$!;
        0 0.000000 0.000000  1460:    } elsif ($absolute) {
        0 0.000000 0.000000  1461: $url = $self->script_name;
        0 0.000000 0.000000  1462:    }
        0 0.000000 0.000000  1463:    $url .= $self->path_info if $path_info
        0 0.000000 0.000000  1464:    $url .= "?" . $self->query_string if
        0 0.000000 0.000000  1465:    return $url;
        0 0.000000 0.000000  1466:}
        0 0.000000 0.000000  1467:
        0 0.000000 0.000000  1468:END_OF_FUNC
        0 0.000000 0.000000  1469:
        0 0.000000 0.000000  1470:#### Method: cookie
        0 0.000000 0.000000  1471:# Set or read a cookie from the specified
        0 0.000000 0.000000  1472:# Cookie can then be passed to header().
        0 0.000000 0.000000  1473:# Usual rules apply to the stickiness of -
        0 0.000000 0.000000  1474:#  Parameters:
        0 0.000000 0.000000  1475:#   -name -> name for this cookie (optional)
        0 0.000000 0.000000  1476:#   -value -> value of this cookie (scalar,
        0 0.000000 0.000000  1477:#   -path -> paths for which this cookie is
        0 0.000000 0.000000  1478:#   -domain -> internet domain in which this
        0 0.000000 0.000000  1479:#   -secure -> if true, cookie only passed
        0 0.000000 0.000000  1480:#   -expires -> expiry date in format Wdy,
        0 0.000000 0.000000  1481:####
        0 0.000000 0.000000  1482:'cookie' => <<'END_OF_FUNC',
        0 0.000000 0.000000  1483:sub cookie {
        0 0.000000 0.000000  1484:    my($self,@p) = self_or_default(@_);
        0 0.000000 0.000000  1485:
        0 0.000000 0.000000  1486: $self-
        0 0.000000 0.000000  1487:
        0 0.000000 0.000000  1488:    require CGI::Cookie;
        0 0.000000 0.000000  1489:
        0 0.000000 0.000000  1490:    # if no value is supplied, then we
        0 0.000000 0.000000  1491:    # value of the cookie, if any.  For
        0 0.000000 0.000000  1492:    # cookies in our state variables.
        0 0.000000 0.000000  1493:    unless ( defined($value) ) {
        0 0.000000 0.000000  1494: $self->{'.cookies'} = CGI::Cookie->fetch
        0 0.000000 0.000000  1495:     unless $self->{'.cookies'};
        0 0.000000 0.000000  1496:
        0 0.000000 0.000000  1497: # If no name is supplied, then retrieve the
        0 0.000000 0.000000  1498: return () unless $self->{'.cookies'};
        0 0.000000 0.000000  1499: return keys %{$self->{'.cookies'}} unless
        0 0.000000 0.000000  1500: return () unless $self->{'.cookies'}-
        0 0.000000 0.000000  1501: return $self->{'.cookies'}->{$name}->value
        0 0.000000 0.000000  1502:    }
        0 0.000000 0.000000  1503:
        0 0.000000 0.000000  1504:    # If we get here, we're creating a new
        0 0.000000 0.000000  1505:    return undef unless $name; # this is an
        0 0.000000 0.000000  1506:
        0 0.000000 0.000000  1507:    my @param;
        0 0.000000 0.000000  1508:    push(@param,'-name'=>$name);
        0 0.000000 0.000000  1509:    push(@param,'-value'=>$value);
        0 0.000000 0.000000  1510:    push(@param,'-domain'=>$domain) if
        0 0.000000 0.000000  1511:    push(@param,'-path'=>$path) if $path;
        0 0.000000 0.000000  1512:    push(@param,'-expires'=>$expires) if
            ================ SmallProf version 0.9 ================
                              Profile of (eval 2)                      Page 38
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000  1513:    push(@param,'-secure'=>$secure) if
        0 0.000000 0.000000  1514:
        0 0.000000 0.000000  1515:    return new CGI::Cookie(@param);
        0 0.000000 0.000000  1516:}
        0 0.000000 0.000000  1517:END_OF_FUNC
        0 0.000000 0.000000  1518:
        0 0.000000 0.000000  1519:# This internal routine creates an expires
        0 0.000000 0.000000  1520:# hours from the current time.  It
        0 0.000000 0.000000  1521:# Mark Fisher.
        0 0.000000 0.000000  1522:'expire_calc' => <<'END_OF_FUNC',
        0 0.000000 0.000000  1523:sub expire_calc {
        0 0.000000 0.000000  1524:    my($time) = @_;
        0 0.000000 0.000000  1525:    my(%mult) = ('s'=>1,
        0 0.000000 0.000000  1526:                 'm'=>60,
        0 0.000000 0.000000  1527:                 'h'=>60*60,
        0 0.000000 0.000000  1528:                 'd'=>60*60*24,
        0 0.000000 0.000000  1529:                 'M'=>60*60*24*30,
        0 0.000000 0.000000  1530:                 'y'=>60*60*24*365);
        0 0.000000 0.000000  1531:    # format for time can be in any of the
        0 0.000000 0.000000  1532:    # "now" -- expire immediately
        0 0.000000 0.000000  1533:    # "+180s" -- in 180 seconds
        0 0.000000 0.000000  1534:    # "+2m" -- in 2 minutes
        0 0.000000 0.000000  1535:    # "+12h" -- in 12 hours
        0 0.000000 0.000000  1536:    # "+1d"  -- in 1 day
        0 0.000000 0.000000  1537:    # "+3M"  -- in 3 months
        0 0.000000 0.000000  1538:    # "+2y"  -- in 2 years
        0 0.000000 0.000000  1539:    # "-3m"  -- 3 minutes ago(!)
        0 0.000000 0.000000  1540:    # If you don't supply one of these forms,
        0 0.000000 0.000000  1541:    # specifying the date yourself
        0 0.000000 0.000000  1542:    my($offset);
        0 0.000000 0.000000  1543:    if (!$time || (lc($time) eq 'now')) {
        0 0.000000 0.000000  1544:        $offset = 0;
        0 0.000000 0.000000  1545:    } elsif ($time=~/^([+-
        0 0.000000 0.000000  1546:        $offset = ($mult{$2} || 1)*$1;
        0 0.000000 0.000000  1547:    } else {
        0 0.000000 0.000000  1548:        return $time;
        0 0.000000 0.000000  1549:    }
        0 0.000000 0.000000  1550:    return (time+$offset);
        0 0.000000 0.000000  1551:}
        0 0.000000 0.000000  1552:END_OF_FUNC
        0 0.000000 0.000000  1553:
        0 0.000000 0.000000  1554:# This internal routine creates date strings
        0 0.000000 0.000000  1555:# cookies and HTTP headers.  (They differ,
        0 0.000000 0.000000  1556:# Thanks to Fisher Mark for this.
        0 0.000000 0.000000  1557:'expires' => <<'END_OF_FUNC',
        0 0.000000 0.000000  1558:sub expires {
        0 0.000000 0.000000  1559:    my($time,$format) = @_;
        0 0.000000 0.000000  1560:    $format ||= 'http';
        0 0.000000 0.000000  1561:
        0 0.000000 0.000000  1562:    my(@MON)=qw/Jan Feb Mar Apr May Jun Jul
        0 0.000000 0.000000  1563:    my(@WDAY) = qw/Sun Mon Tue Wed Thu Fri
        0 0.000000 0.000000  1564:
        0 0.000000 0.000000  1565:    # pass through preformatted dates for the
        0 0.000000 0.000000  1566:    $time = expire_calc($time);
        0 0.000000 0.000000  1567:    return $time unless $time =~ /^\d+$/;
        0 0.000000 0.000000  1568:
            ================ SmallProf version 0.9 ================
                              Profile of (eval 2)                      Page 39
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000  1569:    # make HTTP/cookie date string from
        0 0.000000 0.000000  1570:    # (cookies use '-' as date separator,
        0 0.000000 0.000000  1571:    my($sc) = ' ';
        0 0.000000 0.000000  1572:    $sc = '-' if $format eq "cookie";
        0 0.000000 0.000000  1573:
        0 0.000000 0.000000  1574:    $year += 1900;
        0 0.000000 0.000000  1575:    return sprintf("%s, %02d$sc%s$sc%04d
        0 0.000000 0.000000  1576:
        0 0.000000 0.000000  1577:}
        0 0.000000 0.000000  1578:END_OF_FUNC
        0 0.000000 0.000000  1579:
        0 0.000000 0.000000  1580:'parse_keywordlist' => <<'END_OF_FUNC',
        0 0.000000 0.000000  1581:sub parse_keywordlist {
        0 0.000000 0.000000  1582:    my($self,$tosplit) = @_;
        0 0.000000 0.000000  1583:    $tosplit = unescape($tosplit); # unescape
        0 0.000000 0.000000  1584:    $tosplit=~tr/+/ /;          # pluses to
        0 0.000000 0.000000  1585:    my(@keywords) = split(/\s+/,$tosplit);
        0 0.000000 0.000000  1586:    return @keywords;
        0 0.000000 0.000000  1587:}
        0 0.000000 0.000000  1588:END_OF_FUNC
        0 0.000000 0.000000  1589:
        0 0.000000 0.000000  1590:'param_fetch' => <<'END_OF_FUNC',
        0 0.000000 0.000000  1591:sub param_fetch {
        0 0.000000 0.000000  1592:    my($self,@p) = self_or_default(@_);
        0 0.000000 0.000000  1593:    my($name) = $self->rearrange([NAME],@p);
        0 0.000000 0.000000  1594:    unless (exists($self->{$name})) {
        0 0.000000 0.000000  1595: $self->add_parameter($name);
        0 0.000000 0.000000  1596: $self->{$name} = [];
        0 0.000000 0.000000  1597:    }
        0 0.000000 0.000000  1598:
        0 0.000000 0.000000  1599:    return $self->{$name};
        0 0.000000 0.000000  1600:}
        0 0.000000 0.000000  1601:END_OF_FUNC
        0 0.000000 0.000000  1602:
        0 0.000000 0.000000  1603:#############################################
        0 0.000000 0.000000  1604:# OTHER INFORMATION PROVIDED BY THE
        0 0.000000 0.000000  1605:#############################################
        0 0.000000 0.000000  1606:
        0 0.000000 0.000000  1607:#### Method: path_info
        0 0.000000 0.000000  1608:# Return the extra virtual path information
        0 0.000000 0.000000  1609:# after the URL (if any)
        0 0.000000 0.000000  1610:####
        0 0.000000 0.000000  1611:'path_info' => <<'END_OF_FUNC',
        0 0.000000 0.000000  1612:sub path_info {
        0 0.000000 0.000000  1613:    my ($self,$info) = self_or_default(@_);
        0 0.000000 0.000000  1614:    if (defined($info)) {
        0 0.000000 0.000000  1615: $info = "/$info" if $info ne '' &&
        0 0.000000 0.000000  1616: $self->{'.path_info'} = $info;
        0 0.000000 0.000000  1617:    } elsif (! defined($self->{'.path_info'})
        0 0.000000 0.000000  1618: $self->{'.path_info'} =
        0 0.000000 0.000000  1619:     $ENV{'PATH_INFO'} : '';
        0 0.000000 0.000000  1620:
        0 0.000000 0.000000  1621: # hack to fix broken path info in IIS
        0 0.000000 0.000000  1622: $self->{'.path_info'} =~
        0 0.000000 0.000000  1623:
        0 0.000000 0.000000  1624:    }
            ================ SmallProf version 0.9 ================
                              Profile of (eval 2)                      Page 40
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000  1625:    return $self->{'.path_info'};
        0 0.000000 0.000000  1626:}
        0 0.000000 0.000000  1627:END_OF_FUNC
        0 0.000000 0.000000  1628:
        0 0.000000 0.000000  1629:
        0 0.000000 0.000000  1630:#### Method: request_method
        0 0.000000 0.000000  1631:# Returns 'POST', 'GET', 'PUT' or 'HEAD'
        0 0.000000 0.000000  1632:####
        0 0.000000 0.000000  1633:'request_method' => <<'END_OF_FUNC',
        0 0.000000 0.000000  1634:sub request_method {
        0 0.000000 0.000000  1635:    return $ENV{'REQUEST_METHOD'};
        0 0.000000 0.000000  1636:}
        0 0.000000 0.000000  1637:END_OF_FUNC
        0 0.000000 0.000000  1638:
        0 0.000000 0.000000  1639:#### Method: path_translated
        0 0.000000 0.000000  1640:# Return the physical path information
        0 0.000000 0.000000  1641:# by the URL (if any)
        0 0.000000 0.000000  1642:####
        0 0.000000 0.000000  1643:'path_translated' => <<'END_OF_FUNC',
        0 0.000000 0.000000  1644:sub path_translated {
        0 0.000000 0.000000  1645:    return $ENV{'PATH_TRANSLATED'};
        0 0.000000 0.000000  1646:}
        0 0.000000 0.000000  1647:END_OF_FUNC
        0 0.000000 0.000000  1648:
        0 0.000000 0.000000  1649:
        0 0.000000 0.000000  1650:#### Method: query_string
        0 0.000000 0.000000  1651:# Synthesize a query string from our current
        0 0.000000 0.000000  1652:# parameters
        0 0.000000 0.000000  1653:####
        0 0.000000 0.000000  1654:'query_string' => <<'END_OF_FUNC',
        0 0.000000 0.000000  1655:sub query_string {
        0 0.000000 0.000000  1656:    my($self) = self_or_default(@_);
        0 0.000000 0.000000  1657:    my($param,$value,@pairs);
        0 0.000000 0.000000  1658:    foreach $param ($self->param) {
        0 0.000000 0.000000  1659: my($eparam) = escape($param);
        0 0.000000 0.000000  1660: foreach $value ($self->param($param)) {
        0 0.000000 0.000000  1661:     $value = escape($value);
        0 0.000000 0.000000  1662:     push(@pairs,"$eparam=$value");
        0 0.000000 0.000000  1663: }
        0 0.000000 0.000000  1664:    }
        0 0.000000 0.000000  1665:    return join($USE_PARAM_SEMICOLONS ? ';' :
        0 0.000000 0.000000  1666:}
        0 0.000000 0.000000  1667:END_OF_FUNC
        0 0.000000 0.000000  1668:
        0 0.000000 0.000000  1669:
        0 0.000000 0.000000  1670:#### Method: accept
        0 0.000000 0.000000  1671:# Without parameters, returns an array of the
        0 0.000000 0.000000  1672:# MIME types the browser accepts.
        0 0.000000 0.000000  1673:# With a single parameter equal to a MIME
        0 0.000000 0.000000  1674:# type, will return undef if the browser
        0 0.000000 0.000000  1675:# accept it, 1 if the browser accepts it but
        0 0.000000 0.000000  1676:# doesn't give a preference, or a floating
        0 0.000000 0.000000  1677:# value between 0.0 and 1.0 if the browser
        0 0.000000 0.000000  1678:# declares a quantitative score for it.
        0 0.000000 0.000000  1679:# This handles MIME type globs correctly.
        0 0.000000 0.000000  1680:####
            ================ SmallProf version 0.9 ================
                              Profile of (eval 2)                      Page 41
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000  1681:'Accept' => <<'END_OF_FUNC',
        0 0.000000 0.000000  1682:sub Accept {
        0 0.000000 0.000000  1683:    my($self,$search) = self_or_CGI(@_);
        0 0.000000 0.000000  1684:    my(%prefs,$type,$pref,$pat);
        0 0.000000 0.000000  1685:
        0 0.000000 0.000000  1686:    my(@accept) = split(',',$self-
        0 0.000000 0.000000  1687:
        0 0.000000 0.000000  1688:    foreach (@accept) {
        0 0.000000 0.000000  1689: ($pref) = /q=(\d\.\d+|\d+)/;
        0 0.000000 0.000000  1690: ($type) = m#(\S+/[^;]+)#;
        0 0.000000 0.000000  1691: next unless $type;
        0 0.000000 0.000000  1692: $prefs{$type}=$pref || 1;
        0 0.000000 0.000000  1693:    }
        0 0.000000 0.000000  1694:
        0 0.000000 0.000000  1695:    return keys %prefs unless $search;
        0 0.000000 0.000000  1696:
        0 0.000000 0.000000  1697:    # if a search type is provided, we may
        0 0.000000 0.000000  1698:    # perform a pattern matching operation.
        0 0.000000 0.000000  1699:    # The MIME types use a glob mechanism,
        0 0.000000 0.000000  1700:    # is easily translated into a perl
        0 0.000000 0.000000  1701:
        0 0.000000 0.000000  1702:    # First return the preference for
        0 0.000000 0.000000  1703:    # types:
        0 0.000000 0.000000  1704:    return $prefs{$search} if
        0 0.000000 0.000000  1705:
        0 0.000000 0.000000  1706:    # Didn't get it, so try pattern matching.
        0 0.000000 0.000000  1707:    foreach (keys %prefs) {
        0 0.000000 0.000000  1708: next unless /\*/;       # not a pattern
        0 0.000000 0.000000  1709: ($pat = $_) =~ s/([^\w*])/\\$1/g; # escape
        0 0.000000 0.000000  1710: $pat =~ s/\*/.*/g; # turn it into a pattern
        0 0.000000 0.000000  1711: return $prefs{$_} if $search=~/$pat/;
        0 0.000000 0.000000  1712:    }
        0 0.000000 0.000000  1713:}
        0 0.000000 0.000000  1714:END_OF_FUNC
        0 0.000000 0.000000  1715:
        0 0.000000 0.000000  1716:
        0 0.000000 0.000000  1717:#### Method: user_agent
        0 0.000000 0.000000  1718:# If called with no parameters, returns the
        0 0.000000 0.000000  1719:# If called with one parameter, does a
        0 0.000000 0.000000  1720:# insensitive) on the user agent.
        0 0.000000 0.000000  1721:####
        0 0.000000 0.000000  1722:'user_agent' => <<'END_OF_FUNC',
        0 0.000000 0.000000  1723:sub user_agent {
        0 0.000000 0.000000  1724:    my($self,$match)=self_or_CGI(@_);
        0 0.000000 0.000000  1725:    return $self->http('user_agent') unless
        0 0.000000 0.000000  1726:    return $self->http('user_agent') =~
        0 0.000000 0.000000  1727:}
        0 0.000000 0.000000  1728:END_OF_FUNC
        0 0.000000 0.000000  1729:
        0 0.000000 0.000000  1730:
        0 0.000000 0.000000  1731:#### Method: raw_cookie
        0 0.000000 0.000000  1732:# Returns the magic cookies for the session.
        0 0.000000 0.000000  1733:# The cookies are not parsed or altered in
        0 0.000000 0.000000  1734:# cookies are returned exactly as given in
        0 0.000000 0.000000  1735:# headers.  If a cookie name is given, only
        0 0.000000 0.000000  1736:# value is returned, otherwise the entire raw
            ================ SmallProf version 0.9 ================
                              Profile of (eval 2)                      Page 42
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000  1737:# is returned.
        0 0.000000 0.000000  1738:####
        0 0.000000 0.000000  1739:'raw_cookie' => <<'END_OF_FUNC',
        0 0.000000 0.000000  1740:sub raw_cookie {
        0 0.000000 0.000000  1741:    my($self,$key) = self_or_CGI(@_);
        0 0.000000 0.000000  1742:
        0 0.000000 0.000000  1743:    require CGI::Cookie;
        0 0.000000 0.000000  1744:
        0 0.000000 0.000000  1745:    if (defined($key)) {
        0 0.000000 0.000000  1746: $self->{'.raw_cookies'} = CGI::Cookie-
        0 0.000000 0.000000  1747:     unless $self->{'.raw_cookies'};
        0 0.000000 0.000000  1748:
        0 0.000000 0.000000  1749: return () unless $self->{'.raw_cookies'};
        0 0.000000 0.000000  1750: return () unless $self->{'.raw_cookies'}-
        0 0.000000 0.000000  1751: return $self->{'.raw_cookies'}->{$key};
        0 0.000000 0.000000  1752:    }
        0 0.000000 0.000000  1753:    return $self->http('cookie') ||
        0 0.000000 0.000000  1754:}
        0 0.000000 0.000000  1755:END_OF_FUNC
        0 0.000000 0.000000  1756:
        0 0.000000 0.000000  1757:#### Method: virtual_host
        0 0.000000 0.000000  1758:# Return the name of the virtual_host, which
        0 0.000000 0.000000  1759:# is not always the same as the server
        0 0.000000 0.000000  1760:######
        0 0.000000 0.000000  1761:'virtual_host' => <<'END_OF_FUNC',
        0 0.000000 0.000000  1762:sub virtual_host {
        0 0.000000 0.000000  1763:    my $vh = http('host') || server_name();
        0 0.000000 0.000000  1764:    $vh =~ s/:\d+$//;  # get rid of port
        0 0.000000 0.000000  1765:    return $vh;
        0 0.000000 0.000000  1766:}
        0 0.000000 0.000000  1767:END_OF_FUNC
        0 0.000000 0.000000  1768:
        0 0.000000 0.000000  1769:#### Method: remote_host
        0 0.000000 0.000000  1770:# Return the name of the remote host, or its
        0 0.000000 0.000000  1771:# address if unavailable.  If this variable
        0 0.000000 0.000000  1772:# defined, it returns "localhost" for
        0 0.000000 0.000000  1773:# purposes.
        0 0.000000 0.000000  1774:####
        0 0.000000 0.000000  1775:'remote_host' => <<'END_OF_FUNC',
        0 0.000000 0.000000  1776:sub remote_host {
        0 0.000000 0.000000  1777:    return $ENV{'REMOTE_HOST'} ||
        0 0.000000 0.000000  1778:    || 'localhost';
        0 0.000000 0.000000  1779:}
        0 0.000000 0.000000  1780:END_OF_FUNC
        0 0.000000 0.000000  1781:
        0 0.000000 0.000000  1782:
        0 0.000000 0.000000  1783:#### Method: remote_addr
        0 0.000000 0.000000  1784:# Return the IP addr of the remote host.
        0 0.000000 0.000000  1785:####
        0 0.000000 0.000000  1786:'remote_addr' => <<'END_OF_FUNC',
        0 0.000000 0.000000  1787:sub remote_addr {
        0 0.000000 0.000000  1788:    return $ENV{'REMOTE_ADDR'} ||
        0 0.000000 0.000000  1789:}
        0 0.000000 0.000000  1790:END_OF_FUNC
        0 0.000000 0.000000  1791:
        0 0.000000 0.000000  1792:
            ================ SmallProf version 0.9 ================
                              Profile of (eval 2)                      Page 43
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000  1793:#### Method: script_name
        0 0.000000 0.000000  1794:# Return the partial URL to this script for
        0 0.000000 0.000000  1795:# self-referencing scripts.  Also see
        0 0.000000 0.000000  1796:# self_url(), which returns a URL with all
        0 0.000000 0.000000  1797:# preserved.
        0 0.000000 0.000000  1798:####
        0 0.000000 0.000000  1799:'script_name' => <<'END_OF_FUNC',
        0 0.000000 0.000000  1800:sub script_name {
        0 0.000000 0.000000  1801:    return $ENV{'SCRIPT_NAME'} if
        0 0.000000 0.000000  1802:    # These are for debugging
        0 0.000000 0.000000  1803:    return "/$0" unless $0=~/^\//;
        0 0.000000 0.000000  1804:    return $0;
        0 0.000000 0.000000  1805:}
        0 0.000000 0.000000  1806:END_OF_FUNC
        0 0.000000 0.000000  1807:
        0 0.000000 0.000000  1808:
        0 0.000000 0.000000  1809:#### Method: referer
        0 0.000000 0.000000  1810:# Return the HTTP_REFERER: useful for
        0 0.000000 0.000000  1811:# a GO BACK button.
        0 0.000000 0.000000  1812:####
        0 0.000000 0.000000  1813:'referer' => <<'END_OF_FUNC',
        0 0.000000 0.000000  1814:sub referer {
        0 0.000000 0.000000  1815:    my($self) = self_or_CGI(@_);
        0 0.000000 0.000000  1816:    return $self->http('referer');
        0 0.000000 0.000000  1817:}
        0 0.000000 0.000000  1818:END_OF_FUNC
        0 0.000000 0.000000  1819:
        0 0.000000 0.000000  1820:
        0 0.000000 0.000000  1821:#### Method: server_name
        0 0.000000 0.000000  1822:# Return the name of the server
        0 0.000000 0.000000  1823:####
        0 0.000000 0.000000  1824:'server_name' => <<'END_OF_FUNC',
        0 0.000000 0.000000  1825:sub server_name {
        0 0.000000 0.000000  1826:    return $ENV{'SERVER_NAME'} ||
        0 0.000000 0.000000  1827:}
        0 0.000000 0.000000  1828:END_OF_FUNC
        0 0.000000 0.000000  1829:
        0 0.000000 0.000000  1830:#### Method: server_software
        0 0.000000 0.000000  1831:# Return the name of the server software
        0 0.000000 0.000000  1832:####
        0 0.000000 0.000000  1833:'server_software' => <<'END_OF_FUNC',
        0 0.000000 0.000000  1834:sub server_software {
        0 0.000000 0.000000  1835:    return $ENV{'SERVER_SOFTWARE'} ||
        0 0.000000 0.000000  1836:}
        0 0.000000 0.000000  1837:END_OF_FUNC
        0 0.000000 0.000000  1838:
        0 0.000000 0.000000  1839:#### Method: server_port
        0 0.000000 0.000000  1840:# Return the tcp/ip port the server is
        0 0.000000 0.000000  1841:####
        0 0.000000 0.000000  1842:'server_port' => <<'END_OF_FUNC',
        0 0.000000 0.000000  1843:sub server_port {
        0 0.000000 0.000000  1844:    return $ENV{'SERVER_PORT'} || 80; # for
        0 0.000000 0.000000  1845:}
        0 0.000000 0.000000  1846:END_OF_FUNC
        0 0.000000 0.000000  1847:
        0 0.000000 0.000000  1848:#### Method: server_protocol
            ================ SmallProf version 0.9 ================
                              Profile of (eval 2)                      Page 44
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000  1849:# Return the protocol (usually HTTP/1.0)
        0 0.000000 0.000000  1850:####
        0 0.000000 0.000000  1851:'server_protocol' => <<'END_OF_FUNC',
        0 0.000000 0.000000  1852:sub server_protocol {
        0 0.000000 0.000000  1853:    return $ENV{'SERVER_PROTOCOL'} ||
        0 0.000000 0.000000  1854:}
        0 0.000000 0.000000  1855:END_OF_FUNC
        0 0.000000 0.000000  1856:
        0 0.000000 0.000000  1857:#### Method: http
        0 0.000000 0.000000  1858:# Return the value of an HTTP variable, or
        0 0.000000 0.000000  1859:# the list of variables if none provided
        0 0.000000 0.000000  1860:####
        0 0.000000 0.000000  1861:'http' => <<'END_OF_FUNC',
        0 0.000000 0.000000  1862:sub http {
        0 0.000000 0.000000  1863:    my ($self,$parameter) = self_or_CGI(@_);
        0 0.000000 0.000000  1864:    return $ENV{$parameter} if
        0 0.000000 0.000000  1865:    return $ENV{"HTTP_\U$parameter\E"} if
        0 0.000000 0.000000  1866:    my(@p);
        0 0.000000 0.000000  1867:    foreach (keys %ENV) {
        0 0.000000 0.000000  1868: push(@p,$_) if /^HTTP/;
        0 0.000000 0.000000  1869:    }
        0 0.000000 0.000000  1870:    return @p;
        0 0.000000 0.000000  1871:}
        0 0.000000 0.000000  1872:END_OF_FUNC
        0 0.000000 0.000000  1873:
        0 0.000000 0.000000  1874:#### Method: https
        0 0.000000 0.000000  1875:# Return the value of HTTPS
        0 0.000000 0.000000  1876:####
        0 0.000000 0.000000  1877:'https' => <<'END_OF_FUNC',
        0 0.000000 0.000000  1878:sub https {
        0 0.000000 0.000000  1879:    local($^W)=0;
        0 0.000000 0.000000  1880:    my ($self,$parameter) = self_or_CGI(@_);
        0 0.000000 0.000000  1881:    return $ENV{HTTPS} unless $parameter;
        0 0.000000 0.000000  1882:    return $ENV{$parameter} if
        0 0.000000 0.000000  1883:    return $ENV{"HTTPS_\U$parameter\E"} if
        0 0.000000 0.000000  1884:    my(@p);
        0 0.000000 0.000000  1885:    foreach (keys %ENV) {
        0 0.000000 0.000000  1886: push(@p,$_) if /^HTTPS/;
        0 0.000000 0.000000  1887:    }
        0 0.000000 0.000000  1888:    return @p;
        0 0.000000 0.000000  1889:}
        0 0.000000 0.000000  1890:END_OF_FUNC
        0 0.000000 0.000000  1891:
        0 0.000000 0.000000  1892:#### Method: protocol
        0 0.000000 0.000000  1893:# Return the protocol (http or https
        0 0.000000 0.000000  1894:####
        0 0.000000 0.000000  1895:'protocol' => <<'END_OF_FUNC',
        0 0.000000 0.000000  1896:sub protocol {
        0 0.000000 0.000000  1897:    local($^W)=0;
        0 0.000000 0.000000  1898:    my $self = shift;
        0 0.000000 0.000000  1899:    return 'https' if uc($self->https()) eq
        0 0.000000 0.000000  1900:    return 'https' if $self->server_port ==
        0 0.000000 0.000000  1901:    my $prot = $self->server_protocol;
        0 0.000000 0.000000  1902:    my($protocol,$version) =
        0 0.000000 0.000000  1903:    return "\L$protocol\E";
        0 0.000000 0.000000  1904:}
            ================ SmallProf version 0.9 ================
                              Profile of (eval 2)                      Page 45
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000  1905:END_OF_FUNC
        0 0.000000 0.000000  1906:
        0 0.000000 0.000000  1907:#### Method: remote_ident
        0 0.000000 0.000000  1908:# Return the identity of the remote user
        0 0.000000 0.000000  1909:# (but only if his host is running identd)
        0 0.000000 0.000000  1910:####
        0 0.000000 0.000000  1911:'remote_ident' => <<'END_OF_FUNC',
        0 0.000000 0.000000  1912:sub remote_ident {
        0 0.000000 0.000000  1913:    return $ENV{'REMOTE_IDENT'};
        0 0.000000 0.000000  1914:}
        0 0.000000 0.000000  1915:END_OF_FUNC
        0 0.000000 0.000000  1916:
        0 0.000000 0.000000  1917:
        0 0.000000 0.000000  1918:#### Method: auth_type
        0 0.000000 0.000000  1919:# Return the type of use
        0 0.000000 0.000000  1920:####
        0 0.000000 0.000000  1921:'auth_type' => <<'END_OF_FUNC',
        0 0.000000 0.000000  1922:sub auth_type {
        0 0.000000 0.000000  1923:    return $ENV{'AUTH_TYPE'};
        0 0.000000 0.000000  1924:}
        0 0.000000 0.000000  1925:END_OF_FUNC
        0 0.000000 0.000000  1926:
        0 0.000000 0.000000  1927:
        0 0.000000 0.000000  1928:#### Method: remote_user
        0 0.000000 0.000000  1929:# Return the authorization name used for user
        0 0.000000 0.000000  1930:# verification.
        0 0.000000 0.000000  1931:####
        0 0.000000 0.000000  1932:'remote_user' => <<'END_OF_FUNC',
        0 0.000000 0.000000  1933:sub remote_user {
        0 0.000000 0.000000  1934:    return $ENV{'REMOTE_USER'};
        0 0.000000 0.000000  1935:}
        0 0.000000 0.000000  1936:END_OF_FUNC
        0 0.000000 0.000000  1937:
        0 0.000000 0.000000  1938:
        0 0.000000 0.000000  1939:#### Method: user_name
        0 0.000000 0.000000  1940:# Try to return the remote user's name by
        0 0.000000 0.000000  1941:# crook
        0 0.000000 0.000000  1942:####
        0 0.000000 0.000000  1943:'user_name' => <<'END_OF_FUNC',
        0 0.000000 0.000000  1944:sub user_name {
        0 0.000000 0.000000  1945:    my ($self) = self_or_CGI(@_);
        0 0.000000 0.000000  1946:    return $self->http('from') ||
        0 0.000000 0.000000  1947:}
        0 0.000000 0.000000  1948:END_OF_FUNC
        0 0.000000 0.000000  1949:
        0 0.000000 0.000000  1950:#### Method: nph
        0 0.000000 0.000000  1951:# Set or return the NPH global flag
        0 0.000000 0.000000  1952:####
        0 0.000000 0.000000  1953:'nph' => <<'END_OF_FUNC',
        0 0.000000 0.000000  1954:sub nph {
        0 0.000000 0.000000  1955:    my ($self,$param) = self_or_CGI(@_);
        0 0.000000 0.000000  1956:    $CGI::NPH = $param if defined($param);
        0 0.000000 0.000000  1957:    return $CGI::NPH;
        0 0.000000 0.000000  1958:}
        0 0.000000 0.000000  1959:END_OF_FUNC
        0 0.000000 0.000000  1960:
            ================ SmallProf version 0.9 ================
                              Profile of (eval 2)                      Page 46
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000  1961:#### Method: private_tempfiles
        0 0.000000 0.000000  1962:# Set or return the private_tempfiles global
        0 0.000000 0.000000  1963:####
        0 0.000000 0.000000  1964:'private_tempfiles' => <<'END_OF_FUNC',
        0 0.000000 0.000000  1965:sub private_tempfiles {
        0 0.000000 0.000000  1966:    my ($self,$param) = self_or_CGI(@_);
        0 0.000000 0.000000  1967:    $CGI::PRIVATE_TEMPFILES = $param if
        0 0.000000 0.000000  1968:    return $CGI::PRIVATE_TEMPFILES;
        0 0.000000 0.000000  1969:}
        0 0.000000 0.000000  1970:END_OF_FUNC
        0 0.000000 0.000000  1971:
        0 0.000000 0.000000  1972:#### Method: default_dtd
        0 0.000000 0.000000  1973:# Set or return the default_dtd global
        0 0.000000 0.000000  1974:####
        0 0.000000 0.000000  1975:'default_dtd' => <<'END_OF_FUNC',
        0 0.000000 0.000000  1976:sub default_dtd {
        0 0.000000 0.000000  1977:    my ($self,$param) = self_or_CGI(@_);
        0 0.000000 0.000000  1978:    $CGI::DEFAULT_DTD = $param if
        0 0.000000 0.000000  1979:    return $CGI::DEFAULT_DTD;
        0 0.000000 0.000000  1980:}
        0 0.000000 0.000000  1981:END_OF_FUNC
        0 0.000000 0.000000  1982:
        0 0.000000 0.000000  1983:# -------------- really private subroutines -
        0 0.000000 0.000000  1984:'previous_or_default' => <<'END_OF_FUNC',
        0 0.000000 0.000000  1985:sub previous_or_default {
        0 0.000000 0.000000  1986:    my($self,$name,$defaults,$override) = @_;
        0 0.000000 0.000000  1987:    my(%selected);
        0 0.000000 0.000000  1988:
        0 0.000000 0.000000  1989:    if (!$override && ($self-
        0 0.000000 0.000000  1990:         defined($self->param($name)) ) ) {
        0 0.000000 0.000000  1991: grep($selected{$_}++,$self->param($name));
        0 0.000000 0.000000  1992:    } elsif (defined($defaults) &&
        0 0.000000 0.000000  1993:      (ref($defaults) eq 'ARRAY')) {
        0 0.000000 0.000000  1994: grep($selected{$_}++,@{$defaults});
        0 0.000000 0.000000  1995:    } else {
        0 0.000000 0.000000  1996: $selected{$defaults}++ if
        0 0.000000 0.000000  1997:    }
        0 0.000000 0.000000  1998:
        0 0.000000 0.000000  1999:    return %selected;
        0 0.000000 0.000000  2000:}
        0 0.000000 0.000000  2001:END_OF_FUNC
        0 0.000000 0.000000  2002:
        0 0.000000 0.000000  2003:'register_parameter' => <<'END_OF_FUNC',
        0 0.000000 0.000000  2004:sub register_parameter {
        0 0.000000 0.000000  2005:    my($self,$param) = @_;
        0 0.000000 0.000000  2006:    $self->{'.parametersToAdd'}->{$param}++;
        0 0.000000 0.000000  2007:}
        0 0.000000 0.000000  2008:END_OF_FUNC
        0 0.000000 0.000000  2009:
        0 0.000000 0.000000  2010:'get_fields' => <<'END_OF_FUNC',
        0 0.000000 0.000000  2011:sub get_fields {
        0 0.000000 0.000000  2012:    my($self) = @_;
        0 0.000000 0.000000  2013:    return $self->CGI::hidden('-
        0 0.000000 0.000000  2014:         '-values'=>[keys %{$self-
        0 0.000000 0.000000  2015:         '-override'=>1);
        0 0.000000 0.000000  2016:}
            ================ SmallProf version 0.9 ================
                              Profile of (eval 2)                      Page 47
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000  2017:END_OF_FUNC
        0 0.000000 0.000000  2018:
        0 0.000000 0.000000  2019:'read_from_cmdline' => <<'END_OF_FUNC',
        0 0.000000 0.000000  2020:sub read_from_cmdline {
        0 0.000000 0.000000  2021:    my($input,@words);
        0 0.000000 0.000000  2022:    my($query_string);
        0 0.000000 0.000000  2023:    if (@ARGV) {
        0 0.000000 0.000000  2024: @words = @ARGV;
        0 0.000000 0.000000  2025:    } else {
        0 0.000000 0.000000  2026: require "shellwords.pl";
        0 0.000000 0.000000  2027: print STDERR "(offline mode: enter
        0 0.000000 0.000000  2028: chomp(@lines = <STDIN>); # remove newlines
        0 0.000000 0.000000  2029: $input = join(" ",@lines);
        0 0.000000 0.000000  2030: @words = &shellwords($input);
        0 0.000000 0.000000  2031:    }
        0 0.000000 0.000000  2032:    foreach (@words) {
        0 0.000000 0.000000  2033: s/\\=/%3D/g;
        0 0.000000 0.000000  2034: s/\\&/%26/g;
        0 0.000000 0.000000  2035:    }
        0 0.000000 0.000000  2036:
        0 0.000000 0.000000  2037:    if ("@words"=~/=/) {
        0 0.000000 0.000000  2038: $query_string = join('&',@words);
        0 0.000000 0.000000  2039:    } else {
        0 0.000000 0.000000  2040: $query_string = join('+',@words);
        0 0.000000 0.000000  2041:    }
        0 0.000000 0.000000  2042:    return $query_string;
        0 0.000000 0.000000  2043:}
        0 0.000000 0.000000  2044:END_OF_FUNC
        0 0.000000 0.000000  2045:
        0 0.000000 0.000000  2046:#####
        0 0.000000 0.000000  2047:# subroutine: read_multipart
        0 0.000000 0.000000  2048:#
        0 0.000000 0.000000  2049:# Read multipart data and store it into our
        0 0.000000 0.000000  2050:# An interesting feature is that if any of
        0 0.000000 0.000000  2051:# create a temporary file and open up a
        0 0.000000 0.000000  2052:# caller can read from it if necessary.
        0 0.000000 0.000000  2053:#####
        0 0.000000 0.000000  2054:'read_multipart' => <<'END_OF_FUNC',
        0 0.000000 0.000000  2055:sub read_multipart {
        0 0.000000 0.000000  2056:    my($self,$boundary,$length,$filehandle) =
        0 0.000000 0.000000  2057:    my($buffer) = $self-
        0 0.000000 0.000000  2058:    return unless $buffer;
        0 0.000000 0.000000  2059:    my(%header,$body);
        0 0.000000 0.000000  2060:    my $filenumber = 0;
        0 0.000000 0.000000  2061:    while (!$buffer->eof) {
        0 0.000000 0.000000  2062: %header = $buffer->readHeader;
        0 0.000000 0.000000  2063: die "Malformed multipart POST\n" unless
        0 0.000000 0.000000  2064:
        0 0.000000 0.000000  2065: my($param)= $header{'Content-
        0 0.000000 0.000000  2066:
        0 0.000000 0.000000  2067: # Bug:  Netscape doesn't escape quotation
        0 0.000000 0.000000  2068: my($filename) = $header{'Content-
        0 0.000000 0.000000  2069:
        0 0.000000 0.000000  2070: # add this parameter to our list
        0 0.000000 0.000000  2071: $self->add_parameter($param);
        0 0.000000 0.000000  2072:
            ================ SmallProf version 0.9 ================
                              Profile of (eval 2)                      Page 48
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000  2073: # If no filename specified, then just read
        0 0.000000 0.000000  2074: # to our parameter list.
        0 0.000000 0.000000  2075: unless ($filename) {
        0 0.000000 0.000000  2076:     my($value) = $buffer->readBody;
        0 0.000000 0.000000  2077:     push(@{$self->{$param}},$value);
        0 0.000000 0.000000  2078:     next;
        0 0.000000 0.000000  2079: }
        0 0.000000 0.000000  2080:
        0 0.000000 0.000000  2081: my ($tmpfile,$tmp,$filehandle);
        0 0.000000 0.000000  2082:      UPLOADS: {
        0 0.000000 0.000000  2083:   # If we get here, then we are dealing with
        0 0.000000 0.000000  2084:   # uploaded form.  Save the data to a
        0 0.000000 0.000000  2085:   # the file for reading.
        0 0.000000 0.000000  2086:
        0 0.000000 0.000000  2087:   # skip the file if uploads disabled
        0 0.000000 0.000000  2088:   if ($DISABLE_UPLOADS) {
        0 0.000000 0.000000  2089:       while (defined($data = $buffer->read))
        0 0.000000 0.000000  2090:       last UPLOADS;
        0 0.000000 0.000000  2091:   }
        0 0.000000 0.000000  2092:
        0 0.000000 0.000000  2093:   $tmpfile = new TempFile;
        0 0.000000 0.000000  2094:   $tmp = $tmpfile->as_string;
        0 0.000000 0.000000  2095:
        0 0.000000 0.000000  2096:   $filehandle = Fh-
        0 0.000000 0.000000  2097:
        0 0.000000 0.000000  2098:   $CGI::DefaultClass->binmode($filehandle)
        0 0.000000 0.000000  2099:   chmod 0600,$tmp;    # only the owner can
        0 0.000000 0.000000  2100:
        0 0.000000 0.000000  2101:   my ($data);
        0 0.000000 0.000000  2102:   local($\) = '';
        0 0.000000 0.000000  2103:   while (defined($data = $buffer->read)) {
        0 0.000000 0.000000  2104:       print $filehandle $data;
        0 0.000000 0.000000  2105:   }
        0 0.000000 0.000000  2106:
        0 0.000000 0.000000  2107:   # back up to beginning of file
        0 0.000000 0.000000  2108:   seek($filehandle,0,0);
        0 0.000000 0.000000  2109:   $CGI::DefaultClass->binmode($filehandle)
        0 0.000000 0.000000  2110:
        0 0.000000 0.000000  2111:   # Save some information about the uploaded
        0 0.000000 0.000000  2112:   # at it later.
        0 0.000000 0.000000  2113:   $self->{'.tmpfiles'}->{$filename}= {
        0 0.000000 0.000000  2114:       name => $tmpfile,
        0 0.000000 0.000000  2115:       info => {%header},
        0 0.000000 0.000000  2116:   };
        0 0.000000 0.000000  2117:   push(@{$self->{$param}},$filehandle);
        0 0.000000 0.000000  2118:      }
        0 0.000000 0.000000  2119:    }
        0 0.000000 0.000000  2120:}
        0 0.000000 0.000000  2121:END_OF_FUNC
        0 0.000000 0.000000  2122:
        0 0.000000 0.000000  2123:'tmpFileName' => <<'END_OF_FUNC',
        0 0.000000 0.000000  2124:sub tmpFileName {
        0 0.000000 0.000000  2125:    my($self,$filename) =
        0 0.000000 0.000000  2126:    return $self->{'.tmpfiles'}->{$filename}-
        0 0.000000 0.000000  2127: $self->{'.tmpfiles'}->{$filename}->{name}-
        0 0.000000 0.000000  2128:     : '';
            ================ SmallProf version 0.9 ================
                              Profile of (eval 2)                      Page 49
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000  2129:}
        0 0.000000 0.000000  2130:END_OF_FUNC
        0 0.000000 0.000000  2131:
        0 0.000000 0.000000  2132:'uploadInfo' => <<'END_OF_FUNC',
        0 0.000000 0.000000  2133:sub uploadInfo {
        0 0.000000 0.000000  2134:    my($self,$filename) =
        0 0.000000 0.000000  2135:    return $self->{'.tmpfiles'}->{$filename}-
        0 0.000000 0.000000  2136:}
        0 0.000000 0.000000  2137:END_OF_FUNC
        0 0.000000 0.000000  2138:
        0 0.000000 0.000000  2139:# internal routine, don't use
        0 0.000000 0.000000  2140:'_set_values_and_labels' => <<'END_OF_FUNC',
        0 0.000000 0.000000  2141:sub _set_values_and_labels {
        0 0.000000 0.000000  2142:    my $self = shift;
        0 0.000000 0.000000  2143:    my ($v,$l,$n) = @_;
        0 0.000000 0.000000  2144:    $$l = $v if ref($v) eq 'HASH' &&
        0 0.000000 0.000000  2145:    return $self->param($n) if !defined($v);
        0 0.000000 0.000000  2146:    return $v if !ref($v);
        0 0.000000 0.000000  2147:    return ref($v) eq 'HASH' ? keys %$v :
        0 0.000000 0.000000  2148:}
        0 0.000000 0.000000  2149:END_OF_FUNC
        0 0.000000 0.000000  2150:
        0 0.000000 0.000000  2151:'_compile_all' => <<'END_OF_FUNC',
        0 0.000000 0.000000  2152:sub _compile_all {
        0 0.000000 0.000000  2153:    foreach (@_) {
        0 0.000000 0.000000  2154: next if defined(&$_);
        0 0.000000 0.000000  2155: $AUTOLOAD = "CGI::$_";
        0 0.000000 0.000000  2156: _compile();
        0 0.000000 0.000000  2157:    }
        0 0.000000 0.000000  2158:}
        0 0.000000 0.000000  2159:END_OF_FUNC
        0 0.000000 0.000000  2160:
        0 0.000000 0.000000  2161:);
        0 0.000000 0.000000  2162:
        0 0.000000 0.000000  2163:;
            ================ SmallProf version 0.9 ================
                             Profile of (eval 20)                      Page 50
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000     1:package CGI; sub _script {
        1 0.000008 0.000000     2:    my ($self,$script) = @_;
        1 0.000003 0.000000     3:    my (@result);
        1 0.000008 0.000000     4:    my (@scripts) = ref($script) eq 'ARRAY' ?
        2 0.000010 0.000000     5:    foreach $script (@scripts) {
        1 0.000001 0.000000     6: my($src,$code,$language);
        1 0.000002 0.000000     7: if (ref($script)) { # script is a hash
        0 0.000000 0.000000     8:     ($src,$code,$language) =
        0 0.000000 0.000000     9:  $self->rearrange([SRC,CODE,LANGUAGE],
        0 0.000000 0.000000    10:     '-foo'=>'bar', # a trick to allow the '-
        0 0.000000 0.000000    11:     ref($style) eq 'ARRAY' ? @$script :
        0 0.000000 0.000000    12:
        0 0.000000 0.000000    13: } else {
        1 0.000008 0.000000    14:     ($src,$code,$language) =
        0 0.000000 0.000000    15: }
        1 0.000002 0.000000    16: my(@satts);
        1 0.000002 0.000000    17: push(@satts,'src'=>$src) if $src;
        1 0.000006 0.000000    18: push(@satts,'language'=>$language ||
        1 0.000057 0.000000    19: $code = "<!-- Hide script\n$code\n// End
        0 0.000000 0.000000    20:     if $code && $language=~/javascript/i;
        1 0.000007 0.000000    21: $code = "<!-- Hide script\n$code\n\# End
        0 0.000000 0.000000    22:     if $code && $language=~/perl/i;
        1 0.000092 0.000000    23: push(@result,script({@satts},$code));
        0 0.000000 0.000000    24:    }
        1 0.000014 0.000000    25:    @result;
        0 0.000000 0.000000    26:}
        0 0.000000 0.000000    27:
        0 0.000000 0.000000    28:;
            ================ SmallProf version 0.9 ================
                             Profile of (eval 21)                      Page 51
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000     1:The code for (eval 21) is not in the symbol
        0 0.000000 0.000000     2:table.
        1 0.000036 0.000000     3:
        0 0.000000 0.000000     4:
        0 0.000000 0.000000     5:
        0 0.000000 0.000000     6:
        0 0.000000 0.000000     7:
        0 0.000000 0.000000     8:
        1 0.000004 0.000000     9:
        1 0.000006 0.000000    10:
        1 0.000106 0.000000    11:
        1 0.000015 0.000000    12:
        0 0.000000 0.000000    13:
        0 0.000000 0.000000    14:
        1 0.000010 0.000000    15:
        1 0.000002 0.000000    16:
        2 0.000028 0.000000    17:
        1 0.000025 0.000000    18:
            ================ SmallProf version 0.9 ================
                             Profile of (eval 22)                      Page 52
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000     1:The code for (eval 22) is not in the symbol
        1 0.000006 0.000000     2:table.
        1 0.000006 0.000000     3:
        1 0.000003 0.000000     4:
        3 0.000021 0.000000     5:
        1 0.000003 0.000000     6:
        1 0.000002 0.000000     7:
        1 0.000004 0.000000     8:
        1 0.000014 0.000000     9:
        0 0.000000 0.000000    10:
        1 0.000012 0.000000    11:
            ================ SmallProf version 0.9 ================
                             Profile of (eval 23)                      Page 53
       =================================================================
    count wall tm  cpu time line
        2 0.000000 0.000000     1:The code for (eval 23) is not in the symbol
        3 0.000253 0.000000     2:table.
        0 0.000000 0.000000     3:
        0 0.000000 0.000000     4:
        0 0.000000 0.000000     5:
        3 0.000014 0.000000     6:
        3 0.000319 0.000000     7:
        0 0.000000 0.000000     8:
        0 0.000000 0.000000     9:
        3 0.000011 0.000000    10:
        3 0.000033 0.000000    11:
        4 0.000028 0.000000    12:
        3 0.000010 0.000000    13:
        0 0.000000 0.000000    14:
        0 0.000000 0.000000    15:
        0 0.000000 0.000000    16:
        0 0.000000 0.000000    17:
        0 0.000000 0.000000    18:
        0 0.000000 0.000000    19:
        0 0.000000 0.000000    20:
        3 0.000256 0.000000    21:
        3 0.000010 0.000000    22:
        0 0.000000 0.000000    23:
        3 0.000220 0.000000    24:
        5 0.000030 0.000000    25:
        2 0.000134 0.000000    26:
        2 0.000030 0.000000    27:
        0 0.000000 0.000000    28:
        3 0.000174 0.000000    29:
            ================ SmallProf version 0.9 ================
                             Profile of (eval 24)                      Page 54
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000     1:The code for (eval 24) is not in the symbol
        1 0.000083 0.000000     2:table.
            ================ SmallProf version 0.9 ================
                             Profile of (eval 25)                      Page 55
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000     1:The code for (eval 25) is not in the symbol
        1 0.000090 0.000000     2:table.
        1 0.000106 0.000000     3:
            ================ SmallProf version 0.9 ================
                             Profile of (eval 26)                      Page 56
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000     1:package CGI; sub get_fields {
        1 0.000005 0.000000     2:    my($self) = @_;
        1 0.000107 0.000000     3:    return $self->CGI::hidden('-
        1 0.000002 0.000000     4:         '-values'=>[keys %{$self-
        0 0.000000 0.000000     5:         '-override'=>1);
        0 0.000000 0.000000     6:}
        0 0.000000 0.000000     7:
        0 0.000000 0.000000     8:;
            ================ SmallProf version 0.9 ================
                             Profile of (eval 27)                      Page 57
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000     1:The code for (eval 27) is not in the symbol
        1 0.000032 0.000000     2:table.
            ================ SmallProf version 0.9 ================
                              Profile of (eval 3)                      Page 58
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000     1:The code for (eval 3) is not in the symbol
        1 0.000006 0.000000     2:table.
        1 0.000001 0.000000     3:
        1 0.000003 0.000000     4:
        0 0.000000 0.000000     5:
        0 0.000000 0.000000     6:
        1 0.002438 0.010000     7:
        1 0.000466 0.000000     8:
        1 0.000113 0.000000     9:
        1 0.000014 0.000000    10:
        1 0.000118 0.000000    11:
        0 0.000000 0.000000    12:
        6 0.000017 0.000000    13:
        5 0.000009 0.000000    14:
        5 0.000007 0.000000    15:
        0 0.000000 0.000000    16:
        0 0.000000 0.000000    17:
        1 0.000011 0.000000    18:
        1 0.000010 0.000000    19:
        0 0.000000 0.000000    20:
        0 0.000000 0.000000    21:
        0 0.000000 0.000000    22:
        1 0.000016 0.000000    23:
            ================ SmallProf version 0.9 ================
                              Profile of (eval 4)                      Page 59
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000     1:package CGI; #### Method: delete
        0 0.000000 0.000000     2:# Deletes the named parameter entirely.
        0 0.000000 0.000000     3:####
        1 0.000000 0.000000     4:sub delete {
        2 0.000148 0.000000     5:    my($self,$name) = self_or_default(@_);
        2 0.000005 0.000000     6:    delete $self->{$name};
        2 0.000006 0.000000     7:    delete $self->{'.fieldnames'}->{$name};
        4 0.000167 0.000000     8:    @{$self->{'.parameters'}}=grep($_ ne
        2 0.000012 0.000000     9:    return wantarray ? () : undef;
        0 0.000000 0.000000    10:}
        0 0.000000 0.000000    11:
        0 0.000000 0.000000    12:;
            ================ SmallProf version 0.9 ================
                              Profile of (eval 5)                      Page 60
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000     1:package DBI::_firesafe; require DBD::mysql
        0 0.000000 0.000000     2:;
            ================ SmallProf version 0.9 ================
                              Profile of (eval 6)                      Page 61
       =================================================================
    count wall tm  cpu time line
      187 0.000000 0.000000     1:The code for (eval 6) is not in the symbol
      188 0.013848 0.010000     2:table.
      188 0.017420 0.010000     3:
        0 0.000000 0.000000     4:
      188 0.000448 0.010000     5:
      188 0.000816 0.000000     6:
        0 0.000000 0.000000     7:
      188 0.000433 0.000000     8:
      188 0.013568 0.010000     9:
      188 0.000878 0.000000    10:
      188 0.012866 0.040000    11:
      188 0.000439 0.000000    12:
        0 0.000000 0.000000    13:
        0 0.000000 0.000000    14:
      188 0.011477 0.010000    15:
      188 0.010795 0.010000    16:
      188 0.001523 0.000000    17:
        0 0.000000 0.000000    18:
        0 0.000000 0.000000    19:
        0 0.000000 0.000000    20:
      188 0.010790 0.020000    21:
        0 0.000000 0.000000    22:
        0 0.000000 0.000000    23:
        0 0.000000 0.000000    24:
        0 0.000000 0.000000    25:
        0 0.000000 0.000000    26:
      188 0.000413 0.010000    27:
      188 0.000312 0.000000    28:
      188 0.002311 0.000000    29:
            ================ SmallProf version 0.9 ================
                              Profile of (eval 7)                      Page 62
       =================================================================
    count wall tm  cpu time line
      187 0.000000 0.000000     1:package CGI; sub protocol {
      188 0.002304 0.000000     2:    local($^W)=0;
      188 0.000785 0.000000     3:    my $self = shift;
      188 0.012177 0.020000     4:    return 'https' if uc($self->https()) eq
      188 0.011703 0.000000     5:    return 'https' if $self->server_port ==
      188 0.017667 0.030000     6:    my $prot = $self->server_protocol;
      188 0.004570 0.020000     7:    my($protocol,$version) =
      188 0.004029 0.010000     8:    return "\L$protocol\E";
        0 0.000000 0.000000     9:}
        0 0.000000 0.000000    10:
        0 0.000000 0.000000    11:;
            ================ SmallProf version 0.9 ================
                              Profile of (eval 8)                      Page 63
       =================================================================
    count wall tm  cpu time line
      187 0.000000 0.000000     1:package CGI; sub https {
      188 0.001645 0.010000     2:    local($^W)=0;
      188 0.013125 0.010000     3:    my ($self,$parameter) = self_or_CGI(@_);
      188 0.020333 0.020000     4:    return $ENV{HTTPS} unless $parameter;
        0 0.000000 0.000000     5:    return $ENV{$parameter} if
        0 0.000000 0.000000     6:    return $ENV{"HTTPS_\U$parameter\E"} if
        0 0.000000 0.000000     7:    my(@p);
        0 0.000000 0.000000     8:    foreach (keys %ENV) {
        0 0.000000 0.000000     9: push(@p,$_) if /^HTTPS/;
        0 0.000000 0.000000    10:    }
        0 0.000000 0.000000    11:    return @p;
        0 0.000000 0.000000    12:}
        0 0.000000 0.000000    13:
        0 0.000000 0.000000    14:;
            ================ SmallProf version 0.9 ================
                              Profile of (eval 9)                      Page 64
       =================================================================
    count wall tm  cpu time line
      375 0.000000 0.000000     1:The code for (eval 9) is not in the symbol
      376 0.004303 0.000000     2:table.
            ================ SmallProf version 0.9 ================
                        Profile of ..//Perlbug/Base.pm                 Page 65
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000     1:# Perlbug base class
        0 0.000000 0.000000     2:# (C) 1999 Richard Foley RFI perlbug@rfi.net
        0 0.000000 0.000000     3:# $Id: Base.pm,v 1.76 2001/07/04 15:07:06
        0 0.000000 0.000000     4:#
        0 0.000000 0.000000     5:# get_(list|data) -> hashref/array
        0 0.000000 0.000000     6:# $o_PB->debug('s', "<$i_SQL> ".$sql) if
        0 0.000000 0.000000     7:# carp("Database::query [$i_SQL] -> ($sql)");
        0 0.000000 0.000000     8:#
        0 0.000000 0.000000     9:
        0 0.000000 0.000000    10:
        0 0.000000 0.000000    11:=head1 NAME
        0 0.000000 0.000000    12:
        0 0.000000 0.000000    13:
        0 0.000000 0.000000    14:
        0 0.000000 0.000000    15:
        0 0.000000 0.000000    16:
        0 0.000000 0.000000    17:
        0 0.000000 0.000000    18:
        0 0.000000 0.000000    19:
        0 0.000000 0.000000    20:
        0 0.000000 0.000000    21:
        0 0.000000 0.000000    22:
        0 0.000000 0.000000    23:package Perlbug::Base;
        0 0.000000 0.000000    24:use strict;
        0 0.000000 0.000000    25:use vars qw($AUTOLOAD @ISA $VERSION);
        0 0.000000 0.000000    26:$VERSION = do { my @r = (q$Revision: 1.76 $
        0 0.000000 0.000000    27:my $DEBUG  = $ENV{'Perlbug_Base_DEBUG'} ||
        0 0.000000 0.000000    28:@ISA = qw(Perlbug::Do);
        0 0.000000 0.000000    29:$| = 1;
        0 0.000000 0.000000    30:
        0 0.000000 0.000000    31:# external utilities
        0 0.000000 0.000000    32:use Benchmark;
        0 0.000000 0.000000    33:use Carp;
        0 0.000000 0.000000    34:use CGI qw(:standard);
        0 0.000000 0.000000    35:use Data::Dumper;
        0 0.000000 0.000000    36:use HTML::Entities;
        0 0.000000 0.000000    37:use Mail::Address;
        0 0.000000 0.000000    38:use Mail::Header;
        0 0.000000 0.000000    39:
        0 0.000000 0.000000    40:# internal utilities
        0 0.000000 0.000000    41:use Perlbug; # version, debug and docs
        0 0.000000 0.000000    42:use Perlbug::Config;
        0 0.000000 0.000000    43:use Perlbug::Database;
        0 0.000000 0.000000    44:use Perlbug::Do;
        0 0.000000 0.000000    45:use Perlbug::File;
        0 0.000000 0.000000    46:use Perlbug::Object;
        0 0.000000 0.000000    47:use Perlbug::Relation;
        0 0.000000 0.000000    48:
        0 0.000000 0.000000    49:my %CACHE_OBJECT = ();
        0 0.000000 0.000000    50:my %CACHE_SQL    = ();
        0 0.000000 0.000000    51:my %CACHE_TIME   = ();
        0 0.000000 0.000000    52:my $o_CONF = undef;
        0 0.000000 0.000000    53:my $o_DB   = undef;
        0 0.000000 0.000000    54:my $o_LOG  = undef;
        0 0.000000 0.000000    55:my $i_LOG  = 0;
        0 0.000000 0.000000    56:my %DB     = ();
            ================ SmallProf version 0.9 ================
                        Profile of ..//Perlbug/Base.pm                 Page 66
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000    57:
        0 0.000000 0.000000    58:
        0 0.000000 0.000000    59:=head1 SYNOPSIS
        0 0.000000 0.000000    60:
        0 0.000000 0.000000    61:
        0 0.000000 0.000000    62:
        0 0.000000 0.000000    63:
        0 0.000000 0.000000    64:
        0 0.000000 0.000000    65:
        0 0.000000 0.000000    66:
        0 0.000000 0.000000    67:
        0 0.000000 0.000000    68:
        0 0.000000 0.000000    69:
        0 0.000000 0.000000    70:
        0 0.000000 0.000000    71:
        0 0.000000 0.000000    72:
        0 0.000000 0.000000    73:
        0 0.000000 0.000000    74:
        0 0.000000 0.000000    75:
        0 0.000000 0.000000    76:
        0 0.000000 0.000000    77:
        0 0.000000 0.000000    78:
        0 0.000000 0.000000    79:
        0 0.000000 0.000000    80:
        0 0.000000 0.000000    81:
        0 0.000000 0.000000    82:
        0 0.000000 0.000000    83:
        0 0.000000 0.000000    84:
        0 0.000000 0.000000    85:
        0 0.000000 0.000000    86:
        0 0.000000 0.000000    87:
        0 0.000000 0.000000    88:
        0 0.000000 0.000000    89:
        0 0.000000 0.000000    90:
        0 0.000000 0.000000    91:
        0 0.000000 0.000000    92:
        0 0.000000 0.000000    93:
        0 0.000000 0.000000    94:
        0 0.000000 0.000000    95:
        0 0.000000 0.000000    96:
        1 0.000000 0.000000    97:sub new {
        1 0.000007 0.000000    98:    my $proto  = shift;
        1 0.000006 0.000000    99:    my $class  = ref($proto) || $proto;
        0 0.000000 0.000000   100:
        1 0.000011 0.000000   101: my $self = {};
        1 0.000024 0.000000   102:    bless($self, $class);
        1 0.000081 0.000000   103: $self = $self->init();
        1 0.000007 0.000000   104: $DEBUG = $Perlbug::DEBUG || $DEBUG;
        0 0.000000 0.000000   105:
        1 0.000014 0.000000   106: return $self;
        0 0.000000 0.000000   107:}
        0 0.000000 0.000000   108:
        0 0.000000 0.000000   109:
        0 0.000000 0.000000   110:=item init
        0 0.000000 0.000000   111:
        0 0.000000 0.000000   112:
            ================ SmallProf version 0.9 ================
                        Profile of ..//Perlbug/Base.pm                 Page 67
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   113:
        0 0.000000 0.000000   114:
        0 0.000000 0.000000   115:
        0 0.000000 0.000000   116:
        0 0.000000 0.000000   117:
        1 0.000000 0.000000   118:sub init {
        1 0.000005 0.000000   119: my $self = shift;
        1 0.000148 0.000000   120: $self->clean_cache([], 'force');
        0 0.000000 0.000000   121:
        1 0.000096 0.000000   122: $CACHE_TIME{'INIT'} = Benchmark->new();
        1 0.000005 0.000000   123: $i_LOG = 0;
        0 0.000000 0.000000   124:
        1 0.000094 0.000000   125: $o_CONF = Perlbug::Config->new(); # rjsf
        1 0.000041 0.000000   126: %DB = (
        0 0.000000 0.000000   127:  'user'  => $o_CONF->database('user'),
        0 0.000000 0.000000   128:  'database' => $o_CONF-
        0 0.000000 0.000000   129:  'sqlhost' => $o_CONF->database('sqlhost'),
        0 0.000000 0.000000   130:  'password' => $o_CONF-
        0 0.000000 0.000000   131: );
        1 0.000115 0.000000   132: $o_DB   = Perlbug::Database->new(%DB);
        0 0.000000 0.000000   133: # $o_DB   = Perlbug::Database->new($self);
        1 0.000115 0.000000   134: $o_LOG  = Perlbug::File->new($self-
        0 0.000000 0.000000   135:
        1 0.000109 0.000000   136: $self->set_user($self->system('user'));
        0 0.000000 0.000000   137:
        1 0.000115 0.000000   138:    my $enabler = $self->system('enabled');
        1 0.000003 0.000000   139:    if (!($enabler)) {     # OK
        0 0.000000 0.000000   140:        croak($self, "Enabler($enabler)
        0 0.000000 0.000000   141:    } else {
        1 0.000092 0.000000   142:  $CACHE_TIME{'PREP'} = Benchmark->new;
        1 0.000101 0.000000   143:  $self->debug(0, "INIT ($$)
        0 0.000000 0.000000   144:
        1 0.000004 0.000000   145:  my $i_obj = 0;
        1 0.000078 0.000000   146:  my $version = $self->version;
        1 0.000075 0.000000   147:  my $preload = $self->system('preload');
        1 0.000002 0.000000   148:  if ($preload) {
        0 0.000000 0.000000   149:   my $caller = caller();
        0 0.000000 0.000000   150:   my $cachable = $self->cachable;
        0 0.000000 0.000000   151:   my @things = $self->things();
        0 0.000000 0.000000   152:   my $title = $self->system('title');
        0 0.000000 0.000000   153:   foreach my $thng (@things) { # 21+ (see
        0 0.000000 0.000000   154:    my $o_obj = $self->object($thng);
        0 0.000000 0.000000   155:    $i_obj++ if ref($o_obj);
        0 0.000000 0.000000   156:    $self->debug(3, "Base: $title $version
        0 0.000000 0.000000   157:   }
        0 0.000000 0.000000   158:  }
        1 0.000091 0.000000   159:  $self->debug(0, "$version ($$)
        1 0.000072 0.000000   160:  $CACHE_TIME{'LOAD'} = Benchmark->new;
        0 0.000000 0.000000   161: }
        0 0.000000 0.000000   162:
        1 0.000009 0.000000   163:    return $self;
        0 0.000000 0.000000   164:}
        0 0.000000 0.000000   165:
        0 0.000000 0.000000   166:
        0 0.000000 0.000000   167:=item db
        0 0.000000 0.000000   168:
            ================ SmallProf version 0.9 ================
                        Profile of ..//Perlbug/Base.pm                 Page 68
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   169:
        0 0.000000 0.000000   170:
        0 0.000000 0.000000   171:
        0 0.000000 0.000000   172:
      159 0.000000 0.000000   173:sub db {
      159 0.000700 0.000000   174: my $self = shift;
        0 0.000000 0.000000   175:
      159 0.000945 0.010000   176: $o_DB = ref($o_DB) ? $o_DB :
        0 0.000000 0.000000   177:
      159 0.014237 0.010000   178: return $o_DB;
        0 0.000000 0.000000   179:}
        0 0.000000 0.000000   180:
        0 0.000000 0.000000   181:
        0 0.000000 0.000000   182:=item log
        0 0.000000 0.000000   183:
        0 0.000000 0.000000   184:
        0 0.000000 0.000000   185:
        0 0.000000 0.000000   186:
        0 0.000000 0.000000   187:
        0 0.000000 0.000000   188:sub log {
        0 0.000000 0.000000   189: my $self = shift;
        0 0.000000 0.000000   190:
        0 0.000000 0.000000   191: $o_LOG = ref($o_LOG) ? $o_LOG :
        0 0.000000 0.000000   192:
        0 0.000000 0.000000   193: return $o_LOG;
        0 0.000000 0.000000   194:}
        0 0.000000 0.000000   195:
        0 0.000000 0.000000   196:
        0 0.000000 0.000000   197:=item debug
        0 0.000000 0.000000   198:
        0 0.000000 0.000000   199:
        0 0.000000 0.000000   200:
        0 0.000000 0.000000   201:
        0 0.000000 0.000000   202:
        0 0.000000 0.000000   203:
        0 0.000000 0.000000   204:
        0 0.000000 0.000000   205:
        0 0.000000 0.000000   206:
        0 0.000000 0.000000   207:
        0 0.000000 0.000000   208:
        0 0.000000 0.000000   209:
        0 0.000000 0.000000   210:
        0 0.000000 0.000000   211:
        0 0.000000 0.000000   212:
        0 0.000000 0.000000   213:
        0 0.000000 0.000000   214:
        0 0.000000 0.000000   215:
        0 0.000000 0.000000   216:
        0 0.000000 0.000000   217:
        0 0.000000 0.000000   218:
        0 0.000000 0.000000   219:
        0 0.000000 0.000000   220:
        0 0.000000 0.000000   221:
        0 0.000000 0.000000   222:
        0 0.000000 0.000000   223:
        0 0.000000 0.000000   224:
            ================ SmallProf version 0.9 ================
                        Profile of ..//Perlbug/Base.pm                 Page 69
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   225:
        0 0.000000 0.000000   226:
        0 0.000000 0.000000   227:
        0 0.000000 0.000000   228:
        0 0.000000 0.000000   229:
     4446 0.000000 0.000000   230:sub debug { #
     4446 0.019930 0.110000   231:    my $self = shift;
     4446 0.032633 0.070000   232:    my $flag = shift;
        0 0.000000 0.000000   233:
        0 0.000000 0.000000   234: # my $LEVEL = $Perlbug::DEBUG;
        0 0.000000 0.000000   235: # $Perlbug::DEBUG = $Perlbug::DEBUG ||
        0 0.000000 0.000000   236: # $self->base->debug(@_);
        0 0.000000 0.000000   237: # $Perlbug::DEBUG = $ORIG;
        0 0.000000 0.000000   238:
     4446 0.017879 0.050000   239: my $DATA = '';
     4446 0.037182 0.030000   240: if (!(defined($flag) && $flag =~
        0 0.000000 0.000000   241:  $self->logg("XXX: unsupported call($self,
        0 0.000000 0.000000   242: } else {
     4446 0.020032 0.100000   243:  my ($current) = $Perlbug::DEBUG;
     4446 0.028296 0.050000   244:  if ($flag =~ /^$current$/) {
        0 0.000000 0.000000   245:   if (!($flag =~ /[mM234]/)) { # DATA
        0 0.000000 0.000000   246:    $DATA = "@_";
        0 0.000000 0.000000   247:   } else {         # METH
        0 0.000000 0.000000   248:    my @caller = caller();
        0 0.000000 0.000000   249:    CALLER:
        0 0.000000 0.000000   250:    foreach my $i (0..4) {
        0 0.000000 0.000000   251:     @caller = caller($i);
        0 0.000000 0.000000   252:     last CALLER if $caller[3] !~ /debug/i;
        0 0.000000 0.000000   253:    }
        0 0.000000 0.000000   254:    my $caller = $caller[3];
        0 0.000000 0.000000   255:    $caller =~ s/^(?:\w+::)+(\w+)$/$1/ unless
        0 0.000000 0.000000   256:    $DATA = "$caller: @_ < -flag($flag)";
        0 0.000000 0.000000   257:   }
        0 0.000000 0.000000   258:  }
     4446 0.014397 0.040000   259:  $self->logg($DATA) if $DATA;
        0 0.000000 0.000000   260:    }
     4446 0.047508 0.100000   261: return $DATA;
        0 0.000000 0.000000   262:}
        0 0.000000 0.000000   263:
        0 0.000000 0.000000   264:
        0 0.000000 0.000000   265:=item _debug
        0 0.000000 0.000000   266:
        0 0.000000 0.000000   267:
        0 0.000000 0.000000   268:
        0 0.000000 0.000000   269:
        0 0.000000 0.000000   270:
        0 0.000000 0.000000   271:
        0 0.000000 0.000000   272:sub _debug { # quiet
        0 0.000000 0.000000   273: my $self = shift;
        0 0.000000 0.000000   274: return $self->logg(@_);
        0 0.000000 0.000000   275:}
        0 0.000000 0.000000   276:
        0 0.000000 0.000000   277:
        0 0.000000 0.000000   278:=item error
        0 0.000000 0.000000   279:
        0 0.000000 0.000000   280:
            ================ SmallProf version 0.9 ================
                        Profile of ..//Perlbug/Base.pm                 Page 70
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   281:
        0 0.000000 0.000000   282:
        0 0.000000 0.000000   283:
        0 0.000000 0.000000   284:
        0 0.000000 0.000000   285:
        0 0.000000 0.000000   286:sub error {
        0 0.000000 0.000000   287: my $self = shift;
        0 0.000000 0.000000   288: my $errs = "Error: ".join(' ', @_)."<br>\n";
        0 0.000000 0.000000   289: $self->debug(0, $errs); # error!
        0 0.000000 0.000000   290: #$self->logg(0, "\n***\n".$errs."\n***\n");
        0 0.000000 0.000000   291: confess("ERROR: $errs");
        0 0.000000 0.000000   292:}
        0 0.000000 0.000000   293:
        0 0.000000 0.000000   294:
        0 0.000000 0.000000   295:=item logg
        0 0.000000 0.000000   296:
        0 0.000000 0.000000   297:
        0 0.000000 0.000000   298:
        0 0.000000 0.000000   299:
        0 0.000000 0.000000   300:
        0 0.000000 0.000000   301:
        0 0.000000 0.000000   302:
        0 0.000000 0.000000   303:sub logg { #
        0 0.000000 0.000000   304:    my $self = shift;
        0 0.000000 0.000000   305:    my @args = @_;
        0 0.000000 0.000000   306: unshift(@args, (ref($self)) ? '' : $self); #
        0 0.000000 0.000000   307:    my $data = "[$i_LOG] ".join(' ', @args,
        0 0.000000 0.000000   308:    if (length($data) >= 25600) {
        0 0.000000 0.000000   309:        $data = "Excessive data
        0 0.000000 0.000000   310:    }
        0 0.000000 0.000000   311: $self->log->append($data);
        0 0.000000 0.000000   312:    $i_LOG++;
        0 0.000000 0.000000   313:}
        0 0.000000 0.000000   314:
        0 0.000000 0.000000   315:
        0 0.000000 0.000000   316:=item cgi
        0 0.000000 0.000000   317:
        0 0.000000 0.000000   318:
        0 0.000000 0.000000   319:
        0 0.000000 0.000000   320:
        0 0.000000 0.000000   321:
      384 0.000000 0.000000   322:sub cgi {
      384 0.001426 0.000000   323: my $self = shift;
      384 0.001462 0.010000   324: my $req  = shift;
        0 0.000000 0.000000   325:
      384 0.002326 0.020000   326: my $cgi  = $self->{'_cgi'} || 'unitialised';
        0 0.000000 0.000000   327:
      384 0.000896 0.000000   328: if (ref($req)) {
        0 0.000000 0.000000   329:  $cgi = $self->{'_cgi'} = $req;
        0 0.000000 0.000000   330: }
        0 0.000000 0.000000   331:
      384 0.002436 0.020000   332: unless (ref($cgi)) {
        1 0.000082 0.000000   333:  $cgi = $self->{'_cgi'} = CGI->new($req,
        0 0.000000 0.000000   334: }
        0 0.000000 0.000000   335:
      384 0.015162 0.050000   336: return $cgi;
            ================ SmallProf version 0.9 ================
                        Profile of ..//Perlbug/Base.pm                 Page 71
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   337:}
        0 0.000000 0.000000   338:
        0 0.000000 0.000000   339:
        0 0.000000 0.000000   340:sub isabase { return 1; }
        0 0.000000 0.000000   341:
        0 0.000000 0.000000   342:
        0 0.000000 0.000000   343:=item object
        0 0.000000 0.000000   344:
        0 0.000000 0.000000   345:
        0 0.000000 0.000000   346:
        0 0.000000 0.000000   347:
        0 0.000000 0.000000   348:
        0 0.000000 0.000000   349:
        0 0.000000 0.000000   350:
        0 0.000000 0.000000   351:
        0 0.000000 0.000000   352:
        0 0.000000 0.000000   353:
        0 0.000000 0.000000   354:
        0 0.000000 0.000000   355:
        0 0.000000 0.000000   356:
        0 0.000000 0.000000   357:
        0 0.000000 0.000000   358:
        0 0.000000 0.000000   359:
        0 0.000000 0.000000   360:
        0 0.000000 0.000000   361:
        0 0.000000 0.000000   362:
        0 0.000000 0.000000   363:
     2656 0.000000 0.000000   364:sub object { # rjsf: speed up
     2656 0.011889 0.070000   365: my $self  = shift;
     2656 0.017294 0.090000   366: my $req   = lc(shift);
     2656 0.013362 0.060000   367: my $o_input = shift || '';
     2656 0.010816 0.060000   368: my $type    = shift || '';
     2656 0.009568 0.090000   369: my $o_obj  = '';
        0 0.000000 0.000000   370:
     2656 0.009109 0.070000   371: if (!$req) {
        0 0.000000 0.000000   372:  $self->error("requires a request($req)
        0 0.000000 0.000000   373: } else {
     2656 0.015154 0.060000   374:  my @args = ($self);
     2656 0.015790 0.020000   375:  my $request =
     2656 0.013272 0.010000   376:  if ($req =~ /(\w+)\-\>(\w+)/) { # relation
      172 0.000465 0.000000   377:   $request = 'Perlbug::Relation';
      172 0.003619 0.010000   378:   push(@args, $1, $2, $type);
        0 0.000000 0.000000   379:  }
        0 0.000000 0.000000   380:
     2656 0.009481 0.050000   381:  if (ref($o_input)) {
       90 0.006483 0.000000   382:   my ($key, $hint) = ($o_input->attr('key'),
       90 0.000334 0.000000   383:   if ($key eq $req || $hint eq $req) {
       88 0.000709 0.000000   384:    $CACHE_OBJECT{$req} = $o_input; # x not
        0 0.000000 0.000000   385:   }
        0 0.000000 0.000000   386:  }
     2656 0.209761 0.280000   387:  $o_obj = $CACHE_OBJECT{$req} if
        0 0.000000 0.000000   388:
     2656 0.019866 0.060000   389:  if (!(ref($o_obj))) {
       38 0.003300 0.000000   390:   my ($sep) = $self->system('separator');
       76 0.000898 0.010000   391:   my $required = "$request.pm"; $required =~
       76 0.009225 0.000000   392:   eval { require "$required" }; # :-\
            ================ SmallProf version 0.9 ================
                        Profile of ..//Perlbug/Base.pm                 Page 72
       =================================================================
    count wall tm  cpu time line
       38 0.000143 0.000000   393:   if ($@) {
        0 0.000000 0.000000   394:    $self->error("failed to get req($req),
        0 0.000000 0.000000   395:   } else {
       38 0.003715 0.000000   396:    $o_obj = $request->new(@args);  # <-- !!!
       38 0.002990 0.000000   397:    $CACHE_OBJECT{$req} = $o_obj if $self-
       38 0.000581 0.000000   398:    if (!(ref($o_obj))) {
        0 0.000000 0.000000   399:     $self->error("failed to request($req)
        0 0.000000 0.000000   400:    }
        0 0.000000 0.000000   401:   }
        0 0.000000 0.000000   402:  }
        0 0.000000 0.000000   403: }
        0 0.000000 0.000000   404:
     2656 0.245701 0.340000   405: $self->debug(3, qq|req($req),
     2656 0.048464 0.140000   406: return $o_obj;
        0 0.000000 0.000000   407:}
        0 0.000000 0.000000   408:
        0 0.000000 0.000000   409:
        0 0.000000 0.000000   410:=item cachable
        0 0.000000 0.000000   411:
        0 0.000000 0.000000   412:
        0 0.000000 0.000000   413:
        0 0.000000 0.000000   414:
        0 0.000000 0.000000   415:
        0 0.000000 0.000000   416:
        0 0.000000 0.000000   417:
     9057 0.249347 0.410000   418:sub cachable { my $self = shift; return
        0 0.000000 0.000000   419:
        0 0.000000 0.000000   420:
        0 0.000000 0.000000   421:=item version
        0 0.000000 0.000000   422:
        0 0.000000 0.000000   423:
        0 0.000000 0.000000   424:
        0 0.000000 0.000000   425:
        0 0.000000 0.000000   426:
        0 0.000000 0.000000   427:
        0 0.000000 0.000000   428:
        4 0.000021 0.000000   429:sub version { return $Perlbug::VERSION; }
        0 0.000000 0.000000   430:
        0 0.000000 0.000000   431:
        0 0.000000 0.000000   432:=item isatest
        0 0.000000 0.000000   433:
        0 0.000000 0.000000   434:
        0 0.000000 0.000000   435:
        0 0.000000 0.000000   436:
        0 0.000000 0.000000   437:
        0 0.000000 0.000000   438:
        0 0.000000 0.000000   439:
        0 0.000000 0.000000   440:sub isatest {
        0 0.000000 0.000000   441: my $self = shift;
        0 0.000000 0.000000   442: my $arg = shift || '';
        0 0.000000 0.000000   443: if ($arg =~ /^([012])$/) {
        0 0.000000 0.000000   444:  my ($res) = $self->current({'isatest',
        0 0.000000 0.000000   445:  $self->debug(1, "setting isatest($arg)-
        0 0.000000 0.000000   446: }
        0 0.000000 0.000000   447: return $self->current('isatest');
        0 0.000000 0.000000   448:}
            ================ SmallProf version 0.9 ================
                        Profile of ..//Perlbug/Base.pm                 Page 73
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   449:
        0 0.000000 0.000000   450:
        0 0.000000 0.000000   451:=item url
        0 0.000000 0.000000   452:
        0 0.000000 0.000000   453:
        0 0.000000 0.000000   454:
        0 0.000000 0.000000   455:
        0 0.000000 0.000000   456:
        0 0.000000 0.000000   457:
        0 0.000000 0.000000   458:
      188 0.000000 0.000000   459:sub url { #
      188 0.000740 0.000000   460:    my $self = shift;
      188 0.012379 0.010000   461:    my ($url) = shift || $self->cgi->url;
        0 0.000000 0.000000   462:
      188 0.018423 0.050000   463: $url =~ s/[^_](perlbug\.cgi)/_$1/gsi unless
        0 0.000000 0.000000   464:
      188 0.000424 0.000000   465:    if (defined($url)) { # may be blank
      188 0.017673 0.020000   466:        $self->current({'url', $url});
        0 0.000000 0.000000   467:    }
      188 0.015980 0.020000   468:    return $self->current('url');
        0 0.000000 0.000000   469:}
        0 0.000000 0.000000   470:
        0 0.000000 0.000000   471:
        0 0.000000 0.000000   472:=item quote
        0 0.000000 0.000000   473:
        0 0.000000 0.000000   474:
        0 0.000000 0.000000   475:
        0 0.000000 0.000000   476:
        0 0.000000 0.000000   477:
        0 0.000000 0.000000   478:
        0 0.000000 0.000000   479:
        2 0.000000 0.000000   480:sub quote {
        2 0.000008 0.000000   481: my $self = shift;
        0 0.000000 0.000000   482:
        2 0.000134 0.000000   483: return $self->db->quote(@_);
        0 0.000000 0.000000   484:}
        0 0.000000 0.000000   485:
        0 0.000000 0.000000   486:
        0 0.000000 0.000000   487:=item href
        0 0.000000 0.000000   488:
        0 0.000000 0.000000   489:
        0 0.000000 0.000000   490:
        0 0.000000 0.000000   491:
        0 0.000000 0.000000   492:
        0 0.000000 0.000000   493:sub href {
        0 0.000000 0.000000   494: my $self = shift;
        0 0.000000 0.000000   495:
        0 0.000000 0.000000   496: my $o_obj = $self->object('bug');
        0 0.000000 0.000000   497:
        0 0.000000 0.000000   498: return $o_obj->href(@_);
        0 0.000000 0.000000   499:}
        0 0.000000 0.000000   500:
        0 0.000000 0.000000   501:
        0 0.000000 0.000000   502:=item do
        0 0.000000 0.000000   503:
        0 0.000000 0.000000   504:
            ================ SmallProf version 0.9 ================
                        Profile of ..//Perlbug/Base.pm                 Page 74
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   505:
        0 0.000000 0.000000   506:
        0 0.000000 0.000000   507:
        0 0.000000 0.000000   508:
        0 0.000000 0.000000   509:
        0 0.000000 0.000000   510:sub do {
        0 0.000000 0.000000   511:    my $self = shift;
        0 0.000000 0.000000   512:    my $arg = shift;
        0 0.000000 0.000000   513:
        0 0.000000 0.000000   514: my $user = $self->isadmin;
        0 0.000000 0.000000   515: my @switches = $self->get_switches;
        0 0.000000 0.000000   516:    my @res = ();
        0 0.000000 0.000000   517: if ($arg =~ /^[@switches]$/) {
        0 0.000000 0.000000   518:  my @args = (ref($_[0]) eq 'ARRAY') ?
        0 0.000000 0.000000   519:     $self->debug(1, "Allowing user($user) to
        0 0.000000 0.000000   520:  my $this = "do$arg";
        0 0.000000 0.000000   521:     @res = $self->$this(@_); # doit
        0 0.000000 0.000000   522: } else {
        0 0.000000 0.000000   523:  $self->error("User($user) not allowed to do
        0 0.000000 0.000000   524: }
        0 0.000000 0.000000   525:
        0 0.000000 0.000000   526: return @res;
        0 0.000000 0.000000   527:}
        0 0.000000 0.000000   528:
        0 0.000000 0.000000   529:
        0 0.000000 0.000000   530:=item dodgy_addresses
        0 0.000000 0.000000   531:
        0 0.000000 0.000000   532:
        0 0.000000 0.000000   533:
        0 0.000000 0.000000   534:
        0 0.000000 0.000000   535:
        0 0.000000 0.000000   536:
        0 0.000000 0.000000   537:
        0 0.000000 0.000000   538:sub dodgy_addresses { # context sensitive
        0 0.000000 0.000000   539:    my $self  = shift;
        0 0.000000 0.000000   540:    my $scope = shift; # (from|to|cc|test...
        0 0.000000 0.000000   541:
        0 0.000000 0.000000   542: my $i_ok  = 1;
        0 0.000000 0.000000   543: my @duff  = (qw(MAILER-DAEMON postmaster));
        0 0.000000 0.000000   544: my @targs = $self->get_vals('target');
        0 0.000000 0.000000   545: my @frwds = $self->get_vals('forward');
        0 0.000000 0.000000   546: if ($scope =~ /^(from|sender)$/i) {     #
        0 0.000000 0.000000   547:  push(@duff, @targs, @frwds,
        0 0.000000 0.000000   548:        $self->email('bugdb'),      $self-
        0 0.000000 0.000000   549: } elsif ($scope =~ /^(to|cc|reply-to)$/i) {
        0 0.000000 0.000000   550:  push(@duff, @targs,
        0 0.000000 0.000000   551:     $self->email('bugdb'), $self-
        0 0.000000 0.000000   552: } elsif ($scope =~ /^test$/i) {      # TEST
        0 0.000000 0.000000   553:  push(@duff, $self->email('test'), $self-
        0 0.000000 0.000000   554: } else {            # ANY
        0 0.000000 0.000000   555:  push(@duff); # could get paranoid :-)
        0 0.000000 0.000000   556: }
        0 0.000000 0.000000   557: chomp(@duff); # just in case
        0 0.000000 0.000000   558: my $dodgy = '';
        0 0.000000 0.000000   559:    foreach my $duff ( map {split(/\s+/, $_)
        0 0.000000 0.000000   560:        next unless $duff =~ /\w+/;
            ================ SmallProf version 0.9 ================
                        Profile of ..//Perlbug/Base.pm                 Page 75
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   561:        $dodgy .= quotemeta($duff).'|';
        0 0.000000 0.000000   562:    }
        0 0.000000 0.000000   563:    chomp $dodgy; # just in case again
        0 0.000000 0.000000   564:    $dodgy =~ s/^(.+)?\|/$1/;
        0 0.000000 0.000000   565:    undef $dodgy unless $i_ok == 1; #
        0 0.000000 0.000000   566: $self->debug(3, "dodgy_addresses($scope) ->
        0 0.000000 0.000000   567:
        0 0.000000 0.000000   568: return $dodgy; # regex
        0 0.000000 0.000000   569:}
        0 0.000000 0.000000   570:
        0 0.000000 0.000000   571:
        0 0.000000 0.000000   572:sub format_overview {
        0 0.000000 0.000000   573: my $self = shift;
        0 0.000000 0.000000   574: my $ref  = shift;
        0 0.000000 0.000000   575: my $fmt  = shift || $self-
        0 0.000000 0.000000   576: return $self->SUPER::overview($ref, $fmt);
        0 0.000000 0.000000   577:}
        0 0.000000 0.000000   578:
        0 0.000000 0.000000   579:sub pre {
        0 0.000000 0.000000   580: my $self = shift;
        0 0.000000 0.000000   581: my $fmt  = shift || $self-
        0 0.000000 0.000000   582: my $cxt  = $self->current('context');
        0 0.000000 0.000000   583:
        0 0.000000 0.000000   584: my $ret  = ($cxt =~ /^[hH]/ && $fmt =~
        0 0.000000 0.000000   585:
        0 0.000000 0.000000   586: return $ret;
        0 0.000000 0.000000   587:}
        0 0.000000 0.000000   588:
        0 0.000000 0.000000   589:sub post {
        0 0.000000 0.000000   590: my $self = shift;
        0 0.000000 0.000000   591: my $fmt  = shift || $self-
        0 0.000000 0.000000   592: my $cxt  = $self->current('context');
        0 0.000000 0.000000   593:
        0 0.000000 0.000000   594: my $ret  = ($cxt =~ /^[hH]/ && $fmt =~
        0 0.000000 0.000000   595:
        0 0.000000 0.000000   596: return $ret;
        0 0.000000 0.000000   597:}
        0 0.000000 0.000000   598:
        0 0.000000 0.000000   599:=item things
        0 0.000000 0.000000   600:
        0 0.000000 0.000000   601:
        0 0.000000 0.000000   602:
        0 0.000000 0.000000   603:
        0 0.000000 0.000000   604:
        0 0.000000 0.000000   605:
        0 0.000000 0.000000   606:
        0 0.000000 0.000000   607:
        0 0.000000 0.000000   608:
       71 0.000000 0.000000   609:sub things { #
       71 0.000319 0.000000   610: my $self = shift;
       71 0.000328 0.000000   611: my $type = shift || '_%';
        0 0.000000 0.000000   612:
       71 0.006010 0.020000   613: my @names = $self->object('thing')-
        0 0.000000 0.000000   614:
       71 0.008579 0.010000   615: return @names;
        0 0.000000 0.000000   616:}
            ================ SmallProf version 0.9 ================
                        Profile of ..//Perlbug/Base.pm                 Page 76
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   617:
        0 0.000000 0.000000   618:
        0 0.000000 0.000000   619:=item flags
        0 0.000000 0.000000   620:
        0 0.000000 0.000000   621:
        0 0.000000 0.000000   622:
        0 0.000000 0.000000   623:
        0 0.000000 0.000000   624:
        0 0.000000 0.000000   625:
        0 0.000000 0.000000   626:
        0 0.000000 0.000000   627:sub flags {
        0 0.000000 0.000000   628:    my $self = shift;
        0 0.000000 0.000000   629:    my $arg  = shift;
        0 0.000000 0.000000   630:    my @flags = ();
        0 0.000000 0.000000   631:
        0 0.000000 0.000000   632: my $types = join('|', qw(group osname
        0 0.000000 0.000000   633:    if ($arg !~ /^($types)$/) {
        0 0.000000 0.000000   634:        $self->error("Can't get flags for
        0 0.000000 0.000000   635:    } else {
        0 0.000000 0.000000   636:  @flags = $self->object($arg)->col('name');
        0 0.000000 0.000000   637:    }
        0 0.000000 0.000000   638:
        0 0.000000 0.000000   639:    return @flags;
        0 0.000000 0.000000   640:}
        0 0.000000 0.000000   641:
        0 0.000000 0.000000   642:
        0 0.000000 0.000000   643:=item all_flags
        0 0.000000 0.000000   644:
        0 0.000000 0.000000   645:
        0 0.000000 0.000000   646:
        0 0.000000 0.000000   647:
        0 0.000000 0.000000   648:
        0 0.000000 0.000000   649:
        0 0.000000 0.000000   650:
        0 0.000000 0.000000   651:
        0 0.000000 0.000000   652:
        0 0.000000 0.000000   653:
        0 0.000000 0.000000   654:
        0 0.000000 0.000000   655:
        0 0.000000 0.000000   656:
        0 0.000000 0.000000   657:sub all_flags {
        0 0.000000 0.000000   658:    my $self  = shift;
        0 0.000000 0.000000   659:    my %flags = ();
        0 0.000000 0.000000   660: my @types = qw(group osname severity status
        0 0.000000 0.000000   661: foreach my $flag (@types) {
        0 0.000000 0.000000   662:  my @flags = $self->flags($flag);
        0 0.000000 0.000000   663:  $flags{$flag} = \@flags;
        0 0.000000 0.000000   664:    }
        0 0.000000 0.000000   665:    return %flags;
        0 0.000000 0.000000   666:}
        0 0.000000 0.000000   667:
        0 0.000000 0.000000   668:
        0 0.000000 0.000000   669:=item date_hash
        0 0.000000 0.000000   670:
        0 0.000000 0.000000   671:
        0 0.000000 0.000000   672:
            ================ SmallProf version 0.9 ================
                        Profile of ..//Perlbug/Base.pm                 Page 77
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   673:
        0 0.000000 0.000000   674:
        0 0.000000 0.000000   675:
        0 0.000000 0.000000   676:
        0 0.000000 0.000000   677:
        0 0.000000 0.000000   678:
        0 0.000000 0.000000   679:
        1 0.000000 0.000000   680:sub date_hash {
        1 0.000006 0.000000   681:    my $self = shift;
        1 0.000032 0.000000   682:    my %dates = (
        0 0.000000 0.000000   683:     'any'               => '',
        0 0.000000 0.000000   684:     'today'             => '
        0 0.000000 0.000000   685:     'this week'         => '
        0 0.000000 0.000000   686:     'less than 1 month' => '
        0 0.000000 0.000000   687:     'less than 3 months'=> '
        0 0.000000 0.000000   688:     'over 3 months'     => '
        0 0.000000 0.000000   689: );
        1 0.000052 0.000000   690:    return %dates;
        0 0.000000 0.000000   691:}
        0 0.000000 0.000000   692:
        0 0.000000 0.000000   693:
        0 0.000000 0.000000   694:=item active_admins
        0 0.000000 0.000000   695:
        0 0.000000 0.000000   696:
        0 0.000000 0.000000   697:
        0 0.000000 0.000000   698:
        0 0.000000 0.000000   699:
        0 0.000000 0.000000   700:
        0 0.000000 0.000000   701:
        0 0.000000 0.000000   702:sub active_admins {
        0 0.000000 0.000000   703:    my $self = shift;
        0 0.000000 0.000000   704: my @active = $self->object('user')-
        0 0.000000 0.000000   705:    return @active;
        0 0.000000 0.000000   706:}
        0 0.000000 0.000000   707:
        0 0.000000 0.000000   708:
        0 0.000000 0.000000   709:=item active_admin_addresses
        0 0.000000 0.000000   710:
        0 0.000000 0.000000   711:
        0 0.000000 0.000000   712:
        0 0.000000 0.000000   713:
        0 0.000000 0.000000   714:
        0 0.000000 0.000000   715:
        0 0.000000 0.000000   716:
        0 0.000000 0.000000   717:sub active_admin_addresses {
        0 0.000000 0.000000   718:    my $self = shift;
        0 0.000000 0.000000   719: my @active = $self->object('user')-
        0 0.000000 0.000000   720:    return @active;
        0 0.000000 0.000000   721:}
        0 0.000000 0.000000   722:
        0 0.000000 0.000000   723:
        0 0.000000 0.000000   724:=item help
        0 0.000000 0.000000   725:
        0 0.000000 0.000000   726:
        0 0.000000 0.000000   727:
        0 0.000000 0.000000   728:
            ================ SmallProf version 0.9 ================
                        Profile of ..//Perlbug/Base.pm                 Page 78
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   729:
        0 0.000000 0.000000   730:
        0 0.000000 0.000000   731:
        0 0.000000 0.000000   732:sub help {
        0 0.000000 0.000000   733:    my $self = shift;
        0 0.000000 0.000000   734:
        0 0.000000 0.000000   735: my $email = $self->email('bugdb');
        0 0.000000 0.000000   736: my $url = $self->web('hard_wired_url');
        0 0.000000 0.000000   737: my $maintainer = $self-
        0 0.000000 0.000000   738: my $title = $self->system('title');
        0 0.000000 0.000000   739:
        0 0.000000 0.000000   740: my $help = qq|
        0 0.000000 0.000000   741: A searchable live reference database of
        0 0.000000 0.000000   742:
        0 0.000000 0.000000   743: Email: $email
        0 0.000000 0.000000   744:
        0 0.000000 0.000000   745: WWW: $url
        0 0.000000 0.000000   746:
        0 0.000000 0.000000   747:    Comments, feedback, suggestions to:
        0 0.000000 0.000000   748: |;
        0 0.000000 0.000000   749:
        0 0.000000 0.000000   750:    return $help;
        0 0.000000 0.000000   751:}
        0 0.000000 0.000000   752:
        0 0.000000 0.000000   753:
        0 0.000000 0.000000   754:=item spec
        0 0.000000 0.000000   755:
        0 0.000000 0.000000   756:
        0 0.000000 0.000000   757:
        0 0.000000 0.000000   758:
        0 0.000000 0.000000   759:
        0 0.000000 0.000000   760:
        0 0.000000 0.000000   761:
        0 0.000000 0.000000   762:
        0 0.000000 0.000000   763:
        0 0.000000 0.000000   764:sub spec {
        0 0.000000 0.000000   765:    my $self = shift;
        0 0.000000 0.000000   766: my $ehelp= $self->email('help');
        0 0.000000 0.000000   767: my $o_bug = $self->object('bug');
        0 0.000000 0.000000   768: my $o_usr = $self->object('user');
        0 0.000000 0.000000   769: my $o_status = $self->object('status');
        0 0.000000 0.000000   770: my $bids = $o_bug->count();
        0 0.000000 0.000000   771: my ($openid) = $o_status->name2id(['open']);
        0 0.000000 0.000000   772: my $open = my @open = $o_status-
        0 0.000000 0.000000   773: my $admins = my @admins = $o_usr-
        0 0.000000 0.000000   774: my ($bugdb, $cgi, $title) = ($self-
        0 0.000000 0.000000   775:my $info = qq|
        0 0.000000 0.000000   776:The $title bug tracking system
        0 0.000000 0.000000   777:
        0 0.000000 0.000000   778:------------------------------------------
        0 0.000000 0.000000   779:
        0 0.000000 0.000000   780:Anyone may search the database via the web:
        0 0.000000 0.000000   781:
        0 0.000000 0.000000   782: $cgi
        0 0.000000 0.000000   783:
        0 0.000000 0.000000   784:or the email interface:
            ================ SmallProf version 0.9 ================
                        Profile of ..//Perlbug/Base.pm                 Page 79
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   785:
        0 0.000000 0.000000   786: To: $ehelp
        0 0.000000 0.000000   787:
        0 0.000000 0.000000   788:------------------------------------------
        0 0.000000 0.000000   789:
        0 0.000000 0.000000   790: |;
        0 0.000000 0.000000   791:
        0 0.000000 0.000000   792:    return $info;
        0 0.000000 0.000000   793:}
        0 0.000000 0.000000   794:
        0 0.000000 0.000000   795:
        0 0.000000 0.000000   796:=item check_user
        0 0.000000 0.000000   797:
        0 0.000000 0.000000   798:
        0 0.000000 0.000000   799:
        0 0.000000 0.000000   800:
        0 0.000000 0.000000   801:
        0 0.000000 0.000000   802:
        0 0.000000 0.000000   803:
        0 0.000000 0.000000   804:
        0 0.000000 0.000000   805:
        1 0.000000 0.000000   806:sub check_user {
        0 0.000000 0.000000   807:    #default administrator check (email uses
        1 0.000005 0.000000   808: my $self = shift;
        1 0.000008 0.000000   809: my $user = shift || 'generic';
        1 0.000092 0.000000   810: $self->debug(2, "check_user($user)") if
        1 0.000085 0.000000   811: my $o_usr = $self->object('user');
        1 0.000073 0.000000   812:    if ($self->system('restricted')) {
        1 0.000071 0.000000   813:  $self->debug(2, "restricted...") if $DEBUG;
        1 0.000098 0.000000   814:  my @ids = $o_usr->ids("userid = '$user' AND
        1 0.000076 0.000000   815:  $self->debug(2, "ids(@ids)") if $DEBUG;
        0 0.000000 0.000000   816:     ID:
        1 0.000014 0.000000   817:     foreach my $id (@ids) {
        0 0.000000 0.000000   818:   next if $id =~ /generic/i;
        0 0.000000 0.000000   819:         if (($id =~ /^\w+$/) && ($id =~
        0 0.000000 0.000000   820:    $self->current({'admin', $id});
        0 0.000000 0.000000   821:             $self->current({'switches',
        0 0.000000 0.000000   822:             $self->debug(1, "given param
        0 0.000000 0.000000   823:             last ID;
        0 0.000000 0.000000   824:         } else {
        0 0.000000 0.000000   825:    $self->debug(1, "unrecognised user($user)
        0 0.000000 0.000000   826:   }
        0 0.000000 0.000000   827:        }
        0 0.000000 0.000000   828: } else {
        0 0.000000 0.000000   829:  $self->debug(2, "unrestricted...") if
        0 0.000000 0.000000   830:        $self->current({'admin', $user});
        0 0.000000 0.000000   831:        $self->current({'switches', $self-
        0 0.000000 0.000000   832:     $self->debug(1, "Non-restricted
        0 0.000000 0.000000   833: }
        1 0.000092 0.000000   834: $self->debug(2, "check_user($user)-
        1 0.000066 0.000000   835: return $self->isadmin;
        0 0.000000 0.000000   836:}
        0 0.000000 0.000000   837:
        0 0.000000 0.000000   838:
        0 0.000000 0.000000   839:=item isadmin
        0 0.000000 0.000000   840:
            ================ SmallProf version 0.9 ================
                        Profile of ..//Perlbug/Base.pm                 Page 80
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   841:
        0 0.000000 0.000000   842:
        0 0.000000 0.000000   843:
        0 0.000000 0.000000   844:
        0 0.000000 0.000000   845:
        0 0.000000 0.000000   846:
        7 0.000000 0.000000   847:sub isadmin { #store and retrieve admin flag
        7 0.000034 0.000000   848:    my $self = shift;
        7 0.000025 0.000000   849:    my $prop = shift;
        7 0.000536 0.000000   850:    my ($user) = ($self-
        0 0.000000 0.000000   851:  ? grep(!/generic/i, $self-
        0 0.000000 0.000000   852:  : $self->current('admin');
        7 0.000159 0.000000   853:    return $user;
        0 0.000000 0.000000   854:}
        0 0.000000 0.000000   855:
        0 0.000000 0.000000   856:
        0 0.000000 0.000000   857:=item ok
        0 0.000000 0.000000   858:
        0 0.000000 0.000000   859:
        0 0.000000 0.000000   860:
        0 0.000000 0.000000   861:
        0 0.000000 0.000000   862:
        0 0.000000 0.000000   863:
        0 0.000000 0.000000   864:
        0 0.000000 0.000000   865:sub ok { # rjsf: migrate -> o_bug->ok_ids
        0 0.000000 0.000000   866:    my $self = shift;
        0 0.000000 0.000000   867:    my $given = shift;
        0 0.000000 0.000000   868:    my ($ok, $bid) = $self->get_id($given);
        0 0.000000 0.000000   869:    return $ok;
        0 0.000000 0.000000   870:}
        0 0.000000 0.000000   871:
        0 0.000000 0.000000   872:
        0 0.000000 0.000000   873:=item get_id
        0 0.000000 0.000000   874:
        0 0.000000 0.000000   875:
        0 0.000000 0.000000   876:
        0 0.000000 0.000000   877:
        0 0.000000 0.000000   878:
        0 0.000000 0.000000   879:sub get_id { # rjsf: migrate -> o_bug->ok_ids
        0 0.000000 0.000000   880:    my $self = shift;
        0 0.000000 0.000000   881:    my $str = shift;
        0 0.000000 0.000000   882: my $o_bug = $self->object('bug');
        0 0.000000 0.000000   883: my @ids = $o_bug->str2ids($str);
        0 0.000000 0.000000   884:    return (1, @ids);
        0 0.000000 0.000000   885:}
        0 0.000000 0.000000   886:
        0 0.000000 0.000000   887:
        0 0.000000 0.000000   888:=item _switches
        0 0.000000 0.000000   889:
        0 0.000000 0.000000   890:
        0 0.000000 0.000000   891:
        0 0.000000 0.000000   892:
        0 0.000000 0.000000   893:
        0 0.000000 0.000000   894:
        0 0.000000 0.000000   895:
        0 0.000000 0.000000   896:
            ================ SmallProf version 0.9 ================
                        Profile of ..//Perlbug/Base.pm                 Page 81
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   897:sub _switches { # rjsf: migrate -> switches
        0 0.000000 0.000000   898:    my $self = shift;
        0 0.000000 0.000000   899:    if (@_) {
        0 0.000000 0.000000   900:        my $switches = join(' ', grep(/^a-
        0 0.000000 0.000000   901:        $self->debug(1, "Setting allowed, and
        0 0.000000 0.000000   902:        $self->current({'switches',
        0 0.000000 0.000000   903:    }
        0 0.000000 0.000000   904:    return $self->current('switches');
        0 0.000000 0.000000   905:}
        0 0.000000 0.000000   906:
        0 0.000000 0.000000   907:sub file_ext { return ''; }
        0 0.000000 0.000000   908:
        0 0.000000 0.000000   909:
        0 0.000000 0.000000   910:=item create_file
        0 0.000000 0.000000   911:
        0 0.000000 0.000000   912:
        0 0.000000 0.000000   913:
        0 0.000000 0.000000   914:
        0 0.000000 0.000000   915:
        0 0.000000 0.000000   916:
        0 0.000000 0.000000   917:
        0 0.000000 0.000000   918:sub create {
        0 0.000000 0.000000   919:    my $self = shift;
        0 0.000000 0.000000   920:    my $file = shift;
        0 0.000000 0.000000   921:    my $data = shift;
        0 0.000000 0.000000   922: my $perm = shift || '0766';
        0 0.000000 0.000000   923: my $o_file = '';
        0 0.000000 0.000000   924:
        0 0.000000 0.000000   925:    # ARGS
        0 0.000000 0.000000   926:    if (!(($file =~ /\w+/) && ($data =~
        0 0.000000 0.000000   927:        $self->errors("Duff args given to
        0 0.000000 0.000000   928:    } else {
        0 0.000000 0.000000   929:     $o_file = Perlbug::File($file, '>',
        0 0.000000 0.000000   930:        if (ref($o_file)) {
        0 0.000000 0.000000   931:   $o_file->append($data);
        0 0.000000 0.000000   932:        } else {
        0 0.000000 0.000000   933:            $self->error("failed to create
        0 0.000000 0.000000   934:        }
        0 0.000000 0.000000   935:    }
        0 0.000000 0.000000   936:
        0 0.000000 0.000000   937:    return $o_file;
        0 0.000000 0.000000   938:}
        0 0.000000 0.000000   939:
        0 0.000000 0.000000   940:
        0 0.000000 0.000000   941:=item prioritise
        0 0.000000 0.000000   942:
        0 0.000000 0.000000   943:
        0 0.000000 0.000000   944:
        0 0.000000 0.000000   945:
        0 0.000000 0.000000   946:
        0 0.000000 0.000000   947:sub prioritise {
        0 0.000000 0.000000   948:    my $self = shift;
        0 0.000000 0.000000   949:    # return "";  # disable
        0 0.000000 0.000000   950:    my ($priority) = ($_[0] =~ /^\d+$/) ?
        0 0.000000 0.000000   951: $self->debug(2, "priority'ing ($priority)")
        0 0.000000 0.000000   952: my $pre = getpriority(0, 0);
            ================ SmallProf version 0.9 ================
                        Profile of ..//Perlbug/Base.pm                 Page 82
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   953: setpriority(0, 0, $priority);
        0 0.000000 0.000000   954: my $post = getpriority(0, 0);
        0 0.000000 0.000000   955: $self->debug(2, "Priority: pre ($pre), post
        0 0.000000 0.000000   956: return $self;
        0 0.000000 0.000000   957:}
        0 0.000000 0.000000   958:
        0 0.000000 0.000000   959:
        0 0.000000 0.000000   960:=item set_user
        0 0.000000 0.000000   961:
        0 0.000000 0.000000   962:
        0 0.000000 0.000000   963:
        0 0.000000 0.000000   964:
        0 0.000000 0.000000   965:
        1 0.000000 0.000000   966:sub set_user {
        1 0.000005 0.000000   967:    my $self = shift; # ignored
        1 0.000005 0.000000   968:    my $user = shift;
        1 0.001034 0.000000   969:    my $oname  = getpwuid($<);
        1 0.000059 0.000000   970:    my $original = qq|orig($oname, $<,
        1 0.000398 0.000000   971:    my @data = getpwnam($user);
        1 0.000100 0.000000   972:    ($>, $), $<, $() = ($data[2], $data[3],
        1 0.000314 0.000000   973:    my $pname  = getpwuid($>);
        1 0.000046 0.000000   974:    my $post = qq|curr($pname, $<, [$(])|;
        1 0.000049 0.010000   975: return $self;
        0 0.000000 0.000000   976:}
        0 0.000000 0.000000   977:
        0 0.000000 0.000000   978:
        0 0.000000 0.000000   979:=item read
        0 0.000000 0.000000   980:
        0 0.000000 0.000000   981:
        0 0.000000 0.000000   982:
        0 0.000000 0.000000   983:
        0 0.000000 0.000000   984:
        0 0.000000 0.000000   985:
        0 0.000000 0.000000   986:
        0 0.000000 0.000000   987:sub read {
        0 0.000000 0.000000   988:    my $self = shift;
        0 0.000000 0.000000   989: my $tgt  = shift;
        0 0.000000 0.000000   990:
        0 0.000000 0.000000   991: my $file = $self->target2file($tgt);
        0 0.000000 0.000000   992: if (!(-e $file)) {
        0 0.000000 0.000000   993:  $self->error("can't read duff target($tgt)
        0 0.000000 0.000000   994: } else {
        0 0.000000 0.000000   995:  my $o_file = Perlbug::File->new($file,
        0 0.000000 0.000000   996:        if (!defined ($o_file)) {
        0 0.000000 0.000000   997:            $self->error("failed to prep read
        0 0.000000 0.000000   998:        } else {
        0 0.000000 0.000000   999:   return $o_file->read();
        0 0.000000 0.000000  1000:        }
        0 0.000000 0.000000  1001: }
        0 0.000000 0.000000  1002:
        0 0.000000 0.000000  1003: return ();
        0 0.000000 0.000000  1004:}
        0 0.000000 0.000000  1005:
        0 0.000000 0.000000  1006:
        0 0.000000 0.000000  1007:=item target2file
        0 0.000000 0.000000  1008:
            ================ SmallProf version 0.9 ================
                        Profile of ..//Perlbug/Base.pm                 Page 83
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000  1009:
        0 0.000000 0.000000  1010:
        0 0.000000 0.000000  1011:
        0 0.000000 0.000000  1012:
        0 0.000000 0.000000  1013:
        0 0.000000 0.000000  1014:
        0 0.000000 0.000000  1015:sub target2file {
        0 0.000000 0.000000  1016: my $self = shift;
        0 0.000000 0.000000  1017: my $tgt  = shift;
        0 0.000000 0.000000  1018: my $file = '';
        0 0.000000 0.000000  1019:
        0 0.000000 0.000000  1020: if ($tgt !~ /\w+/) {
        0 0.000000 0.000000  1021:  $self->error("can't remap duff
        0 0.000000 0.000000  1022: } else {
        0 0.000000 0.000000  1023:  $file = $self->directory('text').$self-
        0 0.000000 0.000000  1024: }
        0 0.000000 0.000000  1025:
        0 0.000000 0.000000  1026: return $file;
        0 0.000000 0.000000  1027:}
        0 0.000000 0.000000  1028:
        0 0.000000 0.000000  1029:
        0 0.000000 0.000000  1030:=item clean_cache
        0 0.000000 0.000000  1031:
        0 0.000000 0.000000  1032:
        0 0.000000 0.000000  1033:
        0 0.000000 0.000000  1034:
        0 0.000000 0.000000  1035:
        0 0.000000 0.000000  1036:
        0 0.000000 0.000000  1037:
        0 0.000000 0.000000  1038:
        0 0.000000 0.000000  1039:
        0 0.000000 0.000000  1040:
        0 0.000000 0.000000  1041:
        0 0.000000 0.000000  1042:
        0 0.000000 0.000000  1043:
        0 0.000000 0.000000  1044:
        0 0.000000 0.000000  1045:
        3 0.000000 0.000000  1046:sub clean_cache {
        3 0.000015 0.000000  1047: my $self = shift;
        3 0.000017 0.000000  1048: my $tgt  = shift;
        3 0.000016 0.000000  1049: my $force= shift || '';
        0 0.000000 0.000000  1050:
        3 0.000041 0.000000  1051: if ($tgt !~ /\w+/) {
        0 0.000000 0.000000  1052:  $self->error("requires target($tgt) to
        0 0.000000 0.000000  1053: } else {
        3 0.000015 0.000000  1054:  if (ref($tgt) eq 'ARRAY') { # flush
        1 0.000007 0.000000  1055:   %CACHE_OBJECT = ();
        1 0.000005 0.000000  1056:   %CACHE_SQL    = ();
        1 0.000007 0.000000  1057:   %CACHE_TIME   = ();
        0 0.000000 0.000000  1058:  } else {
        2 0.000007 0.000000  1059:   %CACHE_OBJECT = () if $tgt =~ /object/i &&
        2 0.000146 0.000000  1060:   %CACHE_SQL    = () if $tgt =~ /sql/i  &&
        2 0.000011 0.000000  1061:   %CACHE_TIME   = () if $tgt =~ /time/i  &&
        0 0.000000 0.000000  1062:  }
        0 0.000000 0.000000  1063: }
        0 0.000000 0.000000  1064:
            ================ SmallProf version 0.9 ================
                        Profile of ..//Perlbug/Base.pm                 Page 84
       =================================================================
    count wall tm  cpu time line
        3 0.000179 0.000000  1065:    return $self;
        0 0.000000 0.000000  1066:}
        0 0.000000 0.000000  1067:
        0 0.000000 0.000000  1068:
        0 0.000000 0.000000  1069:=item get_list
        0 0.000000 0.000000  1070:
        0 0.000000 0.000000  1071:
        0 0.000000 0.000000  1072:
        0 0.000000 0.000000  1073:
        0 0.000000 0.000000  1074:
        0 0.000000 0.000000  1075:
        0 0.000000 0.000000  1076:
        0 0.000000 0.000000  1077:
        0 0.000000 0.000000  1078:
      311 0.000000 0.000000  1079:sub get_list {
      311 0.001485 0.000000  1080: my $self = shift;
      311 0.001923 0.020000  1081: my $sql  = shift;
      311 0.001461 0.000000  1082: my $refresh = shift || '';
        0 0.000000 0.000000  1083:
      311 0.001984 0.000000  1084: my $a_info = [];
      311 0.002178 0.000000  1085: my $a_cache = $CACHE_SQL{$sql}; # unless
        0 0.000000 0.000000  1086: # my $a_info = (ref($a_cache) eq 'ARRAY' &&
        0 0.000000 0.000000  1087:
        0 0.000000 0.000000  1088: # if (ref($a_cache) eq 'ARRAY') {
      311 0.002107 0.030000  1089: if (defined($a_cache) && ref($a_cache) eq
      196 0.001119 0.010000  1090:  $a_info = $a_cache;
      392 0.016660 0.020000  1091:  $self->debug('s', "CACHE SQL: $sql ->
        0 0.000000 0.000000  1092: } else {
      115 0.008400 0.010000  1093:  my $csr = $self->db->query($sql);
      115 0.000525 0.010000  1094:  if (!defined($csr)) {
        0 0.000000 0.000000  1095:      $self->error("undefined cursor for
        0 0.000000 0.000000  1096:  } else {
     3977 0.289218 0.280000  1097:      while ( (my $info) = $csr->fetchrow) {
     7724 0.040844 0.160000  1098:       push (@{$a_info}, $info) if defined
        0 0.000000 0.000000  1099:      }
      115 0.008827 0.000000  1100:      $self->debug('S', 'found '.$csr-
      115 0.020498 0.040000  1101:      my $res = $csr->finish;
        0 0.000000 0.000000  1102:  }
        0 0.000000 0.000000  1103: }
        0 0.000000 0.000000  1104:
      311 0.024202 0.060000  1105: $CACHE_SQL{$sql} = $a_info if $self-
        0 0.000000 0.000000  1106: # $self->debug('S', $a_info) if $DEBUG;
      622 0.014542 0.030000  1107: return @{$a_info};
        0 0.000000 0.000000  1108:}
        0 0.000000 0.000000  1109:
        0 0.000000 0.000000  1110:
        0 0.000000 0.000000  1111:=item get_data
        0 0.000000 0.000000  1112:
        0 0.000000 0.000000  1113:
        0 0.000000 0.000000  1114:
        0 0.000000 0.000000  1115:
        0 0.000000 0.000000  1116:
        0 0.000000 0.000000  1117:
        0 0.000000 0.000000  1118:
        0 0.000000 0.000000  1119:
        0 0.000000 0.000000  1120:
            ================ SmallProf version 0.9 ================
                        Profile of ..//Perlbug/Base.pm                 Page 85
       =================================================================
    count wall tm  cpu time line
       50 0.000000 0.000000  1121:sub get_data {
       50 0.000249 0.000000  1122: my $self = shift;
       50 0.000224 0.000000  1123: my $sql  = shift;
       50 0.000317 0.000000  1124: my $refresh = shift || '';
        0 0.000000 0.000000  1125:
       50 0.000312 0.000000  1126: my $a_info = [];
       50 0.000302 0.000000  1127: my $a_cache = $CACHE_SQL{$sql}; # unless
        0 0.000000 0.000000  1128:
       50 0.000242 0.000000  1129: if (defined($a_cache) && ref($a_cache) eq
       12 0.000056 0.000000  1130:  $a_info = $a_cache;
       12 0.000919 0.000000  1131:  $self->debug('s', "CACHE SQL: $sql") if
        0 0.000000 0.000000  1132: } else {
       38 0.002758 0.000000  1133:  my $csr = $self->db->query($sql);
       38 0.000146 0.000000  1134:   if (!defined($csr)) {
        0 0.000000 0.000000  1135:         $self->error("undefined cursor for
        0 0.000000 0.000000  1136:     } else {
      206 0.023238 0.030000  1137:      while (my $info = $csr-
      168 0.001794 0.000000  1138:          if (ref($info) eq 'HASH') {
      336 0.001864 0.010000  1139:     push (@{$a_info}, $info) if defined
        0 0.000000 0.000000  1140:             }
        0 0.000000 0.000000  1141:      }
        0 0.000000 0.000000  1142:   # $self->rows($sth);
       38 0.003019 0.000000  1143:      $self->debug('S', 'found '.$csr-
       38 0.006976 0.010000  1144:      my $res = $csr->finish
        0 0.000000 0.000000  1145:     }
        0 0.000000 0.000000  1146: }
       50 0.003902 0.000000  1147: $CACHE_SQL{$sql} = $a_info if $self-
        0 0.000000 0.000000  1148: # $self->debug('S', $a_info) if $DEBUG;
      100 0.001682 0.020000  1149: return @{$a_info};
        0 0.000000 0.000000  1150:}
        0 0.000000 0.000000  1151:
        0 0.000000 0.000000  1152:
        0 0.000000 0.000000  1153:=item exec
        0 0.000000 0.000000  1154:
        0 0.000000 0.000000  1155:
        0 0.000000 0.000000  1156:
        0 0.000000 0.000000  1157:
        0 0.000000 0.000000  1158:
        0 0.000000 0.000000  1159:
        0 0.000000 0.000000  1160:
        4 0.000000 0.000000  1161:sub exec {
        4 0.000022 0.000000  1162: my $self = shift;
        4 0.000248 0.000000  1163: my $sql = shift;
        0 0.000000 0.000000  1164:
        4 0.000300 0.000000  1165: $self->debug('x', $sql) if $DEBUG;
        4 0.000285 0.000000  1166: my $sth = $self->db->query($sql);
        4 0.000011 0.000000  1167: if (defined($sth)) {
        4 0.000401 0.000000  1168:  my $rows = $sth->rows | $sth->affected_rows
        4 0.000370 0.000000  1169:  $self->debug('X', "affected rows($rows)")
        0 0.000000 0.000000  1170: } else {
        0 0.000000 0.000000  1171:     $self->error("Exec ($sql) error:
        0 0.000000 0.000000  1172: }
        0 0.000000 0.000000  1173:
        4 0.000429 0.000000  1174: return $sth;
        0 0.000000 0.000000  1175:}
        0 0.000000 0.000000  1176:
            ================ SmallProf version 0.9 ================
                        Profile of ..//Perlbug/Base.pm                 Page 86
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000  1177:
        0 0.000000 0.000000  1178:=item exists
        0 0.000000 0.000000  1179:
        0 0.000000 0.000000  1180:
        0 0.000000 0.000000  1181:
        0 0.000000 0.000000  1182:
        0 0.000000 0.000000  1183:
        0 0.000000 0.000000  1184:sub exists {
        0 0.000000 0.000000  1185: my $self = shift;
        0 0.000000 0.000000  1186: my $bid = shift || '';
        0 0.000000 0.000000  1187:
        0 0.000000 0.000000  1188: my $i_ok = ($self->object('bug')-
        0 0.000000 0.000000  1189:
        0 0.000000 0.000000  1190: return $i_ok;
        0 0.000000 0.000000  1191:}
        0 0.000000 0.000000  1192:
        0 0.000000 0.000000  1193:
        0 0.000000 0.000000  1194:=item notify_cc
        0 0.000000 0.000000  1195:
        0 0.000000 0.000000  1196:
        0 0.000000 0.000000  1197:
        0 0.000000 0.000000  1198:
        0 0.000000 0.000000  1199:
        0 0.000000 0.000000  1200:
        0 0.000000 0.000000  1201:
        0 0.000000 0.000000  1202:sub notify_cc {
        0 0.000000 0.000000  1203: my $self  = shift;
        0 0.000000 0.000000  1204: my $bid   = shift;
        0 0.000000 0.000000  1205: my $orig  = shift || '';
        0 0.000000 0.000000  1206:
        0 0.000000 0.000000  1207: my $i_ok  = 1;
        0 0.000000 0.000000  1208: # return $i_ok; # rjsf temp
        0 0.000000 0.000000  1209:
        0 0.000000 0.000000  1210: $self->clean_cache([]);
        0 0.000000 0.000000  1211: my $o_bug = $self->object('bug');
        0 0.000000 0.000000  1212:
        0 0.000000 0.000000  1213: if (!($self->ok($bid) and $self-
        0 0.000000 0.000000  1214:  $i_ok = 0;
        0 0.000000 0.000000  1215:  $self->error( "notify_cc requires a valid
        0 0.000000 0.000000  1216: } else {
        0 0.000000 0.000000  1217:  my $bugdb = $self->email('bugdb');
        0 0.000000 0.000000  1218:  my $url = 'http://'.$self-
        0 0.000000 0.000000  1219:  my ($bug) = $o_bug->read($bid)-
        0 0.000000 0.000000  1220:  my $status = qq|The status of bug($bid) has
        0 0.000000 0.000000  1221:Original status:
        0 0.000000 0.000000  1222:$orig
        0 0.000000 0.000000  1223:
        0 0.000000 0.000000  1224:Current status:
        0 0.000000 0.000000  1225:|;
        0 0.000000 0.000000  1226:  $status .= $bug;
        0 0.000000 0.000000  1227:  $status .= qq|
        0 0.000000 0.000000  1228:To see current data on this bug($bid) send an
        0 0.000000 0.000000  1229:
        0 0.000000 0.000000  1230: To: $bugdb
        0 0.000000 0.000000  1231: Subject: -B $bid
        0 0.000000 0.000000  1232:
            ================ SmallProf version 0.9 ================
                        Profile of ..//Perlbug/Base.pm                 Page 87
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000  1233:Or to see this data on the web, visit:
        0 0.000000 0.000000  1234:
        0 0.000000 0.000000  1235: $url
        0 0.000000 0.000000  1236:
        0 0.000000 0.000000  1237:  |;
        0 0.000000 0.000000  1238:# rjsf: The update was made with this note:
        0 0.000000 0.000000  1239:  my ($addr) = $self->object('bug')-
        0 0.000000 0.000000  1240:  my ($o_to) = Mail::Address->parse($addr);
        0 0.000000 0.000000  1241:  my ($to) = (ref($o_to)) ? $o_to->format :
        0 0.000000 0.000000  1242:  my @ccs = $self->bugid_2_addresses($bid,
        0 0.000000 0.000000  1243:  use Perlbug::Interface::Email; # yek
        0 0.000000 0.000000  1244:  my $o_email = Perlbug::Interface::Email-
        0 0.000000 0.000000  1245:  $o_email->_original_mail($o_email-
        0 0.000000 0.000000  1246:  my $o_notify = $o_email->get_header;
        0 0.000000 0.000000  1247:  $o_notify->add('To', $to);
        0 0.000000 0.000000  1248:  # $o_notify->add('Cc', join(', ', @ccs))
        0 0.000000 0.000000  1249:  $o_notify->add('From', $self-
        0 0.000000 0.000000  1250:  $o_notify->add('Subject', $self-
        0 0.000000 0.000000  1251:  $i_ok = $o_email->send_mail($o_notify,
        0 0.000000 0.000000  1252:  $self->debug(3, "notified($i_ok) <-
        0 0.000000 0.000000  1253: }
        0 0.000000 0.000000  1254:
        0 0.000000 0.000000  1255: return $i_ok
        0 0.000000 0.000000  1256:}
        0 0.000000 0.000000  1257:
        0 0.000000 0.000000  1258:
        0 0.000000 0.000000  1259:sub todo {
        0 0.000000 0.000000  1260: my $self  = shift;
        0 0.000000 0.000000  1261: my $todo  = shift;
        0 0.000000 0.000000  1262:
        0 0.000000 0.000000  1263: my $i_ok  = 1;
        0 0.000000 0.000000  1264: if ($todo !~ /\w+/) {
        0 0.000000 0.000000  1265:  $i_ok = 0;
        0 0.000000 0.000000  1266:  $self->error("requires a something
        0 0.000000 0.000000  1267: } else {
        0 0.000000 0.000000  1268:  my $fmt = $self->current('format');
        0 0.000000 0.000000  1269:  $self->current({'format', 'a'});
        0 0.000000 0.000000  1270:  my $to = $self->system('maintainer');
        0 0.000000 0.000000  1271:  require Perlbug::Interface::Email; # yek
        0 0.000000 0.000000  1272:  my $o_email = Perlbug::Interface::Email-
        0 0.000000 0.000000  1273:  my $o_todo = $o_email->get_header;
        0 0.000000 0.000000  1274:  $o_todo->add('To', $to);
        0 0.000000 0.000000  1275:  $o_todo->add('From', $self-
        0 0.000000 0.000000  1276:  $o_todo->add('Subject', $self-
        0 0.000000 0.000000  1277:  $i_ok = $o_email->send_mail($o_todo,
        0 0.000000 0.000000  1278:  $self->debug(3, "todo'd($i_ok) <- ($todo)")
        0 0.000000 0.000000  1279:  $self->current({'format', $fmt});
        0 0.000000 0.000000  1280: }
        0 0.000000 0.000000  1281:
        0 0.000000 0.000000  1282: return $i_ok
        0 0.000000 0.000000  1283:}
        0 0.000000 0.000000  1284:
        0 0.000000 0.000000  1285:
        0 0.000000 0.000000  1286:=item track
        0 0.000000 0.000000  1287:
        0 0.000000 0.000000  1288:
            ================ SmallProf version 0.9 ================
                        Profile of ..//Perlbug/Base.pm                 Page 88
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000  1289:
        0 0.000000 0.000000  1290:
        0 0.000000 0.000000  1291:
        0 0.000000 0.000000  1292:
        0 0.000000 0.000000  1293:
        0 0.000000 0.000000  1294:sub track { # could migrate to defensive
        0 0.000000 0.000000  1295: my $self  = shift;
        0 0.000000 0.000000  1296:     my $key     = shift;
        0 0.000000 0.000000  1297: my $id  = shift;
        0 0.000000 0.000000  1298: my $entry = shift; # cmd
        0 0.000000 0.000000  1299:
        0 0.000000 0.000000  1300: my $userid  = $self->isadmin;
        0 0.000000 0.000000  1301: my $quoted  = $self->quote($entry);
        0 0.000000 0.000000  1302:
        0 0.000000 0.000000  1303: $self->debug(3, "key($key), id($id),
        0 0.000000 0.000000  1304: # track = 0 if $key =~ /log/i || $self-
        0 0.000000 0.000000  1305: my $insert = qq|INSERT INTO pb_log SET
        0 0.000000 0.000000  1306:  created=SYSDATE(),
        0 0.000000 0.000000  1307:  modified=SYSDATE(),
        0 0.000000 0.000000  1308:  entry=$quoted,
        0 0.000000 0.000000  1309:  userid='$userid',
        0 0.000000 0.000000  1310:  objectid='$id',
        0 0.000000 0.000000  1311:  objectkey='$key'
        0 0.000000 0.000000  1312: |;
        0 0.000000 0.000000  1313:
        0 0.000000 0.000000  1314: my $i_ok = 1;
        0 0.000000 0.000000  1315: my $res = $self->db->query($insert);
        0 0.000000 0.000000  1316:   if (!defined($res)) {
        0 0.000000 0.000000  1317:  $i_ok = 0;
        0 0.000000 0.000000  1318:  $self->error("track failure ($insert) ->
        0 0.000000 0.000000  1319: }
        0 0.000000 0.000000  1320:
        0 0.000000 0.000000  1321: return $i_ok;
        0 0.000000 0.000000  1322:}
        0 0.000000 0.000000  1323:
        0 0.000000 0.000000  1324:
        0 0.000000 0.000000  1325:=item ck822
        0 0.000000 0.000000  1326:
        0 0.000000 0.000000  1327:
        0 0.000000 0.000000  1328:
        0 0.000000 0.000000  1329:
        0 0.000000 0.000000  1330:
        0 0.000000 0.000000  1331:
        0 0.000000 0.000000  1332:
        0 0.000000 0.000000  1333:sub ck822 { # RFC internet address checker
        0 0.000000 0.000000  1334:    my $self = shift;
        0 0.000000 0.000000  1335:    my $addr = shift;
        0 0.000000 0.000000  1336:
        0 0.000000 0.000000  1337:    my $isok = '';
        0 0.000000 0.000000  1338:    my $i_ok = 0;
        0 0.000000 0.000000  1339: local $_;
        0 0.000000 0.000000  1340:
        0 0.000000 0.000000  1341:    # ck822 -- check whether address is valid
        0 0.000000 0.000000  1342:    # tchrist@perl.com
        0 0.000000 0.000000  1343:    #
        0 0.000000 0.000000  1344:    # pattern developed in program by
            ================ SmallProf version 0.9 ================
                        Profile of ..//Perlbug/Base.pm                 Page 89
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000  1345:    # see "Mastering Regular Expressions"
        0 0.000000 0.000000  1346:
        0 0.000000 0.000000  1347:    # this will error on something like
        0 0.000000 0.000000  1348:    # even though dns wants it, rfc822 hates
        0 0.000000 0.000000  1349:
        0 0.000000 0.000000  1350:    ($isok = <<'EOSCARY') =~ s/\n//g;
        0 0.000000 0.000000  1351:(?:[\040\t]|\((?:[^\\\x80-
        0 0.000000 0.000000  1352:\015()]|\\[^\x80-
        0 0.000000 0.000000  1353:xff]+(?![^(\040)<>@,;:".\\\[\]\000-\037\x80-
        0 0.000000 0.000000  1354:]|\\[^\x80-
        0 0.000000 0.000000  1355:f]|\((?:[^\\\x80-\xff\n\015()]|\\[^\x80-
        0 0.000000 0.000000  1356:^\\\x80-\xff\n\015()]|\\[^\x80-
        0 0.000000 0.000000  1357:xff])*\))*\))*(?:[^(\040)<>@,;:".\\\[\]\000-
        0 0.000000 0.000000  1358::".\\\[\]\000-\037\x80-\xff])|"(?:[^\\\x80-
        0 0.000000 0.000000  1359:*(?:[\040\t]|\((?:[^\\\x80-
        0 0.000000 0.000000  1360:n\015()]|\\[^\x80-
        0 0.000000 0.000000  1361:\[^\x80-\xff]|\((?:[^\\\x80-
        0 0.000000 0.000000  1362:0)<>@,;:".\\\[\]\000-\037\x80-
        0 0.000000 0.000000  1363:\xff])|\[(?:[^\\\x80-
        0 0.000000 0.000000  1364::[^\\\x80-\xff\n\015()]|\\[^\x80-
        0 0.000000 0.000000  1365:-\xff])*\))*\))*\.(?:[\040\t]|\((?:[^\\\x80-
        0 0.000000 0.000000  1366:(?:[^\\\x80-\xff\n\015()]|\\[^\x80-
        0 0.000000 0.000000  1367:\000-\037\x80-
        0 0.000000 0.000000  1368:\x80-\xff\n\015\[\]]|\\[^\x80-
        0 0.000000 0.000000  1369:37\x80-\xff]+(?![^(\040)<>@,;:".\\\[\]\000-
        0 0.000000 0.000000  1370:f\n\015"]|\\[^\x80-
        0 0.000000 0.000000  1371:7]|\((?:[^\\\x80-\xff\n\015()]|\\[^\x80-
        0 0.000000 0.000000  1372:\[^\x80-\xff])*\))*\)|"(?:[^\\\x80-
        0 0.000000 0.000000  1373:0\t]|\((?:[^\\\x80-\xff\n\015()]|\\[^\x80-
        0 0.000000 0.000000  1374:|\\[^\x80-
        0 0.000000 0.000000  1375:80-\xff]|\((?:[^\\\x80-
        0 0.000000 0.000000  1376:,;:".\\\[\]\000-\037\x80-
        0 0.000000 0.000000  1377:)|\[(?:[^\\\x80-\xff\n\015\[\]]|\\[^\x80-
        0 0.000000 0.000000  1378:\x80-\xff\n\015()]|\\[^\x80-
        0 0.000000 0.000000  1379:])*\))*\))*\.(?:[\040\t]|\((?:[^\\\x80-
        0 0.000000 0.000000  1380:\\\x80-\xff\n\015()]|\\[^\x80-
        0 0.000000 0.000000  1381:\037\x80-\xff]+(?![^(\040)<>@,;:".\\\[\]\000-
        0 0.000000 0.000000  1382:\xff\n\015\[\]]|\\[^\x80-
        0 0.000000 0.000000  1383:5()]|\\[^\x80-\xff]|\((?:[^\\\x80-
        0 0.000000 0.000000  1384::[\040\t]|\((?:[^\\\x80-
        0 0.000000 0.000000  1385:15()]|\\[^\x80-
        0 0.000000 0.000000  1386:\x80-\xff]|\((?:[^\\\x80-
        0 0.000000 0.000000  1387:>@,;:".\\\[\]\000-\037\x80-
        0 0.000000 0.000000  1388:f])|\[(?:[^\\\x80-\xff\n\015\[\]]|\\[^\x80-
        0 0.000000 0.000000  1389:\\\x80-\xff\n\015()]|\\[^\x80-
        0 0.000000 0.000000  1390:ff])*\))*\))*\.(?:[\040\t]|\((?:[^\\\x80-
        0 0.000000 0.000000  1391:[^\\\x80-\xff\n\015()]|\\[^\x80-
        0 0.000000 0.000000  1392:0-\037\x80-
        0 0.000000 0.000000  1393:0-\xff\n\015\[\]]|\\[^\x80-
        0 0.000000 0.000000  1394:015()]|\\[^\x80-\xff]|\((?:[^\\\x80-
        0 0.000000 0.000000  1395:?(?:[^(\040)<>@,;:".\\\[\]\000-\037\x80-
        0 0.000000 0.000000  1396:-\037\x80-\xff])|"(?:[^\\\x80-
        0 0.000000 0.000000  1397:|\((?:[^\\\x80-\xff\n\015()]|\\[^\x80-
        0 0.000000 0.000000  1398:^\x80-
        0 0.000000 0.000000  1399:f]|\((?:[^\\\x80-\xff\n\015()]|\\[^\x80-
        0 0.000000 0.000000  1400:\\[\]\000-\037\x80-
            ================ SmallProf version 0.9 ================
                        Profile of ..//Perlbug/Base.pm                 Page 90
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000  1401:[^\\\x80-\xff\n\015"]|\\[^\x80-
        0 0.000000 0.000000  1402:015()]|\\[^\x80-\xff]|\((?:[^\\\x80-
        0 0.000000 0.000000  1403:(?:[\040\t]|\((?:[^\\\x80-
        0 0.000000 0.000000  1404:\015()]|\\[^\x80-
        0 0.000000 0.000000  1405:]+(?![^(\040)<>@,;:".\\\[\]\000-\037\x80-
        0 0.000000 0.000000  1406:]]|\\[^\x80-
        0 0.000000 0.000000  1407:xff]|\((?:[^\\\x80-\xff\n\015()]|\\[^\x80-
        0 0.000000 0.000000  1408::[^\\\x80-\xff\n\015()]|\\[^\x80-
        0 0.000000 0.000000  1409:-
        0 0.000000 0.000000  1410:,;:".\\\[\]\000-\037\x80-
        0 0.000000 0.000000  1411:])*\]))*(?:[\040\t]|\((?:[^\\\x80-
        0 0.000000 0.000000  1412:0-\xff\n\015()]|\\[^\x80-
        0 0.000000 0.000000  1413:015()]|\\[^\x80-\xff]|\((?:[^\\\x80-
        0 0.000000 0.000000  1414:EOSCARY
        0 0.000000 0.000000  1415:
        0 0.000000 0.000000  1416:    if ($addr =~ /^${isok}$/o) {
        0 0.000000 0.000000  1417:        $self->debug(3, "rfc822 succeeds on
        0 0.000000 0.000000  1418:        $i_ok = 1;
        0 0.000000 0.000000  1419:    } else {
        0 0.000000 0.000000  1420:        $self->debug(0, "rfc822 failure on
        0 0.000000 0.000000  1421:        $i_ok = 0;
        0 0.000000 0.000000  1422:    }
        0 0.000000 0.000000  1423:
        0 0.000000 0.000000  1424: return $i_ok;
        0 0.000000 0.000000  1425:}
        0 0.000000 0.000000  1426:
        0 0.000000 0.000000  1427:
        0 0.000000 0.000000  1428:=item htpasswd
        0 0.000000 0.000000  1429:
        0 0.000000 0.000000  1430:
        0 0.000000 0.000000  1431:
        0 0.000000 0.000000  1432:
        0 0.000000 0.000000  1433:
        0 0.000000 0.000000  1434:
        0 0.000000 0.000000  1435:
        0 0.000000 0.000000  1436:
        0 0.000000 0.000000  1437:
        0 0.000000 0.000000  1438:sub htpasswd { #
        0 0.000000 0.000000  1439:    my $self = shift;
        0 0.000000 0.000000  1440:    my $user = shift;
        0 0.000000 0.000000  1441:    my $pass = shift;
        0 0.000000 0.000000  1442:    my $htpw = $self-
        0 0.000000 0.000000  1443:    $self->debug(1, "htpasswd($user, $pass)
        0 0.000000 0.000000  1444:    my @data = $self->copy($htpw,
        0 0.000000 0.000000  1445:    my $i_ok = 1;
        0 0.000000 0.000000  1446:    if (($i_ok == 1) or (scalar(@data) >= 1))
        0 0.000000 0.000000  1447:  my $htpass = join('', grep(/\w+/, @data));
        0 0.000000 0.000000  1448:        $self->debug(2, "Existing htpasswd
        0 0.000000 0.000000  1449:        if (($user =~ /^\w+$/) && ($pass =~
        0 0.000000 0.000000  1450:            $self->debug(1, "HTP: working
        0 0.000000 0.000000  1451:            if ($htpass =~ /^$user:(.+)$/m) {
        0 0.000000 0.000000  1452:                my $found = $1;
        0 0.000000 0.000000  1453:                $self->debug(3,
        0 0.000000 0.000000  1454:                if ($found ne $pass) {
        0 0.000000 0.000000  1455:                    $htpass =~
        0 0.000000 0.000000  1456:                    $self->debug(1, "HTP:
            ================ SmallProf version 0.9 ================
                        Profile of ..//Perlbug/Base.pm                 Page 91
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000  1457:                } else {
        0 0.000000 0.000000  1458:                    $self->debug(1, "Not
        0 0.000000 0.000000  1459:                }
        0 0.000000 0.000000  1460:            } else {
        0 0.000000 0.000000  1461:                $htpass .= "$user:$pass\n";
        0 0.000000 0.000000  1462:                $self->debug(1, "HTP: adding
        0 0.000000 0.000000  1463:            }
        0 0.000000 0.000000  1464:            $htpass =~ s/^\s*$//mg;
        0 0.000000 0.000000  1465:   $i_ok = $self->create($htpw, $htpass,
        0 0.000000 0.000000  1466:            $self->debug(3, "Modified($i_ok)
        0 0.000000 0.000000  1467:        } else {
        0 0.000000 0.000000  1468:   $i_ok = 0;
        0 0.000000 0.000000  1469:            my $err = "Can't open htpasswd
        0 0.000000 0.000000  1470:            $self->error($err);
        0 0.000000 0.000000  1471:     }
        0 0.000000 0.000000  1472:    } else {
        0 0.000000 0.000000  1473:        $self->error("copy($htpw,
        0 0.000000 0.000000  1474:    }
        0 0.000000 0.000000  1475:    return $i_ok; # (wantarray ? @data :
        0 0.000000 0.000000  1476:}
        0 0.000000 0.000000  1477:
        0 0.000000 0.000000  1478:
        0 0.000000 0.000000  1479:=item clean_up
        0 0.000000 0.000000  1480:
        0 0.000000 0.000000  1481:
        0 0.000000 0.000000  1482:
        0 0.000000 0.000000  1483:
        0 0.000000 0.000000  1484:
        0 0.000000 0.000000  1485:
        0 0.000000 0.000000  1486:
        1 0.000000 0.000000  1487:sub clean_up {
        1 0.000008 0.000000  1488:    my $self = shift;
        1 0.000107 0.000000  1489:    my $max  = shift || $self-
        1 0.000087 0.000000  1490:    $self->debug(3, "clean_up($max)") if
        1 0.000003 0.000000  1491: my $found = 0;
        1 0.000003 0.000000  1492:    my $cleaned = 0;
        0 0.000000 0.000000  1493:
        1 0.000088 0.000000  1494: $self->tell_time() if $DEBUG;
        0 0.000000 0.000000  1495:
        1 0.000089 0.000000  1496: my $o_range = $self->object('range');
        1 0.000103 0.000000  1497: my @defunct = $o_range-
        1 0.000136 0.000000  1498: $self->debug(2, "deletable
        0 0.000000 0.000000  1499: # $o_range->delete(\@defunct);
        0 0.000000 0.000000  1500: # $o_range->relation('bug')-
        1 0.000009 0.000000  1501: if ($max =~ /^\d+/) {
        3 0.000030 0.000000  1502:  foreach my $DIR (qw(logs temp)) { #
        2 0.000220 0.000000  1503:   my $dir = $self-
        2 0.000158 0.000000  1504:   $self->debug(4, "cleaning($dir)") if
        2 0.000106 0.000000  1505:         if (-d $dir) {
        2 0.000009 0.000000  1506:       my ($remcnt, $norem) = (0, 0);
        2 0.000118 0.000000  1507:       opendir DIR, $dir or $self-
        2 0.000132 0.000000  1508:       my @files = grep(/\w+\.\w+$/, readdir
        2 0.000016 0.000000  1509:       $found += scalar(@files);
        2 0.000171 0.000000  1510:    $self->debug(4, 'Found:
        2 0.000009 0.000000  1511:       close DIR;
        5 0.000020 0.000000  1512:       foreach my $file (@files) {
            ================ SmallProf version 0.9 ================
                        Profile of ..//Perlbug/Base.pm                 Page 92
       =================================================================
    count wall tm  cpu time line
        3 0.000114 0.000000  1513:           next unless -f "$dir/$file";
        3 0.000020 0.000000  1514:           my $FILE = "$dir/$file";
        3 0.000081 0.000000  1515:           if (-M $FILE >= $max) { # remove
        2 0.000155 0.000000  1516:               if (!unlink($FILE)) {
        0 0.000000 0.000000  1517:                   $self->error("Unable to
        0 0.000000 0.000000  1518:                   $norem++;
        0 0.000000 0.000000  1519:               } else {
        2 0.000162 0.000000  1520:                   $self->debug(4, "Removed
        2 0.000005 0.000000  1521:                   $remcnt++;
        0 0.000000 0.000000  1522:               }
        0 0.000000 0.000000  1523:           } else {
        1 0.000079 0.000000  1524:               $self->debug(4, "Ignoring
        0 0.000000 0.000000  1525:           }
        0 0.000000 0.000000  1526:       }
        2 0.000170 0.000000  1527:             $self->debug(4, "Process ($$):
        2 0.000020 0.000000  1528:             $cleaned += $remcnt;
        0 0.000000 0.000000  1529:         } else {
        0 0.000000 0.000000  1530:             $self->error("Can't find
        0 0.000000 0.000000  1531:         }
        0 0.000000 0.000000  1532:  }
        0 0.000000 0.000000  1533:    }
        1 0.000150 0.000000  1534:    $self->debug(2, "Cleaned up: age($max) ->
        0 0.000000 0.000000  1535: #
        0 0.000000 0.000000  1536:}
        0 0.000000 0.000000  1537:
        0 0.000000 0.000000  1538:
        0 0.000000 0.000000  1539:=item tell_time
        0 0.000000 0.000000  1540:
        0 0.000000 0.000000  1541:
        0 0.000000 0.000000  1542:
        0 0.000000 0.000000  1543:
        0 0.000000 0.000000  1544:
        0 0.000000 0.000000  1545:
        0 0.000000 0.000000  1546:
        1 0.000000 0.000000  1547:sub tell_time {
        1 0.000006 0.000000  1548: my $self = shift;
        1 0.000088 0.000000  1549: my $now  = shift || Benchmark->new;
        0 0.000000 0.000000  1550:
        1 0.000010 0.000000  1551: $CACHE_TIME{'DONE'} = $now;
        0 0.000000 0.000000  1552:
        1 0.000005 0.000000  1553: my $start = $CACHE_TIME{'INIT'};
        1 0.000006 0.000000  1554: my $prep  = $CACHE_TIME{'PREP'};
        1 0.000006 0.000000  1555: my $load  = $CACHE_TIME{'LOAD'};
        1 0.000004 0.000000  1556: my $done  = $CACHE_TIME{'DONE'};
        1 0.000053 0.000000  1557: my $x = qq|start($start), prep($prep),
        0 0.000000 0.000000  1558:
        1 0.000080 0.000000  1559: my $started = timediff($prep, $start);
        1 0.000067 0.000000  1560: my $loaded  = timediff($load, $prep);
        1 0.000064 0.000000  1561: my $runtime = timediff($done, $load);
        1 0.000064 0.000000  1562: my $total   = timediff($done, $start);
        0 0.000000 0.000000  1563:
        5 0.000311 0.000000  1564: my $feedback = qq|$0
        0 0.000000 0.000000  1565: $x
        0 0.000000 0.000000  1566: Startup: @{[timestr($started)]}
        0 0.000000 0.000000  1567: Loaded : @{[timestr($loaded)]}
        0 0.000000 0.000000  1568: Runtime: @{[timestr($runtime)]}
            ================ SmallProf version 0.9 ================
                        Profile of ..//Perlbug/Base.pm                 Page 93
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000  1569: Alltook: @{[timestr($total)]}
        0 0.000000 0.000000  1570:          including $Perlbug::Database::SQL
        0 0.000000 0.000000  1571: |;
        0 0.000000 0.000000  1572:
        1 0.000110 0.000000  1573: $self->debug(0, $feedback) if $DEBUG;
        1 0.000109 0.000000  1574: return $self;
        0 0.000000 0.000000  1575:}
        0 0.000000 0.000000  1576:
        0 0.000000 0.000000  1577:
        0 0.000000 0.000000  1578:=item parse_str
        0 0.000000 0.000000  1579:
        0 0.000000 0.000000  1580:
        0 0.000000 0.000000  1581:
        0 0.000000 0.000000  1582:
        0 0.000000 0.000000  1583:
        0 0.000000 0.000000  1584:
        0 0.000000 0.000000  1585:
        0 0.000000 0.000000  1586:
        0 0.000000 0.000000  1587:
        0 0.000000 0.000000  1588:
        0 0.000000 0.000000  1589:
        0 0.000000 0.000000  1590:
        0 0.000000 0.000000  1591:
        0 0.000000 0.000000  1592:
        0 0.000000 0.000000  1593:
        0 0.000000 0.000000  1594:sub parse_str {
        0 0.000000 0.000000  1595: my $self = shift;
        0 0.000000 0.000000  1596: my $args = shift;
        0 0.000000 0.000000  1597: my @args = (ref($args) eq 'ARRAY') ?
        0 0.000000 0.000000  1598: @args = map { split(/(\s|_)+/, $_) } @args;
        0 0.000000 0.000000  1599:
        0 0.000000 0.000000  1600: my %cmds = (
        0 0.000000 0.000000  1601:  'bugids'   => [],
        0 0.000000 0.000000  1602:  'unknown'  => [],
        0 0.000000 0.000000  1603: );
        0 0.000000 0.000000  1604: my $i_ok = 1;
        0 0.000000 0.000000  1605:
        0 0.000000 0.000000  1606: my @flags = $self->things('flag');
        0 0.000000 0.000000  1607: my @names = map { $self->object($_)-
        0 0.000000 0.000000  1608:
        0 0.000000 0.000000  1609: my $o_bug = $self->object('bug');
        0 0.000000 0.000000  1610: ARG:
        0 0.000000 0.000000  1611: foreach my $arg (@args) {
        0 0.000000 0.000000  1612:  next ARG unless $arg =~ /\w+/;
        0 0.000000 0.000000  1613:  if ($o_bug->ok_ids([$arg])) { # bugid
        0 0.000000 0.000000  1614:   push(@{$cmds{'bugids'}}, $arg);
        0 0.000000 0.000000  1615:   $self->debug(2, "found bugid($arg)") if
        0 0.000000 0.000000  1616:  } elsif (grep(/^$arg/i, @names)) {
        0 0.000000 0.000000  1617:   foreach my $type (@flags) {     # flag
        0 0.000000 0.000000  1618:    my $o_obj = $self->object($type);
        0 0.000000 0.000000  1619:    my @types = $o_obj->col('name');
        0 0.000000 0.000000  1620:    if (grep(/^$arg/i, @types)) {   # type
        0 0.000000 0.000000  1621:     push(@{$cmds{$type}}, $arg);
        0 0.000000 0.000000  1622:     $self->debug(2, "found $type($arg)") if
        0 0.000000 0.000000  1623:    }
        0 0.000000 0.000000  1624:   }
            ================ SmallProf version 0.9 ================
                        Profile of ..//Perlbug/Base.pm                 Page 94
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000  1625:  } else {          # unknown
        0 0.000000 0.000000  1626:   push(@{$cmds{'unknown'}}, $arg);
        0 0.000000 0.000000  1627:   $self->debug(2, "ignoring arg($arg) as
        0 0.000000 0.000000  1628:  }
        0 0.000000 0.000000  1629: }
        0 0.000000 0.000000  1630: # print "in(@args), out-> ".Dumper(\%cmds);
        0 0.000000 0.000000  1631:
        0 0.000000 0.000000  1632: return %cmds;
        0 0.000000 0.000000  1633:}
        0 0.000000 0.000000  1634:
        0 0.000000 0.000000  1635:
        0 0.000000 0.000000  1636:$SIG{'INT'} = sub {
        0 0.000000 0.000000  1637: carp "Perlbug interupted: bye bye!";
        0 0.000000 0.000000  1638: exit(1);
        0 0.000000 0.000000  1639:};
        0 0.000000 0.000000  1640:
        0 0.000000 0.000000  1641:
        0 0.000000 0.000000  1642:=item bugid_2_addresses
        0 0.000000 0.000000  1643:
        0 0.000000 0.000000  1644:
        0 0.000000 0.000000  1645:
        0 0.000000 0.000000  1646:
        0 0.000000 0.000000  1647:
        0 0.000000 0.000000  1648:
        0 0.000000 0.000000  1649:
        0 0.000000 0.000000  1650:sub bugid_2_addresses {
        0 0.000000 0.000000  1651:    my $self  = shift;
        0 0.000000 0.000000  1652:    my $bid   = shift;
        0 0.000000 0.000000  1653:    my $context = shift || 'auto'; # or
        0 0.000000 0.000000  1654:
        0 0.000000 0.000000  1655:    my $feedback = $self->feedback($context);
        0 0.000000 0.000000  1656:    $self->debug(2, "generating bugid($bid)
        0 0.000000 0.000000  1657:    my @addrs = ();
        0 0.000000 0.000000  1658:    my $o_bug = $self->object('bug')-
        0 0.000000 0.000000  1659:
        0 0.000000 0.000000  1660: if ($o_bug->READ) {
        0 0.000000 0.000000  1661:  my $o_grp = $self->object('group');
        0 0.000000 0.000000  1662:  my $o_usr = $self->object('user');
        0 0.000000 0.000000  1663:
        0 0.000000 0.000000  1664:  if ($bid !~ /\w+/) {
        0 0.000000 0.000000  1665:   $self->debug(1, "require bugid($bid)") if
        0 0.000000 0.000000  1666:  } else {
        0 0.000000 0.000000  1667:   if ($feedback =~ /active/) {
        0 0.000000 0.000000  1668:    my @active = $o_usr->col('address',
        0 0.000000 0.000000  1669:    push(@addrs, @active);
        0 0.000000 0.000000  1670:   }
        0 0.000000 0.000000  1671:   if ($feedback =~ /admin/) {
        0 0.000000 0.000000  1672:    my @uids = $o_bug->rel_ids('user');
        0 0.000000 0.000000  1673:    if (@uids) {
        0 0.000000 0.000000  1674:     my @admins = map { $o_usr->read($_)-
        0 0.000000 0.000000  1675:     push(@addrs, @admins);
        0 0.000000 0.000000  1676:    }
        0 0.000000 0.000000  1677:   }
        0 0.000000 0.000000  1678:   if ($feedback =~ /maintainer/) {
        0 0.000000 0.000000  1679:    push(@addrs, $self-
        0 0.000000 0.000000  1680:   }
            ================ SmallProf version 0.9 ================
                        Profile of ..//Perlbug/Base.pm                 Page 95
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000  1681:   if ($feedback =~ /cc/) {
        0 0.000000 0.000000  1682:    my @ccs = $o_bug->rel_ids('address');
        0 0.000000 0.000000  1683:    push(@addrs, @ccs);
        0 0.000000 0.000000  1684:   }
        0 0.000000 0.000000  1685:   if ($feedback =~ /group/) {
        0 0.000000 0.000000  1686:    my $gid = $o_bug->rel_ids('group');
        0 0.000000 0.000000  1687:    if ($gid) {
        0 0.000000 0.000000  1688:     # print "gid($gid)".$o_bug->format;
        0 0.000000 0.000000  1689:     my @uids = $o_grp->read($gid)-
        0 0.000000 0.000000  1690:     if (@uids) {
        0 0.000000 0.000000  1691:      my @gaddrs = map { $o_usr->read($_)-
        0 0.000000 0.000000  1692:      push(@addrs, @gaddrs);
        0 0.000000 0.000000  1693:     }
        0 0.000000 0.000000  1694:    }
        0 0.000000 0.000000  1695:   }
        0 0.000000 0.000000  1696:   if ($feedback =~ /sourceaddr/) {
        0 0.000000 0.000000  1697:    my ($srcaddr) = $o_bug->sourceaddr;
        0 0.000000 0.000000  1698:    push(@addrs, $srcaddr);
        0 0.000000 0.000000  1699:   }
        0 0.000000 0.000000  1700:  }
        0 0.000000 0.000000  1701:    }
        0 0.000000 0.000000  1702:
        0 0.000000 0.000000  1703:
        0 0.000000 0.000000  1704:    return @addrs;
        0 0.000000 0.000000  1705:}
        0 0.000000 0.000000  1706:
        0 0.000000 0.000000  1707:
        0 0.000000 0.000000  1708:=item dump
        0 0.000000 0.000000  1709:
        0 0.000000 0.000000  1710:
        0 0.000000 0.000000  1711:
        0 0.000000 0.000000  1712:
        0 0.000000 0.000000  1713:
        0 0.000000 0.000000  1714:
        0 0.000000 0.000000  1715:
        0 0.000000 0.000000  1716:sub dump {
        0 0.000000 0.000000  1717: my $self = shift;
        0 0.000000 0.000000  1718: my @args = @_;
        0 0.000000 0.000000  1719: my $res  = "rjsf dump: \n";
        0 0.000000 0.000000  1720:
        0 0.000000 0.000000  1721: foreach my $arg (@args) {
        0 0.000000 0.000000  1722:  $res .= "\targ($arg): ".Dumper(\$arg);
        0 0.000000 0.000000  1723: }
        0 0.000000 0.000000  1724: $res .= "\n";
        0 0.000000 0.000000  1725:
        0 0.000000 0.000000  1726: return $res;
        0 0.000000 0.000000  1727:}
        0 0.000000 0.000000  1728:
        0 0.000000 0.000000  1729:
        0 0.000000 0.000000  1730:=item html_dump
        0 0.000000 0.000000  1731:
        0 0.000000 0.000000  1732:
        0 0.000000 0.000000  1733:
        0 0.000000 0.000000  1734:
        0 0.000000 0.000000  1735:
        0 0.000000 0.000000  1736:
            ================ SmallProf version 0.9 ================
                        Profile of ..//Perlbug/Base.pm                 Page 96
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000  1737:
        0 0.000000 0.000000  1738:sub html_dump {
        0 0.000000 0.000000  1739: my $self = shift;
        0 0.000000 0.000000  1740: my @args = @_;
        0 0.000000 0.000000  1741: my $res  = '<table><tr><td>rjsf html_dump:
        0 0.000000 0.000000  1742:
        0 0.000000 0.000000  1743: foreach my $arg (@args) {
        0 0.000000 0.000000  1744:  $res .=
        0 0.000000 0.000000  1745: }
        0 0.000000 0.000000  1746: $res .= '</table>';
        0 0.000000 0.000000  1747:
        0 0.000000 0.000000  1748: return $res;
        0 0.000000 0.000000  1749:}
        0 0.000000 0.000000  1750:
        0 0.000000 0.000000  1751:
        0 0.000000 0.000000  1752:=item compare
        0 0.000000 0.000000  1753:
        0 0.000000 0.000000  1754:
        0 0.000000 0.000000  1755:
        0 0.000000 0.000000  1756:
        0 0.000000 0.000000  1757:
        0 0.000000 0.000000  1758:
        0 0.000000 0.000000  1759:
        0 0.000000 0.000000  1760:sub compare {           #
        0 0.000000 0.000000  1761: my $self = shift;
        0 0.000000 0.000000  1762:    my ($first, $second) = @_;
        0 0.000000 0.000000  1763: local $^W = 0;  # silence spurious -w undef
        0 0.000000 0.000000  1764: return 0 unless @$first == @$second;
        0 0.000000 0.000000  1765: for (my $i = 0; $i < @$first; $i++) {
        0 0.000000 0.000000  1766:     return 0 if $first->[$i] ne $second-
        0 0.000000 0.000000  1767: }
        0 0.000000 0.000000  1768: return 1;
        0 0.000000 0.000000  1769:}
        0 0.000000 0.000000  1770:
     3845 0.000000 0.000000  1771:sub AUTOLOAD { # redirect
     3845 0.018840 0.080000  1772: my $self = shift;
        0 0.000000 0.000000  1773:
     3845 0.018912 0.080000  1774: my $meth = $AutoLoader::AUTOLOAD =
        0 0.000000 0.000000  1775:
     3845 0.024523 0.140000  1776:    return if $meth =~ /::DESTROY$/i;
     3845 0.052134 0.160000  1777:    $meth =~ s/^(.*):://;
        0 0.000000 0.000000  1778:
     3845 0.019257 0.030000  1779: $o_CONF = ref($o_CONF) ? $o_CONF :
     3845 0.134737 0.190000  1780: return $o_CONF->$meth(@_);
        0 0.000000 0.000000  1781:}
        0 0.000000 0.000000  1782:
        0 0.000000 0.000000  1783:
        0 0.000000 0.000000  1784:=item DESTROY
        0 0.000000 0.000000  1785:
        0 0.000000 0.000000  1786:
        0 0.000000 0.000000  1787:
        0 0.000000 0.000000  1788:
        0 0.000000 0.000000  1789:
        0 0.000000 0.000000  1790:sub DESTROY {
        0 0.000000 0.000000  1791: my $self = shift;
        0 0.000000 0.000000  1792:
            ================ SmallProf version 0.9 ================
                        Profile of ..//Perlbug/Base.pm                 Page 97
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000  1793: $self->debug(0, "Perlbug($$) dropping
        0 0.000000 0.000000  1794:
        0 0.000000 0.000000  1795: %CACHE_OBJECT = ();
        0 0.000000 0.000000  1796: %CACHE_SQL    = ();
        0 0.000000 0.000000  1797: %CACHE_TIME   = ();
        0 0.000000 0.000000  1798: $o_CONF = '';
        0 0.000000 0.000000  1799: $o_DB   = '';
        0 0.000000 0.000000  1800: $o_LOG  = '';
        0 0.000000 0.000000  1801: $i_LOG  = 0;
        0 0.000000 0.000000  1802:}
        0 0.000000 0.000000  1803:
        0 0.000000 0.000000  1804:
        0 0.000000 0.000000  1805:=back
        0 0.000000 0.000000  1806:
        0 0.000000 0.000000  1807:
        0 0.000000 0.000000  1808:
        0 0.000000 0.000000  1809:
        0 0.000000 0.000000  1810:
        0 0.000000 0.000000  1811:
        0 0.000000 0.000000  1812:
        0 0.000000 0.000000  1813:#
        0 0.000000 0.000000  1814:1;
            ================ SmallProf version 0.9 ================
                       Profile of ..//Perlbug/Config.pm                Page 98
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000     1:# Perlbug configuration data
        0 0.000000 0.000000     2:# (C) 1999 Richard Foley RFI perlbug@rfi.net
        0 0.000000 0.000000     3:# $Id: Config.pm,v 1.41 2001/07/04 15:12:25
        0 0.000000 0.000000     4:#
        0 0.000000 0.000000     5:
        0 0.000000 0.000000     6:=head1 NAME
        0 0.000000 0.000000     7:
        0 0.000000 0.000000     8:
        0 0.000000 0.000000     9:
        0 0.000000 0.000000    10:
        0 0.000000 0.000000    11:
        0 0.000000 0.000000    12:package Perlbug::Config;
        0 0.000000 0.000000    13:use strict;
        0 0.000000 0.000000    14:use vars(qw($VERSION @ISA $AUTOLOAD));
        0 0.000000 0.000000    15:$VERSION = do { my @r = (q$Revision: 1.41 $
        0 0.000000 0.000000    16:# print map { $_=$ENV{$_} . "\n" }
        0 0.000000 0.000000    17:my $DEBUG = $ENV{'Perlbug_Config_DEBUG'} ||
        0 0.000000 0.000000    18:$|=1;
        0 0.000000 0.000000    19:
        0 0.000000 0.000000    20:# use AutoLoader;
        0 0.000000 0.000000    21:use Carp;
        0 0.000000 0.000000    22:use Data::Dumper;
        0 0.000000 0.000000    23:use FileHandle;
        0 0.000000 0.000000    24:use Perlbug; # for DEBUG
        0 0.000000 0.000000    25:
        0 0.000000 0.000000    26:my $CONFIG = $ENV{'Perlbug_Config'} =
        0 0.000000 0.000000    27: $ENV{'Perlbug_Config'} || $Perlbug::Config
        0 0.000000 0.000000    28:
        0 0.000000 0.000000    29:
        0 0.000000 0.000000    30:=head1 DESCRIPTION
        0 0.000000 0.000000    31:
        0 0.000000 0.000000    32:
        0 0.000000 0.000000    33:
        0 0.000000 0.000000    34:
        0 0.000000 0.000000    35:
        0 0.000000 0.000000    36:
        0 0.000000 0.000000    37:
        0 0.000000 0.000000    38:
        0 0.000000 0.000000    39:
        0 0.000000 0.000000    40:
        0 0.000000 0.000000    41:
        0 0.000000 0.000000    42:
        0 0.000000 0.000000    43:
        0 0.000000 0.000000    44:
        0 0.000000 0.000000    45:
        0 0.000000 0.000000    46:
        0 0.000000 0.000000    47:
        0 0.000000 0.000000    48:
        0 0.000000 0.000000    49:
        0 0.000000 0.000000    50:
        0 0.000000 0.000000    51:
        0 0.000000 0.000000    52:
        0 0.000000 0.000000    53:
        0 0.000000 0.000000    54:
        0 0.000000 0.000000    55:
        0 0.000000 0.000000    56:
            ================ SmallProf version 0.9 ================
                       Profile of ..//Perlbug/Config.pm                Page 99
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000    57:
        0 0.000000 0.000000    58:
        1 0.000000 0.000000    59:sub new {
        1 0.000006 0.000000    60:    my $ref  = shift;
        1 0.000005 0.000000    61:    my $class  = ref($ref) || $ref;
        1 0.000012 0.000000    62: my $self = { '_config' => '' };
        1 0.000016 0.000000    63:    bless($self, $class);
        0 0.000000 0.000000    64:
        1 0.000076 0.000000    65:    my $h_data = $self-
        1 0.000109 0.000000    66:    $self->{'_config'} = $h_data = $self-
        1 0.000105 0.000000    67:    $self->prime_data($h_data);
        1 0.000085 0.000000    68:    $self->set_alarm($h_data);
        1 0.000014 0.000000    69: croak("suspect Perlbug::Config data:
        1 0.000003 0.000000    70:  unless keys %{$self->{'_config'}} >= 7; # ?
        0 0.000000 0.000000    71:
        1 0.000008 0.000000    72: $DEBUG = $Perlbug::DEBUG || $DEBUG;
        1 0.000013 0.000000    73: return $self;
        0 0.000000 0.000000    74:}
        0 0.000000 0.000000    75:
        0 0.000000 0.000000    76:
        0 0.000000 0.000000    77:=item get_config_data
        0 0.000000 0.000000    78:
        0 0.000000 0.000000    79:
        0 0.000000 0.000000    80:
        0 0.000000 0.000000    81:
        0 0.000000 0.000000    82:
        0 0.000000 0.000000    83:
        0 0.000000 0.000000    84:
        1 0.000000 0.000000    85:sub get_config_data {
        1 0.000006 0.000000    86: my $self = shift;
        1 0.000010 0.000000    87:    my $file = shift;
        0 0.000000 0.000000    88:
        1 0.000006 0.000000    89: my $h_data = {};
        0 0.000000 0.000000    90:
        1 0.000055 0.000000    91:    if (!(-e $file && -r _)) {
        0 0.000000 0.000000    92:  croak("Can't read file($file) for config
        0 0.000000 0.000000    93: } else {
        1 0.003912 0.000000    94:  $h_data = do $file;
        0 0.000000 0.000000    95: }
        0 0.000000 0.000000    96:
        1 0.000016 0.000000    97: return $h_data;
        0 0.000000 0.000000    98:}
        0 0.000000 0.000000    99:
        0 0.000000 0.000000   100:
        0 0.000000 0.000000   101:=item update_data
        0 0.000000 0.000000   102:
        0 0.000000 0.000000   103:
        0 0.000000 0.000000   104:
        0 0.000000 0.000000   105:
        0 0.000000 0.000000   106:
        0 0.000000 0.000000   107:
        0 0.000000 0.000000   108:
        1 0.000000 0.000000   109:sub update_data (\%) {
        1 0.000008 0.000000   110: my $self = shift;
        1 0.000005 0.000000   111: my $prefs = shift;
        1 0.000017 0.000000   112: my $TYPE  = ($0 =~
            ================ SmallProf version 0.9 ================
                       Profile of ..//Perlbug/Config.pm                Page 100
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   113:  ? $1 : 'xxx';
        0 0.000000 0.000000   114:
        1 0.000070 0.000000   115: my $DATE = &get_date;
        1 0.000011 0.000000   116: my $spooldir =
        0 0.000000 0.000000   117:
        1 0.000019 0.000000   118: $$prefs{'CURRENT'}{'log_file'} =
        1 0.000024 0.000000   119:    $$prefs{'CURRENT'}{'tmp_file'} =
        0 0.000000 0.000000   120:
        1 0.000011 0.000000   121: $$prefs{'CURRENT'}{'admin'}    =  '';
        0 0.000000 0.000000   122: # my $current = $self->current('debug');
        1 0.000050 0.000000   123: $$prefs{'CURRENT'}{'debug'}    =
        0 0.000000 0.000000   124: $ENV{'Perlbug_DEBUG'} || $Perlbug::DEBUG ||
        1 0.000027 0.000000   125: $ENV{'PATH'} = $$prefs{'SYSTEM'}{'path'};
        0 0.000000 0.000000   126:
        1 0.000012 0.000000   127: return $prefs;
        0 0.000000 0.000000   128:}
        0 0.000000 0.000000   129:
        0 0.000000 0.000000   130:
        0 0.000000 0.000000   131:=item prime_data
        0 0.000000 0.000000   132:
        0 0.000000 0.000000   133:
        0 0.000000 0.000000   134:
        0 0.000000 0.000000   135:
        0 0.000000 0.000000   136:
        0 0.000000 0.000000   137:
        0 0.000000 0.000000   138:
        1 0.000000 0.000000   139:sub prime_data (\%) {
        1 0.000006 0.000000   140: my $self = shift;
        1 0.000031 0.000000   141:    my $data = shift;
        0 0.000000 0.000000   142:
       16 0.000084 0.000000   143: foreach my $key (keys %{$data}) {
       14 0.000056 0.000000   144:  my $call = lc($key);
       14 0.000043 0.000000   145:  $call =~ s/^_(\w+)$/$1/;
       14 0.001600 0.010000   146:  $self->$call(); # prime
        0 0.000000 0.000000   147: }
        0 0.000000 0.000000   148:
        1 0.000006 0.000000   149:    return $data;
        0 0.000000 0.000000   150:}
        0 0.000000 0.000000   151:
        0 0.000000 0.000000   152:
        0 0.000000 0.000000   153:=item set_alarm
        0 0.000000 0.000000   154:
        0 0.000000 0.000000   155:
        0 0.000000 0.000000   156:
        0 0.000000 0.000000   157:
        0 0.000000 0.000000   158:
        1 0.000000 0.000000   159:sub set_alarm (\%) {
        1 0.000006 0.000000   160: my $self = shift;
        1 0.000004 0.000000   161:    my $h_ref = shift;
        1 0.000016 0.000000   162:    my $set = ($0 =~
        0 0.000000 0.000000   163:  ? ($$h_ref{'SYSTEM'}{'timeout_interactive'}
        0 0.000000 0.000000   164:  : ($$h_ref{'SYSTEM'}{'timeout_auto'} ||
        2 0.000045 0.000000   165:    eval { alarm($set) };
        0 0.000000 0.000000   166:    $SIG{'ALRM'} = sub {
        0 0.000000 0.000000   167:        my $title =
        0 0.000000 0.000000   168:        my $addr  =
            ================ SmallProf version 0.9 ================
                       Profile of ..//Perlbug/Config.pm                Page 101
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   169:        my $from  = $$h_ref{'EMAIL'}{'from'}
        0 0.000000 0.000000   170:        my $alert = "$title ($$) timing
        0 0.000000 0.000000   171:  carp($alert);
        0 0.000000 0.000000   172:        my $mail = qq|From: $title <$from>
        0 0.000000 0.000000   173:To: "$title maintainer" <$addr>
        0 0.000000 0.000000   174:Subject: $title timing out!
        0 0.000000 0.000000   175:
        0 0.000000 0.000000   176:$0 timed out for some reason:
        0 0.000000 0.000000   177: $alert
        0 0.000000 0.000000   178: ARGV(@ARGV)
        0 0.000000 0.000000   179:Ciao
        0 0.000000 0.000000   180:|;
        0 0.000000 0.000000   181:        open(SENDMAIL, "|/usr/lib/sendmail -
        0 0.000000 0.000000   182:        print SENDMAIL $mail;
        0 0.000000 0.000000   183:        close(SENDMAIL) or croak("Timeout
        0 0.000000 0.000000   184:  print $alert;
        0 0.000000 0.000000   185:        kill('HUP', -$$);
        1 0.000066 0.000000   186:    };
        1 0.000007 0.000000   187:    return 1;
        0 0.000000 0.000000   188:}
        0 0.000000 0.000000   189:
        0 0.000000 0.000000   190:
        0 0.000000 0.000000   191:=head2 UTILITIES
        0 0.000000 0.000000   192:
        0 0.000000 0.000000   193:
        0 0.000000 0.000000   194:
        0 0.000000 0.000000   195:
        0 0.000000 0.000000   196:
        0 0.000000 0.000000   197:
        0 0.000000 0.000000   198:
        0 0.000000 0.000000   199:
        0 0.000000 0.000000   200:
        0 0.000000 0.000000   201:
        0 0.000000 0.000000   202:
        0 0.000000 0.000000   203:
        1 0.000000 0.000000   204:sub get_date {
        1 0.000005 0.000000   205: my $self = shift;
        1 0.000305 0.000000   206:    my @time  = localtime(time);
        1 0.000012 0.000000   207:    my $year  = $time[5] + 1900;
        1 0.000021 0.000000   208:    my $month = sprintf('%02d', $time[4] +
        1 0.000013 0.000000   209:    my $day   = sprintf('%02d', $time[3]);
        1 0.000104 0.000000   210:    return $year.$month.$day;
        0 0.000000 0.000000   211:}
        0 0.000000 0.000000   212:
        0 0.000000 0.000000   213:
        0 0.000000 0.000000   214:=item get_keys
        0 0.000000 0.000000   215:
        0 0.000000 0.000000   216:
        0 0.000000 0.000000   217:
        0 0.000000 0.000000   218:
        0 0.000000 0.000000   219:
        0 0.000000 0.000000   220:
        0 0.000000 0.000000   221:
        0 0.000000 0.000000   222:sub get_keys {
        0 0.000000 0.000000   223: my $self = shift;
        0 0.000000 0.000000   224: my $tgt  = shift;
            ================ SmallProf version 0.9 ================
                       Profile of ..//Perlbug/Config.pm                Page 102
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   225:
        0 0.000000 0.000000   226: my @data = keys %{$self-
        0 0.000000 0.000000   227: return @data;
        0 0.000000 0.000000   228:}
        0 0.000000 0.000000   229:
        0 0.000000 0.000000   230:
        0 0.000000 0.000000   231:=item get_vals
        0 0.000000 0.000000   232:
        0 0.000000 0.000000   233:
        0 0.000000 0.000000   234:
        0 0.000000 0.000000   235:
        0 0.000000 0.000000   236:
        0 0.000000 0.000000   237:
        0 0.000000 0.000000   238:
        0 0.000000 0.000000   239:sub get_vals {
        0 0.000000 0.000000   240:    my $self = shift;
        0 0.000000 0.000000   241: my $tgt  = shift;
        0 0.000000 0.000000   242:
        0 0.000000 0.000000   243: my @data = map { (ref($_) eq 'ARRAY') ?
        0 0.000000 0.000000   244:
        0 0.000000 0.000000   245: return @data;
        0 0.000000 0.000000   246:}
        0 0.000000 0.000000   247:
        0 0.000000 0.000000   248:
        0 0.000000 0.000000   249:=item get_all
        0 0.000000 0.000000   250:
        0 0.000000 0.000000   251:
        0 0.000000 0.000000   252:
        0 0.000000 0.000000   253:
        0 0.000000 0.000000   254:
        0 0.000000 0.000000   255:
        0 0.000000 0.000000   256:
        0 0.000000 0.000000   257:sub get_all {
        0 0.000000 0.000000   258:    my $self = shift;
        0 0.000000 0.000000   259: my $tgt  = shift;
        0 0.000000 0.000000   260:
        0 0.000000 0.000000   261: my %conf = %{$self->{'_config'}{uc($tgt)}};
        0 0.000000 0.000000   262:
        0 0.000000 0.000000   263: my @data = map { "$_=$conf{$_}" } keys
        0 0.000000 0.000000   264:
        0 0.000000 0.000000   265: return @data;
        0 0.000000 0.000000   266:}
        0 0.000000 0.000000   267:
        0 0.000000 0.000000   268:
        0 0.000000 0.000000   269:=item get_config
        0 0.000000 0.000000   270:
        0 0.000000 0.000000   271:
        0 0.000000 0.000000   272:
        0 0.000000 0.000000   273:
        0 0.000000 0.000000   274:
        0 0.000000 0.000000   275:
        0 0.000000 0.000000   276:
        0 0.000000 0.000000   277:sub get_config {
        0 0.000000 0.000000   278:    my $self = shift;
        0 0.000000 0.000000   279: my $tgt  = shift;
        0 0.000000 0.000000   280:
            ================ SmallProf version 0.9 ================
                       Profile of ..//Perlbug/Config.pm                Page 103
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   281: my @keys = map { lc($_) } keys %{$self-
        0 0.000000 0.000000   282: my $ret  = $self->system('title')." $tgt
        0 0.000000 0.000000   283:
        0 0.000000 0.000000   284: if (!($tgt =~ /\w+/ && grep(/^$tgt$/,
        0 0.000000 0.000000   285:  $ret .= "Unrecognised($tgt) - use one of
        0 0.000000 0.000000   286: } else {
        0 0.000000 0.000000   287:  my %conf = %{$self->{'_config'}{uc($tgt)}};
        0 0.000000 0.000000   288:  my ($length) = reverse sort { $a <=> $b }
        0 0.000000 0.000000   289:  foreach my $key (keys %conf) {
        0 0.000000 0.000000   290:   $ret .= $key.(' ' x ($length -
        0 0.000000 0.000000   291:    (ref($conf{$key}) eq 'ARRAY')
        0 0.000000 0.000000   292:     ? join(', ', @{$conf{$key}})
        0 0.000000 0.000000   293:     : $conf{$key}
        0 0.000000 0.000000   294:   )."\n";
        0 0.000000 0.000000   295:  }
        0 0.000000 0.000000   296: }
        0 0.000000 0.000000   297: # print "given($tgt) returning($ret)\n";
        0 0.000000 0.000000   298:
        0 0.000000 0.000000   299: return $ret;
        0 0.000000 0.000000   300:}
        0 0.000000 0.000000   301:
        0 0.000000 0.000000   302:
        0 0.000000 0.000000   303:=head1 ACCESSORS
        0 0.000000 0.000000   304:
        0 0.000000 0.000000   305:
        0 0.000000 0.000000   306:
        0 0.000000 0.000000   307:
        0 0.000000 0.000000   308:
        0 0.000000 0.000000   309:
        0 0.000000 0.000000   310:
        0 0.000000 0.000000   311:
        0 0.000000 0.000000   312:
        0 0.000000 0.000000   313:
        0 0.000000 0.000000   314:
        0 0.000000 0.000000   315:
        0 0.000000 0.000000   316:
        0 0.000000 0.000000   317:
        0 0.000000 0.000000   318:
        0 0.000000 0.000000   319:
        0 0.000000 0.000000   320:
        0 0.000000 0.000000   321:
        0 0.000000 0.000000   322:
        0 0.000000 0.000000   323:
        0 0.000000 0.000000   324:
        0 0.000000 0.000000   325:
        0 0.000000 0.000000   326:
        0 0.000000 0.000000   327:
        0 0.000000 0.000000   328:
        0 0.000000 0.000000   329:
        0 0.000000 0.000000   330:
        0 0.000000 0.000000   331:
        0 0.000000 0.000000   332:
        1 0.000000 0.000000   333:sub target {
        1 0.000006 0.000000   334:    my $self = shift;
        1 0.000005 0.000000   335: my $tgt  = shift || '';
        2 0.000016 0.000000   336: my @ret  = @{$self-
            ================ SmallProf version 0.9 ================
                       Profile of ..//Perlbug/Config.pm                Page 104
       =================================================================
    count wall tm  cpu time line
        1 0.000008 0.000000   337:    @ret = @{$self-
        1 0.000009 0.000000   338: return @ret;
        0 0.000000 0.000000   339:}
        0 0.000000 0.000000   340:
        1 0.000000 0.000000   341:sub forward {
        1 0.000005 0.000000   342:    my $self = shift;
        1 0.000006 0.000000   343: my $fwd  = shift || '';
        2 0.000019 0.000000   344: my @ret  = @{$self-
        1 0.000008 0.000000   345:    @ret = @{$self-
        1 0.000009 0.000000   346: return @ret;
        0 0.000000 0.000000   347:}
        0 0.000000 0.000000   348:
       12 0.000000 0.000000   349:sub AUTOLOAD { # operational
       12 0.000055 0.000000   350: my $self = shift;
       12 0.000041 0.000000   351: my $get  = shift; # get || { set => 'this' }
        0 0.000000 0.000000   352:
       12 0.000054 0.000000   353: my $meth = $AutoLoader::AUTOLOAD =
        0 0.000000 0.000000   354:
       12 0.000045 0.000000   355:    return if $meth =~ /::DESTROY$/;
       12 0.000044 0.000000   356: $meth = uc($meth);
       12 0.000160 0.000000   357:    $meth =~ s/^(.*):://;
       12 0.000052 0.000000   358: my $pkg = ref($self);
       12 0.000034 0.000000   359: my @ret = ();
        0 0.000000 0.000000   360:
        0 0.000000 0.000000   361: # TARGET FORWARD taken care of above
       12 0.000411 0.000000   362: my $valid = join('|', qw(
        0 0.000000 0.000000   363:  CURRENT SYSTEM DATABASE DIRECTORY
        0 0.000000 0.000000   364:  FEEDBACK EMAIL WEB
        0 0.000000 0.000000   365:  DEFAULT GROUP SEVERITY STATUS VERSION
        0 0.000000 0.000000   366: ));
        0 0.000000 0.000000   367:
       12 0.000234 0.000000   368: if ($meth !~ /^($valid)$/) { # not one of
        0 0.000000 0.000000   369:  confess("$pkg->$meth(@_) called with a duff
        0 0.000000 0.000000   370: } else {
        0 0.000000 0.000000   371:  no strict 'refs';
       12 0.000148 0.000000   372:  *{$AUTOLOAD} = sub {
     3849 0.018665 0.040000   373:   my $self = shift;
     3849 0.016318 0.060000   374:   my $get  = shift; # get || { set => 'this'
     3849 0.018059 0.110000   375:   my @ret = ();
        0 0.000000 0.000000   376:
     3849 0.033698 0.080000   377:   if (ref($self->{'_config'}{$meth}) ne
        0 0.000000 0.000000   378:    confess("invalid config($pkg)
        0 0.000000 0.000000   379:   } else {
     7698 0.334784 0.440000   380:    my @keys = @ret = keys %{$self-
     3849 0.015176 0.080000   381:    if (defined($get)) {         #
     3849 0.013982 0.090000   382:     if (ref($get) ne 'HASH') {       # get
     3657 0.135980 0.110000   383:      @ret = ($self-
        0 0.000000 0.000000   384:     } else {          # set ...
      192 0.001765 0.010000   385:      if ($meth !~ /^current$/i) {     #
        0 0.000000 0.000000   386:       confess("structure($meth) not
        0 0.000000 0.000000   387:      } else {
      192 0.002637 0.000000   388:       my $keys = join('|', @keys);
      192 0.001921 0.000000   389:       @ret = ();
      192 0.002494 0.030000   390:       SET:
      384 0.005289 0.020000   391:       foreach my $key (keys %{$get}) {
      192 0.002966 0.000000   392:        if ($key !~ /^($keys)$/) {
            ================ SmallProf version 0.9 ================
                       Profile of ..//Perlbug/Config.pm                Page 105
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   393:         confess("unrecognised key($key) in
        0 0.000000 0.000000   394:        } else {
      192 0.000750 0.000000   395:         if ($key =~ /^(\w{3})_file$/) { #
        0 0.000000 0.000000   396:          undef $self-
        0 0.000000 0.000000   397:         }
      192 0.001637 0.010000   398:         $self->{'_config'}{$meth}{$key} =
      192 0.001819 0.000000   399:         push(@ret, $$get{$key});  #
        0 0.000000 0.000000   400:        }
        0 0.000000 0.000000   401:       }
        0 0.000000 0.000000   402:      }
        0 0.000000 0.000000   403:     }
        0 0.000000 0.000000   404:    }
        0 0.000000 0.000000   405:   }
     3849 0.084771 0.170000   406:   return wantarray ? @ret : $ret[0];
        0 0.000000 0.000000   407:  }
       12 0.000640 0.000000   408:    }
       12 0.000111 0.000000   409: return wantarray ? @ret : $ret[0];
        0 0.000000 0.000000   410:}
        0 0.000000 0.000000   411:
        0 0.000000 0.000000   412:
        0 0.000000 0.000000   413:=back
        0 0.000000 0.000000   414:
        0 0.000000 0.000000   415:
        0 0.000000 0.000000   416:
        0 0.000000 0.000000   417:
        0 0.000000 0.000000   418:
        0 0.000000 0.000000   419:
        0 0.000000 0.000000   420:
        0 0.000000 0.000000   421:1;
        0 0.000000 0.000000   422:
            ================ SmallProf version 0.9 ================
                      Profile of ..//Perlbug/Database.pm               Page 106
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000     1:# Perlbug Bug support functions
        0 0.000000 0.000000     2:# (C) 1999 Richard Foley RFI perlbug@rfi.net
        0 0.000000 0.000000     3:# $Id: Database.pm,v 1.12 2001/04/21 20:48:48
        0 0.000000 0.000000     4:#
        0 0.000000 0.000000     5:# Based on TicketMonger.pm: Copyright 1997
        0 0.000000 0.000000     6:# Perlbug(::Database) integration: RFI 1998 -
        0 0.000000 0.000000     7:#
        0 0.000000 0.000000     8:
        0 0.000000 0.000000     9:=head1 NAME
        0 0.000000 0.000000    10:
        0 0.000000 0.000000    11:
        0 0.000000 0.000000    12:
        0 0.000000 0.000000    13:
        0 0.000000 0.000000    14:
        0 0.000000 0.000000    15:package Perlbug::Database;
        0 0.000000 0.000000    16:use strict;
        0 0.000000 0.000000    17:use vars qw($VERSION);
        0 0.000000 0.000000    18:$VERSION = do { my @r = (q$Revision: 1.12 $
        0 0.000000 0.000000    19:
        0 0.000000 0.000000    20:use Data::Dumper;
        0 0.000000 0.000000    21:use IO::File;
        0 0.000000 0.000000    22:use Mysql;
        0 0.000000 0.000000    23:use Carp;
        0 0.000000 0.000000    24:my ($o_DBH, $lasterror) = (undef, '');
        0 0.000000 0.000000    25:my $i_SQL = 0;
        0 0.000000 0.000000    26:my $DEBUG = $ENV{'Perlbug_Database_DEBUG'} ||
        0 0.000000 0.000000    27:my %DB    = ();
        0 0.000000 0.000000    28:
        0 0.000000 0.000000    29:
        0 0.000000 0.000000    30:=head1 DESCRIPTION
        0 0.000000 0.000000    31:
        0 0.000000 0.000000    32:
        0 0.000000 0.000000    33:
        0 0.000000 0.000000    34:
        0 0.000000 0.000000    35:
        0 0.000000 0.000000    36:
        0 0.000000 0.000000    37:
        0 0.000000 0.000000    38:
        0 0.000000 0.000000    39:
        0 0.000000 0.000000    40:
        0 0.000000 0.000000    41:
        0 0.000000 0.000000    42:
        0 0.000000 0.000000    43:
        0 0.000000 0.000000    44:
        0 0.000000 0.000000    45:
        0 0.000000 0.000000    46:
        0 0.000000 0.000000    47:
        0 0.000000 0.000000    48:
        0 0.000000 0.000000    49:
        0 0.000000 0.000000    50:
        1 0.000000 0.000000    51:sub new {
        1 0.000007 0.000000    52: my $proto = shift;
        1 0.000005 0.000000    53: my $class = ref($proto) || $proto;
        1 0.000023 0.000000    54: %DB = @_;
        0 0.000000 0.000000    55: # undef $o_DBH;
        0 0.000000 0.000000    56:
            ================ SmallProf version 0.9 ================
                      Profile of ..//Perlbug/Database.pm               Page 107
       =================================================================
    count wall tm  cpu time line
        1 0.000024 0.000000    57: my $self = bless({}, $class);
        0 0.000000 0.000000    58:
        1 0.000008 0.000000    59: $DEBUG = $Perlbug::DEBUG || $DEBUG;
        0 0.000000 0.000000    60:
        1 0.000012 0.000000    61: return $self;
        0 0.000000 0.000000    62:}
        0 0.000000 0.000000    63:
        0 0.000000 0.000000    64:sub DESTROY {
        0 0.000000 0.000000    65: undef $o_DBH if defined($o_DBH);
        0 0.000000 0.000000    66:}
        0 0.000000 0.000000    67:
        2 0.000000 0.000000    68:sub quote {
        2 0.000012 0.000000    69: my $self = shift;
        2 0.000157 0.000000    70: return $self->dbh->quote(@_);
        0 0.000000 0.000000    71:}
        0 0.000000 0.000000    72:
        0 0.000000 0.000000    73:
        0 0.000000 0.000000    74:=item dbh
        0 0.000000 0.000000    75:
        0 0.000000 0.000000    76:
        0 0.000000 0.000000    77:
        0 0.000000 0.000000    78:
        0 0.000000 0.000000    79:
        0 0.000000 0.000000    80:my $i_CNT = 0;
        0 0.000000 0.000000    81:
      159 0.000000 0.000000    82:sub dbh {
      159 0.000768 0.000000    83: my $self = shift;
        0 0.000000 0.000000    84:
      159 0.000401 0.000000    85: $i_CNT++;
      159 0.001577 0.020000    86: $o_DBH = ref($o_DBH) ? $o_DBH : $self-
        0 0.000000 0.000000    87: # carp("[$i_CNT] dbh ...($o_DBH)\n");
        0 0.000000 0.000000    88:
      159 0.001238 0.000000    89: return $o_DBH;
        0 0.000000 0.000000    90:}
        0 0.000000 0.000000    91:
        0 0.000000 0.000000    92:
        0 0.000000 0.000000    93:###
        0 0.000000 0.000000    94:# DBConnect() checks to see if there is an
        0 0.000000 0.000000    95:# Savant database, opens one if there is not,
        0 0.000000 0.000000    96:# database handle.  This eliminates opening
        0 0.000000 0.000000    97:# handles during a session.  undef is
        1 0.000000 0.000000    98:sub DBConnect {
        1 0.000005 0.000000    99:    my $self = shift;
        1 0.000003 0.000000   100:    unless (defined $o_DBH) {
        1 0.000006 0.000000   101:        my ($secretspath) =''; #
        0 0.000000 0.000000   102:=pod
        0 0.000000 0.000000   103:
        0 0.000000 0.000000   104:
        0 0.000000 0.000000   105:
        0 0.000000 0.000000   106:
        0 0.000000 0.000000   107:
        0 0.000000 0.000000   108:
        0 0.000000 0.000000   109:
        0 0.000000 0.000000   110:
        0 0.000000 0.000000   111:
        0 0.000000 0.000000   112:
            ================ SmallProf version 0.9 ================
                      Profile of ..//Perlbug/Database.pm               Page 108
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   113:        # A bit Mysql|Oracle specific just
        1 0.000149 0.000000   114:        $o_DBH=Mysql->Connect($DB{'sqlhost'},
        0 0.000000 0.000000   115:  # use CGI; print CGI->new->header,
        1 0.000006 0.000000   116:        if (!(defined($o_DBH))) {
        0 0.000000 0.000000   117:            croak("Can't connect to
        0 0.000000 0.000000   118:        }
        0 0.000000 0.000000   119:    }
        1 0.000011 0.000000   120:    return $o_DBH;
        0 0.000000 0.000000   121:}
        0 0.000000 0.000000   122:
        0 0.000000 0.000000   123:
      157 0.000000 0.000000   124:sub query {
      157 0.000756 0.000000   125:    my $self = shift;
        0 0.000000 0.000000   126:    # my ($sql) = $self->quote(shift);
        0 0.000000 0.000000   127: # $sql =~ s/^\s*\'\s*(.+)\s*\'\s*$/$1/;
      157 0.001420 0.010000   128: my $sql = shift;
      157 0.000397 0.000000   129:    $i_SQL++;
      157 0.000486 0.010000   130:    my $sth = undef;
      157 0.010802 0.010000   131:    $o_DBH=$self->dbh; # or return undef;
      157 0.000844 0.000000   132:    if (!(defined($o_DBH))) {
        0 0.000000 0.000000   133:        croak("Undefined dbh($o_DBH)");
        0 0.000000 0.000000   134:    } else {
      157 0.013580 0.000000   135:        $sth=$o_DBH->Query($sql);
      157 0.000494 0.000000   136:        if (defined $sth) {
      157 0.000904 0.010000   137:   my $rows = 0;
      157 0.010450 0.000000   138:   $rows = $sth->rows if $sth->can('rows');
      157 0.021264 0.040000   139:            my ($selected, $affected) =
        0 0.000000 0.000000   140:        } else {
        0 0.000000 0.000000   141:            $lasterror="Query <$i_SQL> ($sql)
        0 0.000000 0.000000   142:            croak($lasterror);
        0 0.000000 0.000000   143:        }
        0 0.000000 0.000000   144:    }
        0 0.000000 0.000000   145:
      157 0.002262 0.000000   146:    return $sth;
        0 0.000000 0.000000   147:}
        0 0.000000 0.000000   148:
        0 0.000000 0.000000   149:
        0 0.000000 0.000000   150:=back
        0 0.000000 0.000000   151:
        0 0.000000 0.000000   152:
        0 0.000000 0.000000   153:
        0 0.000000 0.000000   154:
        0 0.000000 0.000000   155:
        0 0.000000 0.000000   156:
        0 0.000000 0.000000   157:
        0 0.000000 0.000000   158:1;
            ================ SmallProf version 0.9 ================
                        Profile of ..//Perlbug/File.pm                 Page 109
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000     1:# Perlbug Fileging and file accessor
        0 0.000000 0.000000     2:# (C) 1999 Richard Foley RFI perlbug@rfi.net
        0 0.000000 0.000000     3:# $Id: File.pm,v 1.5 2001/04/21 20:48:48
        0 0.000000 0.000000     4:#
        0 0.000000 0.000000     5:
        0 0.000000 0.000000     6:=head1 NAME
        0 0.000000 0.000000     7:
        0 0.000000 0.000000     8:
        0 0.000000 0.000000     9:
        0 0.000000 0.000000    10:
        0 0.000000 0.000000    11:
        0 0.000000 0.000000    12:package Perlbug::File;
        0 0.000000 0.000000    13:use strict;
        0 0.000000 0.000000    14:use vars qw($VERSION);
        0 0.000000 0.000000    15:$VERSION = do { my @r = (q$Revision: 1.5 $ =~
        0 0.000000 0.000000    16:my $DEBUG = $ENV{'Perlbug_File_DEBUG'} ||
        0 0.000000 0.000000    17:$| = 1;
        0 0.000000 0.000000    18:
        0 0.000000 0.000000    19:use Carp;
        0 0.000000 0.000000    20:use Data::Dumper;
        0 0.000000 0.000000    21:use FileHandle;
        0 0.000000 0.000000    22:use Shell qw(chmod);
        0 0.000000 0.000000    23:
        0 0.000000 0.000000    24:
        0 0.000000 0.000000    25:
        0 0.000000 0.000000    26:=head1 DESCRIPTION
        0 0.000000 0.000000    27:
        0 0.000000 0.000000    28:
        0 0.000000 0.000000    29:
        0 0.000000 0.000000    30:
        0 0.000000 0.000000    31:
        0 0.000000 0.000000    32:
        0 0.000000 0.000000    33:
        0 0.000000 0.000000    34:
        0 0.000000 0.000000    35:
        0 0.000000 0.000000    36:
        0 0.000000 0.000000    37:
        0 0.000000 0.000000    38:
        0 0.000000 0.000000    39:
        0 0.000000 0.000000    40:
        0 0.000000 0.000000    41:
        0 0.000000 0.000000    42:
        0 0.000000 0.000000    43:
        0 0.000000 0.000000    44:
        0 0.000000 0.000000    45:
        0 0.000000 0.000000    46:
        0 0.000000 0.000000    47:
        0 0.000000 0.000000    48:
        0 0.000000 0.000000    49:
        0 0.000000 0.000000    50:
        0 0.000000 0.000000    51:
        0 0.000000 0.000000    52:
        0 0.000000 0.000000    53:
        1 0.000000 0.000000    54:sub new {
        1 0.000006 0.000000    55:    my $proto = shift;
        1 0.000006 0.000000    56:    my $class = ref($proto) || $proto;
            ================ SmallProf version 0.9 ================
                        Profile of ..//Perlbug/File.pm                 Page 110
       =================================================================
    count wall tm  cpu time line
        1 0.000005 0.000000    57:    my $file  = shift ||
        1 0.000005 0.000000    58: my $perm  = shift || '+>>';
        1 0.000006 0.000000    59: my $num   = shift || '0755';
        0 0.000000 0.000000    60:
        1 0.000004 0.000000    61: my $sep   = quotemeta('/');
        1 0.000042 0.000000    62: my $self = bless({
        0 0.000000 0.000000    63:  '_handle' => undef,       # GLOB(...)
        0 0.000000 0.000000    64:  '_name'   => '',       #
        0 0.000000 0.000000    65:  '_regex'  => '^(.+)('.$sep.')([\w\.])+',  #
        0 0.000000 0.000000    66:  '_status' => '',       #
        0 0.000000 0.000000    67: }, $class);
        0 0.000000 0.000000    68:
        1 0.000006 0.000000    69: my $rex = $self->{'_regex'};
        1 0.000093 0.000000    70: if ($file !~ /$rex$/) {
        0 0.000000 0.000000    71:  $self->error("File($file) doesn't
        0 0.000000 0.000000    72: } else {
        1 0.000018 0.000000    73:  my ($dir, $tgt) = ($1, $3);
        1 0.000071 0.000000    74:  if (!($dir =~ /\w+/ && -d $dir && -r _)) {
        0 0.000000 0.000000    75:   $self->error("file can't attach to
        0 0.000000 0.000000    76:  } else {
        1 0.000008 0.000000    77:   $self->{'_name'} = $file;
        1 0.000085 0.000000    78:   $self = $self->open($file, $perm, $num); #
        0 0.000000 0.000000    79:  }
        0 0.000000 0.000000    80: }
        0 0.000000 0.000000    81:
        1 0.000009 0.000000    82: $DEBUG = $Perlbug::DEBUG || $DEBUG;
        1 0.000015 0.000000    83: return $self;
        0 0.000000 0.000000    84:}
        0 0.000000 0.000000    85:
        0 0.000000 0.000000    86:
        0 0.000000 0.000000    87:=item error
        0 0.000000 0.000000    88:
        0 0.000000 0.000000    89:
        0 0.000000 0.000000    90:
        0 0.000000 0.000000    91:
        0 0.000000 0.000000    92:
        0 0.000000 0.000000    93:
        0 0.000000 0.000000    94:
        0 0.000000 0.000000    95:sub error {
        0 0.000000 0.000000    96: my $self = shift;
        0 0.000000 0.000000    97:
        0 0.000000 0.000000    98: my $dump = Dumper($self);
        0 0.000000 0.000000    99: croak "@_, \nPerlbug::File::error($dump)\n";
        0 0.000000 0.000000   100:
        0 0.000000 0.000000   101: die(@_);
        0 0.000000 0.000000   102: exit;
        0 0.000000 0.000000   103:}
        0 0.000000 0.000000   104:
        0 0.000000 0.000000   105:
        0 0.000000 0.000000   106:=item open
        0 0.000000 0.000000   107:
        0 0.000000 0.000000   108:
        0 0.000000 0.000000   109:
        0 0.000000 0.000000   110:
        0 0.000000 0.000000   111:
        0 0.000000 0.000000   112:
            ================ SmallProf version 0.9 ================
                        Profile of ..//Perlbug/File.pm                 Page 111
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   113:
        1 0.000000 0.000000   114:sub open {
        1 0.000005 0.000000   115:    my $self = shift;
        1 0.000006 0.000000   116: my $file = shift;
        1 0.000004 0.000000   117: my $perm = shift;
        1 0.000003 0.000000   118: my $num  = shift;
        0 0.000000 0.000000   119:
        1 0.000117 0.000000   120: my $fh = $self->handle($self->fh($file,
        1 0.000004 0.000000   121: if (!$fh) {
        0 0.000000 0.000000   122:  $self->error("no handle returned!");
        0 0.000000 0.000000   123: } else {
        1 0.000078 0.000000   124:  $self->status('open');
        0 0.000000 0.000000   125: }
        0 0.000000 0.000000   126:
        1 0.000011 0.000000   127: return $self;
        0 0.000000 0.000000   128:}
        0 0.000000 0.000000   129:
        0 0.000000 0.000000   130:
        0 0.000000 0.000000   131:=item handle
        0 0.000000 0.000000   132:
        0 0.000000 0.000000   133:
        0 0.000000 0.000000   134:
        0 0.000000 0.000000   135:
        0 0.000000 0.000000   136:
        0 0.000000 0.000000   137:
        0 0.000000 0.000000   138:
        1 0.000000 0.000000   139:sub handle {
        1 0.000007 0.000000   140: my $self   = shift;
        1 0.000009 0.000000   141: my $handle = shift || $self->{'_handle'};
        0 0.000000 0.000000   142:
        1 0.000002 0.000000   143: $self->error("no handle($handle) found")
        0 0.000000 0.000000   144:
        1 0.000005 0.000000   145: $self->{'_handle'} = $handle;
        0 0.000000 0.000000   146:
        1 0.000012 0.000000   147: return $self->{'_handle'};
        0 0.000000 0.000000   148:}
        0 0.000000 0.000000   149:
        0 0.000000 0.000000   150:
        0 0.000000 0.000000   151:=item status
        0 0.000000 0.000000   152:
        0 0.000000 0.000000   153:
        0 0.000000 0.000000   154:
        0 0.000000 0.000000   155:
        0 0.000000 0.000000   156:
        0 0.000000 0.000000   157:
        0 0.000000 0.000000   158:
        1 0.000000 0.000000   159:sub status {
        1 0.000005 0.000000   160: my $self = shift;
        1 0.000006 0.000000   161: my $status = shift || $self->{'_status'};
        0 0.000000 0.000000   162:
        1 0.000007 0.000000   163: $self->{'_status'} = $status;
        0 0.000000 0.000000   164:
        1 0.000007 0.000000   165: return $self->{'_status'};
        0 0.000000 0.000000   166:}
        0 0.000000 0.000000   167:
        0 0.000000 0.000000   168:
            ================ SmallProf version 0.9 ================
                        Profile of ..//Perlbug/File.pm                 Page 112
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   169:=item close
        0 0.000000 0.000000   170:
        0 0.000000 0.000000   171:
        0 0.000000 0.000000   172:
        0 0.000000 0.000000   173:
        0 0.000000 0.000000   174:
        0 0.000000 0.000000   175:
        0 0.000000 0.000000   176:
        0 0.000000 0.000000   177:sub close {
        0 0.000000 0.000000   178:    my $self = shift;
        0 0.000000 0.000000   179: my $fh = $self->handle;
        0 0.000000 0.000000   180:
        0 0.000000 0.000000   181: if ($fh) {
        0 0.000000 0.000000   182:  $fh->flush;
        0 0.000000 0.000000   183:  flock($fh, 8) or $self->error("Can't unlock
        0 0.000000 0.000000   184:  $self->status('unlocked');
        0 0.000000 0.000000   185:  $fh->close() if ref($fh);
        0 0.000000 0.000000   186:  $self->status('closed');
        0 0.000000 0.000000   187: }
        0 0.000000 0.000000   188:
        0 0.000000 0.000000   189: undef $self->{'_handle'};
        0 0.000000 0.000000   190:
        0 0.000000 0.000000   191: return $self;
        0 0.000000 0.000000   192:}
        0 0.000000 0.000000   193:
        0 0.000000 0.000000   194:
        0 0.000000 0.000000   195:=item DESTROY
        0 0.000000 0.000000   196:
        0 0.000000 0.000000   197:
        0 0.000000 0.000000   198:
        0 0.000000 0.000000   199:
        0 0.000000 0.000000   200:
        0 0.000000 0.000000   201:sub x_DESTROY {
        0 0.000000 0.000000   202:    my $self = shift;
        0 0.000000 0.000000   203: $self->close() if defined($self) && $self-
        0 0.000000 0.000000   204:}
        0 0.000000 0.000000   205:
        0 0.000000 0.000000   206:
        0 0.000000 0.000000   207:=item fh
        0 0.000000 0.000000   208:
        0 0.000000 0.000000   209:
        0 0.000000 0.000000   210:
        0 0.000000 0.000000   211:
        0 0.000000 0.000000   212:
        0 0.000000 0.000000   213:
        0 0.000000 0.000000   214:
        1 0.000000 0.000000   215:sub fh {
        1 0.000005 0.000000   216:    my $self = shift;
        1 0.000006 0.000000   217:    my $file = shift;
        1 0.000005 0.000000   218:    my $ctl  = shift || '+>>' || '<';
        1 0.000005 0.000000   219: my $num  = shift || '';
        0 0.000000 0.000000   220:
        1 0.000004 0.000000   221: my $fh   = undef;
        0 0.000000 0.000000   222:
        1 0.000008 0.000000   223:    if ($file !~ /\w+/) {
        0 0.000000 0.000000   224:  $self->error("inappropriate file($file)
            ================ SmallProf version 0.9 ================
                        Profile of ..//Perlbug/File.pm                 Page 113
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   225:    } else {
        1 0.000099 0.000000   226:  $fh = new FileHandle($file, $ctl, $num);
        1 0.000006 0.000000   227:  if (!(defined $fh)) {      # OK
        0 0.000000 0.000000   228:   $self->error("can't define filehandle($fh)
        0 0.000000 0.000000   229:        } else {
        0 0.000000 0.000000   230:   # $fh->autoflush(1);  #
        0 0.000000 0.000000   231:  }
        0 0.000000 0.000000   232:    }
        0 0.000000 0.000000   233:
        1 0.000088 0.000000   234:    return $fh;
        0 0.000000 0.000000   235:}
        0 0.000000 0.000000   236:
        0 0.000000 0.000000   237:
        0 0.000000 0.000000   238:=item append
        0 0.000000 0.000000   239:
        0 0.000000 0.000000   240:
        0 0.000000 0.000000   241:
        0 0.000000 0.000000   242:
        0 0.000000 0.000000   243:
        0 0.000000 0.000000   244:
        0 0.000000 0.000000   245:
        0 0.000000 0.000000   246:sub append {
        0 0.000000 0.000000   247:    my $self = shift;
        0 0.000000 0.000000   248:    my $data = shift;
        0 0.000000 0.000000   249:
        0 0.000000 0.000000   250: my $fh = $self->handle;
        0 0.000000 0.000000   251: my $pos  = '';
        0 0.000000 0.000000   252:
        0 0.000000 0.000000   253: if (!defined($fh)) {
        0 0.000000 0.000000   254:  $self->error("can't append to fh($fh)");
        0 0.000000 0.000000   255: } else {
        0 0.000000 0.000000   256:  flock($fh, 2) or $self->error("Can't lock
        0 0.000000 0.000000   257:  $self->status('locked');
        0 0.000000 0.000000   258:  $fh->seek(0, 2);
        0 0.000000 0.000000   259:  print $fh $data;
        0 0.000000 0.000000   260:  flock($fh, 8) or $self->error("Can't unlock
        0 0.000000 0.000000   261:  $self->status('unlocked');
        0 0.000000 0.000000   262:  $pos = $fh->tell;
        0 0.000000 0.000000   263:    }
        0 0.000000 0.000000   264:
        0 0.000000 0.000000   265:    return $self;
        0 0.000000 0.000000   266:}
        0 0.000000 0.000000   267:
        0 0.000000 0.000000   268:
        0 0.000000 0.000000   269:=item read
        0 0.000000 0.000000   270:
        0 0.000000 0.000000   271:
        0 0.000000 0.000000   272:
        0 0.000000 0.000000   273:
        0 0.000000 0.000000   274:
        0 0.000000 0.000000   275:
        0 0.000000 0.000000   276:
        0 0.000000 0.000000   277:sub read {
        0 0.000000 0.000000   278:    my $self = shift;
        0 0.000000 0.000000   279: my $fh = $self->handle;
        0 0.000000 0.000000   280: my @data = ();
            ================ SmallProf version 0.9 ================
                        Profile of ..//Perlbug/File.pm                 Page 114
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   281:
        0 0.000000 0.000000   282: if (!defined($fh)) {
        0 0.000000 0.000000   283:  $self->error("can't read from fh($fh)");
        0 0.000000 0.000000   284: } else {
        0 0.000000 0.000000   285:  $fh->flush;
        0 0.000000 0.000000   286:  $fh->seek(0, 0);
        0 0.000000 0.000000   287:  @data = $fh->getlines;
        0 0.000000 0.000000   288:    }
        0 0.000000 0.000000   289: return @data;
        0 0.000000 0.000000   290:}
        0 0.000000 0.000000   291:
        0 0.000000 0.000000   292:
        0 0.000000 0.000000   293:=item print
        0 0.000000 0.000000   294:
        0 0.000000 0.000000   295:
        0 0.000000 0.000000   296:
        0 0.000000 0.000000   297:
        0 0.000000 0.000000   298:
        0 0.000000 0.000000   299:
        0 0.000000 0.000000   300:
        0 0.000000 0.000000   301:sub print {
        0 0.000000 0.000000   302:    my $self = shift;
        0 0.000000 0.000000   303:
        0 0.000000 0.000000   304: print $self->read();
        0 0.000000 0.000000   305:
        0 0.000000 0.000000   306: return $self;
        0 0.000000 0.000000   307:}
        0 0.000000 0.000000   308:
        0 0.000000 0.000000   309:
        0 0.000000 0.000000   310:=item truncate
        0 0.000000 0.000000   311:
        0 0.000000 0.000000   312:
        0 0.000000 0.000000   313:
        0 0.000000 0.000000   314:
        0 0.000000 0.000000   315:
        0 0.000000 0.000000   316:
        0 0.000000 0.000000   317:
        0 0.000000 0.000000   318:sub truncate {
        0 0.000000 0.000000   319:    my $self = shift;
        0 0.000000 0.000000   320: my $fh = $self->handle;
        0 0.000000 0.000000   321:
        0 0.000000 0.000000   322: if (!defined($fh)) {
        0 0.000000 0.000000   323:  $self->error("can't truncate fh($fh)");
        0 0.000000 0.000000   324: } else {
        0 0.000000 0.000000   325:  $fh->seek(0, 2);
        0 0.000000 0.000000   326:  $fh->seek(0, 0);
        0 0.000000 0.000000   327:  $fh->truncate(0);
        0 0.000000 0.000000   328:  $fh->seek(0, 8);
        0 0.000000 0.000000   329:    }
        0 0.000000 0.000000   330: return $self;
        0 0.000000 0.000000   331:}
        0 0.000000 0.000000   332:
        0 0.000000 0.000000   333:
        0 0.000000 0.000000   334:=item copy
        0 0.000000 0.000000   335:
        0 0.000000 0.000000   336:
            ================ SmallProf version 0.9 ================
                        Profile of ..//Perlbug/File.pm                 Page 115
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   337:
        0 0.000000 0.000000   338:
        0 0.000000 0.000000   339:
        0 0.000000 0.000000   340:
        0 0.000000 0.000000   341:
        0 0.000000 0.000000   342:sub copy {
        0 0.000000 0.000000   343:    my $self = shift;
        0 0.000000 0.000000   344:    my $orig = shift;
        0 0.000000 0.000000   345:    my $targ = shift;
        0 0.000000 0.000000   346: my $perm = shift || '0766';
        0 0.000000 0.000000   347:    my @data = ();
        0 0.000000 0.000000   348:
        0 0.000000 0.000000   349:
        0 0.000000 0.000000   350:    # FILEHANDLES
        0 0.000000 0.000000   351:    # my $oldfh = new FileHandle($orig, '<');
        0 0.000000 0.000000   352: # my $newfh = new FileHandle($targ, '+>',
        0 0.000000 0.000000   353:    my $oldfh = $self->fh($orig, '<');
        0 0.000000 0.000000   354: my $newfh = $self->fh($targ, '+>', $perm);
        0 0.000000 0.000000   355:
        0 0.000000 0.000000   356: if (!(defined($oldfh)) ||
        0 0.000000 0.000000   357:     $self->error("Filehandle failures for
        0 0.000000 0.000000   358:    } else {
        0 0.000000 0.000000   359:  flock($oldfh, 2);
        0 0.000000 0.000000   360:  flock($newfh, 2);
        0 0.000000 0.000000   361:  LINE:
        0 0.000000 0.000000   362:        while (<$oldfh>) {
        0 0.000000 0.000000   363:            # s/\b(p)earl\b/${1}erl/i;
        0 0.000000 0.000000   364:            if (print $newfh $_) {
        0 0.000000 0.000000   365:                push(@data, $_); # see what
        0 0.000000 0.000000   366:            } else {
        0 0.000000 0.000000   367:                $self->error("can't write to
        0 0.000000 0.000000   368:                last LINE;
        0 0.000000 0.000000   369:            }
        0 0.000000 0.000000   370:        }
        0 0.000000 0.000000   371:  flock($oldfh, 8);
        0 0.000000 0.000000   372:  flock($newfh, 8);
        0 0.000000 0.000000   373:    }
        0 0.000000 0.000000   374:
        0 0.000000 0.000000   375:    # CLEAN UP
        0 0.000000 0.000000   376:    CORE::close($oldfh) if defined $oldfh;
        0 0.000000 0.000000   377:    CORE::close($newfh) if defined $newfh;
        0 0.000000 0.000000   378:
        0 0.000000 0.000000   379:    return @data;
        0 0.000000 0.000000   380:}
        0 0.000000 0.000000   381:
        0 0.000000 0.000000   382:
        0 0.000000 0.000000   383:=item link
        0 0.000000 0.000000   384:
        0 0.000000 0.000000   385:
        0 0.000000 0.000000   386:
        0 0.000000 0.000000   387:
        0 0.000000 0.000000   388:
        0 0.000000 0.000000   389:
        0 0.000000 0.000000   390:
        0 0.000000 0.000000   391:sub link {
        0 0.000000 0.000000   392:    my $self = shift;
            ================ SmallProf version 0.9 ================
                        Profile of ..//Perlbug/File.pm                 Page 116
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   393:    my $orig = shift;
        0 0.000000 0.000000   394:    my $targ = shift;
        0 0.000000 0.000000   395: my $mod  = shift || ''; # -f?
        0 0.000000 0.000000   396: my $res  = 0;
        0 0.000000 0.000000   397:
        0 0.000000 0.000000   398:
        0 0.000000 0.000000   399: if (! -e $orig) {
        0 0.000000 0.000000   400:  $self->error("orig($orig) doesn't exist to
        0 0.000000 0.000000   401: } else {
        0 0.000000 0.000000   402:  my $cmd = "ln $mod -s $orig $targ";
        0 0.000000 0.000000   403:  $res = system($cmd);  # doit
        0 0.000000 0.000000   404:  if ($res == 1 || ! -l $targ) {
        0 0.000000 0.000000   405:   $self->error("link($cmd) failed($res):
        0 0.000000 0.000000   406:  }
        0 0.000000 0.000000   407: }
        0 0.000000 0.000000   408:
        0 0.000000 0.000000   409:    return !$res;
        0 0.000000 0.000000   410:}
        0 0.000000 0.000000   411:
        0 0.000000 0.000000   412:
        0 0.000000 0.000000   413:=item syntax_check
        0 0.000000 0.000000   414:
        0 0.000000 0.000000   415:
        0 0.000000 0.000000   416:
        0 0.000000 0.000000   417:
        0 0.000000 0.000000   418:
        0 0.000000 0.000000   419:
        0 0.000000 0.000000   420:
        0 0.000000 0.000000   421:sub _syntax_check {
        0 0.000000 0.000000   422:    my $self = shift;
        0 0.000000 0.000000   423:    my $file = shift;
        0 0.000000 0.000000   424:    my $ok = 0;
        0 0.000000 0.000000   425:
        0 0.000000 0.000000   426:    # ARGS
        0 0.000000 0.000000   427:    if ($file =~ /\w+/) {
        0 0.000000 0.000000   428:        $self->error("requires a file($file)
        0 0.000000 0.000000   429: } else {
        0 0.000000 0.000000   430:        if (-f $file) {
        0 0.000000 0.000000   431:   $ok = 1;
        0 0.000000 0.000000   432:  } else {
        0 0.000000 0.000000   433:            $self->error("File ($file)
        0 0.000000 0.000000   434:        }
        0 0.000000 0.000000   435:    }
        0 0.000000 0.000000   436:
        0 0.000000 0.000000   437:    if ($ok == 1) {
        0 0.000000 0.000000   438:        eval {
        0 0.000000 0.000000   439:            require "$file";
        0 0.000000 0.000000   440:        };
        0 0.000000 0.000000   441:        if ($@) {
        0 0.000000 0.000000   442:   $ok = 0;
        0 0.000000 0.000000   443:            $self->error("Syntax problem with
        0 0.000000 0.000000   444:        }
        0 0.000000 0.000000   445:    }
        0 0.000000 0.000000   446:
        0 0.000000 0.000000   447:    return $ok;
        0 0.000000 0.000000   448:}
            ================ SmallProf version 0.9 ================
                        Profile of ..//Perlbug/File.pm                 Page 117
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   449:
        0 0.000000 0.000000   450:
        0 0.000000 0.000000   451:=back
        0 0.000000 0.000000   452:
        0 0.000000 0.000000   453:
        0 0.000000 0.000000   454:
        0 0.000000 0.000000   455:
        0 0.000000 0.000000   456:
        0 0.000000 0.000000   457:
        0 0.000000 0.000000   458:
        0 0.000000 0.000000   459:1;
        0 0.000000 0.000000   460:
        0 0.000000 0.000000   461:
            ================ SmallProf version 0.9 ================
                       Profile of ..//Perlbug/Format.pm                Page 118
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000     1:# Perlbug format handler
        0 0.000000 0.000000     2:# (C) 1999 Richard Foley RFI perlbug@rfi.net
        0 0.000000 0.000000     3:# $Id: Format.pm,v 1.60 2001/04/21 20:48:48
        0 0.000000 0.000000     4:#
        0 0.000000 0.000000     5:
        0 0.000000 0.000000     6:=head1 NAME
        0 0.000000 0.000000     7:
        0 0.000000 0.000000     8:
        0 0.000000 0.000000     9:
        0 0.000000 0.000000    10:
        0 0.000000 0.000000    11:
        0 0.000000 0.000000    12:package Perlbug::Format;
        0 0.000000 0.000000    13:use strict;
        0 0.000000 0.000000    14:use vars qw($VERSION);
        0 0.000000 0.000000    15:$VERSION = do { my @r = (q$Revision: 1.60 $
        0 0.000000 0.000000    16:my $DEBUG  = $ENV{'Perlbug_Format_DEBUG'} ||
        0 0.000000 0.000000    17:$|=1;
        0 0.000000 0.000000    18:
        0 0.000000 0.000000    19:=head1 DESCRIPTION
        0 0.000000 0.000000    20:
        0 0.000000 0.000000    21:
        0 0.000000 0.000000    22:
        0 0.000000 0.000000    23:
        0 0.000000 0.000000    24:
        0 0.000000 0.000000    25:
        0 0.000000 0.000000    26:
        0 0.000000 0.000000    27:
        0 0.000000 0.000000    28:
        0 0.000000 0.000000    29:
        0 0.000000 0.000000    30:
        0 0.000000 0.000000    31:
        0 0.000000 0.000000    32:
        0 0.000000 0.000000    33:
        0 0.000000 0.000000    34:
        0 0.000000 0.000000    35:
        0 0.000000 0.000000    36:
        0 0.000000 0.000000    37:
        0 0.000000 0.000000    38:
        0 0.000000 0.000000    39:
        0 0.000000 0.000000    40:
        0 0.000000 0.000000    41:
        0 0.000000 0.000000    42:
        0 0.000000 0.000000    43:
        0 0.000000 0.000000    44:
        0 0.000000 0.000000    45:use Carp;
        0 0.000000 0.000000    46:use Data::Dumper;
        0 0.000000 0.000000    47:use File::Spec;
        0 0.000000 0.000000    48:use lib (File::Spec->updir);
        0 0.000000 0.000000    49:# use Perlbug::Object;
        0 0.000000 0.000000    50:use HTML::Entities;
        0 0.000000 0.000000    51:use Perlbug::Base;
        0 0.000000 0.000000    52:use strict;
        0 0.000000 0.000000    53:my $i_CNT = 0;
        0 0.000000 0.000000    54:my $i_MAX = 1;
        0 0.000000 0.000000    55:my $i_TOP = 1;
        0 0.000000 0.000000    56:my $o_Perlbug_Base = undef;
            ================ SmallProf version 0.9 ================
                       Profile of ..//Perlbug/Format.pm                Page 119
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000    57:
        0 0.000000 0.000000    58:
        0 0.000000 0.000000    59:=head1 SYNOPSIS
        0 0.000000 0.000000    60:
        0 0.000000 0.000000    61:
        0 0.000000 0.000000    62:
        0 0.000000 0.000000    63:
        0 0.000000 0.000000    64:
        0 0.000000 0.000000    65:
        0 0.000000 0.000000    66:
        0 0.000000 0.000000    67:
        0 0.000000 0.000000    68:
        0 0.000000 0.000000    69:
        0 0.000000 0.000000    70:
        0 0.000000 0.000000    71:
        0 0.000000 0.000000    72:
        0 0.000000 0.000000    73:
        0 0.000000 0.000000    74:
        0 0.000000 0.000000    75:
        0 0.000000 0.000000    76:
        0 0.000000 0.000000    77:
        0 0.000000 0.000000    78:sub new {
        0 0.000000 0.000000    79:    my $proto = shift;
        0 0.000000 0.000000    80:    my $class = ref($proto) || $proto;
        0 0.000000 0.000000    81: $o_Perlbug_Base = (ref($_[0])) ? shift :
        0 0.000000 0.000000    82:
        0 0.000000 0.000000    83: my $self = Perlbug::Object-
        0 0.000000 0.000000    84:  'name'  => 'Format',
        0 0.000000 0.000000    85: );
        0 0.000000 0.000000    86: $DEBUG = $Perlbug::DEBUG || $DEBUG;
        0 0.000000 0.000000    87:
        0 0.000000 0.000000    88: bless($self, $class);
        0 0.000000 0.000000    89:}
        0 0.000000 0.000000    90:
        0 0.000000 0.000000    91:
        0 0.000000 0.000000    92:=item base
        0 0.000000 0.000000    93:
        0 0.000000 0.000000    94:
        0 0.000000 0.000000    95:
        0 0.000000 0.000000    96:
        0 0.000000 0.000000    97:
        0 0.000000 0.000000    98:sub base {
        0 0.000000 0.000000    99: my $self = shift;
        0 0.000000 0.000000   100:
        0 0.000000 0.000000   101: $o_Perlbug_Base = ref($o_Perlbug_Base) ?
        0 0.000000 0.000000   102:
        0 0.000000 0.000000   103: return $o_Perlbug_Base;
        0 0.000000 0.000000   104:}
        0 0.000000 0.000000   105:
        0 0.000000 0.000000   106:
        0 0.000000 0.000000   107:
        0 0.000000 0.000000   108:=head1 FORMATTING
        0 0.000000 0.000000   109:
        0 0.000000 0.000000   110:
        0 0.000000 0.000000   111:
        0 0.000000 0.000000   112:
            ================ SmallProf version 0.9 ================
                       Profile of ..//Perlbug/Format.pm                Page 120
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   113:
        0 0.000000 0.000000   114:
        0 0.000000 0.000000   115:
        0 0.000000 0.000000   116:
        0 0.000000 0.000000   117:
        0 0.000000 0.000000   118:
        0 0.000000 0.000000   119:
        0 0.000000 0.000000   120:
        0 0.000000 0.000000   121:
        0 0.000000 0.000000   122:
        0 0.000000 0.000000   123:
        0 0.000000 0.000000   124:
        0 0.000000 0.000000   125:
        0 0.000000 0.000000   126:
        5 0.000000 0.000000   127:sub FORMAT {
        5 0.000028 0.000000   128: my $self = shift;
        5 0.000030 0.000000   129: my $fmt  = shift || $self->base-
        5 0.000379 0.000000   130: my $h_data = shift || $self->_oref('data');
        5 0.000406 0.000000   131: my $h_rel  = shift || $self-
        0 0.000000 0.000000   132:
        5 0.000048 0.000000   133: my ($format, $str, $target, $top) = ('', '',
        5 0.000019 0.000000   134: my @args = ();
        5 0.000017 0.000000   135: my $max  = 1000;
        0 0.000000 0.000000   136:
        5 0.000035 0.000000   137: if (ref($h_data) ne 'HASH' or ref($h_rel) ne
        0 0.000000 0.000000   138:  $self->error("non-valid required args:
        0 0.000000 0.000000   139: } else {
       15 0.001169 0.000000   140:  my $h_data = $self-
        5 0.000048 0.000000   141:  $target = 'FORMAT_'.$fmt;
        0 0.000000 0.000000   142:  # $self->debug(1, "attempting to $self-
        5 0.000483 0.000000   143:  ($top, $format, @args) = $self-
        0 0.000000 0.000000   144:  # $self->debug(1, "top($top),
        5 0.000035 0.000000   145:  $^W = 0;
        5 0.000055 0.000000   146:  if ($fmt =~ /[aAil]/) {
        0 0.000000 0.000000   147:   $= = 1000; # lines per page
        0 0.000000 0.000000   148:   # my $max = $data =~ tr/\n/\n/; # $max +=
        0 0.000000 0.000000   149:   $^A = "";        # set
        0 0.000000 0.000000   150:   formline($format, @args);   # 1
        0 0.000000 0.000000   151:  } else {
        5 0.000110 0.000000   152:   $^A = $format;
        0 0.000000 0.000000   153:  }
        5 0.000020 0.000000   154:  $^W = 1;
        5 0.000095 0.000000   155:  $str = (($i_TOP == 1) ? $top.$^A : $^A); #
        5 0.000501 0.000000   156:  if ($self->base->current('context') eq
        0 0.000000 0.000000   157:   $str = encode_entities($str);
        0 0.000000 0.000000   158:   $str = '<pre>'.$str.'</pre>';
        0 0.000000 0.000000   159:  }
        5 0.000021 0.000000   160:  $self->debug(5, "str($str)") if $DEBUG;
        5 0.000438 0.000000   161:  $self->cnt(1);
        5 0.000815 0.000000   162:  $^A = "";         # reset
        0 0.000000 0.000000   163: }
        0 0.000000 0.000000   164:
        5 0.001308 0.000000   165: return $str;
        0 0.000000 0.000000   166:}
        0 0.000000 0.000000   167:
        0 0.000000 0.000000   168:
            ================ SmallProf version 0.9 ================
                       Profile of ..//Perlbug/Format.pm                Page 121
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   169:=item format_fields
        0 0.000000 0.000000   170:
        0 0.000000 0.000000   171:
        0 0.000000 0.000000   172:
        0 0.000000 0.000000   173:
        0 0.000000 0.000000   174:
        0 0.000000 0.000000   175:
        0 0.000000 0.000000   176:
        0 0.000000 0.000000   177:
        0 0.000000 0.000000   178:
        5 0.000000 0.000000   179:sub format_fields {
        5 0.000032 0.000000   180:    my $self = shift;
        5 0.000026 0.000000   181:    my $h_ref= shift;
        5 0.000032 0.000000   182:    my $fmt  = shift || 'a';
        5 0.000034 0.000000   183: my $h_ret= {};
        0 0.000000 0.000000   184:
        5 0.000032 0.000000   185:    if (ref($h_ref) ne 'HASH') {
        0 0.000000 0.000000   186:  $self->error("requires a hash
        0 0.000000 0.000000   187: } else {
        5 0.000409 0.000000   188:  my $n_ref = $self->normalize($h_ref);
        5 0.000071 0.000000   189:  if ($fmt !~ /[hHIL]/) {  # ascii
        0 0.000000 0.000000   190:   $h_ret = $self->asciify($n_ref);
        0 0.000000 0.000000   191:  } else {      # html
        5 0.000861 0.010000   192:   $h_ret = $self->htmlify($n_ref);
      410 0.001964 0.010000   193:   foreach my $k (keys %{$h_ret}) {
      400 0.003949 0.010000   194:    if ($k =~ /body|entry|header|subject/i) {
       15 0.001327 0.000000   195:     $$h_ret{$k} =
       15 0.000265 0.000000   196:     $$h_ret{$k} =
        0 0.000000 0.000000   197:    }
        0 0.000000 0.000000   198:   }
        0 0.000000 0.000000   199:  }
        0 0.000000 0.000000   200: }
        0 0.000000 0.000000   201:
        5 0.000539 0.000000   202:    return $h_ret;
        0 0.000000 0.000000   203:}
        0 0.000000 0.000000   204:
        0 0.000000 0.000000   205:
        0 0.000000 0.000000   206:=item normalize
        0 0.000000 0.000000   207:
        0 0.000000 0.000000   208:
        0 0.000000 0.000000   209:
        0 0.000000 0.000000   210:
        0 0.000000 0.000000   211:
        0 0.000000 0.000000   212:
        0 0.000000 0.000000   213:
        0 0.000000 0.000000   214:
        0 0.000000 0.000000   215:
        0 0.000000 0.000000   216:
        0 0.000000 0.000000   217:
        0 0.000000 0.000000   218:
        0 0.000000 0.000000   219:
        0 0.000000 0.000000   220:
        0 0.000000 0.000000   221:
        0 0.000000 0.000000   222:
        0 0.000000 0.000000   223:
        0 0.000000 0.000000   224:
            ================ SmallProf version 0.9 ================
                       Profile of ..//Perlbug/Format.pm                Page 122
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   225:
        0 0.000000 0.000000   226:
        0 0.000000 0.000000   227:
        5 0.000000 0.000000   228:sub normalize {
        5 0.000026 0.000000   229: my $self  = shift;
        5 0.000023 0.000000   230: my $h_data  = shift;
        5 0.000025 0.000000   231: my %ret  = ();
        0 0.000000 0.000000   232:
        5 0.000026 0.000000   233: if (ref($h_data) ne 'HASH') {
        0 0.000000 0.000000   234:  $self->error("requires hashed data
        0 0.000000 0.000000   235: } else {
       10 0.000797 0.010000   236:  my %args = %{$h_data};
        0 0.000000 0.000000   237:  HASH:
      135 0.000658 0.000000   238:  foreach my $key (keys %args) {
      130 0.000623 0.010000   239:   if (ref($args{$key}) ne 'HASH') {
       45 0.000456 0.000000   240:    $ret{$key} = $args{$key};      #
        0 0.000000 0.000000   241:   } else {
      170 0.002219 0.000000   242:    my %data = %{$args{$key}};
      425 0.002191 0.010000   243:    foreach my $hkey (keys %data) {
      340 0.003321 0.010000   244:     $ret{"${key}_$hkey"} = $data{$hkey};  #
        0 0.000000 0.000000   245:    }
        0 0.000000 0.000000   246:   }
        0 0.000000 0.000000   247:  }
        0 0.000000 0.000000   248: }
        0 0.000000 0.000000   249:
        5 0.000075 0.000000   250: return \%ret;
        0 0.000000 0.000000   251:}
        0 0.000000 0.000000   252:
        0 0.000000 0.000000   253:
        0 0.000000 0.000000   254:=item asciify
        0 0.000000 0.000000   255:
        0 0.000000 0.000000   256:
        0 0.000000 0.000000   257:
        0 0.000000 0.000000   258:
        0 0.000000 0.000000   259:
        0 0.000000 0.000000   260:
        0 0.000000 0.000000   261:
        0 0.000000 0.000000   262:sub asciify {
        0 0.000000 0.000000   263: my $self  = shift;
        0 0.000000 0.000000   264: my $h_data  = shift;
        0 0.000000 0.000000   265: my %ret  = ();
        0 0.000000 0.000000   266:
        0 0.000000 0.000000   267: if (ref($h_data) ne 'HASH') {
        0 0.000000 0.000000   268:  $self->error("requires hashed data
        0 0.000000 0.000000   269: } else {
        0 0.000000 0.000000   270:  my %args = %{$h_data}; #
        0 0.000000 0.000000   271:  HASH:
        0 0.000000 0.000000   272:  foreach my $key (keys %args) {
        0 0.000000 0.000000   273:   if (ref($args{$key}) ne 'ARRAY') { #
        0 0.000000 0.000000   274:    $ret{$key} = $args{$key} || '0';
        0 0.000000 0.000000   275:   } else {
        0 0.000000 0.000000   276:    if (!(scalar(@{$args{$key}}) >= 1)) {
        0 0.000000 0.000000   277:     $ret{$key} = '';
        0 0.000000 0.000000   278:    } else {
        0 0.000000 0.000000   279:     $ret{$key} = join(', ', @{$args{$key}});
        0 0.000000 0.000000   280:    }
            ================ SmallProf version 0.9 ================
                       Profile of ..//Perlbug/Format.pm                Page 123
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   281:   }
        0 0.000000 0.000000   282:  }
        0 0.000000 0.000000   283: }
        0 0.000000 0.000000   284:
        0 0.000000 0.000000   285: return \%ret;
        0 0.000000 0.000000   286:}
        0 0.000000 0.000000   287:
        0 0.000000 0.000000   288:
        0 0.000000 0.000000   289:=item htmlify
        0 0.000000 0.000000   290:
        0 0.000000 0.000000   291:
        0 0.000000 0.000000   292:
        0 0.000000 0.000000   293:
        0 0.000000 0.000000   294:
        0 0.000000 0.000000   295:
        0 0.000000 0.000000   296:
        5 0.000000 0.000000   297:sub htmlify {
        5 0.000032 0.000000   298: my $self  = shift;
        5 0.000028 0.000000   299: my $h_data  = shift;
        5 0.000024 0.000000   300: my %ret  = ();
        0 0.000000 0.000000   301:
        5 0.000036 0.000000   302: if (ref($h_data) ne 'HASH') {
        0 0.000000 0.000000   303:  $self->error("requires hashed data
        0 0.000000 0.000000   304: } else {
       10 0.002080 0.000000   305:  my %args = %{$h_data};
        0 0.000000 0.000000   306:  # print $self->base->html_dump($h_data);
      390 0.003966 0.030000   307:  foreach my $key (keys %args) {
      385 0.002090 0.000000   308:   my $val = $args{$key};
      385 0.001416 0.020000   309:   if (ref($val) eq 'ARRAY') {     # MULTI
      340 0.002886 0.000000   310:    my @args = @{$val};
      170 0.000348 0.000000   311:    $self->debug(3, "\tmulti(@args)") if
      170 0.001124 0.000000   312:    if (!(scalar(@args) >= 1)) {    # zip
      104 0.000833 0.000000   313:     $ret{$key} = '&nbsp;';
        0 0.000000 0.000000   314:    } else {
       66 0.001185 0.010000   315:     if ($key !~ /^([a-z]+)_(ids|names)$/) {
        0 0.000000 0.000000   316:      $ret{$key} = join(' &nbsp; ', @args);
        0 0.000000 0.000000   317:     } else {        # rellies:
       66 0.000925 0.000000   318:      my ($obj, $word) = ($1, $2);
       66 0.006092 0.010000   319:      my $o_obj = ($obj =~
       66 0.003982 0.010000   320:      my $ident = ($word eq 'names') ?
       66 0.000304 0.000000   321:      if ($key ne 'user_names') {   # all:
       66 0.005181 0.020000   322:       my $stat_subj = (grep(/^$obj$/, $self-
        0 0.000000 0.000000   323:        ? $args{'subject'}
        0 0.000000 0.000000   324:        : '';
       23 0.002106 0.000000   325:       $ret{$key} = join(', ', ($word eq
       48 0.004179 0.000000   326:        ? map { $self->href("${obj}_id",
       66 0.001807 0.010000   327:        : map { $self->href("${obj}_id",
        0 0.000000 0.000000   328:       );
        0 0.000000 0.000000   329:      } else {         # userid(email)
        0 0.000000 0.000000   330:       my @usrs = ();
        0 0.000000 0.000000   331:       foreach my $arg (@args) {   # status
        0 0.000000 0.000000   332:        my $stat_name = $arg;
        0 0.000000 0.000000   333:        my ($uid)  = $o_obj->name2id([$arg]);
        0 0.000000 0.000000   334:        my ($name) = $self->href("${obj}_id",
        0 0.000000 0.000000   335:        my ($addr) = $o_obj->read($uid)-
        0 0.000000 0.000000   336:        my $rec    = qq|$name<a
            ================ SmallProf version 0.9 ================
                       Profile of ..//Perlbug/Format.pm                Page 124
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   337:        push(@usrs, $rec);
        0 0.000000 0.000000   338:       }
        0 0.000000 0.000000   339:       $ret{$key} = join(', <br>', @usrs);
        0 0.000000 0.000000   340:      }
        0 0.000000 0.000000   341:     }
        0 0.000000 0.000000   342:    }
        0 0.000000 0.000000   343:   } else {           # SINGLE
      215 0.000377 0.000000   344:    $self->debug(3, "\tsingle($val)") if
      215 0.002102 0.000000   345:    if ($key =~ /^([a-z]+)id$/i) {    #
        5 0.000062 0.000000   346:     my $obj = $1;
        5 0.000034 0.000000   347:     my ($hdrs, $status) = ('', '');
        5 0.000446 0.000000   348:     if (grep(/^$obj$/, $self->base-
        5 0.000424 0.000000   349:      ($hdrs) = $self->href("${obj}_header",
        5 0.000088 0.000000   350:      $status = $args{'subject'};
        0 0.000000 0.000000   351:     }
        5 0.000450 0.000000   352:     $ret{$key} = join('&nbsp;', $self-
        5 0.000027 0.000000   353:     $self->debug(1, "obj($obj) val($val) ->
      210 0.001236 0.000000   354:    } elsif ($key =~ /^([a-z]+)_count$/) {  #
       85 0.000871 0.000000   355:     my $obj = $1;
       85 0.000518 0.000000   356:     my $pointer = "${obj}_ids";
       85 0.000336 0.000000   357:     my @ids = ();
      170 0.001337 0.010000   358:     @ids = @{$args{$pointer}} if
       85 0.000733 0.000000   359:     my $ids = join("&${obj}_id=", @ids);
       85 0.008288 0.020000   360:     my $stat_hdrs = @ids." $obj's";
       85 0.009266 0.010000   361:     ($ret{$key}) = $self->href("${obj}_id",
      125 0.000480 0.000000   362:    } elsif ($key =~ /^(source|to)addr$/) {
       10 0.001120 0.010000   363:     my ($addr) = $self->parse_addrs([$val]);
       10 0.000268 0.010000   364:     ($ret{$key}) = ($addr =~ /\w/) ? qq|<a
        0 0.000000 0.000000   365:    } else {         # name etc...
        0 0.000000 0.000000   366:     # my $obj = $o_obj->key || 'x';
      115 0.001412 0.010000   367:     $ret{$key} = ($key eq 'name' && $val =~
        0 0.000000 0.000000   368:      ? qq|<a href="mailto:$val">$val</a>|
        0 0.000000 0.000000   369:      : "$val " # join(' ', $self-
        0 0.000000 0.000000   370:     ;
        0 0.000000 0.000000   371:    }
      215 0.005736 0.010000   372:    $ret{$key} = ' ' unless $ret{$key} =~
        0 0.000000 0.000000   373:   }
      385 0.003697 0.020000   374:   $self->debug(2, "\tkey($key) ->
        0 0.000000 0.000000   375:  }
        0 0.000000 0.000000   376: }
        5 0.005684 0.010000   377: return \%ret;
        0 0.000000 0.000000   378:}
        0 0.000000 0.000000   379:
        0 0.000000 0.000000   380:
        0 0.000000 0.000000   381:=item FORMAT_ascii
        0 0.000000 0.000000   382:
        0 0.000000 0.000000   383:
        0 0.000000 0.000000   384:
        0 0.000000 0.000000   385:
        0 0.000000 0.000000   386:
        0 0.000000 0.000000   387:
        0 0.000000 0.000000   388:
        0 0.000000 0.000000   389:sub FORMAT_ascii { # defaults to 80 chars
        0 0.000000 0.000000   390: my $self = shift;
        0 0.000000 0.000000   391: my $data = shift; # h
        0 0.000000 0.000000   392:
            ================ SmallProf version 0.9 ================
                       Profile of ..//Perlbug/Format.pm                Page 125
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   393: my $key  = ucfirst($self->attr('key'));
        0 0.000000 0.000000   394: my @args = ( values %{$data}, 'a'..'z', );
        0 0.000000 0.000000   395: my ($top, $pre, $post) = ('',
        0 0.000000 0.000000   396: my $format = qq|
        0 0.000000 0.000000   397:$key @{[ref($self)]} format:
        0 0.000000 0.000000   398:---------------------------------------------
        0 0.000000 0.000000   399:|.(('@'.("<" x 76)."\n") x scalar(@args)).qq|
        0 0.000000 0.000000   400:|; # @* will go off the end (good for
        0 0.000000 0.000000   401:
        0 0.000000 0.000000   402: return ($top, $format, @args);
        0 0.000000 0.000000   403:}
        0 0.000000 0.000000   404:
        0 0.000000 0.000000   405:
        0 0.000000 0.000000   406:=item FORMAT_html
        0 0.000000 0.000000   407:
        0 0.000000 0.000000   408:
        0 0.000000 0.000000   409:
        0 0.000000 0.000000   410:
        0 0.000000 0.000000   411:
        0 0.000000 0.000000   412:
        0 0.000000 0.000000   413:
        0 0.000000 0.000000   414:sub FORMAT_html { # default where format or
        0 0.000000 0.000000   415: my $self = shift;
        0 0.000000 0.000000   416: my $href = shift; # h
        0 0.000000 0.000000   417:
        0 0.000000 0.000000   418: my $key  = ucfirst($self->attr('key'));
        0 0.000000 0.000000   419: my @args = map { "$_<br>" } (values
        0 0.000000 0.000000   420: my $top = '';
        0 0.000000 0.000000   421: my $format = qq|
        0 0.000000 0.000000   422:<hr>
        0 0.000000 0.000000   423:<h3>$key @{[ref($self)]} format:</h3>
        0 0.000000 0.000000   424:<br>
        0 0.000000 0.000000   425:|.(('@*'."\n") x scalar(@args)).qq|
        0 0.000000 0.000000   426:|; # @* will go off the end (good for
        0 0.000000 0.000000   427:
        0 0.000000 0.000000   428: return ($top, $format, @args);
        0 0.000000 0.000000   429:}
        0 0.000000 0.000000   430:
        0 0.000000 0.000000   431:
        0 0.000000 0.000000   432:=item max
        0 0.000000 0.000000   433:
        0 0.000000 0.000000   434:
        0 0.000000 0.000000   435:
        0 0.000000 0.000000   436:
        0 0.000000 0.000000   437:
        0 0.000000 0.000000   438:
        0 0.000000 0.000000   439:
        5 0.000000 0.000000   440:sub max {
        5 0.000022 0.000000   441: my $self = shift;
        0 0.000000 0.000000   442:
        5 0.000023 0.000000   443: $i_MAX   = shift || $i_MAX;
        0 0.000000 0.000000   444:
        5 0.000030 0.000000   445: return $i_MAX;
        0 0.000000 0.000000   446:}
        0 0.000000 0.000000   447:
        0 0.000000 0.000000   448:
            ================ SmallProf version 0.9 ================
                       Profile of ..//Perlbug/Format.pm                Page 126
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   449:=item cnt
        0 0.000000 0.000000   450:
        0 0.000000 0.000000   451:
        0 0.000000 0.000000   452:
        0 0.000000 0.000000   453:
        0 0.000000 0.000000   454:
        0 0.000000 0.000000   455:
        0 0.000000 0.000000   456:
        5 0.000000 0.000000   457:sub cnt {
        5 0.000026 0.000000   458: my $self = shift;
        5 0.000025 0.000000   459: $i_CNT  += shift || 0;
        0 0.000000 0.000000   460:
        5 0.000029 0.000000   461: if ($i_CNT >= $i_MAX) {
        0 0.000000 0.000000   462:  $i_CNT = 0;
        0 0.000000 0.000000   463:  $i_TOP = 1;
        0 0.000000 0.000000   464: } else {
        5 0.000023 0.000000   465:  $i_TOP = 0;
        0 0.000000 0.000000   466: }
        0 0.000000 0.000000   467:
        5 0.000026 0.000000   468: return $i_CNT;
        0 0.000000 0.000000   469:}
        0 0.000000 0.000000   470:
        0 0.000000 0.000000   471:
        0 0.000000 0.000000   472:=item parse_addrs
        0 0.000000 0.000000   473:
        0 0.000000 0.000000   474:
        0 0.000000 0.000000   475:
        0 0.000000 0.000000   476:
        0 0.000000 0.000000   477:
        0 0.000000 0.000000   478:
        0 0.000000 0.000000   479:
        0 0.000000 0.000000   480:
        0 0.000000 0.000000   481:
       10 0.000000 0.000000   482:sub parse_addrs {
       10 0.000057 0.000000   483: my $self = shift;
       10 0.000047 0.000000   484: my $a_addrs = shift;
       10 0.000056 0.000000   485: my $type    = shift || 'address'; # format
        0 0.000000 0.000000   486:
       20 0.000160 0.000000   487: my @addrs = (ref($a_addrs) eq 'ARRAY') ?
       10 0.000096 0.010000   488: my %parsed  = ();
        0 0.000000 0.000000   489:
       10 0.000074 0.000000   490: if (scalar @addrs >= 1) {
       20 0.000144 0.000000   491:  foreach my $addr (@addrs) {
       10 0.000923 0.000000   492:   my @o_addrs = Mail::Address->parse($addr);
       20 0.000263 0.000000   493:   foreach my $o_addr (@o_addrs) {
       10 0.000041 0.000000   494:    if (ref($o_addr)) {
       10 0.000739 0.000000   495:     my ($addr) = $o_addr->$type();
       10 0.000110 0.000000   496:     $parsed{$addr}++;
        0 0.000000 0.000000   497:    }
        0 0.000000 0.000000   498:   }
        0 0.000000 0.000000   499:  }
        0 0.000000 0.000000   500: }
        0 0.000000 0.000000   501:
       10 0.000030 0.000000   502: $self->debug(3, "a_addrs($a_addrs),
       10 0.000266 0.000000   503: return keys %parsed;
        0 0.000000 0.000000   504:}
            ================ SmallProf version 0.9 ================
                       Profile of ..//Perlbug/Format.pm                Page 127
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   505:
        0 0.000000 0.000000   506:
        0 0.000000 0.000000   507:=head1 FORMATTING_STYLES
        0 0.000000 0.000000   508:
        0 0.000000 0.000000   509:
        0 0.000000 0.000000   510:
        0 0.000000 0.000000   511:
        0 0.000000 0.000000   512:
        0 0.000000 0.000000   513:
        0 0.000000 0.000000   514:
        0 0.000000 0.000000   515:
        0 0.000000 0.000000   516:
        0 0.000000 0.000000   517:
        0 0.000000 0.000000   518:=item FORMAT_i
        0 0.000000 0.000000   519:
        0 0.000000 0.000000   520:
        0 0.000000 0.000000   521:
        0 0.000000 0.000000   522:
        0 0.000000 0.000000   523:
        0 0.000000 0.000000   524:
        0 0.000000 0.000000   525:
        0 0.000000 0.000000   526:
        0 0.000000 0.000000   527:sub FORMAT_i { #
        0 0.000000 0.000000   528: my $self = shift;
        0 0.000000 0.000000   529:
        0 0.000000 0.000000   530: my $x    = shift; #
        0 0.000000 0.000000   531: my $pri  = $self->attr('primary_key');
        0 0.000000 0.000000   532: my @args = ( $$x{$pri} );
        0 0.000000 0.000000   533: my $top = '';
        0 0.000000 0.000000   534: my $format = qq|@<<<<<<<<<<<\n|;
        0 0.000000 0.000000   535:
        0 0.000000 0.000000   536: return ($top, $format, @args);
        0 0.000000 0.000000   537:}
        0 0.000000 0.000000   538:
        0 0.000000 0.000000   539:
        0 0.000000 0.000000   540:=item FORMAT_I
        0 0.000000 0.000000   541:
        0 0.000000 0.000000   542:
        0 0.000000 0.000000   543:
        0 0.000000 0.000000   544:
        0 0.000000 0.000000   545:
        0 0.000000 0.000000   546:
        0 0.000000 0.000000   547:
        0 0.000000 0.000000   548:
        0 0.000000 0.000000   549:sub FORMAT_I { #
        0 0.000000 0.000000   550: my $self = shift;
        0 0.000000 0.000000   551:
        0 0.000000 0.000000   552: my $x    = shift; #
        0 0.000000 0.000000   553: my $pri  = $self->attr('primary_key');
        0 0.000000 0.000000   554: my @args = ();
        0 0.000000 0.000000   555: my $top = '';
        0 0.000000 0.000000   556: my $format = qq|$$x{$pri}<br>\n|;
        0 0.000000 0.000000   557:
        0 0.000000 0.000000   558: return ($top, $format, @args);
        0 0.000000 0.000000   559:}
        0 0.000000 0.000000   560:
            ================ SmallProf version 0.9 ================
                       Profile of ..//Perlbug/Format.pm                Page 128
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   561:
        0 0.000000 0.000000   562:=item FORMAT_l
        0 0.000000 0.000000   563:
        0 0.000000 0.000000   564:
        0 0.000000 0.000000   565:
        0 0.000000 0.000000   566:
        0 0.000000 0.000000   567:
        0 0.000000 0.000000   568:
        0 0.000000 0.000000   569:
        0 0.000000 0.000000   570:
        0 0.000000 0.000000   571:sub FORMAT_l { #
        0 0.000000 0.000000   572: my $self = shift;
        0 0.000000 0.000000   573:
        0 0.000000 0.000000   574: my $x    = shift; #
        0 0.000000 0.000000   575: my $obj_key_oid = ucfirst($self-
        0 0.000000 0.000000   576: $obj_key_oid .= (' ' x (12 -
        0 0.000000 0.000000   577: my $pri  = $self->attr('primary_key');
        0 0.000000 0.000000   578: my @args = (
        0 0.000000 0.000000   579:  $$x{$pri}, $$x{'name'}, $$x{'bug_count'},
        0 0.000000 0.000000   580: );
        0 0.000000 0.000000   581: my $top = qq|
        0 0.000000 0.000000   582:$obj_key_oid  Name           Bugids  Created
        0 0.000000 0.000000   583: my $format = qq|
        0 0.000000 0.000000   584:@<<<<<<<<<<<  @<<<<<<<<<<<<< @<<<<<
        0 0.000000 0.000000   585:|;
        0 0.000000 0.000000   586:
        0 0.000000 0.000000   587: return ($top, $format, @args);
        0 0.000000 0.000000   588:}
        0 0.000000 0.000000   589:
        0 0.000000 0.000000   590:
        0 0.000000 0.000000   591:=item FORMAT_a
        0 0.000000 0.000000   592:
        0 0.000000 0.000000   593:
        0 0.000000 0.000000   594:
        0 0.000000 0.000000   595:
        0 0.000000 0.000000   596:
        0 0.000000 0.000000   597:
        0 0.000000 0.000000   598:
        0 0.000000 0.000000   599:sub FORMAT_a { # default where format or
        0 0.000000 0.000000   600: my $self = shift;
        0 0.000000 0.000000   601:
        0 0.000000 0.000000   602: my $x    = shift; #
        0 0.000000 0.000000   603: my $obj_key_oid = ucfirst($self-
        0 0.000000 0.000000   604: $obj_key_oid .= (' ' x (12 -
        0 0.000000 0.000000   605: my $pri  = $self->attr('primary_key');
        0 0.000000 0.000000   606: my @args = (
        0 0.000000 0.000000   607:  $$x{$pri}, $$x{'name'}, $$x{'created'},
        0 0.000000 0.000000   608: );
        0 0.000000 0.000000   609: my $top = qq|
        0 0.000000 0.000000   610:$obj_key_oid    Name           Created
        0 0.000000 0.000000   611: my $format = qq|
        0 0.000000 0.000000   612:@<<<<<<<<<<<    @<<<<<<<<<<<<<
        0 0.000000 0.000000   613:Subject:
        0 0.000000 0.000000   614:|;
        0 0.000000 0.000000   615: foreach my $key (keys %{$x}) {
        0 0.000000 0.000000   616:  if ($key =~ /^([a-z]+)_ids$/) {
            ================ SmallProf version 0.9 ================
                       Profile of ..//Perlbug/Format.pm                Page 129
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   617:   push(@args, $$x{"${1}_count"}, $$x{$key});
        0 0.000000 0.000000   618:   $format .= sprintf('%-16s', $key.':
        0 0.000000 0.000000   619:  }
        0 0.000000 0.000000   620: }
        0 0.000000 0.000000   621: push(@args, $$x{'body'});
        0 0.000000 0.000000   622: $format .= "\n\@\*\n";
        0 0.000000 0.000000   623:
        0 0.000000 0.000000   624: return ($top, $format, @args);
        0 0.000000 0.000000   625:}
        0 0.000000 0.000000   626:
        0 0.000000 0.000000   627:
        0 0.000000 0.000000   628:=item FORMAT_A
        0 0.000000 0.000000   629:
        0 0.000000 0.000000   630:
        0 0.000000 0.000000   631:
        0 0.000000 0.000000   632:
        0 0.000000 0.000000   633:
        0 0.000000 0.000000   634:
        0 0.000000 0.000000   635:
        0 0.000000 0.000000   636:sub FORMAT_A { # default where format or
        0 0.000000 0.000000   637: my $self = shift;
        0 0.000000 0.000000   638:
        0 0.000000 0.000000   639: my $x    = shift; #
        0 0.000000 0.000000   640: my $obj_key_oid = ucfirst($self-
        0 0.000000 0.000000   641: $obj_key_oid .= (' ' x (12 -
        0 0.000000 0.000000   642: my $pri  = $self->attr('primary_key');
        0 0.000000 0.000000   643: my @args = (
        0 0.000000 0.000000   644:  $$x{$pri}, $$x{'name'}, $$x{'bug_count'},
        0 0.000000 0.000000   645:  $$x{'header'}, $$x{'body'}, $$x{'bug_ids'}
        0 0.000000 0.000000   646: );
        0 0.000000 0.000000   647: my $top = qq|
        0 0.000000 0.000000   648:$obj_key_oid  Name           Bugids  Created
        0 0.000000 0.000000   649: my $format = qq|
        0 0.000000 0.000000   650:---------------------------------------------
        0 0.000000 0.000000   651:@<<<<<<<<<<<  @<<<<<<<<<<<<< @<<<<<
        0 0.000000 0.000000   652:@*
        0 0.000000 0.000000   653:
        0 0.000000 0.000000   654:@*
        0 0.000000 0.000000   655:
        0 0.000000 0.000000   656:@*
        0 0.000000 0.000000   657:|;
        0 0.000000 0.000000   658:
        0 0.000000 0.000000   659: return ($top, $format, @args);
        0 0.000000 0.000000   660:}
        0 0.000000 0.000000   661:
        0 0.000000 0.000000   662:
        0 0.000000 0.000000   663:=item FORMAT_L
        0 0.000000 0.000000   664:
        0 0.000000 0.000000   665:
        0 0.000000 0.000000   666:
        0 0.000000 0.000000   667:
        0 0.000000 0.000000   668:
        0 0.000000 0.000000   669:
        0 0.000000 0.000000   670:
        0 0.000000 0.000000   671:sub FORMAT_L { # List(html)
        0 0.000000 0.000000   672: my $self = shift;
            ================ SmallProf version 0.9 ================
                       Profile of ..//Perlbug/Format.pm                Page 130
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   673:
        0 0.000000 0.000000   674: my $x    = shift; #
        0 0.000000 0.000000   675: my $key  = ucfirst($self->attr('key'));
        0 0.000000 0.000000   676: my $pri  = $self->attr('primary_key');
        0 0.000000 0.000000   677: my $top = qq|
        0 0.000000 0.000000   678:</table><table border=1 width=100%>
        0 0.000000 0.000000   679:<tr>
        0 0.000000 0.000000   680: <td width=25%><b>$key ID</b></td><td><b>Bug
        0 0.000000 0.000000   681: <td><b>Source
        0 0.000000 0.000000   682:</tr>
        0 0.000000 0.000000   683:|;
        0 0.000000 0.000000   684: my $format = qq|
        0 0.000000 0.000000   685:<tr><td>$$x{'select'} $$x{'name'} &nbsp;
        0 0.000000 0.000000   686:<td>$$x{'bug_count'}</td>
        0 0.000000 0.000000   687:<td>$$x{'sourceaddr'}</td>
        0 0.000000 0.000000   688:<td>$$x{'created'}</td>
        0 0.000000 0.000000   689:<td>$$x{'subject'}</td>
        0 0.000000 0.000000   690:</tr>
        0 0.000000 0.000000   691:</table>
        0 0.000000 0.000000   692:|;
        0 0.000000 0.000000   693:
        0 0.000000 0.000000   694: return ($top, $format, ());
        0 0.000000 0.000000   695:}
        0 0.000000 0.000000   696:
        0 0.000000 0.000000   697:
        0 0.000000 0.000000   698:=item FORMAT_h
        0 0.000000 0.000000   699:
        0 0.000000 0.000000   700:
        0 0.000000 0.000000   701:
        0 0.000000 0.000000   702:
        0 0.000000 0.000000   703:
        0 0.000000 0.000000   704:
        0 0.000000 0.000000   705:
        0 0.000000 0.000000   706:sub FORMAT_h { # html
        0 0.000000 0.000000   707: my $self = shift;
        0 0.000000 0.000000   708: my $x    = shift; #
        0 0.000000 0.000000   709:
        0 0.000000 0.000000   710: my $key  = ucfirst($self->attr('key'));
        0 0.000000 0.000000   711: my $pri  = $self->attr('primary_key');
        0 0.000000 0.000000   712: my $top = qq|<table border=1 width=100%>
        0 0.000000 0.000000   713:<tr>
        0 0.000000 0.000000   714: <td width=25%><b>$key ID &nbsp;
        0 0.000000 0.000000   715: <td><b>Bug IDs</b></td>
        0 0.000000 0.000000   716: <td><b>Name</b></td>
        0 0.000000 0.000000   717: <td><b>Created</b></td>
        0 0.000000 0.000000   718: <td><b>Modified</b></td>
        0 0.000000 0.000000   719:</tr>|;
        0 0.000000 0.000000   720: my $format = qq|<tr>
        0 0.000000 0.000000   721: <td>$$x{$pri} &nbsp;</td>
        0 0.000000 0.000000   722: <td>$$x{'bug_ids'} &nbsp;</td>
        0 0.000000 0.000000   723: <td>$$x{'name'} &nbsp;</td>
        0 0.000000 0.000000   724: <td>$$x{'created'} &nbsp;</td>
        0 0.000000 0.000000   725: <td>$$x{'modified'} &nbsp;</td>
        0 0.000000 0.000000   726:</tr>
        0 0.000000 0.000000   727:<tr>
        0 0.000000 0.000000   728: <td><b>Subject:</b></td>
            ================ SmallProf version 0.9 ================
                       Profile of ..//Perlbug/Format.pm                Page 131
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   729: <td colspan=5>$$x{'subject'} &nbsp;</td>
        0 0.000000 0.000000   730:</tr>
        0 0.000000 0.000000   731:</table>
        0 0.000000 0.000000   732:<table border=1 width=100%><tr><td
        0 0.000000 0.000000   733:$$x{'body'} &nbsp;
        0 0.000000 0.000000   734:</td></tr></table>|;
        0 0.000000 0.000000   735:
        0 0.000000 0.000000   736: return ($top, $format, ());
        0 0.000000 0.000000   737:}
        0 0.000000 0.000000   738:
        0 0.000000 0.000000   739:
        0 0.000000 0.000000   740:=item FORMAT_H
        0 0.000000 0.000000   741:
        0 0.000000 0.000000   742:
        0 0.000000 0.000000   743:
        0 0.000000 0.000000   744:
        0 0.000000 0.000000   745:
        0 0.000000 0.000000   746:
        0 0.000000 0.000000   747:
        0 0.000000 0.000000   748:sub FORMAT_H { # HTML
        0 0.000000 0.000000   749: my $self = shift;
        0 0.000000 0.000000   750: my $x    = shift; #
        0 0.000000 0.000000   751:
        0 0.000000 0.000000   752: my $key  = ucfirst($self->attr('key'));
        0 0.000000 0.000000   753: my $pri  = $self->attr('primary_key');
        0 0.000000 0.000000   754: my $top = qq|
        0 0.000000 0.000000   755:<table border=1 width=100%>
        0 0.000000 0.000000   756:<tr>
        0 0.000000 0.000000   757: <td width=25%><b>$key ID</b></td>
        0 0.000000 0.000000   758: <td><b>Bug IDs</b></td>
        0 0.000000 0.000000   759: <td><b>Name</b></td>
        0 0.000000 0.000000   760: <td><b>Created</b></td>
        0 0.000000 0.000000   761: <td><b>Modified</b></td>
        0 0.000000 0.000000   762: <td><b>&nbsp;</b></td>
        0 0.000000 0.000000   763:</tr>
        0 0.000000 0.000000   764:|;
        0 0.000000 0.000000   765: my $format = qq|
        0 0.000000 0.000000   766:<tr>
        0 0.000000 0.000000   767: <td>$$x{$pri} &nbsp; $$x{'name'}</td>
        0 0.000000 0.000000   768: <td>$$x{'bug_ids'} &nbsp;</td>
        0 0.000000 0.000000   769: <td>$$x{'name'} &nbsp;</td>
        0 0.000000 0.000000   770: <td>$$x{'created'} &nbsp;</td>
        0 0.000000 0.000000   771: <td>$$x{'modified'} &nbsp;</td>
        0 0.000000 0.000000   772: <td>&nbsp;</td>
        0 0.000000 0.000000   773:</tr>
        0 0.000000 0.000000   774:<tr>
        0 0.000000 0.000000   775: <td><b>Subject:</b></td>
        0 0.000000 0.000000   776: <td colspan=7>$$x{'subject'} &nbsp;</td>
        0 0.000000 0.000000   777:</tr>
        0 0.000000 0.000000   778:</table>
        0 0.000000 0.000000   779:<table border=1 width=100%>
        0 0.000000 0.000000   780:<tr><td colspan=4><b>Message
        0 0.000000 0.000000   781:<tr><td colspan=4> $$x{'body'} &nbsp;
        0 0.000000 0.000000   782:</table>|;
        0 0.000000 0.000000   783:
        0 0.000000 0.000000   784: return ($top, $format, ());
            ================ SmallProf version 0.9 ================
                       Profile of ..//Perlbug/Format.pm                Page 132
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   785:}
        0 0.000000 0.000000   786:
        0 0.000000 0.000000   787:
        0 0.000000 0.000000   788:=item FORMAT_x
        0 0.000000 0.000000   789:
        0 0.000000 0.000000   790:
        0 0.000000 0.000000   791:
        0 0.000000 0.000000   792:
        0 0.000000 0.000000   793:
        0 0.000000 0.000000   794:
        0 0.000000 0.000000   795:
        0 0.000000 0.000000   796:sub FORMAT_x { # default where format or
        0 0.000000 0.000000   797: my $self = shift;
        0 0.000000 0.000000   798: my $x    = shift; #
        0 0.000000 0.000000   799:
        0 0.000000 0.000000   800: my ($top, $format, @args) = $self->FORMAT_a;
        0 0.000000 0.000000   801:
        0 0.000000 0.000000   802: return ($top, $format, @args);
        0 0.000000 0.000000   803:}
        0 0.000000 0.000000   804:
        0 0.000000 0.000000   805:
        0 0.000000 0.000000   806:=item FORMAT_X
        0 0.000000 0.000000   807:
        0 0.000000 0.000000   808:
        0 0.000000 0.000000   809:
        0 0.000000 0.000000   810:
        0 0.000000 0.000000   811:
        0 0.000000 0.000000   812:
        0 0.000000 0.000000   813:
        0 0.000000 0.000000   814:sub FORMAT_X { # default where format or
        0 0.000000 0.000000   815: my $self = shift;
        0 0.000000 0.000000   816: my $x    = shift; #
        0 0.000000 0.000000   817:
        0 0.000000 0.000000   818: my ($top, $format, @args) = $self->FORMAT_A;
        0 0.000000 0.000000   819:
        0 0.000000 0.000000   820: return ($top, $format, @args);
        0 0.000000 0.000000   821:}
        0 0.000000 0.000000   822:
        0 0.000000 0.000000   823:
        0 0.000000 0.000000   824:=item href
        0 0.000000 0.000000   825:
        0 0.000000 0.000000   826:
        0 0.000000 0.000000   827:
        0 0.000000 0.000000   828:
        0 0.000000 0.000000   829:
        0 0.000000 0.000000   830:
        0 0.000000 0.000000   831:
        0 0.000000 0.000000   832:
        0 0.000000 0.000000   833:
        0 0.000000 0.000000   834:
        0 0.000000 0.000000   835:
        0 0.000000 0.000000   836:
        0 0.000000 0.000000   837:
      181 0.000000 0.000000   838:sub href { #
      181 0.000893 0.000000   839:    my $self    = shift;
      181 0.000841 0.010000   840:    my $key     = shift;
            ================ SmallProf version 0.9 ================
                       Profile of ..//Perlbug/Format.pm                Page 133
       =================================================================
    count wall tm  cpu time line
      181 0.000643 0.000000   841:    my $a_items = shift;
      181 0.000745 0.000000   842:    my $visible = shift || '';
      181 0.000736 0.010000   843:    my $subject = shift || '';
      181 0.001308 0.010000   844: my $a_bold  = shift || '';
        0 0.000000 0.000000   845:
      181 0.000687 0.000000   846: my @links = ();
        0 0.000000 0.000000   847:
      181 0.015299 0.010000   848:    if (ref($a_items) ne 'ARRAY') {
        0 0.000000 0.000000   849:  $self->error("requires array of
        0 0.000000 0.000000   850: } else {
      181 0.013670 0.010000   851:  my $cgi = $self->base->cgi;
      181 0.013542 0.030000   852:  my $url = $self->base->url;
      181 0.015055 0.030000   853:  my $fmt = $self->base->current('format');
      181 0.013607 0.020000   854:  my $rid = $self->base->{'_range'};
      181 0.001886 0.000000   855:  my $range = ($rid =~ /\w+/) ? "&range=$rid"
        0 0.000000 0.000000   856:
      181 0.006164 0.040000   857:  my $trim = (ref($cgi) && $cgi->can('trim')
      181 0.000975 0.000000   858:  $subject =~ s/'/\\\'/gs;  # javascript
      181 0.000849 0.010000   859:  $subject =~ s/"/\\\'/gs; #
      181 0.002808 0.030000   860:  $subject =~ s/\n+/ /gs;  #
      181 0.001962 0.000000   861:  my $status = ($subject =~ /\w+/) ?
        0 0.000000 0.000000   862:
      362 0.001928 0.000000   863:  if ($key =~ /^\w+=\w+/ ||
        0 0.000000 0.000000   864:   my ($format) = ($key =~ /format/) ? '' :
        0 0.000000 0.000000   865:   my $link = qq|<a
        0 0.000000 0.000000   866:   push (@links, $link);
        0 0.000000 0.000000   867:   $self->debug(3, "singular($link)");
        0 0.000000 0.000000   868:  } else {
      181 0.000698 0.000000   869:   my $fmt = $fmt || 'H'; #
      181 0.000740 0.000000   870:   ITEM:
      315 0.001716 0.000000   871:   foreach my $val (@{$a_items}) {
      181 0.003612 0.000000   872:    next ITEM unless defined($val) and $val
      134 0.001246 0.000000   873:    my $vis = ($visible =~ /\w+/) ? $visible
      134 0.003821 0.010000   874:    my $link = qq|<a
      134 0.015288 0.010000   875:    push (@links, $link);
      134 0.000463 0.000000   876:    $self->debug(3, "status($status),
        0 0.000000 0.000000   877:   }
        0 0.000000 0.000000   878:  }
        0 0.000000 0.000000   879: }
        0 0.000000 0.000000   880:
      181 0.006122 0.020000   881: return wantarray ? @links : $links[0];
        0 0.000000 0.000000   882:}
        0 0.000000 0.000000   883:
        0 0.000000 0.000000   884:
        0 0.000000 0.000000   885:=item mailto
        0 0.000000 0.000000   886:
        0 0.000000 0.000000   887:
        0 0.000000 0.000000   888:
        0 0.000000 0.000000   889:
        0 0.000000 0.000000   890:
        0 0.000000 0.000000   891:
        0 0.000000 0.000000   892:
        0 0.000000 0.000000   893:sub mailto {
        0 0.000000 0.000000   894:    my $self   = shift;
        0 0.000000 0.000000   895:    my $h_tkt  = shift;
        0 0.000000 0.000000   896:
            ================ SmallProf version 0.9 ================
                       Profile of ..//Perlbug/Format.pm                Page 134
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   897:    $self->debug(3, "mailto($h_tkt)") if
        0 0.000000 0.000000   898:    return undef unless ref($h_tkt) eq
        0 0.000000 0.000000   899:    my %tkt = %{$h_tkt};
        0 0.000000 0.000000   900:    my $subject = $tkt{'subject'} || '';
        0 0.000000 0.000000   901:    if ($subject =~ /\w+/) {
        0 0.000000 0.000000   902:        # $subject = "\@subject=$subject";
        0 0.000000 0.000000   903:    }
        0 0.000000 0.000000   904:    # Is this safe enough?
        0 0.000000 0.000000   905:    my $reply = ($tkt{'osname'} =~ /^(\w+)$/)
        0 0.000000 0.000000   906:    my $list = $self->forward($reply);
        0 0.000000 0.000000   907:    my $mailto = qq|<a
        0 0.000000 0.000000   908:
        0 0.000000 0.000000   909:    return $mailto;
        0 0.000000 0.000000   910:}
        0 0.000000 0.000000   911:
        0 0.000000 0.000000   912:
        0 0.000000 0.000000   913:=item popup
        0 0.000000 0.000000   914:
        0 0.000000 0.000000   915:
        0 0.000000 0.000000   916:
        0 0.000000 0.000000   917:
        0 0.000000 0.000000   918:
        0 0.000000 0.000000   919:
        0 0.000000 0.000000   920:
        0 0.000000 0.000000   921:
        0 0.000000 0.000000   922:
        0 0.000000 0.000000   923:
        0 0.000000 0.000000   924:
        0 0.000000 0.000000   925:
        0 0.000000 0.000000   926:
        0 0.000000 0.000000   927:sub popup {
        0 0.000000 0.000000   928:    my $self  = shift;
        0 0.000000 0.000000   929:
        0 0.000000 0.000000   930:    my $flag  = shift;
        0 0.000000 0.000000   931: my $uqid = shift;
        0 0.000000 0.000000   932: my $default = shift || '';
        0 0.000000 0.000000   933: my $onchange= shift || '';
        0 0.000000 0.000000   934: my $ok   = 1;
        0 0.000000 0.000000   935:    $self->debug(3, "popup:
        0 0.000000 0.000000   936: if (($flag !~ /^\w+$/) || ($uqid !~ /\w+/))
        0 0.000000 0.000000   937:  $ok = 0;
        0 0.000000 0.000000   938:  $self->error("popup($flag, $uqid,
        0 0.000000 0.000000   939: }
        0 0.000000 0.000000   940: my $cgi   = $self->cgi();
        0 0.000000 0.000000   941: my %flags = $self->base->all_flags;
        0 0.000000 0.000000   942: my @flags = keys %flags;
        0 0.000000 0.000000   943:    if (!grep(/^$flag$/, @flags)) {
        0 0.000000 0.000000   944:  $ok = 0;
        0 0.000000 0.000000   945:  $self->error("popup-flag($flag) not found
        0 0.000000 0.000000   946:    }
        0 0.000000 0.000000   947:    my $popup = '';
        0 0.000000 0.000000   948: if ($ok == 1) {
        0 0.000000 0.000000   949:  $self->{'popup'}{$flag} = ''; # for now
        0 0.000000 0.000000   950:  my @options = ('', sort($self->base-
        0 0.000000 0.000000   951:  $popup = $cgi->popup_menu( -'name' =>
        0 0.000000 0.000000   952:     $self->{'popup'}{$flag} = $popup;   #
            ================ SmallProf version 0.9 ================
                       Profile of ..//Perlbug/Format.pm                Page 135
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   953: }
        0 0.000000 0.000000   954:
        0 0.000000 0.000000   955:    return $self->{'popup'}{$flag};     #
        0 0.000000 0.000000   956:}
        0 0.000000 0.000000   957:
        0 0.000000 0.000000   958:
        0 0.000000 0.000000   959:=head1 AUTHOR
        0 0.000000 0.000000   960:
        0 0.000000 0.000000   961:
        0 0.000000 0.000000   962:
        0 0.000000 0.000000   963:
        0 0.000000 0.000000   964:
        0 0.000000 0.000000   965:
        0 0.000000 0.000000   966:#
        0 0.000000 0.000000   967:1;
        0 0.000000 0.000000   968:
            ================ SmallProf version 0.9 ================
                       Profile of ..//Perlbug/Object.pm                Page 136
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000     1:# Perlbug object attribute handler
        0 0.000000 0.000000     2:# (C) 2000 Richard Foley RFI perlbug@rfi.net
        0 0.000000 0.000000     3:# $Id: Object.pm,v 1.34 2001/07/05 13:53:08
        0 0.000000 0.000000     4:#
        0 0.000000 0.000000     5:
        0 0.000000 0.000000     6:=head1 NAME
        0 0.000000 0.000000     7:
        0 0.000000 0.000000     8:
        0 0.000000 0.000000     9:
        0 0.000000 0.000000    10:
        0 0.000000 0.000000    11:
        0 0.000000 0.000000    12:package Perlbug::Object;
        0 0.000000 0.000000    13:use strict;
        0 0.000000 0.000000    14:use vars(qw($VERSION @ISA $AUTOLOAD));
        0 0.000000 0.000000    15:@ISA = qw(Perlbug::Format);
        0 0.000000 0.000000    16:$VERSION = do { my @r = (q$Revision: 1.34 $
        0 0.000000 0.000000    17:my $DEBUG = $ENV{'Perlbug_Object_DEBUG'} ||
        0 0.000000 0.000000    18:$|=1;
        0 0.000000 0.000000    19:
        0 0.000000 0.000000    20:use Carp;
        0 0.000000 0.000000    21:use CGI;
        0 0.000000 0.000000    22:use Data::Dumper;
        0 0.000000 0.000000    23:use Perlbug::Base;
        0 0.000000 0.000000    24:use Perlbug::Format;
        0 0.000000 0.000000    25:my $o_Perlbug_Base = '';
        0 0.000000 0.000000    26:
        0 0.000000 0.000000    27:
        0 0.000000 0.000000    28:=head1 DESCRIPTION
        0 0.000000 0.000000    29:
        0 0.000000 0.000000    30:
        0 0.000000 0.000000    31:
        0 0.000000 0.000000    32:
        0 0.000000 0.000000    33:
        0 0.000000 0.000000    34:
        0 0.000000 0.000000    35:
        0 0.000000 0.000000    36:
        0 0.000000 0.000000    37:
        0 0.000000 0.000000    38:
        0 0.000000 0.000000    39:
        0 0.000000 0.000000    40:
        0 0.000000 0.000000    41:
        0 0.000000 0.000000    42:
        0 0.000000 0.000000    43:
        0 0.000000 0.000000    44:
        0 0.000000 0.000000    45:
        0 0.000000 0.000000    46:
        0 0.000000 0.000000    47:
        0 0.000000 0.000000    48:
        0 0.000000 0.000000    49:
        0 0.000000 0.000000    50:
        0 0.000000 0.000000    51:
        0 0.000000 0.000000    52:
        0 0.000000 0.000000    53:
        0 0.000000 0.000000    54:=head1 METHODS
        0 0.000000 0.000000    55:
        0 0.000000 0.000000    56:
            ================ SmallProf version 0.9 ================
                       Profile of ..//Perlbug/Object.pm                Page 137
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000    57:
        0 0.000000 0.000000    58:
        0 0.000000 0.000000    59:
        0 0.000000 0.000000    60:
        0 0.000000 0.000000    61:
        0 0.000000 0.000000    62:
        0 0.000000 0.000000    63:
        0 0.000000 0.000000    64:
        0 0.000000 0.000000    65:
        0 0.000000 0.000000    66:
        0 0.000000 0.000000    67:
        0 0.000000 0.000000    68:
        0 0.000000 0.000000    69:
        0 0.000000 0.000000    70:
        0 0.000000 0.000000    71:
        0 0.000000 0.000000    72:
        0 0.000000 0.000000    73:
        0 0.000000 0.000000    74:
        0 0.000000 0.000000    75:
        0 0.000000 0.000000    76:
        0 0.000000 0.000000    77:
        0 0.000000 0.000000    78:
        0 0.000000 0.000000    79:
        0 0.000000 0.000000    80:
        0 0.000000 0.000000    81:
        0 0.000000 0.000000    82:
        0 0.000000 0.000000    83:
        0 0.000000 0.000000    84:
        0 0.000000 0.000000    85:
       38 0.000000 0.000000    86:sub new { # table, key
       38 0.000268 0.000000    87:    my $proto = shift;
       38 0.000200 0.000000    88:    my $class = ref($proto) || $proto;
       38 0.000310 0.000000    89: $o_Perlbug_Base = (ref($_[0])) ? shift :
       38 0.000925 0.000000    90: my %input  = @_;
        0 0.000000 0.000000    91:
       38 0.000289 0.000000    92: my $name = ucfirst($input{'name'});
       38 0.000204 0.000000    93: my $key  = lc($name);
       38 0.000531 0.010000    94: unless ($key =~ /\w+/o) {
        0 0.000000 0.000000    95:  $o_Perlbug_Base->error("Fatal error: no
        0 0.000000 0.000000    96: }
        0 0.000000 0.000000    97:
       38 0.000227 0.000000    98: $DEBUG = $Perlbug::DEBUG || $DEBUG;
       38 0.005928 0.000000    99: my $self = {             # eg:
        0 0.000000 0.000000   100:  '_attribute' => {
        0 0.000000 0.000000   101:   'debug'  => $DEBUG,   # level
        0 0.000000 0.000000   102:   'float'  => [],    # rel
        0 0.000000 0.000000   103:   'from'  => [],    # rel
        0 0.000000 0.000000   104:   'hint'  => "$name($key)", # Bug(Child)...
        0 0.000000 0.000000   105:      'key'  => $key,   # bug
        0 0.000000 0.000000   106:      'name'   => $name,   # Bug
        0 0.000000 0.000000   107:   'match_oid' => '(\d+)',    # default
        0 0.000000 0.000000   108:      'objectid' => '',    # 21,
        0 0.000000 0.000000   109:   'primary_key'=> $key.'id',  # bugid
        0 0.000000 0.000000   110:   'sql_clean' => 1,    # clean sql on
        0 0.000000 0.000000   111:      'table'  => 'pb_'.$key,  # db_bug
        0 0.000000 0.000000   112:   'track'  => '1',    # usually
            ================ SmallProf version 0.9 ================
                       Profile of ..//Perlbug/Object.pm                Page 138
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   113:   'to'  => [],    # rel
        0 0.000000 0.000000   114:   'type'  => 'friendly',   # ...|prejudicial
        0 0.000000 0.000000   115:   'types'  => [qw(from to)],  # of rels
        0 0.000000 0.000000   116:   %input,
        0 0.000000 0.000000   117:  },
        0 0.000000 0.000000   118:  '_data'   => {},      # 'field'  => 'value'
        0 0.000000 0.000000   119:  '_type'   => {},    # 'field' =>
        0 0.000000 0.000000   120:  '_relation'  => {},    # 'from' => [], 'to'
        0 0.000000 0.000000   121:  '_flag'   => {
        0 0.000000 0.000000   122:   'assigned' => 0,    # flags
        0 0.000000 0.000000   123:   'created' => 0,    #  -"-
        0 0.000000 0.000000   124:   'deleted' => 0,    #  -"-
        0 0.000000 0.000000   125:   'read'  => 0,    #  -"-
        0 0.000000 0.000000   126:   'reset'  => 0,    #  -"-
        0 0.000000 0.000000   127:   'stored' => 0,    #  -"-
        0 0.000000 0.000000   128:   'tracked' => 0,    #  -"-
        0 0.000000 0.000000   129:   'updated' => 0,    #  -"-
        0 0.000000 0.000000   130:  },
        0 0.000000 0.000000   131: };
        0 0.000000 0.000000   132: # push(@{$self->{'_attribute'}{'to'}},
        0 0.000000 0.000000   133:
       38 0.000789 0.010000   134: $self = bless($self, $class);
        0 0.000000 0.000000   135:
      114 0.004022 0.000000   136: $self->data; $self->attribute; $self->flag;
       38 0.003216 0.000000   137: $self = $self->reset; # inc. check()
        0 0.000000 0.000000   138: # print "rjsf: Object::new($name) ->
        0 0.000000 0.000000   139:
       38 0.001022 0.000000   140: return $self;
        0 0.000000 0.000000   141:}
        0 0.000000 0.000000   142:
        0 0.000000 0.000000   143:
        0 0.000000 0.000000   144:=item init_data
        0 0.000000 0.000000   145:
        0 0.000000 0.000000   146:
        0 0.000000 0.000000   147:
        0 0.000000 0.000000   148:
        0 0.000000 0.000000   149:
        0 0.000000 0.000000   150:
        0 0.000000 0.000000   151:
        0 0.000000 0.000000   152:
        0 0.000000 0.000000   153:
        0 0.000000 0.000000   154:
        0 0.000000 0.000000   155:
       44 0.000000 0.000000   156:sub init_data { # generic attribute from db
       44 0.000231 0.000000   157: my $self  = shift;
       44 0.000346 0.000000   158: my $table = shift || $self->attr('table');
        0 0.000000 0.000000   159:
       44 0.000701 0.000000   160: $self->{'_data'} = {};
       44 0.000454 0.000000   161: $self->{'_type'} = {};
        0 0.000000 0.000000   162:
        0 0.000000 0.000000   163: # my $fields = "SELECT * FROM $table WHERE 1
       44 0.000298 0.000000   164: my $fields = "SHOW fields FROM $table"; #
       44 0.003119 0.010000   165: my @fields = $self->base->get_data($fields);
        0 0.000000 0.000000   166: FIELD:
      290 0.000945 0.000000   167: foreach my $f (@fields) {
      246 0.000759 0.000000   168:  next FIELD unless ref($f) eq 'HASH';
            ================ SmallProf version 0.9 ================
                       Profile of ..//Perlbug/Object.pm                Page 139
       =================================================================
    count wall tm  cpu time line
      246 0.000992 0.000000   169:  my $field = $$f{'Field'};
      246 0.000553 0.000000   170:  my $type  = 'VARCHAR'; # default
      246 0.002181 0.030000   171:  $type = 'DATETIME' if $$f{'Type'} =~
      246 0.002640 0.020000   172:  $type = 'INTEGER'  if $$f{'Type'} =~
      246 0.001874 0.000000   173:  $self->{'_data'}{$field} = '';   # init
      246 0.001580 0.000000   174:  $self->{'_type'}{$field} = $type;  # init
        0 0.000000 0.000000   175:  # $self->_gen_field_handler($field);# don't
        0 0.000000 0.000000   176: }
        0 0.000000 0.000000   177:
       44 0.000727 0.000000   178: return $self;
        0 0.000000 0.000000   179:}
        0 0.000000 0.000000   180:
        0 0.000000 0.000000   181:
        0 0.000000 0.000000   182:=item init_types
        0 0.000000 0.000000   183:
        0 0.000000 0.000000   184:
        0 0.000000 0.000000   185:
        0 0.000000 0.000000   186:
        0 0.000000 0.000000   187:
        0 0.000000 0.000000   188:
        0 0.000000 0.000000   189:
       44 0.000000 0.000000   190:sub init_types { # generic attribute from db
       44 0.000388 0.000000   191: my $self  = shift;
       44 0.000394 0.000000   192: my @types = @_;
       44 0.000183 0.000000   193: my @rels  = ();
        0 0.000000 0.000000   194:
       44 0.000639 0.000000   195: $self->{'_relation'} = {}; # reset
      132 0.000601 0.000000   196: foreach my $type (@types) { # float|from|to
      340 0.006879 0.010000   197:  foreach my $targ ( @{$self->attr($type)} )
      164 0.001786 0.000000   198:   $self->{'_relation'}{$targ}{'type'} =
      164 0.000791 0.000000   199:   push(@rels, $targ);
        0 0.000000 0.000000   200:  }
        0 0.000000 0.000000   201: }
        0 0.000000 0.000000   202:
       44 0.000813 0.000000   203: return @rels;
        0 0.000000 0.000000   204:}
        0 0.000000 0.000000   205:
        0 0.000000 0.000000   206:
        0 0.000000 0.000000   207:=item reset
        0 0.000000 0.000000   208:
        0 0.000000 0.000000   209:
        0 0.000000 0.000000   210:
        0 0.000000 0.000000   211:
        0 0.000000 0.000000   212:
        0 0.000000 0.000000   213:
        0 0.000000 0.000000   214:
        0 0.000000 0.000000   215:
        0 0.000000 0.000000   216:
        0 0.000000 0.000000   217:
        0 0.000000 0.000000   218:
       44 0.000000 0.000000   219:sub reset {
       44 0.000224 0.000000   220: my $self = shift;
       44 0.003209 0.020000   221: my $oid = shift || $self->oid;
        0 0.000000 0.000000   222:
       44 0.003429 0.000000   223: $self->CREATED(0);
       44 0.003386 0.000000   224: $self->READ(0);
            ================ SmallProf version 0.9 ================
                       Profile of ..//Perlbug/Object.pm                Page 140
       =================================================================
    count wall tm  cpu time line
       44 0.003418 0.000000   225: $self->UPDATED(0);
       44 0.003363 0.000000   226: $self->DELETED(0);
       44 0.003500 0.020000   227: $self->STORED(0);
       44 0.003316 0.000000   228: $self->TRACKED(0);
       44 0.003220 0.010000   229: $self->RESET(1);
        0 0.000000 0.000000   230:
       44 0.003584 0.010000   231: my @fields = $self->init_data($self-
       44 0.003618 0.000000   232: my $i_ok = $self->check();
        0 0.000000 0.000000   233:
       88 0.004917 0.010000   234: my @types  = @{$self->attr('types')};
       44 0.004911 0.010000   235: my @rels   = $self->init_types(@types);
        0 0.000000 0.000000   236: # $self->oid($oid) if $oid;
       44 0.003941 0.010000   237: $self->debug(3, "rjsf: object($oid)
        0 0.000000 0.000000   238:
       44 0.000627 0.000000   239: return $self;
        0 0.000000 0.000000   240:}
        0 0.000000 0.000000   241:
        0 0.000000 0.000000   242:
        0 0.000000 0.000000   243:=item refresh_relations
        0 0.000000 0.000000   244:
        0 0.000000 0.000000   245:
        0 0.000000 0.000000   246:
        0 0.000000 0.000000   247:
        0 0.000000 0.000000   248:
        5 0.000000 0.000000   249:sub refresh_relations {
        5 0.000025 0.000000   250: my $self = shift;
        0 0.000000 0.000000   251:
       90 0.000908 0.010000   252: foreach my $rel ($self->relations) { #
       85 0.007130 0.010000   253:  my @rids  = $self->rel_ids($rel, '',
       85 0.007040 0.020000   254:  my @names = $self->rel_names($rel);  #
       85 0.001578 0.000000   255:  $self->{'_relation'}{$rel}{'ids'}   =
       85 0.001147 0.000000   256:  $self->{'_relation'}{$rel}{'count'} =
       85 0.001321 0.010000   257:  $self->{'_relation'}{$rel}{'names'} =
        0 0.000000 0.000000   258: }
        0 0.000000 0.000000   259:
        5 0.000049 0.000000   260: return $self;
        0 0.000000 0.000000   261:}
        0 0.000000 0.000000   262:
        0 0.000000 0.000000   263:
        0 0.000000 0.000000   264:=item check
        0 0.000000 0.000000   265:
        0 0.000000 0.000000   266:
        0 0.000000 0.000000   267:
        0 0.000000 0.000000   268:
        0 0.000000 0.000000   269:
        0 0.000000 0.000000   270:
        0 0.000000 0.000000   271:
       44 0.000000 0.000000   272:sub check{
       44 0.000221 0.000000   273: my $self  = shift;
       44 0.003291 0.000000   274: my $h_ref = shift || $self-
        0 0.000000 0.000000   275:
       44 0.000173 0.010000   276: my $i_ok  = 1;
        0 0.000000 0.000000   277:
       44 0.001072 0.000000   278: CHECK:
      704 0.005410 0.040000   279: foreach my $key (keys %{$h_ref}) {
      660 0.006395 0.010000   280:  if ($$h_ref{$key} !~ /\w+/ && $key !~
            ================ SmallProf version 0.9 ================
                       Profile of ..//Perlbug/Object.pm                Page 141
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   281:   $i_ok = 0;
        0 0.000000 0.000000   282:   $self->error(" is incomplete key($key)
        0 0.000000 0.000000   283:  }
        0 0.000000 0.000000   284: }
        0 0.000000 0.000000   285:
       44 0.001339 0.000000   286: return $i_ok;
        0 0.000000 0.000000   287:}
        0 0.000000 0.000000   288:
        0 0.000000 0.000000   289:
        0 0.000000 0.000000   290:=item RESET
        0 0.000000 0.000000   291:
        0 0.000000 0.000000   292:
        0 0.000000 0.000000   293:
        0 0.000000 0.000000   294:
        0 0.000000 0.000000   295:
        0 0.000000 0.000000   296:
        0 0.000000 0.000000   297:
       44 0.000000 0.000000   298:sub RESET {
       44 0.000173 0.000000   299: my $self = shift;
       44 0.000193 0.000000   300: my $i_flag = shift || '';
        0 0.000000 0.000000   301:
       44 0.001708 0.000000   302: $self->flag('reset', $1) if $i_flag =~
        0 0.000000 0.000000   303:
       44 0.001210 0.000000   304: $i_flag = $self->flag('reset');
        0 0.000000 0.000000   305:
       44 0.000341 0.010000   306: return $i_flag;
        0 0.000000 0.000000   307:}
        0 0.000000 0.000000   308:
        0 0.000000 0.000000   309:
        0 0.000000 0.000000   310:=item exists
        0 0.000000 0.000000   311:
        0 0.000000 0.000000   312:
        0 0.000000 0.000000   313:
        0 0.000000 0.000000   314:
        0 0.000000 0.000000   315:
        0 0.000000 0.000000   316:
        0 0.000000 0.000000   317:
        0 0.000000 0.000000   318:
        0 0.000000 0.000000   319:
        0 0.000000 0.000000   320:
        0 0.000000 0.000000   321:
        6 0.000000 0.000000   322:sub exists {
        6 0.000057 0.010000   323: my $self = shift;
        6 0.000033 0.000000   324: my $a_oids = shift || [ $self->oid ];
        6 0.000027 0.000000   325: my @IDS = ();
        0 0.000000 0.000000   326:
        6 0.000036 0.000000   327: if (ref($a_oids) ne 'ARRAY') {
        0 0.000000 0.000000   328:  $self->error("requires array ref($a_oids)
        0 0.000000 0.000000   329: } else {
       12 0.000065 0.000000   330:  my $ids = join("', '", @{$a_oids});
        6 0.000411 0.000000   331:  my $pri = $self->attr('primary_key');
        6 0.000454 0.000000   332:  my $sql = "SELECT DISTINCT $pri FROM
        0 0.000000 0.000000   333:      " WHERE $pri LIKE '_%' AND $pri IN
        0 0.000000 0.000000   334:  ;
        6 0.000443 0.000000   335:  @IDS = $self->base->get_list($sql);
        0 0.000000 0.000000   336: }
            ================ SmallProf version 0.9 ================
                       Profile of ..//Perlbug/Object.pm                Page 142
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   337:
        6 0.000600 0.000000   338: return @IDS;
        0 0.000000 0.000000   339:}
        0 0.000000 0.000000   340:
        0 0.000000 0.000000   341:
        0 0.000000 0.000000   342:=item _exists
        0 0.000000 0.000000   343:
        0 0.000000 0.000000   344:
        0 0.000000 0.000000   345:
        0 0.000000 0.000000   346:
        0 0.000000 0.000000   347:
        0 0.000000 0.000000   348:
        0 0.000000 0.000000   349:
        0 0.000000 0.000000   350:
        0 0.000000 0.000000   351:
        0 0.000000 0.000000   352:sub _exists {
        0 0.000000 0.000000   353: my $self = shift;
        0 0.000000 0.000000   354: my $a_ids = shift || [ $self->attr($self-
        0 0.000000 0.000000   355: my @IDS = ();
        0 0.000000 0.000000   356:
        0 0.000000 0.000000   357: if (ref($a_ids) ne 'ARRAY') {
        0 0.000000 0.000000   358:  $self->error("requires array ref($a_ids) of
        0 0.000000 0.000000   359: } else {
        0 0.000000 0.000000   360:  my $ids = join("', '", @{$a_ids});
        0 0.000000 0.000000   361:  my $pri = $self->identifier;
        0 0.000000 0.000000   362:  my $sql = "SELECT DISTINCT $pri FROM
        0 0.000000 0.000000   363:      " WHERE $pri LIKE '_%' AND $pri IN
        0 0.000000 0.000000   364:  ;
        0 0.000000 0.000000   365:  @IDS = $self->base->get_list($sql);
        0 0.000000 0.000000   366: }
        0 0.000000 0.000000   367:
        0 0.000000 0.000000   368: return @IDS;
        0 0.000000 0.000000   369:}
        0 0.000000 0.000000   370:
        0 0.000000 0.000000   371:
        0 0.000000 0.000000   372:=item data_fields
        0 0.000000 0.000000   373:
        0 0.000000 0.000000   374:
        0 0.000000 0.000000   375:
        0 0.000000 0.000000   376:
        0 0.000000 0.000000   377:
        0 0.000000 0.000000   378:
        0 0.000000 0.000000   379:
       93 0.000000 0.000000   380:sub data_fields {
       93 0.000409 0.000000   381: my $self = shift;
        0 0.000000 0.000000   382:
      186 0.002624 0.010000   383: my @fields = keys %{$self->{'_data'}};
        0 0.000000 0.000000   384:
       93 0.003737 0.000000   385: return @fields;
        0 0.000000 0.000000   386:}
        0 0.000000 0.000000   387:
        0 0.000000 0.000000   388:
        0 0.000000 0.000000   389:=item str2ids
        0 0.000000 0.000000   390:
        0 0.000000 0.000000   391:
        0 0.000000 0.000000   392:
            ================ SmallProf version 0.9 ================
                       Profile of ..//Perlbug/Object.pm                Page 143
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   393:
        0 0.000000 0.000000   394:
        0 0.000000 0.000000   395:
        0 0.000000 0.000000   396:
        0 0.000000 0.000000   397:sub str2ids {
        0 0.000000 0.000000   398: my $self = shift;
        0 0.000000 0.000000   399: my $str  = shift || '';
        0 0.000000 0.000000   400: my @ids  = ();
        0 0.000000 0.000000   401:
        0 0.000000 0.000000   402: if ($str !~ /\w+/) {
        0 0.000000 0.000000   403:  $self->debug(0, "no string($str) given to
        0 0.000000 0.000000   404: } else {
        0 0.000000 0.000000   405:  my $match = $self->attr('match_oid');
        0 0.000000 0.000000   406:  # my %x = ($dmc =~
        0 0.000000 0.000000   407:  @ids = ($str =~ /$match/gs);
        0 0.000000 0.000000   408:  $self->debug(2, "str($str) match($match) ->
        0 0.000000 0.000000   409: }
        0 0.000000 0.000000   410:
        0 0.000000 0.000000   411: return @ids;
        0 0.000000 0.000000   412:}
        0 0.000000 0.000000   413:
        0 0.000000 0.000000   414:
        0 0.000000 0.000000   415:=item ok_ids
        0 0.000000 0.000000   416:
        0 0.000000 0.000000   417:
        0 0.000000 0.000000   418:
        0 0.000000 0.000000   419:
        0 0.000000 0.000000   420:
        0 0.000000 0.000000   421:
        0 0.000000 0.000000   422:
        0 0.000000 0.000000   423:
        0 0.000000 0.000000   424:
      744 0.000000 0.000000   425:sub ok_ids { #
      744 0.003479 0.020000   426: my $self = shift;
      744 0.003552 0.030000   427: my $a_ids = shift || '';
      744 0.003158 0.020000   428: my @ok = ();
        0 0.000000 0.000000   429:
      744 0.005069 0.020000   430: if (!ref($a_ids) eq 'ARRAY') {
        0 0.000000 0.000000   431:  $self->error("expecting array_ref($a_ids)
        0 0.000000 0.000000   432: } else {
     1488 0.012780 0.060000   433:  my $ids = join('|', my @ids = @{$a_ids});
      744 0.006426 0.010000   434:  if (!(scalar(@ids) >= 1)) {
        0 0.000000 0.000000   435:   $self->debug(2, "no ids(@ids) given") if
        0 0.000000 0.000000   436:  } else {
     1488 0.013366 0.020000   437:   my @wids = map { ($_ =~ /\w+/o ? $_ : ())
      744 0.003176 0.010000   438:   if (!(scalar(@wids))) {
      561 0.046796 0.040000   439:    $self->debug(2, "no word-like ids(@wids)
        0 0.000000 0.000000   440:   } else {
      183 0.000794 0.000000   441:    my $i_ids = @wids;
      183 0.012871 0.000000   442:    my $match = $self->attr('match_oid');
      366 0.006170 0.020000   443:    my $i_oks = @ok = map { ($_ =~ /^$match$/
      183 0.002158 0.000000   444:    if ($i_ids != $i_oks) {
        0 0.000000 0.000000   445:     $self->debug(0, $self->key()." failed to
        0 0.000000 0.000000   446:    }
        0 0.000000 0.000000   447:   }
        0 0.000000 0.000000   448:  }
            ================ SmallProf version 0.9 ================
                       Profile of ..//Perlbug/Object.pm                Page 144
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   449: }
        0 0.000000 0.000000   450:
      744 0.008655 0.010000   451: return @ok;
        0 0.000000 0.000000   452:}
        0 0.000000 0.000000   453:
        0 0.000000 0.000000   454:
        0 0.000000 0.000000   455:=item primary_key
        0 0.000000 0.000000   456:
        0 0.000000 0.000000   457:
        0 0.000000 0.000000   458:
        0 0.000000 0.000000   459:
        0 0.000000 0.000000   460:
        0 0.000000 0.000000   461:
        0 0.000000 0.000000   462:
        0 0.000000 0.000000   463:sub primary_key {
        0 0.000000 0.000000   464: my $self = shift;
        0 0.000000 0.000000   465:
        0 0.000000 0.000000   466: my $pri = $self->attr('primary_key');
        0 0.000000 0.000000   467:
        0 0.000000 0.000000   468: return $pri;
        0 0.000000 0.000000   469:}
        0 0.000000 0.000000   470:
        0 0.000000 0.000000   471:
        0 0.000000 0.000000   472:=item key
        0 0.000000 0.000000   473:
        0 0.000000 0.000000   474:
        0 0.000000 0.000000   475:
        0 0.000000 0.000000   476:
        0 0.000000 0.000000   477:
        0 0.000000 0.000000   478:
        0 0.000000 0.000000   479:
     1935 0.000000 0.000000   480:sub key {
     1935 0.010042 0.090000   481: my $self = shift;
     1935 0.008962 0.050000   482: my $in = shift || '';
        0 0.000000 0.000000   483:
     1935 0.005332 0.060000   484: if ($in =~ /\w+/o) {
        0 0.000000 0.000000   485:  $self->attr({'key', $in}); # explicit
        0 0.000000 0.000000   486: }
        0 0.000000 0.000000   487:
     1935 0.137225 0.150000   488: my $key = $self->attr('key');
        0 0.000000 0.000000   489:
     1935 0.072812 0.100000   490: return $key;
        0 0.000000 0.000000   491:}
        0 0.000000 0.000000   492:
        0 0.000000 0.000000   493:
        0 0.000000 0.000000   494:=item objectid
        0 0.000000 0.000000   495:
        0 0.000000 0.000000   496:
        0 0.000000 0.000000   497:
        0 0.000000 0.000000   498:
        0 0.000000 0.000000   499:
        0 0.000000 0.000000   500:
        0 0.000000 0.000000   501:
     2214 0.055378 0.090000   502:sub oid { my $self = shift; return $self-
        0 0.000000 0.000000   503:
      738 0.000000 0.000000   504:sub objectid {
            ================ SmallProf version 0.9 ================
                       Profile of ..//Perlbug/Object.pm                Page 145
       =================================================================
    count wall tm  cpu time line
      738 0.017636 0.010000   505: my $self = shift;
      738 0.003716 0.040000   506: my $in = shift || '';
        0 0.000000 0.000000   507:
      738 0.058898 0.130000   508: if ($self->ok_ids([$in])) { # are
      177 0.014734 0.030000   509:  $self->attr( { 'objectid', $in } ); #
      177 0.014068 0.030000   510:  $self->data( { $self->attr('primary_key'),
        0 0.000000 0.000000   511: }
      738 0.055293 0.090000   512: my $oid = $self->attr('objectid');
        0 0.000000 0.000000   513:
      738 0.025363 0.030000   514: return $oid;
        0 0.000000 0.000000   515:}
        0 0.000000 0.000000   516:
        0 0.000000 0.000000   517:
        0 0.000000 0.000000   518:=item ids
        0 0.000000 0.000000   519:
        0 0.000000 0.000000   520:
        0 0.000000 0.000000   521:
        0 0.000000 0.000000   522:
        0 0.000000 0.000000   523:
        0 0.000000 0.000000   524:
        0 0.000000 0.000000   525:
        0 0.000000 0.000000   526:
        0 0.000000 0.000000   527:
        0 0.000000 0.000000   528:
        0 0.000000 0.000000   529:
        0 0.000000 0.000000   530:
        0 0.000000 0.000000   531:
        0 0.000000 0.000000   532:
        0 0.000000 0.000000   533:
        3 0.000000 0.000000   534:sub ids { # class
        3 0.000018 0.000000   535: my $self  = shift;
        3 0.000310 0.000000   536: my $input = shift || '';
        3 0.000018 0.000000   537: my $extra = shift || '';
        3 0.000014 0.000000   538: my $refresh = shift || '';
        3 0.000014 0.000000   539: my @ids   = ();
        0 0.000000 0.000000   540:
        3 0.000299 0.000000   541: my $sql = "SELECT DISTINCT ".$self-
        3 0.000008 0.000000   542: if (ref($input)) {    # OBJECT with ids,
        0 0.000000 0.000000   543:  $sql .= ' WHERE '.$input-
        0 0.000000 0.000000   544:  $sql .= " AND $extra" if $extra;
        3 0.000029 0.000000   545: } elsif ($input =~ /\w+/o) {  # SQL where
        3 0.000025 0.000000   546:  $input =~ s/^\s*WHERE\s*//io;
        3 0.000522 0.000000   547:  $sql  .= " WHERE $input";
        0 0.000000 0.000000   548: }         # ALL
        3 0.000275 0.000000   549: $sql .= " ORDER BY name " if $self-
        0 0.000000 0.000000   550:
        3 0.000215 0.000000   551: @ids = $self->base->get_list($sql,
        0 0.000000 0.000000   552: # print "<hr>$self, $input, $extra, $refresh
        3 0.000663 0.000000   553: $self->debug(4, "input($input) extra($extra)
        0 0.000000 0.000000   554:
        3 0.000596 0.000000   555: return @ids;
        0 0.000000 0.000000   556:}
        0 0.000000 0.000000   557:
        0 0.000000 0.000000   558:
        0 0.000000 0.000000   559:=item names
        0 0.000000 0.000000   560:
            ================ SmallProf version 0.9 ================
                       Profile of ..//Perlbug/Object.pm                Page 146
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   561:
        0 0.000000 0.000000   562:
        0 0.000000 0.000000   563:
        0 0.000000 0.000000   564:
        0 0.000000 0.000000   565:
        0 0.000000 0.000000   566:
        0 0.000000 0.000000   567:
        0 0.000000 0.000000   568:
        0 0.000000 0.000000   569:
        0 0.000000 0.000000   570:
        0 0.000000 0.000000   571:sub names { # class
        0 0.000000 0.000000   572: my $self = shift;
        0 0.000000 0.000000   573: my $input = shift || '';
        0 0.000000 0.000000   574: my $extra = shift || '';
        0 0.000000 0.000000   575: my @names = ();
        0 0.000000 0.000000   576:
        0 0.000000 0.000000   577: my $ident = $self->identifier;
        0 0.000000 0.000000   578: if ($self->identifier eq 'name') {
        0 0.000000 0.000000   579:  my $sql = "SELECT DISTINCT name FROM
        0 0.000000 0.000000   580:  if (ref($input)) {    # OBJECT with ids,
        0 0.000000 0.000000   581:   $sql .= ' WHERE '.$input-
        0 0.000000 0.000000   582:   $sql .= " AND $extra" if $extra;
        0 0.000000 0.000000   583:  } elsif ($input =~ /\w+/o) {  # SQL where
        0 0.000000 0.000000   584:   $input =~ s/^\s*WHERE\s*//i;
        0 0.000000 0.000000   585:   $sql  .= " WHERE $input";
        0 0.000000 0.000000   586:  }
        0 0.000000 0.000000   587:  @names = $self->base->get_list($sql);
        0 0.000000 0.000000   588: }        # ALL
        0 0.000000 0.000000   589: $self->debug(4, "input($input) extra($extra)
        0 0.000000 0.000000   590:
        0 0.000000 0.000000   591: return @names;
        0 0.000000 0.000000   592:}
        0 0.000000 0.000000   593:
        0 0.000000 0.000000   594:
        0 0.000000 0.000000   595:=item col
        0 0.000000 0.000000   596:
        0 0.000000 0.000000   597:
        0 0.000000 0.000000   598:
        0 0.000000 0.000000   599:
        0 0.000000 0.000000   600:
        0 0.000000 0.000000   601:
        0 0.000000 0.000000   602:
        0 0.000000 0.000000   603:
        0 0.000000 0.000000   604:
        0 0.000000 0.000000   605:
        0 0.000000 0.000000   606:
       72 0.000000 0.000000   607:sub col { # class
       72 0.000371 0.010000   608: my $self = shift;
       72 0.000362 0.000000   609: my $col  = shift;
       72 0.000386 0.000000   610: my $input = shift || '';
       72 0.000304 0.000000   611: my @cols = ();
        0 0.000000 0.000000   612:
       72 0.000646 0.010000   613: if ($col !~ /\w+/) {
        0 0.000000 0.000000   614:  $self->error("No column($col) given to
        0 0.000000 0.000000   615: } else {
       72 0.005488 0.000000   616:  my $sql = "SELECT DISTINCT $col FROM
            ================ SmallProf version 0.9 ================
                       Profile of ..//Perlbug/Object.pm                Page 147
       =================================================================
    count wall tm  cpu time line
       72 0.000179 0.000000   617:  if (ref($input)) {    # OBJECT with ids,
        1 0.000078 0.000000   618:   $sql .= ' WHERE '.$input-
       71 0.003571 0.010000   619:  } elsif ($input =~ /\w+/) {  # SQL where
       71 0.000510 0.000000   620:   $input =~ s/^\s*WHERE\s*//i;
       71 0.000381 0.000000   621:   $sql  .= " WHERE $input";
        0 0.000000 0.000000   622:  }          # ALL
       72 0.005371 0.000000   623:  @cols = $self->base->get_list($sql);
        0 0.000000 0.000000   624: }
        0 0.000000 0.000000   625:
       72 0.010040 0.020000   626: $self->debug(4, "col($col), input($input) ->
       72 0.002009 0.000000   627: return @cols;
        0 0.000000 0.000000   628:}
        0 0.000000 0.000000   629:
        0 0.000000 0.000000   630:
        0 0.000000 0.000000   631:=item identifier
        0 0.000000 0.000000   632:
        0 0.000000 0.000000   633:
        0 0.000000 0.000000   634:
        0 0.000000 0.000000   635:
        0 0.000000 0.000000   636:
       93 0.000000 0.000000   637:sub identifier {
       93 0.000481 0.000000   638: my $self = shift;
        0 0.000000 0.000000   639:
       93 0.008303 0.010000   640: my $ident = (grep(/^name$/i, $self-
        0 0.000000 0.000000   641: # my $ident = (map { ($_ =~ /^name$/ ? 1 :
        0 0.000000 0.000000   642:  ? 'name'
        0 0.000000 0.000000   643:  : $self->attr('primary_key');
        0 0.000000 0.000000   644:
       93 0.007351 0.020000   645: $self->debug(4, "ident($ident)") if $DEBUG;
       93 0.001108 0.010000   646: return $ident;
        0 0.000000 0.000000   647:}
        0 0.000000 0.000000   648:
        0 0.000000 0.000000   649:
        0 0.000000 0.000000   650:=item id2name
        0 0.000000 0.000000   651:
        0 0.000000 0.000000   652:
        0 0.000000 0.000000   653:
        0 0.000000 0.000000   654:
        0 0.000000 0.000000   655:
        0 0.000000 0.000000   656:
        0 0.000000 0.000000   657:
       43 0.000000 0.000000   658:sub id2name {
       43 0.000220 0.000000   659: my $self    = shift;
       43 0.000193 0.000000   660: my $a_input = shift;
       43 0.000187 0.000000   661: my @output  = ();
        0 0.000000 0.000000   662:
       43 0.000222 0.000000   663: if (!ref($a_input)) {
        0 0.000000 0.000000   664:  $self->error("no input ids given to
        0 0.000000 0.000000   665: } else {
       43 0.003250 0.000000   666:  if ($self->identifier ne 'name') {
       10 0.000689 0.000000   667:   $self->debug(4, "identifier ne 'name'!")
        0 0.000000 0.000000   668:  } else {
       66 0.000412 0.000000   669:   my @input = @{$a_input};
       33 0.000226 0.000000   670:   if (scalar(@input) >= 1) {
       33 0.000251 0.000000   671:    my $input = join("', '", @input);
       33 0.002394 0.000000   672:    my $sql =
            ================ SmallProf version 0.9 ================
                       Profile of ..//Perlbug/Object.pm                Page 148
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   673:     "SELECT DISTINCT name FROM ".$self-
        0 0.000000 0.000000   674:     " WHERE ".$self->attr('primary_key')."
       33 0.002369 0.000000   675:    @output = $self->base->get_list($sql);
       33 0.003163 0.000000   676:    $self->debug(3, "given(@input) ->
        0 0.000000 0.000000   677:   }
        0 0.000000 0.000000   678:  }
        0 0.000000 0.000000   679: }
        0 0.000000 0.000000   680:
       43 0.000926 0.000000   681: return @output;
        0 0.000000 0.000000   682:}
        0 0.000000 0.000000   683:
        0 0.000000 0.000000   684:
        0 0.000000 0.000000   685:=item name2id
        0 0.000000 0.000000   686:
        0 0.000000 0.000000   687:
        0 0.000000 0.000000   688:
        0 0.000000 0.000000   689:
        0 0.000000 0.000000   690:
        0 0.000000 0.000000   691:
        0 0.000000 0.000000   692:
       24 0.000000 0.000000   693:sub name2id {
       24 0.002315 0.010000   694: my $self = shift;
       24 0.000142 0.000000   695: my $a_input   = shift;
       24 0.000109 0.000000   696: my @output = ();
        0 0.000000 0.000000   697:
       24 0.000122 0.000000   698: if (!ref($a_input)) {
        0 0.000000 0.000000   699:  $self->error("no input names given to
        0 0.000000 0.000000   700: } else {
       48 0.000272 0.000000   701:  my @input = @{$a_input};
       24 0.000171 0.000000   702:  if (scalar(@input) >= 1) {
       24 0.000173 0.000000   703:   my $input = join("', '", @input);
       24 0.001829 0.000000   704:   my $sql =
        0 0.000000 0.000000   705:     "SELECT DISTINCT ".$self-
        0 0.000000 0.000000   706:      " FROM ".$self->attr('table')." WHERE
       24 0.001615 0.000000   707:   @output = $self->base->get_list($sql);
       24 0.002317 0.000000   708:   $self->debug(3, "input(@input) ->
        0 0.000000 0.000000   709:  }
        0 0.000000 0.000000   710: }
        0 0.000000 0.000000   711:
       24 0.002140 0.000000   712: return @output;
        0 0.000000 0.000000   713:}
        0 0.000000 0.000000   714:
        0 0.000000 0.000000   715:
        0 0.000000 0.000000   716:=item count
        0 0.000000 0.000000   717:
        0 0.000000 0.000000   718:
        0 0.000000 0.000000   719:
        0 0.000000 0.000000   720:
        0 0.000000 0.000000   721:
        0 0.000000 0.000000   722:
        0 0.000000 0.000000   723:
        0 0.000000 0.000000   724:
        0 0.000000 0.000000   725:
        0 0.000000 0.000000   726:
        0 0.000000 0.000000   727:
        0 0.000000 0.000000   728:sub count {
            ================ SmallProf version 0.9 ================
                       Profile of ..//Perlbug/Object.pm                Page 149
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   729: my $self  = shift;
        0 0.000000 0.000000   730: my $input = shift || '';
        0 0.000000 0.000000   731: my $extra = shift || '';
        0 0.000000 0.000000   732:
        0 0.000000 0.000000   733: my $i_cnt  = 0;
        0 0.000000 0.000000   734:
        0 0.000000 0.000000   735: my $sql = "SELECT COUNT(".$self-
        0 0.000000 0.000000   736: if (ref($input)) {    # OBJECT with ids,
        0 0.000000 0.000000   737:  $sql .= ' WHERE '.$input-
        0 0.000000 0.000000   738:  $sql .= " AND $extra" if $extra;
        0 0.000000 0.000000   739: } elsif ($input =~ /\w+/) {  # SQL where
        0 0.000000 0.000000   740:  $input =~ s/^\s*WHERE\s*//i;
        0 0.000000 0.000000   741:  $sql  .= " WHERE $input";
        0 0.000000 0.000000   742: }         # ALL
        0 0.000000 0.000000   743:
        0 0.000000 0.000000   744: ($i_cnt) = $self->base->get_list($sql);
        0 0.000000 0.000000   745: $self->debug(4, "input($input) extra($extra)
        0 0.000000 0.000000   746:
        0 0.000000 0.000000   747: return $i_cnt;
        0 0.000000 0.000000   748:}
        0 0.000000 0.000000   749:
        0 0.000000 0.000000   750:
        0 0.000000 0.000000   751:=item trim
        0 0.000000 0.000000   752:
        0 0.000000 0.000000   753:
        0 0.000000 0.000000   754:
        0 0.000000 0.000000   755:
        0 0.000000 0.000000   756:
        0 0.000000 0.000000   757:
        0 0.000000 0.000000   758:
        0 0.000000 0.000000   759:sub trim {
        0 0.000000 0.000000   760: my $self = shift;
        0 0.000000 0.000000   761: my $a_in = shift;
        0 0.000000 0.000000   762: my @trimmed = ();
        0 0.000000 0.000000   763:
        0 0.000000 0.000000   764: if (!ref($a_in) eq 'ARRAY') {
        0 0.000000 0.000000   765:  $self->error("expecting array_ref($a_in) to
        0 0.000000 0.000000   766: } else {
        0 0.000000 0.000000   767:  foreach my $arg (@{$a_in}) {
        0 0.000000 0.000000   768:   $arg =~ s/^\s+//;
        0 0.000000 0.000000   769:   $arg =~ s/\s+$//;
        0 0.000000 0.000000   770:   push(@trimmed, $arg);
        0 0.000000 0.000000   771:  }
        0 0.000000 0.000000   772: }
        0 0.000000 0.000000   773:
        0 0.000000 0.000000   774: return @trimmed;
        0 0.000000 0.000000   775:}
        0 0.000000 0.000000   776:
        0 0.000000 0.000000   777:
        0 0.000000 0.000000   778:=item keys_sorted_by_value
        0 0.000000 0.000000   779:
        0 0.000000 0.000000   780:
        0 0.000000 0.000000   781:
        0 0.000000 0.000000   782:
        0 0.000000 0.000000   783:
        0 0.000000 0.000000   784:
            ================ SmallProf version 0.9 ================
                       Profile of ..//Perlbug/Object.pm                Page 150
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   785:
        0 0.000000 0.000000   786:sub keys_sorted_by_value {
        0 0.000000 0.000000   787: my $self = shift;
        0 0.000000 0.000000   788: my $h_in = shift;
        0 0.000000 0.000000   789:
        0 0.000000 0.000000   790: my @sort = ();
        0 0.000000 0.000000   791:
        0 0.000000 0.000000   792: if (ref($h_in) ne 'HASH') {
        0 0.000000 0.000000   793:  $self->error("expecting hash_ref($h_in) to
        0 0.000000 0.000000   794: } else {
        0 0.000000 0.000000   795:  my %in = %{$h_in};
        0 0.000000 0.000000   796:  foreach my $arg (sort { $in{$a} cmp $in{$b}
        0 0.000000 0.000000   797:   push(@sort, $arg);
        0 0.000000 0.000000   798:  }
        0 0.000000 0.000000   799: }
        0 0.000000 0.000000   800:
        0 0.000000 0.000000   801: return @sort;
        0 0.000000 0.000000   802:}
        0 0.000000 0.000000   803:
        0 0.000000 0.000000   804:
        0 0.000000 0.000000   805:# -------------------------------------------
        0 0.000000 0.000000   806:
        0 0.000000 0.000000   807:=item popup
        0 0.000000 0.000000   808:
        0 0.000000 0.000000   809:
        0 0.000000 0.000000   810:
        0 0.000000 0.000000   811:
        0 0.000000 0.000000   812:
        0 0.000000 0.000000   813:
        0 0.000000 0.000000   814:
        0 0.000000 0.000000   815:sub popup {
        0 0.000000 0.000000   816: my $self = shift;
        0 0.000000 0.000000   817: my $name = shift || $self->attr('name');
        0 0.000000 0.000000   818: my $sel  = shift || '';
        0 0.000000 0.000000   819:
        0 0.000000 0.000000   820: my $cgi  = $self->base->cgi;
        0 0.000000 0.000000   821: ($sel)  = @{$sel} if ref($sel) eq 'ARRAY';
        0 0.000000 0.000000   822:
        0 0.000000 0.000000   823: my %map = ('any' => 'any', '' => '',);
        0 0.000000 0.000000   824: my $pri = $self->attr('primary_key');
        0 0.000000 0.000000   825: # my $col = (grep(/^name$/i, $self-
        0 0.000000 0.000000   826: my ($col) = map { ($_ =~ /^name$/ ? $_ :
        0 0.000000 0.000000   827:
        0 0.000000 0.000000   828: if (1) { # all - better than foreach id ->
        0 0.000000 0.000000   829:  my @ids = $self->col("CONCAT($pri, ':',
        0 0.000000 0.000000   830:  foreach my $id (@ids) {
        0 0.000000 0.000000   831:   my ($pre, $post) = split(':', $id);
        0 0.000000 0.000000   832:   $map{$pre} = $post;
        0 0.000000 0.000000   833:  }
        0 0.000000 0.000000   834: } else { # rjsf: redundant
        0 0.000000 0.000000   835:  my @ids = $self->ids; # all
        0 0.000000 0.000000   836:  foreach my $id (@ids) {
        0 0.000000 0.000000   837:   ($map{$id}) = $self->col($col, "WHERE $pri
        0 0.000000 0.000000   838:  }
        0 0.000000 0.000000   839: }
        0 0.000000 0.000000   840:
            ================ SmallProf version 0.9 ================
                       Profile of ..//Perlbug/Object.pm                Page 151
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   841: my @sorted = $self-
        0 0.000000 0.000000   842:
        0 0.000000 0.000000   843: # my $pointer =
        0 0.000000 0.000000   844: my $pop = $cgi->popup_menu(
        0 0.000000 0.000000   845:  -'name'  => $name,    # xxx_groupids
        0 0.000000 0.000000   846:  -'values'  => \@sorted, # keys %map
        0 0.000000 0.000000   847:  -'onChange' => 'pick(this);',
        0 0.000000 0.000000   848:  -'default'  => $sel,
        0 0.000000 0.000000   849:  -'labels'  => \%map,
        0 0.000000 0.000000   850:  -'override' => 1,
        0 0.000000 0.000000   851:  @_,
        0 0.000000 0.000000   852: );
        0 0.000000 0.000000   853: # $self->debug(3, "name($name) pop($pop)")
        0 0.000000 0.000000   854: return $pop;
        0 0.000000 0.000000   855:}
        0 0.000000 0.000000   856:
        0 0.000000 0.000000   857:
        0 0.000000 0.000000   858:=item selector
        0 0.000000 0.000000   859:
        0 0.000000 0.000000   860:
        0 0.000000 0.000000   861:
        0 0.000000 0.000000   862:
        0 0.000000 0.000000   863:
        0 0.000000 0.000000   864:
        0 0.000000 0.000000   865:
        0 0.000000 0.000000   866:sub selector {
        0 0.000000 0.000000   867: my $self = shift;
        0 0.000000 0.000000   868: my $name = shift || $self->attr('name');
        0 0.000000 0.000000   869: my @selected = @_;
        0 0.000000 0.000000   870:
        0 0.000000 0.000000   871: my $cgi  = $self->base->cgi;
        0 0.000000 0.000000   872: @selected = @{$selected[0]} if
        0 0.000000 0.000000   873:
        0 0.000000 0.000000   874: my %map = ();
        0 0.000000 0.000000   875: my $pri = $self->attr('primary_key');
        0 0.000000 0.000000   876: # my $col = (grep(/^name$/i, $self-
        0 0.000000 0.000000   877: my ($col) = map { ($_ =~ /^name$/ ? $_ :
        0 0.000000 0.000000   878:
        0 0.000000 0.000000   879: if (1) { # all - better than foreach id ->
        0 0.000000 0.000000   880:  my @ids = $self->col("CONCAT($pri, ':',
        0 0.000000 0.000000   881:  foreach my $id (@ids) {
        0 0.000000 0.000000   882:   my ($pre, $post) = split(':', $id);
        0 0.000000 0.000000   883:   $map{$pre} = $post;
        0 0.000000 0.000000   884:  }
        0 0.000000 0.000000   885: } else {
        0 0.000000 0.000000   886:  my @ids = $self->ids; # all
        0 0.000000 0.000000   887:  foreach my $id (@ids) {
        0 0.000000 0.000000   888:   ($map{$id}) = $self->col($col, "WHERE
        0 0.000000 0.000000   889:  }
        0 0.000000 0.000000   890: }
        0 0.000000 0.000000   891:
        0 0.000000 0.000000   892: my @sorted = $self-
        0 0.000000 0.000000   893:
        0 0.000000 0.000000   894: my $sel  = $cgi->scrolling_list(
        0 0.000000 0.000000   895:  -'name'  => $name,    # xxx_groupids
        0 0.000000 0.000000   896:  -'values'  => \@sorted, # keys %map
            ================ SmallProf version 0.9 ================
                       Profile of ..//Perlbug/Object.pm                Page 152
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   897:  -'default'  => \@selected,
        0 0.000000 0.000000   898:  -'labels'  => \%map,
        0 0.000000 0.000000   899:  -'multiple' => 'true',
        0 0.000000 0.000000   900:  -'size'  => 3,
        0 0.000000 0.000000   901:  -'override' => 1,
        0 0.000000 0.000000   902:  -'onChange' => 'pick(this);',
        0 0.000000 0.000000   903:  @_,
        0 0.000000 0.000000   904: );
        0 0.000000 0.000000   905: # $self->debug(3, "name($name) sel($sel)")
        0 0.000000 0.000000   906: return $sel;
        0 0.000000 0.000000   907:}
        0 0.000000 0.000000   908:
        0 0.000000 0.000000   909:
        0 0.000000 0.000000   910:=item textarea
        0 0.000000 0.000000   911:
        0 0.000000 0.000000   912:
        0 0.000000 0.000000   913:
        0 0.000000 0.000000   914:
        0 0.000000 0.000000   915:
        0 0.000000 0.000000   916:
        0 0.000000 0.000000   917:
        0 0.000000 0.000000   918:sub textarea {
        0 0.000000 0.000000   919: my $self = shift;
        0 0.000000 0.000000   920: my $name = shift || $self->attr('name');
        0 0.000000 0.000000   921: my $val  = shift || '';
        0 0.000000 0.000000   922:
        0 0.000000 0.000000   923: ($val)  = @{$val} if ref($val) eq 'ARRAY';
        0 0.000000 0.000000   924: my $cgi  = $self->base->cgi;
        0 0.000000 0.000000   925:
        0 0.000000 0.000000   926: my $txt  = $cgi->textarea(
        0 0.000000 0.000000   927:  -'name'  => $name,    # xxx_groupids
        0 0.000000 0.000000   928:  -'value'  => $val,
        0 0.000000 0.000000   929:  -'override' => 1,
        0 0.000000 0.000000   930:  -'onChange' => 'pick(this);',
        0 0.000000 0.000000   931:  -'rows'  => 3,
        0 0.000000 0.000000   932:  -'cols'  => 25,
        0 0.000000 0.000000   933:  @_,        # etc.
        0 0.000000 0.000000   934: );
        0 0.000000 0.000000   935: return $txt;
        0 0.000000 0.000000   936:}
        0 0.000000 0.000000   937:
        0 0.000000 0.000000   938:
        0 0.000000 0.000000   939:=item textfield
        0 0.000000 0.000000   940:
        0 0.000000 0.000000   941:
        0 0.000000 0.000000   942:
        0 0.000000 0.000000   943:
        0 0.000000 0.000000   944:
        0 0.000000 0.000000   945:
        0 0.000000 0.000000   946:
        0 0.000000 0.000000   947:sub textfield {
        0 0.000000 0.000000   948: my $self = shift;
        0 0.000000 0.000000   949: my $name = shift || $self->attr('name');
        0 0.000000 0.000000   950: my $val  = shift || '';
        0 0.000000 0.000000   951:
        0 0.000000 0.000000   952: ($val)  = @{$val} if ref($val) eq 'ARRAY';
            ================ SmallProf version 0.9 ================
                       Profile of ..//Perlbug/Object.pm                Page 153
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   953: my $cgi  = $self->base->cgi;
        0 0.000000 0.000000   954:
        0 0.000000 0.000000   955: my $txt  = $cgi->textfield(
        0 0.000000 0.000000   956:  -'name'  => $name,    # xxx_groupids
        0 0.000000 0.000000   957:  -'value'  => $val,
        0 0.000000 0.000000   958:  -'override' => 1,
        0 0.000000 0.000000   959:  -'onChange' => 'pick(this);',
        0 0.000000 0.000000   960:  -'size'  => 12,
        0 0.000000 0.000000   961:  -'maxlength'=> 12,
        0 0.000000 0.000000   962:  @_,        # etc.
        0 0.000000 0.000000   963: );
        0 0.000000 0.000000   964: return $txt;
        0 0.000000 0.000000   965:}
        0 0.000000 0.000000   966:
        0 0.000000 0.000000   967:
        0 0.000000 0.000000   968:=item _gen_field_handler
        0 0.000000 0.000000   969:
        0 0.000000 0.000000   970:
        0 0.000000 0.000000   971:
        0 0.000000 0.000000   972:
        0 0.000000 0.000000   973:
        0 0.000000 0.000000   974:
        0 0.000000 0.000000   975:
        0 0.000000 0.000000   976:
        0 0.000000 0.000000   977:
        0 0.000000 0.000000   978:sub _gen_field_handler {
        0 0.000000 0.000000   979:    my $self  = shift;
        0 0.000000 0.000000   980:    my $field = shift;
        0 0.000000 0.000000   981:    # if (!(grep(/^$field$/, $self-
        0 0.000000 0.000000   982: if (map { ($_ =~ /^name$/ ? 1 : 0) } $self-
        0 0.000000 0.000000   983:  $self->error("can't
        0 0.000000 0.000000   984:    } else {
        0 0.000000 0.000000   985:  my $ref = ref($self);
        0 0.000000 0.000000   986:  $self->debug(3, "setting($ref)
        0 0.000000 0.000000   987:  my $code = qq|
        0 0.000000 0.000000   988:   package $ref;
        0 0.000000 0.000000   989:   sub $field {
        0 0.000000 0.000000   990:    my \$self = shift;
        0 0.000000 0.000000   991:    my \$val  = shift;
        0 0.000000 0.000000   992:    if (defined(\$val)) {
        0 0.000000 0.000000   993:     \$self->{'_data'}{'$field'} = \$val;
        0 0.000000 0.000000   994:    }
        0 0.000000 0.000000   995:
        0 0.000000 0.000000   996:    my \$ret = \$self->{'_data'}{'$field'};
        0 0.000000 0.000000   997:    # print "returning $field data(\$ret)
        0 0.000000 0.000000   998:
        0 0.000000 0.000000   999:    return \$ret;
        0 0.000000 0.000000  1000:   }
        0 0.000000 0.000000  1001:  |;
        0 0.000000 0.000000  1002:  my $x = eval { $code };
        0 0.000000 0.000000  1003:  $self->error("Couldn't eval the($ref)
        0 0.000000 0.000000  1004:    }
        0 0.000000 0.000000  1005:    $self;
        0 0.000000 0.000000  1006:}
        0 0.000000 0.000000  1007:
        0 0.000000 0.000000  1008:
            ================ SmallProf version 0.9 ================
                       Profile of ..//Perlbug/Object.pm                Page 154
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000  1009:=item base
        0 0.000000 0.000000  1010:
        0 0.000000 0.000000  1011:
        0 0.000000 0.000000  1012:
        0 0.000000 0.000000  1013:
        0 0.000000 0.000000  1014:
     5101 0.000000 0.000000  1015:sub base {
     5101 0.022024 0.110000  1016: my $self = shift;
     5101 0.027430 0.130000  1017: $o_Perlbug_Base = ref($o_Perlbug_Base) ?
     5101 0.408996 0.450000  1018: return $o_Perlbug_Base;
        0 0.000000 0.000000  1019:}
        0 0.000000 0.000000  1020:
        0 0.000000 0.000000  1021:
       55 0.000000 0.000000  1022:sub _oref { # unsupported
       55 0.000237 0.000000  1023: my $self = shift;
       55 0.000250 0.000000  1024: my $key  = shift;
       55 0.000227 0.000000  1025: my $href = ''; # !
        0 0.000000 0.000000  1026:
      110 0.001170 0.000000  1027: my @refs = keys %{$self};
        0 0.000000 0.000000  1028: # if (!grep(/^_$key$/, @refs)) { # sneaky :-
      330 0.003407 0.020000  1029: if (!(map { ($_ =~ /^_$key$/ ? 1 : 0) }
        0 0.000000 0.000000  1030:  $self->error("unknown key($key) requested!
        0 0.000000 0.000000  1031: } else {
      110 0.005438 0.000000  1032:  $href = { %{$self->{"_$key"}} }; # copy
        0 0.000000 0.000000  1033: }
       55 0.000756 0.000000  1034: return $href;
        0 0.000000 0.000000  1035:}
        0 0.000000 0.000000  1036:
        0 0.000000 0.000000  1037:
        0 0.000000 0.000000  1038:=head1 RELATIONS
        0 0.000000 0.000000  1039:
        0 0.000000 0.000000  1040:
        0 0.000000 0.000000  1041:
        0 0.000000 0.000000  1042:
        0 0.000000 0.000000  1043:
        0 0.000000 0.000000  1044:
        0 0.000000 0.000000  1045:
        0 0.000000 0.000000  1046:
        0 0.000000 0.000000  1047:
        0 0.000000 0.000000  1048:
        0 0.000000 0.000000  1049:
        0 0.000000 0.000000  1050:
        0 0.000000 0.000000  1051:
        0 0.000000 0.000000  1052:
        0 0.000000 0.000000  1053:
        0 0.000000 0.000000  1054:
        0 0.000000 0.000000  1055:
        0 0.000000 0.000000  1056:
        0 0.000000 0.000000  1057:=item relation_types
        0 0.000000 0.000000  1058:
        0 0.000000 0.000000  1059:
        0 0.000000 0.000000  1060:
        0 0.000000 0.000000  1061:
        0 0.000000 0.000000  1062:
        0 0.000000 0.000000  1063:
        0 0.000000 0.000000  1064:
            ================ SmallProf version 0.9 ================
                       Profile of ..//Perlbug/Object.pm                Page 155
       =================================================================
    count wall tm  cpu time line
     1551 0.041440 0.070000  1065:sub rel_types { my $self = shift; return
        0 0.000000 0.000000  1066:
      517 0.000000 0.000000  1067:sub relation_types {
      517 0.001972 0.000000  1068: my $self = shift;
     1034 0.037536 0.060000  1069: return @{$self->attr('types')};
        0 0.000000 0.000000  1070:}
        0 0.000000 0.000000  1071:
        0 0.000000 0.000000  1072:
        0 0.000000 0.000000  1073:=item isarel
        0 0.000000 0.000000  1074:
        0 0.000000 0.000000  1075:
        0 0.000000 0.000000  1076:
        0 0.000000 0.000000  1077:
        0 0.000000 0.000000  1078:
        0 0.000000 0.000000  1079:
        0 0.000000 0.000000  1080:
        0 0.000000 0.000000  1081:
        0 0.000000 0.000000  1082:
        0 0.000000 0.000000  1083:
        0 0.000000 0.000000  1084:
        0 0.000000 0.000000  1085:
        0 0.000000 0.000000  1086:
        0 0.000000 0.000000  1087:sub isarel {
        0 0.000000 0.000000  1088: my $self = shift;
        0 0.000000 0.000000  1089: my $rel  = shift;
        0 0.000000 0.000000  1090: my $type = lc(shift) || '';
        0 0.000000 0.000000  1091:
        0 0.000000 0.000000  1092: # my $isa  = (grep(/^$rel$/, $self-
        0 0.000000 0.000000  1093: my $isa = map { ($_ =~ /^$rel$/ ? 1 : 0) }
        0 0.000000 0.000000  1094:
        0 0.000000 0.000000  1095: return $isa;
        0 0.000000 0.000000  1096:}
        0 0.000000 0.000000  1097:
        0 0.000000 0.000000  1098:
        0 0.000000 0.000000  1099:=item relations
        0 0.000000 0.000000  1100:
        0 0.000000 0.000000  1101:
        0 0.000000 0.000000  1102:
        0 0.000000 0.000000  1103:
        0 0.000000 0.000000  1104:
        0 0.000000 0.000000  1105:
        0 0.000000 0.000000  1106:
     1536 0.040375 0.080000  1107:sub rels { my $self = shift; return $self-
        0 0.000000 0.000000  1108:
      517 0.000000 0.000000  1109:sub relations {
      517 0.002271 0.020000  1110: my $self = shift;
      517 0.002346 0.010000  1111: my $type = shift || ''; # float|from|to
      517 0.003480 0.030000  1112: my @rels = ();
      517 0.002041 0.010000  1113: if (defined($type) && $type =~ /\w+/) {
        0 0.000000 0.000000  1114:  @rels = @{$self->attr($type)};
        0 0.000000 0.000000  1115: } else {
     2585 0.115343 0.130000  1116:  @rels = map { @{$self->attr($_)} } $self-
        0 0.000000 0.000000  1117: }
      517 0.022527 0.040000  1118: return @rels;
        0 0.000000 0.000000  1119:}
        0 0.000000 0.000000  1120:
            ================ SmallProf version 0.9 ================
                       Profile of ..//Perlbug/Object.pm                Page 156
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000  1121:
        0 0.000000 0.000000  1122:=item relation
        0 0.000000 0.000000  1123:
        0 0.000000 0.000000  1124:
        0 0.000000 0.000000  1125:
        0 0.000000 0.000000  1126:
        0 0.000000 0.000000  1127:
        0 0.000000 0.000000  1128:
        0 0.000000 0.000000  1129:
        0 0.000000 0.000000  1130:
        0 0.000000 0.000000  1131:
        0 0.000000 0.000000  1132:
        0 0.000000 0.000000  1133:
        0 0.000000 0.000000  1134:
        0 0.000000 0.000000  1135:
        0 0.000000 0.000000  1136:
        0 0.000000 0.000000  1137:
        0 0.000000 0.000000  1138:
        0 0.000000 0.000000  1139:
        0 0.000000 0.000000  1140:sub rel { my $self = shift; return $self-
        0 0.000000 0.000000  1141:
      172 0.000000 0.000000  1142:sub relation {
      172 0.000903 0.000000  1143: my $self = shift;
      172 0.000865 0.000000  1144: my $rel  = shift;
      172 0.000616 0.010000  1145: my $o_rel = undef;
      172 0.000640 0.000000  1146: if (!(defined($rel))) {
        0 0.000000 0.000000  1147:  $self->error("No relation($rel) given to
        0 0.000000 0.000000  1148: } else {
        0 0.000000 0.000000  1149:  # if (!(grep(/^$rel$/, $self->relations)))
      172 0.002047 0.000000  1150:  $rel =~ s/^.+?\W(\w+)$/$1/;
     3064 0.038377 0.080000  1151:  if (!(map { ($_ =~ /^$rel$/ ? 1 : 0) }
        0 0.000000 0.000000  1152:   croak("duff rel($rel) for $self!!!");
        0 0.000000 0.000000  1153:   $self->error("inappropriate relation($rel)
        0 0.000000 0.000000  1154:  } else {
      172 0.002058 0.000000  1155:   my $type = $self-
      172 0.013352 0.000000  1156:   $o_rel  = $self->base->object($self-
      172 0.013113 0.030000  1157:   my $oid = $self->oid;
      172 0.013791 0.030000  1158:   $o_rel->set_source($self->key, $self-
      172 0.012457 0.020000  1159:   my $rid = $o_rel->oid;
        0 0.000000 0.000000  1160:  }
        0 0.000000 0.000000  1161: }
      172 0.014754 0.020000  1162: $self->debug(4, "rjsf:
      172 0.003015 0.010000  1163: return $o_rel;
        0 0.000000 0.000000  1164:}
        0 0.000000 0.000000  1165:
        0 0.000000 0.000000  1166:
        0 0.000000 0.000000  1167:=item relation_ids
        0 0.000000 0.000000  1168:
        0 0.000000 0.000000  1169:
        0 0.000000 0.000000  1170:
        0 0.000000 0.000000  1171:
        0 0.000000 0.000000  1172:
        0 0.000000 0.000000  1173:
        0 0.000000 0.000000  1174:
      510 0.013709 0.010000  1175:sub rel_ids { my $self = shift; return $self-
        0 0.000000 0.000000  1176:
            ================ SmallProf version 0.9 ================
                       Profile of ..//Perlbug/Object.pm                Page 157
       =================================================================
    count wall tm  cpu time line
      170 0.000000 0.000000  1177:sub relation_ids { # object
      170 0.000827 0.000000  1178: my $self = shift;
      170 0.000758 0.000000  1179: my $rel  = shift;
      170 0.000817 0.000000  1180: my $args = shift || '';
      170 0.000788 0.000000  1181: my $refresh = shift || '';
        0 0.000000 0.000000  1182:
      170 0.000952 0.020000  1183: my @ids  = ();
      170 0.000705 0.010000  1184: if (!defined($rel)) {
        0 0.000000 0.000000  1185:  $self->error("Unable to get ids for non-
        0 0.000000 0.000000  1186: } else {
      170 0.012587 0.010000  1187:  my @rellies = $self->rels;
        0 0.000000 0.000000  1188:  # if (!(grep(/^$rel$/, @rellies))) {
     3060 0.039269 0.120000  1189:  if (!(map { ($_ =~ /^$rel$/ ? 1 : 0) }
        0 0.000000 0.000000  1190:   $self->error("inappropriate relation($rel)
        0 0.000000 0.000000  1191:  } else {
      170 0.013681 0.000000  1192:   my $o_rel = $self->relation($rel);
      170 0.012993 0.000000  1193:   @ids = $o_rel->ids($self, $args,
      170 0.018207 0.010000  1194:   $self->debug(4, "rel($rel) ->
        0 0.000000 0.000000  1195:  }
        0 0.000000 0.000000  1196: }
      170 0.003516 0.000000  1197: return @ids;
        0 0.000000 0.000000  1198:}
        0 0.000000 0.000000  1199:
        0 0.000000 0.000000  1200:
        0 0.000000 0.000000  1201:=item _rel_ids
        0 0.000000 0.000000  1202:
        0 0.000000 0.000000  1203:
        0 0.000000 0.000000  1204:
        0 0.000000 0.000000  1205:
        0 0.000000 0.000000  1206:
        0 0.000000 0.000000  1207:sub _rel_ids { my $self = shift; return
        0 0.000000 0.000000  1208:
        0 0.000000 0.000000  1209:
        0 0.000000 0.000000  1210:=item relation_names
        0 0.000000 0.000000  1211:
        0 0.000000 0.000000  1212:
        0 0.000000 0.000000  1213:
        0 0.000000 0.000000  1214:
        0 0.000000 0.000000  1215:
        0 0.000000 0.000000  1216:
        0 0.000000 0.000000  1217:
      255 0.007052 0.020000  1218:sub rel_names { my $self = shift; return
        0 0.000000 0.000000  1219:
       85 0.000000 0.000000  1220:sub relation_names { # object
       85 0.000441 0.000000  1221: my $self = shift;
       85 0.000489 0.000000  1222: my $rel  = shift;
       85 0.000420 0.000000  1223: my $args = shift || '';
        0 0.000000 0.000000  1224:
       85 0.000390 0.000000  1225: my @names = ();
        0 0.000000 0.000000  1226:
       85 0.006403 0.010000  1227: my @ids = $self->rel_ids($rel, $args);
       85 0.002224 0.010000  1228: if (scalar(@ids) >= 1) {
       43 0.003321 0.000000  1229:  @names = $self->object($rel)-
        0 0.000000 0.000000  1230: }
        0 0.000000 0.000000  1231:
        0 0.000000 0.000000  1232: # $self->debug(4, "rel($rel), args($args) ->
            ================ SmallProf version 0.9 ================
                       Profile of ..//Perlbug/Object.pm                Page 158
       =================================================================
    count wall tm  cpu time line
       85 0.001691 0.000000  1233: return @names;
        0 0.000000 0.000000  1234:}
        0 0.000000 0.000000  1235:
        0 0.000000 0.000000  1236:
        0 0.000000 0.000000  1237:=head1 RECORDS
        0 0.000000 0.000000  1238:
        0 0.000000 0.000000  1239:
        0 0.000000 0.000000  1240:
        0 0.000000 0.000000  1241:
        0 0.000000 0.000000  1242:
        0 0.000000 0.000000  1243:
        0 0.000000 0.000000  1244:
        0 0.000000 0.000000  1245:
        0 0.000000 0.000000  1246:
        0 0.000000 0.000000  1247:
        0 0.000000 0.000000  1248:
        0 0.000000 0.000000  1249:
        0 0.000000 0.000000  1250:
        0 0.000000 0.000000  1251:
        0 0.000000 0.000000  1252:
        0 0.000000 0.000000  1253:
        0 0.000000 0.000000  1254:
        0 0.000000 0.000000  1255:
        0 0.000000 0.000000  1256:
        0 0.000000 0.000000  1257:
        0 0.000000 0.000000  1258:
        0 0.000000 0.000000  1259:
        0 0.000000 0.000000  1260:
        0 0.000000 0.000000  1261:
        6 0.000000 0.000000  1262:sub read { # by id
        6 0.000034 0.000000  1263: my $self = shift;
        6 0.000038 0.000000  1264: my $oid = shift || $self->oid;
        6 0.000494 0.000000  1265: $self->reset; # always want a fresh one
        6 0.000433 0.000000  1266: $self->READ(0);
        6 0.000608 0.010000  1267: if ($self->ok_ids([$oid]) != 1) {
        0 0.000000 0.000000  1268:  my @caller = caller(1);
        0 0.000000 0.000000  1269:  $self->error("requires a valid id($oid) to
        0 0.000000 0.000000  1270: } else {
        6 0.000471 0.000000  1271:  my $pri   = $self->attr('primary_key');
        6 0.000437 0.000000  1272:  my $table = $self->attr('table');
        6 0.000068 0.000000  1273:  my $sql = "SELECT * FROM $table WHERE $pri
        6 0.000449 0.000000  1274:  my ($h_data) = $self->base->get_data($sql);
        6 0.000037 0.000000  1275:  if (ref($h_data) ne 'HASH') {
        0 0.000000 0.000000  1276:   $self->debug(0, "failed to retrieve
        0 0.000000 0.000000  1277:  } else {
        6 0.000551 0.000000  1278:   $self->debug(2, $self->key." oid($oid)")
        6 0.000250 0.000000  1279:   my $res = $self->data($h_data);    # set
        6 0.000499 0.000000  1280:   my $xoid = $self->oid($oid);    # set
        0 0.000000 0.000000  1281:   # $self = $self->object($self-
        6 0.000575 0.000000  1282:   $self->READ(1) if $self->exists([$oid]);
        0 0.000000 0.000000  1283:  }
        0 0.000000 0.000000  1284: }
        0 0.000000 0.000000  1285: # print
        0 0.000000 0.000000  1286:
        6 0.000072 0.000000  1287: $self;
        0 0.000000 0.000000  1288:}
            ================ SmallProf version 0.9 ================
                       Profile of ..//Perlbug/Object.pm                Page 159
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000  1289:
        0 0.000000 0.000000  1290:
        0 0.000000 0.000000  1291:=item READ
        0 0.000000 0.000000  1292:
        0 0.000000 0.000000  1293:
        0 0.000000 0.000000  1294:
        0 0.000000 0.000000  1295:
        0 0.000000 0.000000  1296:
        0 0.000000 0.000000  1297:
        0 0.000000 0.000000  1298:
       56 0.000000 0.000000  1299:sub READ {
       56 0.000232 0.000000  1300: my $self = shift;
       56 0.000369 0.010000  1301: my $i_flag = shift || '';
        0 0.000000 0.000000  1302:
       56 0.000523 0.000000  1303: $self->flag({'read', $1}) if $i_flag =~
        0 0.000000 0.000000  1304:
       56 0.001599 0.000000  1305: $i_flag = $self->flag('read');
        0 0.000000 0.000000  1306:
       56 0.000444 0.010000  1307: return $i_flag;
        0 0.000000 0.000000  1308:}
        0 0.000000 0.000000  1309:
        0 0.000000 0.000000  1310:
        0 0.000000 0.000000  1311:=item _read
        0 0.000000 0.000000  1312:
        0 0.000000 0.000000  1313:
        0 0.000000 0.000000  1314:
        0 0.000000 0.000000  1315:
        0 0.000000 0.000000  1316:
        0 0.000000 0.000000  1317:
        0 0.000000 0.000000  1318:
        0 0.000000 0.000000  1319:sub _read {
        0 0.000000 0.000000  1320: my $self = shift;
        0 0.000000 0.000000  1321: my $name = shift || $self->data('name');
        0 0.000000 0.000000  1322:
        0 0.000000 0.000000  1323: my ($oid) = $self->name2id([$name]);
        0 0.000000 0.000000  1324:
        0 0.000000 0.000000  1325: return $self->read($oid);
        0 0.000000 0.000000  1326:}
        0 0.000000 0.000000  1327:
        0 0.000000 0.000000  1328:
        0 0.000000 0.000000  1329:=item column_type
        0 0.000000 0.000000  1330:
        0 0.000000 0.000000  1331:
        0 0.000000 0.000000  1332:
        0 0.000000 0.000000  1333:
        0 0.000000 0.000000  1334:
        0 0.000000 0.000000  1335:
        0 0.000000 0.000000  1336:
        0 0.000000 0.000000  1337:
        0 0.000000 0.000000  1338:
        0 0.000000 0.000000  1339:
        0 0.000000 0.000000  1340:
        5 0.000000 0.000000  1341:sub column_type {
        5 0.000018 0.000000  1342: my $self = shift;
        5 0.000028 0.000000  1343: my $col  = lc(shift || '');
        5 0.000013 0.000000  1344: my $type = 'VARCHAR';
            ================ SmallProf version 0.9 ================
                       Profile of ..//Perlbug/Object.pm                Page 160
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000  1345:
       10 0.000350 0.000000  1346: if (!($col =~ /^\w+$/ && grep(/^$col$/, keys
        0 0.000000 0.000000  1347:  $self->error("can't define type for
        0 0.000000 0.000000  1348: } else {
        5 0.000048 0.000000  1349:  $type = $self->{'_type'}{$col};
        0 0.000000 0.000000  1350: }
        0 0.000000 0.000000  1351:
        5 0.000041 0.000000  1352: return $type;
        0 0.000000 0.000000  1353:}
        0 0.000000 0.000000  1354:
        0 0.000000 0.000000  1355:
        0 0.000000 0.000000  1356:=item to_date
        0 0.000000 0.000000  1357:
        0 0.000000 0.000000  1358:
        0 0.000000 0.000000  1359:
        0 0.000000 0.000000  1360:
        0 0.000000 0.000000  1361:
        0 0.000000 0.000000  1362:
        0 0.000000 0.000000  1363:
        0 0.000000 0.000000  1364:sub to_date {
        0 0.000000 0.000000  1365: my $self = shift || '';
        0 0.000000 0.000000  1366: return "'@_'";
        0 0.000000 0.000000  1367:}
        0 0.000000 0.000000  1368:
        0 0.000000 0.000000  1369:
        0 0.000000 0.000000  1370:=item prep
        0 0.000000 0.000000  1371:
        0 0.000000 0.000000  1372:
        0 0.000000 0.000000  1373:
        0 0.000000 0.000000  1374:
        0 0.000000 0.000000  1375:
        0 0.000000 0.000000  1376:
        0 0.000000 0.000000  1377:
        1 0.000000 0.000000  1378:sub prep {
        1 0.000008 0.000000  1379: my $self = shift;
        1 0.000008 0.000000  1380: my $control = uc(shift || '');
        1 0.000004 0.000000  1381: my $h_data = shift;
        1 0.000068 0.000000  1382: my $table  = $self->attr('table');
        1 0.000005 0.000000  1383: my $sql = '';
        0 0.000000 0.000000  1384:
        1 0.000005 0.000000  1385: if (ref($h_data) ne 'HASH') {
        0 0.000000 0.000000  1386:  $self->error("can't prep non-existing data
        0 0.000000 0.000000  1387: } else {
        1 0.000006 0.000000  1388:  my $do = (($control eq 'INSERT') ? 'INSERT
        1 0.000004 0.000000  1389:  my @args = ();
        7 0.000037 0.000000  1390:  foreach my $key (keys %{$h_data}) {
        5 0.000375 0.000000  1391:   my $type = $self->column_type($key); # def
        5 0.000031 0.000000  1392:   my $val = $$h_data{$key};
        5 0.000411 0.000000  1393:   $self->debug(3, "key($key) type($type)
        0 0.000000 0.000000  1394:   # $val =~ s/(\&nbsp\;)//gsi; # trim
        0 0.000000 0.000000  1395:   #if ($key eq 'range') { # strip 25 secs...
        0 0.000000 0.000000  1396:   # key(range) type(VARCHAR)
        0 0.000000 0.000000  1397:   # $val =~ tr/\s+//;
        5 0.000023 0.000000  1398:    $val =~ s/^\s+//;  # front
        5 0.000052 0.000000  1399:    $val =~ s/\s+$//;  # front
        5 0.000015 0.000000  1400:   if ($type eq 'DATETIME') {
            ================ SmallProf version 0.9 ================
                       Profile of ..//Perlbug/Object.pm                Page 161
       =================================================================
    count wall tm  cpu time line
        2 0.000012 0.000000  1401:    if ($key =~ /modified/i || ($key =~
        2 0.000021 0.000000  1402:     push(@args, "$key = SYSDATE()");
        0 0.000000 0.000000  1403:    } else {
        0 0.000000 0.000000  1404:     push(@args, "$key = ".$self-
        0 0.000000 0.000000  1405:    }
        2 0.000163 0.000000  1406:    $self->debug(3, "DATETIME($val):
        3 0.000010 0.000000  1407:   } elsif ($type eq 'INTEGER')  {
        1 0.000012 0.000000  1408:    push(@args, "$key = $val");
        1 0.000086 0.000000  1409:    $self->debug(3, "INTEGER($val):
        0 0.000000 0.000000  1410:   } else { # default and handles all strings
        2 0.000142 0.000000  1411:    push(@args, "$key = ".$self->base-
        2 0.000223 0.000000  1412:    $self->debug(3, "VARCHAR($val):
        0 0.000000 0.000000  1413:   }
        0 0.000000 0.000000  1414:  }
        1 0.000054 0.000000  1415:  $sql = "$do $table SET ".join(', ', @args);
        1 0.000083 0.000000  1416:  $self->debug(3, "sql($sql)") if $DEBUG;
        0 0.000000 0.000000  1417: }
        0 0.000000 0.000000  1418:
        1 0.000060 0.000000  1419: return $sql;
        0 0.000000 0.000000  1420:}
        0 0.000000 0.000000  1421:
        0 0.000000 0.000000  1422:
        0 0.000000 0.000000  1423:=item create
        0 0.000000 0.000000  1424:
        0 0.000000 0.000000  1425:
        0 0.000000 0.000000  1426:
        0 0.000000 0.000000  1427:
        0 0.000000 0.000000  1428:
        0 0.000000 0.000000  1429:
        0 0.000000 0.000000  1430:
        0 0.000000 0.000000  1431:
        0 0.000000 0.000000  1432:
        0 0.000000 0.000000  1433:
        0 0.000000 0.000000  1434:
        0 0.000000 0.000000  1435:
        0 0.000000 0.000000  1436:
        0 0.000000 0.000000  1437:
        0 0.000000 0.000000  1438:
        0 0.000000 0.000000  1439:
        0 0.000000 0.000000  1440:
        0 0.000000 0.000000  1441:
        0 0.000000 0.000000  1442:
        1 0.000000 0.000000  1443:sub create { # by id from hashref
        1 0.000006 0.000000  1444: my $self = shift;
        1 0.000005 0.000000  1445: my $h_data = shift || $self->_oref('data');
        1 0.000007 0.000000  1446: my $flag   = shift || ''; # anything
        1 0.000006 0.000000  1447: my $sqlclean= shift || '1';
        1 0.000078 0.000000  1448: my ($table, $pri) = ($self->attr('table'),
        0 0.000000 0.000000  1449:
        1 0.000006 0.000000  1450: if (!(ref($h_data) eq 'HASH')) {
        0 0.000000 0.000000  1451:  $self->error("requires data hash
        0 0.000000 0.000000  1452: } else {
        1 0.000007 0.000000  1453:  my $oid = $$h_data{$pri} || '';
        1 0.000010 0.000000  1454:  if ($oid !~ /\w+/) {
        0 0.000000 0.000000  1455:   $self->error("requires an objectid($oid)
        0 0.000000 0.000000  1456:  } else {
            ================ SmallProf version 0.9 ================
                       Profile of ..//Perlbug/Object.pm                Page 162
       =================================================================
    count wall tm  cpu time line
        1 0.000006 0.000000  1457:   if ($flag eq '' && $oid ne 'NULL' &&
        0 0.000000 0.000000  1458:    $self->error("can't create already
        0 0.000000 0.000000  1459:   } else {     # INSERT
        1 0.000044 0.000000  1460:    $self->data($h_data);
        1 0.000093 0.000000  1461:    my $sql = $self->prep('insert', $self-
        1 0.000071 0.000000  1462:    my $sth = $self->base->exec($sql); # DOIT
        1 0.000004 0.000000  1463:    if (!(defined($sth))) {
        0 0.000000 0.000000  1464:     $self->error("Failed($oid) to create
        0 0.000000 0.000000  1465:    } else {
        1 0.000098 0.000000  1466:     $self->CREATED(1);
        1 0.000097 0.000000  1467:     $oid = $self->insertid($sth);
        1 0.000097 0.000000  1468:     $oid = $self->oid($oid) if $oid =~ /\w+/
        1 0.000111 0.000000  1469:     $self->track($sql." -> oid($oid)");
        1 0.000076 0.000000  1470:     $self->base->clean_cache('sql');
        0 0.000000 0.000000  1471:    }
        0 0.000000 0.000000  1472:   }
        0 0.000000 0.000000  1473:  }
        0 0.000000 0.000000  1474: }
        0 0.000000 0.000000  1475:
        1 0.000027 0.000000  1476: return $self;
        0 0.000000 0.000000  1477:}
        0 0.000000 0.000000  1478:
        0 0.000000 0.000000  1479:sub _create {
        0 0.000000 0.000000  1480: my $self = shift;
        0 0.000000 0.000000  1481:
        0 0.000000 0.000000  1482: $self->attr('clean_sql', 0);
        0 0.000000 0.000000  1483: $self->create(@_);
        0 0.000000 0.000000  1484: $self->attr('clean_sql', 1);
        0 0.000000 0.000000  1485:
        0 0.000000 0.000000  1486: return $self;
        0 0.000000 0.000000  1487:}
        0 0.000000 0.000000  1488:
        0 0.000000 0.000000  1489:
        0 0.000000 0.000000  1490:=item CREATED
        0 0.000000 0.000000  1491:
        0 0.000000 0.000000  1492:
        0 0.000000 0.000000  1493:
        0 0.000000 0.000000  1494:
        0 0.000000 0.000000  1495:
        0 0.000000 0.000000  1496:
        0 0.000000 0.000000  1497:
       46 0.000000 0.000000  1498:sub CREATED {
       46 0.000217 0.000000  1499: my $self = shift;
       46 0.000229 0.000000  1500: my $i_flag = shift || '';
        0 0.000000 0.000000  1501:
       46 0.000215 0.000000  1502: $self->flag({'created', $1}) if $i_flag =~
        0 0.000000 0.000000  1503:
       46 0.001310 0.000000  1504: $i_flag = $self->flag('created');
        0 0.000000 0.000000  1505:
       46 0.000330 0.010000  1506: return $i_flag;
        0 0.000000 0.000000  1507:}
        0 0.000000 0.000000  1508:
        0 0.000000 0.000000  1509:
        0 0.000000 0.000000  1510:
        0 0.000000 0.000000  1511:=item store
        0 0.000000 0.000000  1512:
            ================ SmallProf version 0.9 ================
                       Profile of ..//Perlbug/Object.pm                Page 163
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000  1513:
        0 0.000000 0.000000  1514:
        0 0.000000 0.000000  1515:
        0 0.000000 0.000000  1516:
        0 0.000000 0.000000  1517:
        0 0.000000 0.000000  1518:
        0 0.000000 0.000000  1519:
        0 0.000000 0.000000  1520:
        0 0.000000 0.000000  1521:
        0 0.000000 0.000000  1522:
        0 0.000000 0.000000  1523:
        0 0.000000 0.000000  1524:
        0 0.000000 0.000000  1525:
        0 0.000000 0.000000  1526:
        0 0.000000 0.000000  1527:
        0 0.000000 0.000000  1528:
        0 0.000000 0.000000  1529:
        0 0.000000 0.000000  1530:
        0 0.000000 0.000000  1531:sub store { # by id from hashref
        0 0.000000 0.000000  1532: my $self = shift;
        0 0.000000 0.000000  1533: my $h_data = shift || $self->_oref('data');
        0 0.000000 0.000000  1534: my ($table, $pri) = ($self->attr('table'),
        0 0.000000 0.000000  1535:
        0 0.000000 0.000000  1536: if (!(ref($h_data) eq 'HASH')) {
        0 0.000000 0.000000  1537:  $self->error("requires data hash
        0 0.000000 0.000000  1538: } else {
        0 0.000000 0.000000  1539:  my $oid = $$h_data{$pri} || '';
        0 0.000000 0.000000  1540:  my $call = ($self->exists([$oid])) ?
        0 0.000000 0.000000  1541:  $self = $self->$call($h_data);
        0 0.000000 0.000000  1542:  if (ref($self)) {
        0 0.000000 0.000000  1543:   $self->STORED(1);
        0 0.000000 0.000000  1544:  }
        0 0.000000 0.000000  1545: }
        0 0.000000 0.000000  1546:
        0 0.000000 0.000000  1547: return $self;
        0 0.000000 0.000000  1548:}
        0 0.000000 0.000000  1549:
        0 0.000000 0.000000  1550:
        0 0.000000 0.000000  1551:=item STORED
        0 0.000000 0.000000  1552:
        0 0.000000 0.000000  1553:
        0 0.000000 0.000000  1554:
        0 0.000000 0.000000  1555:
        0 0.000000 0.000000  1556:
        0 0.000000 0.000000  1557:
        0 0.000000 0.000000  1558:
       44 0.000000 0.000000  1559:sub STORED {
       44 0.000206 0.000000  1560: my $self = shift;
       44 0.000225 0.000000  1561: my $i_flag = shift || '';
        0 0.000000 0.000000  1562:
       44 0.000129 0.000000  1563: $self->flag({'stored', $1}) if $i_flag =~
        0 0.000000 0.000000  1564:
       44 0.001203 0.000000  1565: $i_flag = $self->flag('stored');
        0 0.000000 0.000000  1566:
       44 0.000264 0.010000  1567: return $i_flag;
        0 0.000000 0.000000  1568:}
            ================ SmallProf version 0.9 ================
                       Profile of ..//Perlbug/Object.pm                Page 164
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000  1569:
        0 0.000000 0.000000  1570:
        0 0.000000 0.000000  1571:=item update
        0 0.000000 0.000000  1572:
        0 0.000000 0.000000  1573:
        0 0.000000 0.000000  1574:
        0 0.000000 0.000000  1575:
        0 0.000000 0.000000  1576:
        0 0.000000 0.000000  1577:
        0 0.000000 0.000000  1578:
        0 0.000000 0.000000  1579:
        0 0.000000 0.000000  1580:
        0 0.000000 0.000000  1581:
        0 0.000000 0.000000  1582:
        0 0.000000 0.000000  1583:
        0 0.000000 0.000000  1584:
        0 0.000000 0.000000  1585:sub update { # by id from hashref
        0 0.000000 0.000000  1586: my $self = shift;
        0 0.000000 0.000000  1587: my $h_data = shift || $self->_oref('data');
        0 0.000000 0.000000  1588: my ($table, $pri) = ($self->attr('table'),
        0 0.000000 0.000000  1589:
        0 0.000000 0.000000  1590: my ($msg, $sth, $type) = ('', '', '');
        0 0.000000 0.000000  1591: if (!(ref($h_data) eq 'HASH')) {
        0 0.000000 0.000000  1592:  $self->error("requires data hash
        0 0.000000 0.000000  1593: } else {
        0 0.000000 0.000000  1594:  my $oid = $$h_data{$pri} || $self->oid ||
        0 0.000000 0.000000  1595:  if (!($self->exists([$oid]))) { #
        0 0.000000 0.000000  1596:   $self->error("can't update non-existent
        0 0.000000 0.000000  1597:  } else {
        0 0.000000 0.000000  1598:   $self->read($oid);  # first we read
        0 0.000000 0.000000  1599:   if (!$self->READ) {
        0 0.000000 0.000000  1600:    $self->error("can't update
        0 0.000000 0.000000  1601:   } else {    # then we can set the new
        0 0.000000 0.000000  1602:    $self->data({ %{$h_data}, $pri, $oid });
        0 0.000000 0.000000  1603:    my $sql = $self->prep('update', $self-
        0 0.000000 0.000000  1604:    $sql = $sql." WHERE $pri = '$oid'";
        0 0.000000 0.000000  1605:    $sth = $self->base->exec($sql); # DOIT
        0 0.000000 0.000000  1606:    if (!(defined($sth))) {
        0 0.000000 0.000000  1607:     $self->error("Failed($oid) $type
        0 0.000000 0.000000  1608:    } else {
        0 0.000000 0.000000  1609:     $self->UPDATED(1);
        0 0.000000 0.000000  1610:     $self->track($sql); # rjsf: too much
        0 0.000000 0.000000  1611:     $self->base->clean_cache('sql');
        0 0.000000 0.000000  1612:    }
        0 0.000000 0.000000  1613:   }
        0 0.000000 0.000000  1614:  }
        0 0.000000 0.000000  1615: }
        0 0.000000 0.000000  1616:
        0 0.000000 0.000000  1617: return $self;
        0 0.000000 0.000000  1618:}
        0 0.000000 0.000000  1619:
        0 0.000000 0.000000  1620:
        0 0.000000 0.000000  1621:=item UPDATED
        0 0.000000 0.000000  1622:
        0 0.000000 0.000000  1623:
        0 0.000000 0.000000  1624:
            ================ SmallProf version 0.9 ================
                       Profile of ..//Perlbug/Object.pm                Page 165
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000  1625:
        0 0.000000 0.000000  1626:
        0 0.000000 0.000000  1627:
        0 0.000000 0.000000  1628:
       44 0.000000 0.000000  1629:sub UPDATED {
       44 0.000201 0.000000  1630: my $self = shift;
       44 0.000233 0.000000  1631: my $i_flag = shift || '';
        0 0.000000 0.000000  1632:
       44 0.000173 0.010000  1633: $self->flag({'updated', $1}) if $i_flag =~
        0 0.000000 0.000000  1634:
       44 0.001203 0.000000  1635: $i_flag = $self->flag('updated');
        0 0.000000 0.000000  1636:
       44 0.000223 0.000000  1637: return $i_flag;
        0 0.000000 0.000000  1638:}
        0 0.000000 0.000000  1639:
        0 0.000000 0.000000  1640:
        0 0.000000 0.000000  1641:=item delete
        0 0.000000 0.000000  1642:
        0 0.000000 0.000000  1643:
        0 0.000000 0.000000  1644:
        0 0.000000 0.000000  1645:
        0 0.000000 0.000000  1646:
        0 0.000000 0.000000  1647:
        0 0.000000 0.000000  1648:
        0 0.000000 0.000000  1649:
        0 0.000000 0.000000  1650:
        0 0.000000 0.000000  1651:
        0 0.000000 0.000000  1652:
        0 0.000000 0.000000  1653:
        0 0.000000 0.000000  1654:
        0 0.000000 0.000000  1655:sub delete { # by id from hashref
        0 0.000000 0.000000  1656: my $self = shift;
        0 0.000000 0.000000  1657: my $a_oids = shift || [$self->oid()];
        0 0.000000 0.000000  1658: my ($table, $pri) = ($self->attr('table'),
        0 0.000000 0.000000  1659:
        0 0.000000 0.000000  1660: my ($msg, $sql, $sth, $type) = ('', '', '',
        0 0.000000 0.000000  1661: if (!(ref($a_oids) eq 'ARRAY')) {
        0 0.000000 0.000000  1662:  $self->error("requires oid/s array
        0 0.000000 0.000000  1663: } else {
        0 0.000000 0.000000  1664:  foreach my $oid (@{$a_oids}) {
        0 0.000000 0.000000  1665:   if (!($self->exists([$oid]))) { # DOIT
        0 0.000000 0.000000  1666:    $self->error("can't delete non-existing
        0 0.000000 0.000000  1667:   } else { # recursion handled by
        0 0.000000 0.000000  1668:    my $sql = "DELETE FROM ".$self-
        0 0.000000 0.000000  1669:    $sth = $self->base->exec($sql); # DOIT
        0 0.000000 0.000000  1670:    if (!(defined($sth))) {
        0 0.000000 0.000000  1671:     $self->error("Delete($oid) failed:
        0 0.000000 0.000000  1672:    } else {
        0 0.000000 0.000000  1673:     $self->DELETED(1);
        0 0.000000 0.000000  1674:     $self->track($sql);
        0 0.000000 0.000000  1675:     $self->base->clean_cache('sql');
        0 0.000000 0.000000  1676:    }
        0 0.000000 0.000000  1677:   }
        0 0.000000 0.000000  1678:  }
        0 0.000000 0.000000  1679:  # $self->reset;
        0 0.000000 0.000000  1680: }
            ================ SmallProf version 0.9 ================
                       Profile of ..//Perlbug/Object.pm                Page 166
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000  1681:
        0 0.000000 0.000000  1682: return $self;
        0 0.000000 0.000000  1683:}
        0 0.000000 0.000000  1684:
        0 0.000000 0.000000  1685:
        0 0.000000 0.000000  1686:=item DELETED
        0 0.000000 0.000000  1687:
        0 0.000000 0.000000  1688:
        0 0.000000 0.000000  1689:
        0 0.000000 0.000000  1690:
        0 0.000000 0.000000  1691:
        0 0.000000 0.000000  1692:
        0 0.000000 0.000000  1693:
       44 0.000000 0.000000  1694:sub DELETED {
       44 0.000195 0.000000  1695: my $self = shift;
       44 0.000214 0.000000  1696: my $i_flag = shift || '';
        0 0.000000 0.000000  1697:
       44 0.000125 0.000000  1698: $self->flag({'deleted', $1}) if $i_flag =~
        0 0.000000 0.000000  1699:
       44 0.001151 0.000000  1700: $i_flag = $self->flag('deleted');
        0 0.000000 0.000000  1701:
       44 0.000229 0.000000  1702: return $i_flag;
        0 0.000000 0.000000  1703:}
        0 0.000000 0.000000  1704:
        0 0.000000 0.000000  1705:
        0 0.000000 0.000000  1706:=item updatable
        0 0.000000 0.000000  1707:
        0 0.000000 0.000000  1708:
        0 0.000000 0.000000  1709:
        0 0.000000 0.000000  1710:
        0 0.000000 0.000000  1711:
        0 0.000000 0.000000  1712:
        0 0.000000 0.000000  1713:
        0 0.000000 0.000000  1714:
        0 0.000000 0.000000  1715:
        0 0.000000 0.000000  1716:sub updatable {
        0 0.000000 0.000000  1717:    my $self  = shift;
        0 0.000000 0.000000  1718:    my $a_ids = shift || ''; # ignored
        0 0.000000 0.000000  1719:
        0 0.000000 0.000000  1720: $self->error("requires an array_ref or
        0 0.000000 0.000000  1721:
        0 0.000000 0.000000  1722: my @ids = $self->base->isadmin ? @{$a_ids} :
        0 0.000000 0.000000  1723:
        0 0.000000 0.000000  1724:    return @ids;
        0 0.000000 0.000000  1725:}
        0 0.000000 0.000000  1726:
        0 0.000000 0.000000  1727:
        0 0.000000 0.000000  1728:=item insertid
        0 0.000000 0.000000  1729:
        0 0.000000 0.000000  1730:
        0 0.000000 0.000000  1731:
        0 0.000000 0.000000  1732:
        0 0.000000 0.000000  1733:
        0 0.000000 0.000000  1734:
        0 0.000000 0.000000  1735:
        1 0.000000 0.000000  1736:sub insertid {
            ================ SmallProf version 0.9 ================
                       Profile of ..//Perlbug/Object.pm                Page 167
       =================================================================
    count wall tm  cpu time line
        1 0.000005 0.000000  1737: my $self = shift;
        1 0.000004 0.000000  1738: my $sth = shift;
        0 0.000000 0.000000  1739:
        1 0.000083 0.000000  1740: my $newid = defined($sth) ? $sth->insertid :
        1 0.000087 0.000000  1741: $self->debug(0, "newly inserted
        0 0.000000 0.000000  1742:
        1 0.000016 0.000000  1743: return $newid;
        0 0.000000 0.000000  1744:}
        0 0.000000 0.000000  1745:
        0 0.000000 0.000000  1746:
        0 0.000000 0.000000  1747:=item web_update
        0 0.000000 0.000000  1748:
        0 0.000000 0.000000  1749:
        0 0.000000 0.000000  1750:
        0 0.000000 0.000000  1751:
        0 0.000000 0.000000  1752:
        0 0.000000 0.000000  1753:
        0 0.000000 0.000000  1754:
        0 0.000000 0.000000  1755:sub x_web_update {
        0 0.000000 0.000000  1756: my $self = shift;
        0 0.000000 0.000000  1757: my $cgi  = shift || '';
        0 0.000000 0.000000  1758:
        0 0.000000 0.000000  1759: if (!ref($cgi)) {
        0 0.000000 0.000000  1760:  $self->error("require cgi($cgi) object for
        0 0.000000 0.000000  1761: } else {
        0 0.000000 0.000000  1762:  print "unsupported method:
        0 0.000000 0.000000  1763: }
        0 0.000000 0.000000  1764:
        0 0.000000 0.000000  1765: return $self;
        0 0.000000 0.000000  1766:}
        0 0.000000 0.000000  1767:
        0 0.000000 0.000000  1768:
        0 0.000000 0.000000  1769:=item new_id
        0 0.000000 0.000000  1770:
        0 0.000000 0.000000  1771:
        0 0.000000 0.000000  1772:
        0 0.000000 0.000000  1773:
        0 0.000000 0.000000  1774:
        0 0.000000 0.000000  1775:
        0 0.000000 0.000000  1776:
        0 0.000000 0.000000  1777:
        0 0.000000 0.000000  1778:
        0 0.000000 0.000000  1779:
        0 0.000000 0.000000  1780:
        0 0.000000 0.000000  1781:
        1 0.000000 0.000000  1782:sub new_id {
        1 0.000005 0.000000  1783: my $self = shift;
        0 0.000000 0.000000  1784:
        1 0.000005 0.000000  1785: my $newid = 'NULL';
        1 0.000086 0.000000  1786: $self->debug(0, "new objectid($newid)") if
        0 0.000000 0.000000  1787:
        1 0.000211 0.000000  1788: return $newid;
        0 0.000000 0.000000  1789:}
        0 0.000000 0.000000  1790:
        0 0.000000 0.000000  1791:
        0 0.000000 0.000000  1792:=head1 CONVENIENCE
            ================ SmallProf version 0.9 ================
                       Profile of ..//Perlbug/Object.pm                Page 168
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000  1793:
        0 0.000000 0.000000  1794:
        0 0.000000 0.000000  1795:
        0 0.000000 0.000000  1796:
        0 0.000000 0.000000  1797:
        0 0.000000 0.000000  1798:
        0 0.000000 0.000000  1799:
        0 0.000000 0.000000  1800:
        0 0.000000 0.000000  1801:
        0 0.000000 0.000000  1802:
        0 0.000000 0.000000  1803:sub error {
        0 0.000000 0.000000  1804: my $self = shift;
        0 0.000000 0.000000  1805: my $hint = '<'.($self->attr('key')).'>';
        0 0.000000 0.000000  1806: return $self->base->error($hint, @_);
        0 0.000000 0.000000  1807:}
        0 0.000000 0.000000  1808:
        0 0.000000 0.000000  1809:
        0 0.000000 0.000000  1810:=item debug
        0 0.000000 0.000000  1811:
        0 0.000000 0.000000  1812:
        0 0.000000 0.000000  1813:
        0 0.000000 0.000000  1814:
        0 0.000000 0.000000  1815:
     1392 0.000000 0.000000  1816:sub debug { # wrapper
     1392 0.006821 0.040000  1817: my $self = shift;
        0 0.000000 0.000000  1818: # my $ORIG = $Perlbug::DEBUG;
        0 0.000000 0.000000  1819: # $Perlbug::DEBUG = $Perlbug::DEBUG ||
     1392 0.096842 0.130000  1820: $self->base->debug(@_);
        0 0.000000 0.000000  1821: # $Perlbug::DEBUG = $ORIG;
        0 0.000000 0.000000  1822:}
        0 0.000000 0.000000  1823:
        0 0.000000 0.000000  1824:
        0 0.000000 0.000000  1825:=item object
        0 0.000000 0.000000  1826:
        0 0.000000 0.000000  1827:
        0 0.000000 0.000000  1828:
        0 0.000000 0.000000  1829:
        0 0.000000 0.000000  1830:
     2353 0.000000 0.000000  1831:sub object {
     2353 0.024585 0.110000  1832: my $self = shift;
     2353 0.161788 0.190000  1833: return $self->base->object(@_);
        0 0.000000 0.000000  1834:}
        0 0.000000 0.000000  1835:
        0 0.000000 0.000000  1836:
        0 0.000000 0.000000  1837:=item format
        0 0.000000 0.000000  1838:
        0 0.000000 0.000000  1839:
        0 0.000000 0.000000  1840:
        0 0.000000 0.000000  1841:
        0 0.000000 0.000000  1842:
        5 0.000000 0.000000  1843:sub format { # return $self->FORMAT(@_)
        5 0.000028 0.000000  1844: my $self = shift;
        5 0.000368 0.000000  1845: my $fmt = shift || $self->base-
        5 0.000147 0.000000  1846: my %map = (
        0 0.000000 0.000000  1847:  'a' => 5,  'A' => 1,
        0 0.000000 0.000000  1848:  'h' => 10,  'H' => 1,
            ================ SmallProf version 0.9 ================
                       Profile of ..//Perlbug/Object.pm                Page 169
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000  1849:  'i' => 1,  'I' => 15,
        0 0.000000 0.000000  1850:  'l' => 250, 'L' => 25,
        0 0.000000 0.000000  1851:  'x' => 1,  'X' => 1,
        0 0.000000 0.000000  1852: );
        5 0.000480 0.000000  1853: $self->max($map{$fmt}); # !
        0 0.000000 0.000000  1854:
        5 0.000403 0.000000  1855: $self->refresh_relations;
        0 0.000000 0.000000  1856:
        5 0.000498 0.000000  1857: return $self->FORMAT($fmt, @_); #
        0 0.000000 0.000000  1858:}
        0 0.000000 0.000000  1859:
        0 0.000000 0.000000  1860:
        0 0.000000 0.000000  1861:=item x_format
        0 0.000000 0.000000  1862:
        0 0.000000 0.000000  1863:
        0 0.000000 0.000000  1864:
        0 0.000000 0.000000  1865:
        0 0.000000 0.000000  1866:
        0 0.000000 0.000000  1867:
        0 0.000000 0.000000  1868:
        0 0.000000 0.000000  1869:sub x_format { # return $self->format(@_)
        0 0.000000 0.000000  1870: my $self = shift;
        0 0.000000 0.000000  1871:
        0 0.000000 0.000000  1872: $self->refresh(@_);
        0 0.000000 0.000000  1873:
        0 0.000000 0.000000  1874: return $self->format(@_);
        0 0.000000 0.000000  1875:
        0 0.000000 0.000000  1876: # return $self; #
        0 0.000000 0.000000  1877:}
        0 0.000000 0.000000  1878:
        0 0.000000 0.000000  1879:
        0 0.000000 0.000000  1880:=item track
        0 0.000000 0.000000  1881:
        0 0.000000 0.000000  1882:
        0 0.000000 0.000000  1883:
        0 0.000000 0.000000  1884:
        0 0.000000 0.000000  1885:
        0 0.000000 0.000000  1886:
        0 0.000000 0.000000  1887:
        1 0.000000 0.000000  1888:sub track {
        1 0.000005 0.000000  1889: my $self = shift;
        1 0.000040 0.000000  1890: my $data = shift || '';
        1 0.000082 0.000000  1891: my $type = $self->key;
        1 0.000068 0.000000  1892: my $oid  = $self->oid;
        0 0.000000 0.000000  1893:
        1 0.000016 0.000000  1894: my $i_tracked = $self->base->track($type,
        0 0.000000 0.000000  1895:  unless $type =~ /(log|range)/i; # || $type
        0 0.000000 0.000000  1896:
        1 0.000006 0.000000  1897: $self->TRACKED(1) if $i_tracked;
        0 0.000000 0.000000  1898:
        1 0.000007 0.000000  1899: return $self;
        0 0.000000 0.000000  1900:}
        0 0.000000 0.000000  1901:
        0 0.000000 0.000000  1902:
        0 0.000000 0.000000  1903:=item TRACKED
        0 0.000000 0.000000  1904:
            ================ SmallProf version 0.9 ================
                       Profile of ..//Perlbug/Object.pm                Page 170
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000  1905:
        0 0.000000 0.000000  1906:
        0 0.000000 0.000000  1907:
        0 0.000000 0.000000  1908:
        0 0.000000 0.000000  1909:
        0 0.000000 0.000000  1910:
       44 0.000000 0.000000  1911:sub TRACKED {
       44 0.000198 0.000000  1912: my $self = shift;
       44 0.000248 0.010000  1913: my $i_flag = shift || '';
        0 0.000000 0.000000  1914:
       44 0.000142 0.000000  1915: $self->flag({'tracked', $1}) if $i_flag =~
        0 0.000000 0.000000  1916:
       44 0.001148 0.000000  1917: $i_flag = $self->flag('tracked');
        0 0.000000 0.000000  1918:
       44 0.000209 0.000000  1919: return $i_flag;
        0 0.000000 0.000000  1920:}
        0 0.000000 0.000000  1921:
        0 0.000000 0.000000  1922:
        0 0.000000 0.000000  1923:=item attribute
        0 0.000000 0.000000  1924:
        0 0.000000 0.000000  1925:
        0 0.000000 0.000000  1926:
        0 0.000000 0.000000  1927:
        0 0.000000 0.000000  1928:
        0 0.000000 0.000000  1929:
        0 0.000000 0.000000  1930:
        0 0.000000 0.000000  1931:
        0 0.000000 0.000000  1932:
    29646 0.353624 0.580000  1933:sub attr { my $self = shift; return $self-
        0 0.000000 0.000000  1934:
        0 0.000000 0.000000  1935:=item data
        0 0.000000 0.000000  1936:
        0 0.000000 0.000000  1937:
        0 0.000000 0.000000  1938:
        0 0.000000 0.000000  1939:
        0 0.000000 0.000000  1940:
        0 0.000000 0.000000  1941:
        0 0.000000 0.000000  1942:
        0 0.000000 0.000000  1943:
        0 0.000000 0.000000  1944:
        0 0.000000 0.000000  1945:
        0 0.000000 0.000000  1946:
        0 0.000000 0.000000  1947:
        0 0.000000 0.000000  1948:
        0 0.000000 0.000000  1949:
        0 0.000000 0.000000  1950:
        0 0.000000 0.000000  1951:
        0 0.000000 0.000000  1952:
        0 0.000000 0.000000  1953:=item flag
        0 0.000000 0.000000  1954:
        0 0.000000 0.000000  1955:
        0 0.000000 0.000000  1956:
        0 0.000000 0.000000  1957:
        0 0.000000 0.000000  1958:
        0 0.000000 0.000000  1959:
        0 0.000000 0.000000  1960:
            ================ SmallProf version 0.9 ================
                       Profile of ..//Perlbug/Object.pm                Page 171
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000  1961:
        0 0.000000 0.000000  1962:=item attr
        0 0.000000 0.000000  1963:
        0 0.000000 0.000000  1964:
        0 0.000000 0.000000  1965:
        0 0.000000 0.000000  1966:
        0 0.000000 0.000000  1967:
        0 0.000000 0.000000  1968:
        0 0.000000 0.000000  1969:
        0 0.000000 0.000000  1970:
        0 0.000000 0.000000  1971:
        0 0.000000 0.000000  1972:
        0 0.000000 0.000000  1973:
        0 0.000000 0.000000  1974:
        0 0.000000 0.000000  1975:
        0 0.000000 0.000000  1976:
        0 0.000000 0.000000  1977:
        0 0.000000 0.000000  1978:
        0 0.000000 0.000000  1979:
        0 0.000000 0.000000  1980:
        0 0.000000 0.000000  1981:
        4 0.000000 0.000000  1982:sub AUTOLOAD {
        4 0.000020 0.000000  1983:    my $self = shift;
        4 0.000024 0.000000  1984:    my $get  = shift || ''; # get || { set =>
        4 0.000020 0.000000  1985: my $meth = $AutoLoader::AUTOLOAD =
        4 0.000122 0.000000  1986:    return if $meth =~ /::DESTROY$/;
        3 0.000041 0.000000  1987:    $meth =~ s/^(.*):://;
        3 0.000015 0.000000  1988: my $pkg = ref($self);
        3 0.000011 0.000000  1989: my @ret = ();
        0 0.000000 0.000000  1990:
        3 0.000030 0.000000  1991:    if ($meth !~ /^(attribute|data|flag)$/) {
        0 0.000000 0.000000  1992:        $self->error("$pkg->$meth($get, @_)
        0 0.000000 0.000000  1993:    } else {
        0 0.000000 0.000000  1994:  no strict 'refs';
        3 0.000039 0.000000  1995:  *{$AUTOLOAD} = sub {
    10550 0.039896 0.240000  1996:   my $self = shift;
    10550 0.043753 0.210000  1997:   my $get  = shift;
    10550 0.031258 0.130000  1998:   my @ret = ();
        0 0.000000 0.000000  1999:
    10550 0.082622 0.290000  2000:   if (ref($self->{"_$meth"}) ne 'HASH') {
        0 0.000000 0.000000  2001:    confess("invalid object($pkg)
        0 0.000000 0.000000  2002:   } else {
    21100 0.761341 1.020000  2003:    my @keys = @ret = keys %{$self-
    10550 0.029720 0.270000  2004:    if (defined($get)) {
    10439 0.033523 0.190000  2005:     if (ref($get) ne 'HASH') {     # get
    10045 0.203018 0.350000  2006:      @ret = ($self->{"_$meth"}{$get});
        0 0.000000 0.000000  2007:     } else {        # set
      394 0.004759 0.030000  2008:      my $keys = join('|', @keys);
      394 0.003940 0.000000  2009:      @ret = ();
      394 0.004196 0.010000  2010:      SET:
      886 0.004978 0.010000  2011:      foreach my $key (keys %{$get}) {
      492 0.053089 0.040000  2012:       if ($key !~ /^($keys)$/) {
        0 0.000000 0.000000  2013:        $self->error("$pkg has no such $meth
        0 0.000000 0.000000  2014:       } else {
      492 0.005712 0.030000  2015:        $self->{"_$meth"}->{$key} =
      492 0.004801 0.020000  2016:        push(@ret, $$get{$key});
            ================ SmallProf version 0.9 ================
                       Profile of ..//Perlbug/Object.pm                Page 172
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000  2017:       }
        0 0.000000 0.000000  2018:      }
        0 0.000000 0.000000  2019:     }
        0 0.000000 0.000000  2020:    }
    10550 0.360414 0.490000  2021:    return wantarray ? @ret : $ret[0];
        0 0.000000 0.000000  2022:   }
        0 0.000000 0.000000  2023:  }
        3 0.000168 0.000000  2024:    }
        3 0.000032 0.000000  2025: return wantarray ? @ret : $ret[0];
        0 0.000000 0.000000  2026:}
        0 0.000000 0.000000  2027:
        0 0.000000 0.000000  2028:
        0 0.000000 0.000000  2029:sub xattr { # explicit version
        0 0.000000 0.000000  2030: my $self = shift;
        0 0.000000 0.000000  2031: my $get  = shift;
        0 0.000000 0.000000  2032: my @ret = ();
        0 0.000000 0.000000  2033:
        0 0.000000 0.000000  2034: if (ref($self->{"_attribute"}) ne 'HASH') {
        0 0.000000 0.000000  2035:  confess("invalid object($self)
        0 0.000000 0.000000  2036: } else {
        0 0.000000 0.000000  2037:  my @keys = @ret = keys %{$self-
        0 0.000000 0.000000  2038:  if (defined($get)) {
        0 0.000000 0.000000  2039:   if (ref($get) ne 'HASH') {     # get
        0 0.000000 0.000000  2040:    @ret = ($self->{"_attribute"}{$get});
        0 0.000000 0.000000  2041:   } else {        # set
        0 0.000000 0.000000  2042:    my $keys = join('|', @keys);
        0 0.000000 0.000000  2043:    @ret = ();
        0 0.000000 0.000000  2044:    SET:
        0 0.000000 0.000000  2045:    foreach my $key (keys %{$get}) {
        0 0.000000 0.000000  2046:     if ($key !~ /^($keys)$/) {
        0 0.000000 0.000000  2047:      $self->error("$self has no such
        0 0.000000 0.000000  2048:     } else {
        0 0.000000 0.000000  2049:      $self->{"_attribute"}->{$key} =
        0 0.000000 0.000000  2050:      push(@ret, $$get{$key});
        0 0.000000 0.000000  2051:     }
        0 0.000000 0.000000  2052:    }
        0 0.000000 0.000000  2053:   }
        0 0.000000 0.000000  2054:  }
        0 0.000000 0.000000  2055: }
        0 0.000000 0.000000  2056: # print "get($get) got(@ret)\n";
        0 0.000000 0.000000  2057: return wantarray ? @ret : $ret[0];
        0 0.000000 0.000000  2058:}
        0 0.000000 0.000000  2059:
        0 0.000000 0.000000  2060:=head1 AUTHOR
        0 0.000000 0.000000  2061:
        0 0.000000 0.000000  2062:
        0 0.000000 0.000000  2063:
        0 0.000000 0.000000  2064:
        0 0.000000 0.000000  2065:
        0 0.000000 0.000000  2066:1;
        0 0.000000 0.000000  2067:
            ================ SmallProf version 0.9 ================
                          Profile of ../Perlbug/JS.pm                  Page 173
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000     1:# Perlbug javascript routines
        0 0.000000 0.000000     2:# (C) 2000 Richard Foley RFI perlbug@rfi.net
        0 0.000000 0.000000     3:# $Id: JS.pm,v 1.6 2001/04/21 20:48:48
        0 0.000000 0.000000     4:#
        0 0.000000 0.000000     5:
        0 0.000000 0.000000     6:=head1 NAME
        0 0.000000 0.000000     7:
        0 0.000000 0.000000     8:
        0 0.000000 0.000000     9:
        0 0.000000 0.000000    10:
        0 0.000000 0.000000    11:
        0 0.000000 0.000000    12:package Perlbug::JS;
        0 0.000000 0.000000    13:use strict;
        0 0.000000 0.000000    14:use vars qw(@ISA $VERSION);
        0 0.000000 0.000000    15:$VERSION  = do { my @r = (q$Revision: 1.6 $
        0 0.000000 0.000000    16:my $DEBUG = $ENV{'Perlbug_JS_DEBUG'} ||
        0 0.000000 0.000000    17:$| = 1;
        0 0.000000 0.000000    18:
        0 0.000000 0.000000    19:use CGI;
        0 0.000000 0.000000    20:
        0 0.000000 0.000000    21:
        0 0.000000 0.000000    22:=head1 DESCRIPTION
        0 0.000000 0.000000    23:
        0 0.000000 0.000000    24:
        0 0.000000 0.000000    25:
        0 0.000000 0.000000    26:
        0 0.000000 0.000000    27:
        0 0.000000 0.000000    28:
        0 0.000000 0.000000    29:=head1 SYNOPSIS
        0 0.000000 0.000000    30:
        0 0.000000 0.000000    31:
        0 0.000000 0.000000    32:
        0 0.000000 0.000000    33:
        0 0.000000 0.000000    34:
        0 0.000000 0.000000    35:
        0 0.000000 0.000000    36:
        0 0.000000 0.000000    37:
        0 0.000000 0.000000    38:=head1 METHODS
        0 0.000000 0.000000    39:
        0 0.000000 0.000000    40:
        0 0.000000 0.000000    41:
        0 0.000000 0.000000    42:
        0 0.000000 0.000000    43:
        0 0.000000 0.000000    44:
        0 0.000000 0.000000    45:
        0 0.000000 0.000000    46:
        0 0.000000 0.000000    47:
        0 0.000000 0.000000    48:
        0 0.000000 0.000000    49:
        1 0.000000 0.000000    50:sub new {
        1 0.000007 0.000000    51:    my $proto = shift;
        1 0.000006 0.000000    52:    my $class = ref($proto) || $proto;
        0 0.000000 0.000000    53:
        1 0.000009 0.000000    54: my $self  = {};
        1 0.000018 0.000000    55: bless($self, $class);
        0 0.000000 0.000000    56:
            ================ SmallProf version 0.9 ================
                          Profile of ../Perlbug/JS.pm                  Page 174
       =================================================================
    count wall tm  cpu time line
        1 0.000012 0.000000    57: $DEBUG = $Perlbug::DEBUG || $DEBUG;
        0 0.000000 0.000000    58:
        1 0.000084 0.000000    59: return $self;
        0 0.000000 0.000000    60:}
        0 0.000000 0.000000    61:
        0 0.000000 0.000000    62:
        0 0.000000 0.000000    63:=item control
        0 0.000000 0.000000    64:
        0 0.000000 0.000000    65:
        0 0.000000 0.000000    66:
        0 0.000000 0.000000    67:
        0 0.000000 0.000000    68:
        0 0.000000 0.000000    69:
        0 0.000000 0.000000    70:
        0 0.000000 0.000000    71:sub control {
        0 0.000000 0.000000    72: my $self = shift;
        0 0.000000 0.000000    73: my $tgt  = shift;
        0 0.000000 0.000000    74:
        0 0.000000 0.000000    75: my %commands = (
        0 0.000000 0.000000    76:  'frames' => 'frames',
        0 0.000000 0.000000    77:  'parse' => 'parse',
        0 0.000000 0.000000    78:  'title' => ucfirst($tgt),
        0 0.000000 0.000000    79: );
        0 0.000000 0.000000    80:
        0 0.000000 0.000000    81: my $control = "&nbsp; ".CGI::popup_menu(
        0 0.000000 0.000000    82:  -'name'  => $tgt,
        0 0.000000 0.000000    83:  -'default' => 'title',
        0 0.000000 0.000000    84:  -'values' => [keys %commands],
        0 0.000000 0.000000    85:  -'labels' => \%commands,
        0 0.000000 0.000000    86:  -'onChange'    =>
        0 0.000000 0.000000    87:  # -'onChange'    => "show(document.$tgt)",
        0 0.000000 0.000000    88:  -'onBlur' => "top.status='$tgt'; return
        0 0.000000 0.000000    89:  -'onMouseOut'  => "window.status=''; return
        0 0.000000 0.000000    90:  # -'onChange' =>
        0 0.000000 0.000000    91:  # -'onChange' => "show(document.perlbug)",
        0 0.000000 0.000000    92: );
        0 0.000000 0.000000    93:
        0 0.000000 0.000000    94: return $control;
        0 0.000000 0.000000    95:}
        0 0.000000 0.000000    96:
        0 0.000000 0.000000    97:
        0 0.000000 0.000000    98:=item menu
        0 0.000000 0.000000    99:
        0 0.000000 0.000000   100:
        0 0.000000 0.000000   101:
        0 0.000000 0.000000   102:
        0 0.000000 0.000000   103:
        0 0.000000 0.000000   104:sub menu {
        0 0.000000 0.000000   105: my $self = shift;
        0 0.000000 0.000000   106:
        0 0.000000 0.000000   107: my $func = q|// menu functions|
        0 0.000000 0.000000   108:  . $self->go()
        0 0.000000 0.000000   109: ;
        0 0.000000 0.000000   110:
        0 0.000000 0.000000   111: return $func;
        0 0.000000 0.000000   112:}
            ================ SmallProf version 0.9 ================
                          Profile of ../Perlbug/JS.pm                  Page 175
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   113:
        0 0.000000 0.000000   114:
        0 0.000000 0.000000   115:=item perlbug
        0 0.000000 0.000000   116:
        0 0.000000 0.000000   117:
        0 0.000000 0.000000   118:
        0 0.000000 0.000000   119:
        0 0.000000 0.000000   120:
        1 0.000000 0.000000   121:sub perlbug {
        1 0.000004 0.000000   122: my $self = shift;
        1 0.000007 0.000000   123: my $func = q|
        0 0.000000 0.000000   124:  function pick (item) {
        0 0.000000 0.000000   125:   var nam = item.name;
        0 0.000000 0.000000   126:   var pre = nam.substring(0,
        0 0.000000 0.000000   127:   elems = document.forms[0].elements;
        0 0.000000 0.000000   128:   for (var i = 0; i < elems.length; i++) {
        0 0.000000 0.000000   129:    e = elems[i];
        0 0.000000 0.000000   130:    if (e.name == "bugids" && e.value == pre)
        0 0.000000 0.000000   131:     /* if (confirm(
        0 0.000000 0.000000   132:      "SELECT ? e(" + e + ")\n" +
        0 0.000000 0.000000   133:      "\tname(" + e.name + ")\n" +
        0 0.000000 0.000000   134:      "\tval(" + e.value + ")\n" +
        0 0.000000 0.000000   135:      "\tpre(" + pre + ")\n" +
        0 0.000000 0.000000   136:      "\tchecked(" + e.checked + ")?\n"
        0 0.000000 0.000000   137:     )) {
        0 0.000000 0.000000   138:     */
        0 0.000000 0.000000   139:      e.checked = true;
        0 0.000000 0.000000   140:     // confirm("SELECTED(" + e.checked +
        0 0.000000 0.000000   141:    }
        0 0.000000 0.000000   142:   }
        0 0.000000 0.000000   143:  }
        0 0.000000 0.000000   144: |;
        1 0.000047 0.000000   145: return $func;
        0 0.000000 0.000000   146:}
        0 0.000000 0.000000   147:
        0 0.000000 0.000000   148:
        0 0.000000 0.000000   149:=item back
        0 0.000000 0.000000   150:
        0 0.000000 0.000000   151:
        0 0.000000 0.000000   152:
        0 0.000000 0.000000   153:
        0 0.000000 0.000000   154:
        0 0.000000 0.000000   155:sub back {
        0 0.000000 0.000000   156: my $self = shift;
        0 0.000000 0.000000   157: my $func = q|
        0 0.000000 0.000000   158:  function back (n) {
        0 0.000000 0.000000   159:   if (n == 0) { n = 1; };
        0 0.000000 0.000000   160:   //parent.perlbug.history.go(-1);
        0 0.000000 0.000000   161:   parent.perlbug.history.back();
        0 0.000000 0.000000   162:   return false;
        0 0.000000 0.000000   163:  }
        0 0.000000 0.000000   164: |;
        0 0.000000 0.000000   165: return $func;
        0 0.000000 0.000000   166:}
        0 0.000000 0.000000   167:
        0 0.000000 0.000000   168:
            ================ SmallProf version 0.9 ================
                          Profile of ../Perlbug/JS.pm                  Page 176
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   169:=item sel
        0 0.000000 0.000000   170:
        0 0.000000 0.000000   171:
        0 0.000000 0.000000   172:
        0 0.000000 0.000000   173:
        0 0.000000 0.000000   174:
        0 0.000000 0.000000   175:sub sel {
        0 0.000000 0.000000   176: my $self = shift;
        0 0.000000 0.000000   177: my $func = q|
        0 0.000000 0.000000   178:  function sel (tf) {
        0 0.000000 0.000000   179:   elems =
        0 0.000000 0.000000   180:   for (var i = 0; i < elems.length; i++) {
        0 0.000000 0.000000   181:    e = elems[i];
        0 0.000000 0.000000   182:    if (e.name == "bugids") {
        0 0.000000 0.000000   183:     e.checked = tf;
        0 0.000000 0.000000   184:     // if (tf == "0") {
        0 0.000000 0.000000   185:     //   p.items.value = 0;
        0 0.000000 0.000000   186:     // } else {
        0 0.000000 0.000000   187:     //   p.items.value++;
        0 0.000000 0.000000   188:     // }
        0 0.000000 0.000000   189:    }
        0 0.000000 0.000000   190:   }
        0 0.000000 0.000000   191:   return false;
        0 0.000000 0.000000   192:  }
        0 0.000000 0.000000   193: |;
        0 0.000000 0.000000   194: return $func;
        0 0.000000 0.000000   195:}
        0 0.000000 0.000000   196:
        0 0.000000 0.000000   197:
        0 0.000000 0.000000   198:=item commands
        0 0.000000 0.000000   199:
        0 0.000000 0.000000   200:
        0 0.000000 0.000000   201:
        0 0.000000 0.000000   202:
        0 0.000000 0.000000   203:
        0 0.000000 0.000000   204:sub commands {
        0 0.000000 0.000000   205: my $self = shift;
        0 0.000000 0.000000   206: my $func .= q|// commands functions|
        0 0.000000 0.000000   207:  . $self->back()
        0 0.000000 0.000000   208:  . $self->newcoms()
        0 0.000000 0.000000   209:  . $self->request()
        0 0.000000 0.000000   210:  . $self->sel()
        0 0.000000 0.000000   211:  . $self->show()
        0 0.000000 0.000000   212:  # . $self->parse()
        0 0.000000 0.000000   213:  # . $self->frames()
        0 0.000000 0.000000   214: ;
        0 0.000000 0.000000   215: return $func;
        0 0.000000 0.000000   216:}
        0 0.000000 0.000000   217:
        0 0.000000 0.000000   218:sub request {
        0 0.000000 0.000000   219: my $self = shift;
        0 0.000000 0.000000   220: my $func = q|
        0 0.000000 0.000000   221:  function request (item) {
        0 0.000000 0.000000   222:
        0 0.000000 0.000000   223:   //var rem =
        0 0.000000 0.000000   224:   //var val = item.value;
            ================ SmallProf version 0.9 ================
                          Profile of ../Perlbug/JS.pm                  Page 177
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   225:
        0 0.000000 0.000000   226:   //if (val == "update" or val == "nocc" or
        0 0.000000 0.000000   227:   //if (!(p.items.value >= 1)) {
        0 0.000000 0.000000   228:   // alert("Please select something for the
        0 0.000000 0.000000   229:   //}
        0 0.000000 0.000000   230:
        0 0.000000 0.000000   231:   //if (confirm(
        0 0.000000 0.000000   232:   //  "Are you sure: " + item.name + "(" +
        0 0.000000 0.000000   233:   //)) {
        0 0.000000 0.000000   234:    //r = parent.ranges.location.search;
        0 0.000000 0.000000   235:    //r = "?req=ranges&commands=go";
        0 0.000000 0.000000   236:
        0 0.000000 0.000000   237:   //}
        0 0.000000 0.000000   238:   return false;
        0 0.000000 0.000000   239:  }
        0 0.000000 0.000000   240: |;
        0 0.000000 0.000000   241: return $func;
        0 0.000000 0.000000   242:}
        0 0.000000 0.000000   243:
        0 0.000000 0.000000   244:sub go {
        0 0.000000 0.000000   245: my $self = shift;
        0 0.000000 0.000000   246: my $func = q#
        0 0.000000 0.000000   247:  function go (target) {
        0 0.000000 0.000000   248:   p = top.perlbug.location;
        0 0.000000 0.000000   249:   p.search = "?req=" + target;
        0 0.000000 0.000000   250:   c = top.commands.location;
        0 0.000000 0.000000   251:   if (target == "group" || target ==
        0 0.000000 0.000000   252:    c.search =
        0 0.000000 0.000000   253:   } else {
        0 0.000000 0.000000   254:    c.search = "?req=commands&commands=read";
        0 0.000000 0.000000   255:   }
        0 0.000000 0.000000   256:   return false;
        0 0.000000 0.000000   257:  }
        0 0.000000 0.000000   258: #;
        0 0.000000 0.000000   259: return $func;
        0 0.000000 0.000000   260:}
        0 0.000000 0.000000   261:
        0 0.000000 0.000000   262:sub newcoms {
        0 0.000000 0.000000   263: my $self = shift;
        0 0.000000 0.000000   264: my $func = q#
        0 0.000000 0.000000   265:  function newcoms (target) {
        0 0.000000 0.000000   266:   c = top.commands.location.search;
        0 0.000000 0.000000   267:   //r = top.ranges.location.search;
        0 0.000000 0.000000   268:   if (target == "write" || target ==
        0 0.000000 0.000000   269:    if (target == "write") {
        0 0.000000 0.000000   270:     //r = "?req=ranges&commands=newcom";
        0 0.000000 0.000000   271:     c = "?req=commands&commands=write";
        0 0.000000 0.000000   272:    } else {
        0 0.000000 0.000000   273:     //r = "?req=ranges&commands=NEWcom";
        0 0.000000 0.000000   274:     c = "?req=commands&commands=query";
        0 0.000000 0.000000   275:    }
        0 0.000000 0.000000   276:   } else {
        0 0.000000 0.000000   277:    //r = "?req=ranges&commands=newCOM";
        0 0.000000 0.000000   278:    c = "?req=commands&commands=read";
        0 0.000000 0.000000   279:   }
        0 0.000000 0.000000   280:   return false;
            ================ SmallProf version 0.9 ================
                          Profile of ../Perlbug/JS.pm                  Page 178
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   281:  }
        0 0.000000 0.000000   282: #;
        0 0.000000 0.000000   283: return $func;
        0 0.000000 0.000000   284:}
        0 0.000000 0.000000   285:
        0 0.000000 0.000000   286:sub show {
        0 0.000000 0.000000   287: my $self = shift;
        0 0.000000 0.000000   288: my $func = q|
        0 0.000000 0.000000   289:  function show (pane, call) { /* form, call
        0 0.000000 0.000000   290:   if (confirm(
        0 0.000000 0.000000   291:    " pane(" + pane.name + ") call(" + call +
        0 0.000000 0.000000   292:   )) {
        0 0.000000 0.000000   293:    var data = "";
        0 0.000000 0.000000   294:    if (call == "parse") {
        0 0.000000 0.000000   295:     data = parse(pane);
        0 0.000000 0.000000   296:    }
        0 0.000000 0.000000   297:    if (call == "frames") {
        0 0.000000 0.000000   298:     data = frames(pane);
        0 0.000000 0.000000   299:    }
        0 0.000000 0.000000   300:    if (call == "title") {
        0 0.000000 0.000000   301:     data = pane.name;
        0 0.000000 0.000000   302:    }
        0 0.000000 0.000000   303:    w = window.open("", "show",
        0 0.000000 0.000000   304:    w.document.write("<pre>" + data +
        0 0.000000 0.000000   305:    //w.close();
        0 0.000000 0.000000   306:   }
        0 0.000000 0.000000   307:   return 1;
        0 0.000000 0.000000   308:  }
        0 0.000000 0.000000   309: |;
        0 0.000000 0.000000   310: return $func;
        0 0.000000 0.000000   311:}
        0 0.000000 0.000000   312:
        0 0.000000 0.000000   313:sub frames {
        0 0.000000 0.000000   314: my $self = shift;
        0 0.000000 0.000000   315: my $func = q|
        0 0.000000 0.000000   316:  function frames () {
        0 0.000000 0.000000   317:   var out = "Frames: \n";
        0 0.000000 0.000000   318:   var a   = 0;
        0 0.000000 0.000000   319:   while (a < top.frames.length) {
        0 0.000000 0.000000   320:    elem = top.frames[a];
        0 0.000000 0.000000   321:    out += " name(" + elem.name + "), \t";
        0 0.000000 0.000000   322:    out += " value(" + elem.document + ")\n";
        0 0.000000 0.000000   323:    a++;
        0 0.000000 0.000000   324:   }
        0 0.000000 0.000000   325:   return(out);
        0 0.000000 0.000000   326:  }
        0 0.000000 0.000000   327: |;
        0 0.000000 0.000000   328: return $func;
        0 0.000000 0.000000   329:}
        0 0.000000 0.000000   330:
        0 0.000000 0.000000   331:
        0 0.000000 0.000000   332:sub parse {
        0 0.000000 0.000000   333: my $self = shift;
        0 0.000000 0.000000   334: my $func = q|
        0 0.000000 0.000000   335:  function parse (pane) {
        0 0.000000 0.000000   336:   //alert("args: (" + arguments.length + "):
            ================ SmallProf version 0.9 ================
                          Profile of ../Perlbug/JS.pm                  Page 179
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   337:   var out = "Parse: \n";
        0 0.000000 0.000000   338:   var a   = 0;
        0 0.000000 0.000000   339:   while (a < arguments.length) {
        0 0.000000 0.000000   340:    if (a >= 5) {
        0 0.000000 0.000000   341:     alert("Breaking debug loop at " + a);
        0 0.000000 0.000000   342:     break;
        0 0.000000 0.000000   343:    }
        0 0.000000 0.000000   344:    var arg = arguments[a];
        0 0.000000 0.000000   345:    out += arg + "\n";
        0 0.000000 0.000000   346:    for (var i in arg) {
        0 0.000000 0.000000   347:     out += "\t" + i + "=" + arg[i] + "\n";
        0 0.000000 0.000000   348:    }
        0 0.000000 0.000000   349:    a++;
        0 0.000000 0.000000   350:   }
        0 0.000000 0.000000   351:   return(out);
        0 0.000000 0.000000   352:  }
        0 0.000000 0.000000   353: |;
        0 0.000000 0.000000   354: return $func;
        0 0.000000 0.000000   355:}
        0 0.000000 0.000000   356:
        0 0.000000 0.000000   357:1;
        0 0.000000 0.000000   358:
        0 0.000000 0.000000   359:__END__
            ================ SmallProf version 0.9 ================
                    Profile of ../Perlbug/Object/Address.pm            Page 180
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000     1:# Perlbug bug record handler
        0 0.000000 0.000000     2:# (C) 1999 Richard Foley RFI perlbug@rfi.net
        0 0.000000 0.000000     3:# $Id: Address.pm,v 1.11 2001/04/21 20:48:48
        0 0.000000 0.000000     4:#
        0 0.000000 0.000000     5:
        0 0.000000 0.000000     6:=head1 NAME
        0 0.000000 0.000000     7:
        0 0.000000 0.000000     8:
        0 0.000000 0.000000     9:
        0 0.000000 0.000000    10:
        0 0.000000 0.000000    11:
        0 0.000000 0.000000    12:package Perlbug::Object::Address;
        0 0.000000 0.000000    13:
        3 0.000109 0.000000    14:use strict;
        3 0.000114 0.000000    15:use vars qw($VERSION @ISA);
        3 0.000080 0.000000    16:$VERSION = do { my @r = (q$Revision: 1.11 $
        1 0.000010 0.000000    17:my $DEBUG =
        0 0.000000 0.000000    18:
        0 0.000000 0.000000    19:
        0 0.000000 0.000000    20:=head1 DESCRIPTION
        0 0.000000 0.000000    21:
        0 0.000000 0.000000    22:
        0 0.000000 0.000000    23:
        0 0.000000 0.000000    24:
        0 0.000000 0.000000    25:
        0 0.000000 0.000000    26:
        0 0.000000 0.000000    27:
        3 0.000119 0.000000    28:use Data::Dumper;
        3 0.000165 0.000000    29:use Perlbug::Base;
        3 0.002191 0.000000    30:use Perlbug::Object;
        1 0.000012 0.000000    31:@ISA = qw(Perlbug::Object);
        0 0.000000 0.000000    32:
        0 0.000000 0.000000    33:
        0 0.000000 0.000000    34:=head1 SYNOPSIS
        0 0.000000 0.000000    35:
        0 0.000000 0.000000    36:
        0 0.000000 0.000000    37:
        0 0.000000 0.000000    38:
        0 0.000000 0.000000    39:
        0 0.000000 0.000000    40:
        0 0.000000 0.000000    41:
        0 0.000000 0.000000    42:
        0 0.000000 0.000000    43:
        0 0.000000 0.000000    44:
        0 0.000000 0.000000    45:
        0 0.000000 0.000000    46:
        0 0.000000 0.000000    47:
        0 0.000000 0.000000    48:
        0 0.000000 0.000000    49:
        0 0.000000 0.000000    50:
        0 0.000000 0.000000    51:
        0 0.000000 0.000000    52:
        1 0.000000 0.000000    53:sub new {
        1 0.000008 0.000000    54:    my $proto = shift;
        1 0.000005 0.000000    55:    my $class = ref($proto) || $proto;
        1 0.000007 0.000000    56: my $o_base = (ref($_[0])) ? shift :
            ================ SmallProf version 0.9 ================
                    Profile of ../Perlbug/Object/Address.pm            Page 181
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000    57:
        1 0.000094 0.000000    58: my $self = Perlbug::Object->new( $o_base,
        0 0.000000 0.000000    59:  'name'  => 'Address',
        0 0.000000 0.000000    60:  'from'  => [qw(bug group)],
        0 0.000000 0.000000    61:  'to'  => [],
        0 0.000000 0.000000    62: );
        0 0.000000 0.000000    63:
        1 0.000009 0.000000    64: $DEBUG = $Perlbug::DEBUG || $DEBUG;
        0 0.000000 0.000000    65:
        1 0.000048 0.000000    66: bless($self, $class);
        0 0.000000 0.000000    67:}
        0 0.000000 0.000000    68:
        0 0.000000 0.000000    69:
        0 0.000000 0.000000    70:=item FORMAT_a
        0 0.000000 0.000000    71:
        0 0.000000 0.000000    72:
        0 0.000000 0.000000    73:
        0 0.000000 0.000000    74:
        0 0.000000 0.000000    75:
        0 0.000000 0.000000    76:
        0 0.000000 0.000000    77:
        0 0.000000 0.000000    78:sub FORMAT_a { # default where format or
        0 0.000000 0.000000    79: my $self = shift;
        0 0.000000 0.000000    80: my $x    = shift; #
        0 0.000000 0.000000    81: my $obj_key_oid = ucfirst($self-
        0 0.000000 0.000000    82: $obj_key_oid .= (' ' x (12 -
        0 0.000000 0.000000    83: my $pri  = $self->attr('primary_key');
        0 0.000000 0.000000    84: my @args = (
        0 0.000000 0.000000    85:  $$x{$pri}, $$x{'bug_count'},
        0 0.000000 0.000000    86: );
        0 0.000000 0.000000    87: my $top = qq|
        0 0.000000 0.000000    88:$obj_key_oid  Bugids  Created            |;
        0 0.000000 0.000000    89: my $format = qq|
        0 0.000000 0.000000    90:@<<<<<<<<<<<  @<<<<<  @<<<<<<<<<<<<<<<<
        0 0.000000 0.000000    91:@*
        0 0.000000 0.000000    92:|;
        0 0.000000 0.000000    93: return ($top, $format, @args);
        0 0.000000 0.000000    94:}
        0 0.000000 0.000000    95:
        0 0.000000 0.000000    96:
        0 0.000000 0.000000    97:=item FORMAT_A
        0 0.000000 0.000000    98:
        0 0.000000 0.000000    99:
        0 0.000000 0.000000   100:
        0 0.000000 0.000000   101:
        0 0.000000 0.000000   102:
        0 0.000000 0.000000   103:
        0 0.000000 0.000000   104:
        0 0.000000 0.000000   105:sub FORMAT_A { # default where format or
        0 0.000000 0.000000   106: my $self = shift;
        0 0.000000 0.000000   107: my $x    = shift; #
        0 0.000000 0.000000   108: my $obj_key_oid = ucfirst($self-
        0 0.000000 0.000000   109: $obj_key_oid .= (' ' x (12 -
        0 0.000000 0.000000   110: my $pri  = $self->attr('primary_key');
        0 0.000000 0.000000   111: my @args = (
        0 0.000000 0.000000   112:  $$x{$pri}, $$x{'bug_count'},
            ================ SmallProf version 0.9 ================
                    Profile of ../Perlbug/Object/Address.pm            Page 182
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   113:  $$x{'bug_ids'},
        0 0.000000 0.000000   114: );
        0 0.000000 0.000000   115: my $top = qq|
        0 0.000000 0.000000   116:$obj_key_oid  Bugids  Created            |;
        0 0.000000 0.000000   117: my $format = qq|
        0 0.000000 0.000000   118:@<<<<<<<<<<<  @<<<<<  @<<<<<<<<<<<<<<<<
        0 0.000000 0.000000   119:@*
        0 0.000000 0.000000   120:@*
        0 0.000000 0.000000   121:|;
        0 0.000000 0.000000   122: return ($top, $format, @args);
        0 0.000000 0.000000   123:}
        0 0.000000 0.000000   124:
        0 0.000000 0.000000   125:
        0 0.000000 0.000000   126:=head1 AUTHOR
        0 0.000000 0.000000   127:
        0 0.000000 0.000000   128:
        0 0.000000 0.000000   129:
        0 0.000000 0.000000   130:
        0 0.000000 0.000000   131:
        0 0.000000 0.000000   132:
        0 0.000000 0.000000   133:#
        1 0.000070 0.000000   134:1;
        0 0.000000 0.000000   135:
            ================ SmallProf version 0.9 ================
                      Profile of ../Perlbug/Object/Bug.pm              Page 183
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000     1:# $Id: Bug.pm,v 1.34 2001/07/04 15:27:37
        0 0.000000 0.000000     2:#
        0 0.000000 0.000000     3:
        0 0.000000 0.000000     4:=head1 NAME
        0 0.000000 0.000000     5:
        0 0.000000 0.000000     6:
        0 0.000000 0.000000     7:
        0 0.000000 0.000000     8:
        0 0.000000 0.000000     9:
        0 0.000000 0.000000    10:package Perlbug::Object::Bug;
        3 0.000098 0.000000    11:use strict;
        3 0.000108 0.000000    12:use vars qw($VERSION @ISA);
        3 0.000077 0.000000    13:$VERSION = do { my @r = (q$Revision: 1.34 $
        1 0.000009 0.000000    14:my $DEBUG = $ENV{'Perlbug_Object_Bug_DEBUG'}
        1 0.000008 0.000000    15:$|=1;
        0 0.000000 0.000000    16:
        1 0.000006 0.000000    17:my %fmt = ();
        0 0.000000 0.000000    18:
        0 0.000000 0.000000    19:
        0 0.000000 0.000000    20:=head1 DESCRIPTION
        0 0.000000 0.000000    21:
        0 0.000000 0.000000    22:
        0 0.000000 0.000000    23:
        0 0.000000 0.000000    24:
        0 0.000000 0.000000    25:
        0 0.000000 0.000000    26:
        0 0.000000 0.000000    27:
        3 0.000120 0.000000    28:use Data::Dumper;
        3 0.000122 0.000000    29:use HTML::Entities;
        3 0.000155 0.000000    30:use Perlbug::Base;
        3 0.017010 0.020000    31:use Perlbug::Object;
        1 0.000013 0.000000    32:@ISA = qw(Perlbug::Object);
        0 0.000000 0.000000    33:
        0 0.000000 0.000000    34:
        0 0.000000 0.000000    35:=head1 SYNOPSIS
        0 0.000000 0.000000    36:
        0 0.000000 0.000000    37:
        0 0.000000 0.000000    38:
        0 0.000000 0.000000    39:
        0 0.000000 0.000000    40:
        0 0.000000 0.000000    41:
        0 0.000000 0.000000    42:
        0 0.000000 0.000000    43:
        0 0.000000 0.000000    44:
        0 0.000000 0.000000    45:
        0 0.000000 0.000000    46:
        0 0.000000 0.000000    47:
        0 0.000000 0.000000    48:
        0 0.000000 0.000000    49:
        0 0.000000 0.000000    50:
        0 0.000000 0.000000    51:
        0 0.000000 0.000000    52:
        0 0.000000 0.000000    53:
        0 0.000000 0.000000    54:
        0 0.000000 0.000000    55:
        3 0.000000 0.000000    56:sub new {
            ================ SmallProf version 0.9 ================
                      Profile of ../Perlbug/Object/Bug.pm              Page 184
       =================================================================
    count wall tm  cpu time line
        3 0.000016 0.000000    57:    my $proto = shift;
        3 0.000014 0.000000    58:    my $class = ref($proto) || $proto;
        3 0.000017 0.000000    59: my $o_base = (ref($_[0])) ? shift :
        0 0.000000 0.000000    60:
        3 0.000566 0.010000    61: my $self = Perlbug::Object->new( $o_base,
        0 0.000000 0.000000    62:  'name'  => 'Bug',
        0 0.000000 0.000000    63:  'match_oid' => '(\d{8}\.\d{3})',
        0 0.000000 0.000000    64:  'from'  => [qw(group project range user)],
        0 0.000000 0.000000    65:  'to'  => [qw(
        0 0.000000 0.000000    66:   address change child fixed message note
        0 0.000000 0.000000    67:  )],
        0 0.000000 0.000000    68: );
        0 0.000000 0.000000    69:
        3 0.000017 0.000000    70: $DEBUG = $Perlbug::DEBUG || $DEBUG;
        0 0.000000 0.000000    71:
        3 0.000132 0.000000    72: bless($self, $class);
        0 0.000000 0.000000    73:}
        0 0.000000 0.000000    74:
        0 0.000000 0.000000    75:
        5 0.000000 0.000000    76:sub read {
        5 0.000022 0.000000    77: my $self = shift;
        5 0.000497 0.000000    78: $self->SUPER::read(@_);
        5 0.000499 0.000000    79: return $self;
        0 0.000000 0.000000    80:}
        0 0.000000 0.000000    81:
        0 0.000000 0.000000    82:
        0 0.000000 0.000000    83:=item update
        0 0.000000 0.000000    84:
        0 0.000000 0.000000    85:
        0 0.000000 0.000000    86:
        0 0.000000 0.000000    87:
        0 0.000000 0.000000    88:
        0 0.000000 0.000000    89:sub update {
        0 0.000000 0.000000    90: my $self = shift;
        0 0.000000 0.000000    91:
        0 0.000000 0.000000    92: # my $ix = $self->notify_cc($bid, '', $orig)
        0 0.000000 0.000000    93:
        0 0.000000 0.000000    94: return $self->SUPER::update(@_);
        0 0.000000 0.000000    95:}
        0 0.000000 0.000000    96:
        0 0.000000 0.000000    97:
        0 0.000000 0.000000    98:=item new_id
        0 0.000000 0.000000    99:
        0 0.000000 0.000000   100:
        0 0.000000 0.000000   101:
        0 0.000000 0.000000   102:
        0 0.000000 0.000000   103:
        0 0.000000 0.000000   104:
        0 0.000000 0.000000   105:
        0 0.000000 0.000000   106:
        0 0.000000 0.000000   107:
        0 0.000000 0.000000   108:
        0 0.000000 0.000000   109:
        0 0.000000 0.000000   110:
        0 0.000000 0.000000   111:
        0 0.000000 0.000000   112:
            ================ SmallProf version 0.9 ================
                      Profile of ../Perlbug/Object/Bug.pm              Page 185
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   113:
        0 0.000000 0.000000   114:
        0 0.000000 0.000000   115:
        0 0.000000 0.000000   116:
        0 0.000000 0.000000   117:
        0 0.000000 0.000000   118:
        0 0.000000 0.000000   119:
        0 0.000000 0.000000   120:
        0 0.000000 0.000000   121:
        0 0.000000 0.000000   122:
        0 0.000000 0.000000   123:sub insertid {
        0 0.000000 0.000000   124: my $self = shift;
        0 0.000000 0.000000   125:
        0 0.000000 0.000000   126: my $oid = $self->data($self-
        0 0.000000 0.000000   127: $self->debug(0, "newly inserted
        0 0.000000 0.000000   128:
        0 0.000000 0.000000   129: return $oid;
        0 0.000000 0.000000   130:}
        0 0.000000 0.000000   131:
        0 0.000000 0.000000   132:
        0 0.000000 0.000000   133:=item htmlify
        0 0.000000 0.000000   134:
        0 0.000000 0.000000   135:
        0 0.000000 0.000000   136:
        0 0.000000 0.000000   137:
        0 0.000000 0.000000   138:
        0 0.000000 0.000000   139:
        0 0.000000 0.000000   140:
        0 0.000000 0.000000   141:
        0 0.000000 0.000000   142:
        5 0.000000 0.000000   143:sub htmlify {
        5 0.000030 0.000000   144:    my $self = shift;
        5 0.000019 0.000000   145:    my $h_bug= shift;
        5 0.000027 0.000000   146: my $req  = shift || 'admin';
        5 0.000026 0.000000   147: return undef unless ref($h_bug) eq 'HASH';
        0 0.000000 0.000000   148:    # $self->debug(3, $self->base-
        5 0.000400 0.000000   149:    my $cgi = $self->base->cgi();
        5 0.000339 0.000000   150:    my $url = $self->base->url;
       10 0.001957 0.000000   151:    my %bug = %{$h_bug};
        5 0.000035 0.000000   152:    my $bid = $bug{'bugid'}; # save for bid
        0 0.000000 0.000000   153: # print $self->base->html_dump($h_bug);
        0 0.000000 0.000000   154:
        0 0.000000 0.000000   155: # messages
       10 0.000089 0.000000   156:    my @mids = (ref($bug{'message_ids'}) eq
        5 0.000025 0.000000   157: $bug{'message_ids'} = \@mids;
        5 0.000019 0.000000   158:    my $cnt = @mids;
        5 0.000079 0.000000   159:    my $msgs = (@mids == 1) ? "($cnt msg)" :
        5 0.000043 0.000000   160: my $stat_msgs = "$cnt messages for
        5 0.000555 0.010000   161:    my ($allmsgs) = $self->href('bidmids',
        0 0.000000 0.000000   162:
       10 0.000565 0.000000   163: %bug = %{$self->SUPER::htmlify($h_bug)};
        5 0.000114 0.000000   164: $bug{'bugid'}     =~ s/format=h/format=H/;
        5 0.000084 0.000000   165:    $bug{'bugid'}    .= " &nbsp; $allmsgs";
        5 0.000037 0.000000   166: my $stat_hist = "History for bug($bid)";
        5 0.000554 0.000000   167:    ($bug{'history'}) = $self->href('hist',
        5 0.000045 0.000000   168: $bug{'newstuff'}  = '';
            ================ SmallProf version 0.9 ================
                      Profile of ../Perlbug/Object/Bug.pm              Page 186
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   169:
       15 0.000110 0.000000   170: foreach my $item (qw(children parent)) {
       10 0.000082 0.000000   171:  $item = $item.'_ids';
       15 0.000141 0.000000   172:  my @items = (ref($$h_bug{$item}) eq
       10 0.000073 0.000000   173:  if (scalar @items>= 1) {
        5 0.000084 0.000000   174:   my $stat_item = $item."(".@items.") for
        5 0.000416 0.000000   175:   ($bug{$item}) = join(', ', $self-
        0 0.000000 0.000000   176:  } else {
        5 0.000035 0.000000   177:   $bug{$item} = '';
        0 0.000000 0.000000   178:  }
        0 0.000000 0.000000   179: }
        0 0.000000 0.000000   180:
        0 0.000000 0.000000   181: # admin?
        5 0.000375 0.000000   182:    if ($self->base->isadmin && $self->base-
        0 0.000000 0.000000   183:     $self->debug(3, "Admin of bug($bid)
        0 0.000000 0.000000   184:  my ($group)    = @{$$h_bug{'group_ids'}}
        0 0.000000 0.000000   185:  my ($osname)   = @{$$h_bug{'osname_ids'}}
        0 0.000000 0.000000   186:  my ($severity) = @{$$h_bug{'severity_ids'}}
        0 0.000000 0.000000   187:  my ($status)   = @{$$h_bug{'status_ids'}}
        0 0.000000 0.000000   188:  my ($user)     = @{$$h_bug{'user_ids'}}
        0 0.000000 0.000000   189:  my ($fixed)    = $self->object('fixed')-
        0 0.000000 0.000000   190:  my ($version)  = $self->object('version')-
        0 0.000000 0.000000   191:  # print "<hr>c($group) o($osname)
        0 0.000000 0.000000   192:  $bug{'help'} = q|Enter an <b>existing</b>
        0 0.000000 0.000000   193:  $bug{'help'}.= q|Enter new <b>data</b> in
        0 0.000000 0.000000   194:  $bug{'address_names'} = $self-
        0 0.000000 0.000000   195:  $bug{'note_names'}    = $self-
        0 0.000000 0.000000   196:  $bug{'group_names'}   = $self-
        0 0.000000 0.000000   197:  $bug{'change_names'}  = $self-
        0 0.000000 0.000000   198:  $bug{'child_ids'}   = $self-
        0 0.000000 0.000000   199:        $bug{'fixed'}       = $self-
        0 0.000000 0.000000   200:  # new stuff is only for format::H
        0 0.000000 0.000000   201:  $bug{'newnote'}     = $cgi->textarea(-
        0 0.000000 0.000000   202:  $bug{'newpatch'}    = $cgi->textarea(-
        0 0.000000 0.000000   203:  $bug{'newtest'}     = $cgi->textarea(-
        0 0.000000 0.000000   204:  # end newstuff
        0 0.000000 0.000000   205:  $bug{'note_ids'}  = $self->object('note')-
        0 0.000000 0.000000   206:  $bug{'osname_names'}  = $self-
        0 0.000000 0.000000   207:  $bug{'parent_ids'}  = $self-
        0 0.000000 0.000000   208:  $bug{'patch_ids'}   = $self-
        0 0.000000 0.000000   209:  $bug{'test_ids'}    = $self-
        0 0.000000 0.000000   210:  $bug{'severity_names'}= $self-
        0 0.000000 0.000000   211:        $bug{'status_names'}  = $self-
        0 0.000000 0.000000   212:     $bug{'select'}      = $cgi->checkbox(-
        0 0.000000 0.000000   213:        # $bug{'user_ids'}  = $self-
        0 0.000000 0.000000   214:        $bug{'version_names'} = $self-
        0 0.000000 0.000000   215: }
        0 0.000000 0.000000   216: # print
        0 0.000000 0.000000   217: # print
        5 0.000125 0.000000   218: return \%bug;
        0 0.000000 0.000000   219:}
        0 0.000000 0.000000   220:
        0 0.000000 0.000000   221:
        0 0.000000 0.000000   222:=head1 FORMATS
        0 0.000000 0.000000   223:
        0 0.000000 0.000000   224:
            ================ SmallProf version 0.9 ================
                      Profile of ../Perlbug/Object/Bug.pm              Page 187
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   225:
        0 0.000000 0.000000   226:
        0 0.000000 0.000000   227:
        0 0.000000 0.000000   228:
        0 0.000000 0.000000   229:
        0 0.000000 0.000000   230:
        0 0.000000 0.000000   231:
        0 0.000000 0.000000   232:
        0 0.000000 0.000000   233:
        0 0.000000 0.000000   234:
        0 0.000000 0.000000   235:
        0 0.000000 0.000000   236:sub FORMAT_l { #
        0 0.000000 0.000000   237: my $self = shift;
        0 0.000000 0.000000   238: my $d    = shift; #
        0 0.000000 0.000000   239: my @args = (
        0 0.000000 0.000000   240:  $$d{'bugid'},
        0 0.000000 0.000000   241:  $$d{'status_names'}, $$d{'severity_names'},
        0 0.000000 0.000000   242:  $$d{'fixed'}, $$d{'user_count'},
        0 0.000000 0.000000   243:  $$d{'note_count'}, $$d{'patch_count'},
        0 0.000000 0.000000   244: );
        0 0.000000 0.000000   245: my $top = qq|
        0 0.000000 0.000000   246:Bug id         Status   Severity Group     Os
        0 0.000000 0.000000   247:---------------------------------------------
        0 0.000000 0.000000   248:|;
        0 0.000000 0.000000   249: my $format = qq|
        0 0.000000 0.000000   250:@<<<<<<<<<<<<  @<<<<<<< @<<<<<<  @<<<<<<<<
        0 0.000000 0.000000   251:|;
        0 0.000000 0.000000   252: return ($top, $format, @args);
        0 0.000000 0.000000   253:}
        0 0.000000 0.000000   254:
        0 0.000000 0.000000   255:
        0 0.000000 0.000000   256:=item FORMAT_a
        0 0.000000 0.000000   257:
        0 0.000000 0.000000   258:
        0 0.000000 0.000000   259:
        0 0.000000 0.000000   260:
        0 0.000000 0.000000   261:
        0 0.000000 0.000000   262:
        0 0.000000 0.000000   263:
        0 0.000000 0.000000   264:sub FORMAT_a { # default where format or
        0 0.000000 0.000000   265: my $self = shift;
        0 0.000000 0.000000   266: my $x = shift; #
        0 0.000000 0.000000   267: my @args = (
        0 0.000000 0.000000   268:  $$x{'subject'},
        0 0.000000 0.000000   269:  $$x{'bugid'},       $$x{'status_names'},
        0 0.000000 0.000000   270:  $$x{'created'},   $$x{'group_names'},
        0 0.000000 0.000000   271:  $$x{'version_names'},
        0 0.000000 0.000000   272:  $$x{'fixed'},    $$x{'osname_names'},
        0 0.000000 0.000000   273:  $$x{'user_count'},   $$x{'user_names'},
        0 0.000000 0.000000   274:  $$x{'sourceaddr'},
        0 0.000000 0.000000   275:  $$x{'message_count'},  $$x{'message_ids'},
        0 0.000000 0.000000   276:  $$x{'note_count'},   $$x{'note_ids'},
        0 0.000000 0.000000   277:  $$x{'patch_count'},  $$x{'patch_ids'},
        0 0.000000 0.000000   278:  $$x{'change_count'},  $$x{'change_names'},
        0 0.000000 0.000000   279:  $$x{'test_count'},   $$x{'test_ids'},
        0 0.000000 0.000000   280:  $$x{'parent_count'},  $$x{'parent_ids'},
            ================ SmallProf version 0.9 ================
                      Profile of ../Perlbug/Object/Bug.pm              Page 188
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   281:  $$x{'child_count'},  $$x{'child_ids'},
        0 0.000000 0.000000   282: );
        0 0.000000 0.000000   283: my $top = '';
        0 0.000000 0.000000   284: my $format = qq|
        0 0.000000 0.000000   285:---------------------------------------------
        0 0.000000 0.000000   286:Subject:
        0 0.000000 0.000000   287:BugID  :    @<<<<<<<<<<<<<<<          Status:
        0 0.000000 0.000000   288:Created:    @<<<<<<<<<<<<<<<<<<<<     Group:
        0 0.000000 0.000000   289:Version:    @<<<<<<<<<<<<<<<<<<<<
        0 0.000000 0.000000   290:Fixed in:   @<<<<<<<<<<<<<<<<<<<<     Osname:
        0 0.000000 0.000000   291:Admins:     @<<
        0 0.000000 0.000000   292:Sourceaddr:
        0 0.000000 0.000000   293:MessageIDs: @<<
        0 0.000000 0.000000   294:NoteIDs:    @<<
        0 0.000000 0.000000   295:PatchIDs:   @<<
        0 0.000000 0.000000   296:ChangeIDs:  @<<
        0 0.000000 0.000000   297:TestIDs:    @<<
        0 0.000000 0.000000   298:ParentID:   @<<
        0 0.000000 0.000000   299:ChildIDs:   @<<
        0 0.000000 0.000000   300: |;
        0 0.000000 0.000000   301: return ($top, $format, @args);
        0 0.000000 0.000000   302:}
        0 0.000000 0.000000   303:
        0 0.000000 0.000000   304:
        0 0.000000 0.000000   305:=item FORMAT_B_A
        0 0.000000 0.000000   306:
        0 0.000000 0.000000   307:
        0 0.000000 0.000000   308:
        0 0.000000 0.000000   309:
        0 0.000000 0.000000   310:
        0 0.000000 0.000000   311:
        0 0.000000 0.000000   312:
        0 0.000000 0.000000   313:sub FORMAT_A { #
        0 0.000000 0.000000   314: my $self = shift;
        0 0.000000 0.000000   315: my $x    = shift; #
        0 0.000000 0.000000   316: my @args = (
        0 0.000000 0.000000   317:  $$x{'subject'},
        0 0.000000 0.000000   318:  $$x{'bugid'},    $$x{'status_names'},
        0 0.000000 0.000000   319:  $$x{'created'},   $$x{'group_names'},
        0 0.000000 0.000000   320:  $$x{'version_names'},
        0 0.000000 0.000000   321:  $$x{'fixed'},    $$x{'osname_names'},
        0 0.000000 0.000000   322:  $$x{'user_count'},   $$x{'user_names'},
        0 0.000000 0.000000   323:  $$x{'sourceaddr'},
        0 0.000000 0.000000   324:  $$x{'message_count'},  $$x{'message_ids'},
        0 0.000000 0.000000   325:  $$x{'note_count'},   $$x{'note_ids'},
        0 0.000000 0.000000   326:  $$x{'patch_count'},  $$x{'patch_ids'},
        0 0.000000 0.000000   327:  $$x{'change_count'},  $$x{'change_names'},
        0 0.000000 0.000000   328:  $$x{'test_count'},   $$x{'test_ids'},
        0 0.000000 0.000000   329:  $$x{'parent_count'},  $$x{'parent_ids'},
        0 0.000000 0.000000   330:  $$x{'children_count'},
        0 0.000000 0.000000   331:  $$x{'address_count'}, $$x{'address_names'},
        0 0.000000 0.000000   332:  $$x{'body'},
        0 0.000000 0.000000   333: );
        0 0.000000 0.000000   334: my $top    = '';
        0 0.000000 0.000000   335: my $format = qq|
        0 0.000000 0.000000   336:---------------------------------------------
            ================ SmallProf version 0.9 ================
                      Profile of ../Perlbug/Object/Bug.pm              Page 189
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   337:Subject:
        0 0.000000 0.000000   338:BugID  :    @<<<<<<<<<<<<<<<
        0 0.000000 0.000000   339:Created:    @<<<<<<<<<<<<<<<<<<<<
        0 0.000000 0.000000   340:Version:    @<<<<<<<<<<<<<<<<<<<<
        0 0.000000 0.000000   341:Fixed in:   @<<<<<<<<<<<<<<<<<<<<
        0 0.000000 0.000000   342:Admins:     @<<
        0 0.000000 0.000000   343:Sourceaddr:
        0 0.000000 0.000000   344:MessageIDs: @<<
        0 0.000000 0.000000   345:NoteIDs:    @<<
        0 0.000000 0.000000   346:PatchIDs:   @<<
        0 0.000000 0.000000   347:ChangeIDs:  @<<
        0 0.000000 0.000000   348:TestIDs:    @<<
        0 0.000000 0.000000   349:ParentIDs:  @<<
        0 0.000000 0.000000   350:ChildrenIDs:@<<
        0 0.000000 0.000000   351:Ccs:        @<<
        0 0.000000 0.000000   352:Message Header :
        0 0.000000 0.000000   353:@*
        0 0.000000 0.000000   354:Message body :
        0 0.000000 0.000000   355:@*
        0 0.000000 0.000000   356: |;
        0 0.000000 0.000000   357: return ($top, $format, @args);
        0 0.000000 0.000000   358:}
        0 0.000000 0.000000   359:
        0 0.000000 0.000000   360:
        0 0.000000 0.000000   361:=item FORMAT_L
        0 0.000000 0.000000   362:
        0 0.000000 0.000000   363:
        0 0.000000 0.000000   364:
        0 0.000000 0.000000   365:
        0 0.000000 0.000000   366:
        0 0.000000 0.000000   367:
        0 0.000000 0.000000   368:
        0 0.000000 0.000000   369:sub FORMAT_L { #
        0 0.000000 0.000000   370: my $self = shift;
        0 0.000000 0.000000   371: my $x    = shift; #
        0 0.000000 0.000000   372: my @args = (
        0 0.000000 0.000000   373:  $$x{'select'},
        0 0.000000 0.000000   374:  $$x{'bugid'},
        0 0.000000 0.000000   375:  $$x{'status_names'},
        0 0.000000 0.000000   376:  $$x{'version_names'},
        0 0.000000 0.000000   377:  $$x{'group_names'},
        0 0.000000 0.000000   378:  $$x{'severity_names'},
        0 0.000000 0.000000   379:  $$x{'osname_names'},
        0 0.000000 0.000000   380:  $$x{'fixed_names'},
        0 0.000000 0.000000   381:  $$x{'message_count'},
        0 0.000000 0.000000   382:  $$x{'patch_count'},
        0 0.000000 0.000000   383:  $$x{'change_names'},
        0 0.000000 0.000000   384:  $$x{'test_count'},
        0 0.000000 0.000000   385:  $$x{'note_count'},
        0 0.000000 0.000000   386: );
        0 0.000000 0.000000   387: my $top = q|<tr>
        0 0.000000 0.000000   388: <td>&nbsp;</td>
        0 0.000000 0.000000   389: <td>BugID</td>
        0 0.000000 0.000000   390: <td>Status</td>
        0 0.000000 0.000000   391: <td>Version</td>
        0 0.000000 0.000000   392: <td>Group</td>
            ================ SmallProf version 0.9 ================
                      Profile of ../Perlbug/Object/Bug.pm              Page 190
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   393: <td>Severity</td>
        0 0.000000 0.000000   394: <td>Osname</td>
        0 0.000000 0.000000   395: <td>Fixed</td>
        0 0.000000 0.000000   396: <td>Message IDs</td>
        0 0.000000 0.000000   397: <td>Patch IDs</td>
        0 0.000000 0.000000   398: <td>Change IDs</td>
        0 0.000000 0.000000   399: <td>Test IDs</td>
        0 0.000000 0.000000   400: <td>Note IDs</td>
        0 0.000000 0.000000   401:</tr>|;
        0 0.000000 0.000000   402: my $format =
        0 0.000000 0.000000   403: return ($top, $format, ());
        0 0.000000 0.000000   404:}
        0 0.000000 0.000000   405:
        0 0.000000 0.000000   406:
        0 0.000000 0.000000   407:=item FORMAT_h
        0 0.000000 0.000000   408:
        0 0.000000 0.000000   409:
        0 0.000000 0.000000   410:
        0 0.000000 0.000000   411:
        0 0.000000 0.000000   412:
        0 0.000000 0.000000   413:
        0 0.000000 0.000000   414:
        5 0.000000 0.000000   415:sub FORMAT_h { #
        5 0.000028 0.000000   416: my $self = shift;
        5 0.000023 0.000000   417: my $x    = shift; #
        5 0.000343 0.000000   418: my @args = (
        0 0.000000 0.000000   419:  $$x{'select'},
        0 0.000000 0.000000   420:  $$x{'bugid'},
        0 0.000000 0.000000   421:  $$x{'status_names'},
        0 0.000000 0.000000   422:  $$x{'version_names'},
        0 0.000000 0.000000   423:  $$x{'group_names'},
        0 0.000000 0.000000   424:  $$x{'severity_names'},
        0 0.000000 0.000000   425:  $$x{'osname_names'},
        0 0.000000 0.000000   426:  $$x{'fixed'},
        0 0.000000 0.000000   427:  $$x{'subject'},
        0 0.000000 0.000000   428:  $$x{'user_names'},
        0 0.000000 0.000000   429:  $$x{'sourceaddr'},
        0 0.000000 0.000000   430:  $$x{'message_count'},
        0 0.000000 0.000000   431:  $$x{'note_count'},
        0 0.000000 0.000000   432:  $$x{'patch_count'},
        0 0.000000 0.000000   433:  $$x{'change_count'},
        0 0.000000 0.000000   434:  $$x{'test_count'},
        0 0.000000 0.000000   435:  $$x{'address_count'}
        0 0.000000 0.000000   436: );
        5 0.000031 0.000000   437: my $top = qq|<tr>
        0 0.000000 0.000000   438:<td>&nbsp;</td>
        0 0.000000 0.000000   439:<td><b>BugID  </b></td>
        0 0.000000 0.000000   440:<td><b>Status</b></td>
        0 0.000000 0.000000   441:<td><b>Version</b></td>
        0 0.000000 0.000000   442:<td><b>Group</b></td>
        0 0.000000 0.000000   443:<td><b>Severity</b></td>
        0 0.000000 0.000000   444:<td><b>OS</b></td>
        0 0.000000 0.000000   445:<td><b>Fixed in</b></td>
        0 0.000000 0.000000   446:<td><b>Subject</b></td>
        0 0.000000 0.000000   447:<td><b>Admins</b></td>
        0 0.000000 0.000000   448:<td><b>Source address</b></td>
            ================ SmallProf version 0.9 ================
                      Profile of ../Perlbug/Object/Bug.pm              Page 191
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   449:<td><b>Messages</b></td>
        0 0.000000 0.000000   450:<td><b>Notes</b></td>
        0 0.000000 0.000000   451:<td><b>Patches</b></td>
        0 0.000000 0.000000   452:<td><b>Changes</b></td>
        0 0.000000 0.000000   453:<td><b>Tests</b></td>
        0 0.000000 0.000000   454:<td><b>Cc's</b></td>
        0 0.000000 0.000000   455:</tr>|;
        5 0.000569 0.000000   456: my $format =
        5 0.000220 0.000000   457: return ($top, $format, ());
        0 0.000000 0.000000   458:}
        0 0.000000 0.000000   459:
        0 0.000000 0.000000   460:
        0 0.000000 0.000000   461:=item FORMAT_H
        0 0.000000 0.000000   462:
        0 0.000000 0.000000   463:
        0 0.000000 0.000000   464:
        0 0.000000 0.000000   465:
        0 0.000000 0.000000   466:
        0 0.000000 0.000000   467:
        0 0.000000 0.000000   468:
        0 0.000000 0.000000   469:sub FORMAT_H { #
        0 0.000000 0.000000   470: my $self = shift;
        0 0.000000 0.000000   471: my $x    = shift; #
        0 0.000000 0.000000   472: my $top    = '';
        0 0.000000 0.000000   473: my $format = qq|<table border=1
        0 0.000000 0.000000   474:<td><b>BugID</b></td><td><b>Version</b></td><
        0 0.000000 0.000000   475:</tr>
        0 0.000000 0.000000   476:<tr>
        0 0.000000 0.000000   477:<td>
        0 0.000000 0.000000   478:$$x{'select'} &nbsp; $$x{'bugid'} &nbsp;
        0 0.000000 0.000000   479:<td>
        0 0.000000 0.000000   480:$$x{'version_names'} &nbsp;</td>
        0 0.000000 0.000000   481:<td>
        0 0.000000 0.000000   482:$$x{'created'} &nbsp;</td>
        0 0.000000 0.000000   483:<td>
        0 0.000000 0.000000   484:$$x{'fixed'}
        0 0.000000 0.000000   485:&nbsp;</td>
        0 0.000000 0.000000   486:</tr>
        0 0.000000 0.000000   487:<tr>
        0 0.000000 0.000000   488:<td><b>Status:</b>
        0 0.000000 0.000000   489:$$x{'status_names'} &nbsp;</td>
        0 0.000000 0.000000   490:<td><b>Group:</b>
        0 0.000000 0.000000   491:$$x{'group_names'} &nbsp;</td>
        0 0.000000 0.000000   492:<td><b>Severity:</b> $$x{'severity_names'}
        0 0.000000 0.000000   493:<td><b>OS:</b> $$x{'osname_names'}
        0 0.000000 0.000000   494:</tr>
        0 0.000000 0.000000   495:<tr>
        0 0.000000 0.000000   496:<td><b>Sourceaddr:</b></td><td colspan=3>
        0 0.000000 0.000000   497:</tr>
        0 0.000000 0.000000   498:<tr>
        0 0.000000 0.000000   499:<td><b>Subject:</b></td> <td colspan=3>
        0 0.000000 0.000000   500:</tr>
        0 0.000000 0.000000   501:<tr>
        0 0.000000 0.000000   502:<td><b>Administrators:</b></td><td colspan=3>
        0 0.000000 0.000000   503:</tr>
        0 0.000000 0.000000   504:<tr>
            ================ SmallProf version 0.9 ================
                      Profile of ../Perlbug/Object/Bug.pm              Page 192
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   505:<td><b>Parent IDs:</b></td><td>
        0 0.000000 0.000000   506:<td><b>Child IDs:</b></td>
        0 0.000000 0.000000   507:<td> $$x{'child_ids'} &nbsp;</td>
        0 0.000000 0.000000   508:</tr>
        0 0.000000 0.000000   509:<tr>
        0 0.000000 0.000000   510:<td><b>Message IDs:</b></td> <td colspan=3>
        0 0.000000 0.000000   511:</tr>
        0 0.000000 0.000000   512:<tr>
        0 0.000000 0.000000   513:<td><b>Ccs:</b></td><td colspan=3>
        0 0.000000 0.000000   514:</tr>
        0 0.000000 0.000000   515:<tr>
        0 0.000000 0.000000   516:<td><b>Note Ids:</b> $$x{'note_ids'}
        0 0.000000 0.000000   517:<td><b>Patch IDs:</b> $$x{'patch_ids'}
        0 0.000000 0.000000   518:<td><b>Change IDs:</b> $$x{'change_names'}
        0 0.000000 0.000000   519:<td><b>Test Ids:</b> $$x{'test_ids'}
        0 0.000000 0.000000   520:</tr>
        0 0.000000 0.000000   521:<tr><td colspan=4> $$x{'help'} </td></tr>
        0 0.000000 0.000000   522:<tr><td>$$x{'newnote'}</td><td
        0 0.000000 0.000000   523:</table>
        0 0.000000 0.000000   524:<table border=1 width=100%>
        0 0.000000 0.000000   525:<tr> <td colspan=4> $$x{'body'}</td></tr>
        0 0.000000 0.000000   526:</table>|;
        0 0.000000 0.000000   527: return ($top, $format, ());
        0 0.000000 0.000000   528:}
        0 0.000000 0.000000   529:
        0 0.000000 0.000000   530:
        0 0.000000 0.000000   531:=item new_id
        0 0.000000 0.000000   532:
        0 0.000000 0.000000   533:
        0 0.000000 0.000000   534:
        0 0.000000 0.000000   535:
        0 0.000000 0.000000   536:
        0 0.000000 0.000000   537:sub new_id { # rf -> xxxx0827.007 -
        0 0.000000 0.000000   538:    my $self = shift;
        0 0.000000 0.000000   539:    my ($id, $ok) = ('', 1);
        0 0.000000 0.000000   540:    my ($today) = $self->base->get_date();
        0 0.000000 0.000000   541:    $self->debug(2, "new_id requested on
        0 0.000000 0.000000   542:    my $sth = $self->base->db->query("SELECT
        0 0.000000 0.000000   543:    my $found = '';
        0 0.000000 0.000000   544:    if (defined $sth) {
        0 0.000000 0.000000   545:        ($found) = $sth->fetchcol(0);
        0 0.000000 0.000000   546:        $self->debug(3, "Found bugid:
        0 0.000000 0.000000   547:    } else {
        0 0.000000 0.000000   548:        $self->debug(0, "Couldn't get
        0 0.000000 0.000000   549:    }
        0 0.000000 0.000000   550:    my ($date, $num) = ("", "");
        0 0.000000 0.000000   551:    if ($found  =~ /^(\d{8})\.(\d{3})$/) { #
        0 0.000000 0.000000   552:        ($date, $num) = ($1, $2);
        0 0.000000 0.000000   553:        if (length($num) == 1) { $num =
        0 0.000000 0.000000   554:        if (length($num) == 2) { $num =
        0 0.000000 0.000000   555:    } else {
        0 0.000000 0.000000   556:        $ok = 0;
        0 0.000000 0.000000   557:        $self->debug(0, "Can't find the
        0 0.000000 0.000000   558:        #or start a new one.
        0 0.000000 0.000000   559:        $date = $today;
        0 0.000000 0.000000   560:        $num = '001';
            ================ SmallProf version 0.9 ================
                      Profile of ../Perlbug/Object/Bug.pm              Page 193
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   561:    }
        0 0.000000 0.000000   562:    if (($date == $today) && ($ok == 1)) {
        0 0.000000 0.000000   563:        if ($num >= 999) { # > just in case.
        0 0.000000 0.000000   564:            $self->debug(0, "Ran out of bug
        0 0.000000 0.000000   565:            $ok = 0;
        0 0.000000 0.000000   566:        } else {
        0 0.000000 0.000000   567:            $num++;
        0 0.000000 0.000000   568:            #$num = sprintf("%03d", $num);
        0 0.000000 0.000000   569:            if (length($num) == 1) { $num =
        0 0.000000 0.000000   570:            if (length($num) == 2) { $num =
        0 0.000000 0.000000   571:        }
        0 0.000000 0.000000   572:    } else {
        0 0.000000 0.000000   573:        $num = '001';
        0 0.000000 0.000000   574:    }
        0 0.000000 0.000000   575:    if ($ok == 1) {
        0 0.000000 0.000000   576:     my $newid   = $today.'.'.$num;
        0 0.000000 0.000000   577:     my $update = "UPDATE pb_bugid SET bugid
        0 0.000000 0.000000   578:     my $sth = $self->base->db-
        0 0.000000 0.000000   579:     if (defined($sth)) {
        0 0.000000 0.000000   580:         my $res = $sth->affected_rows;
        0 0.000000 0.000000   581:         if ($res) {
        0 0.000000 0.000000   582:             $id = $newid;
        0 0.000000 0.000000   583:             $self->debug(2, "New ID ($newid)
        0 0.000000 0.000000   584:         } else {
        0 0.000000 0.000000   585:             $self->error("Don't know what
        0 0.000000 0.000000   586:         }
        0 0.000000 0.000000   587:     } else {
        0 0.000000 0.000000   588:         $self->error("Can't generate new ID
        0 0.000000 0.000000   589:     }
        0 0.000000 0.000000   590: } else {
        0 0.000000 0.000000   591:     my $newid   = $today.'.'.$num;
        0 0.000000 0.000000   592:     my $insert = "INSERT INTO pb_bugid SET
        0 0.000000 0.000000   593:     my $sth = $self->base->db-
        0 0.000000 0.000000   594:     if (defined($sth)) {
        0 0.000000 0.000000   595:         my $res = $sth->affected_rows;
        0 0.000000 0.000000   596:         if ($res) {
        0 0.000000 0.000000   597:             $id = $newid;
        0 0.000000 0.000000   598:             $self->debug(2, "New ID ($newid)
        0 0.000000 0.000000   599:         } else {
        0 0.000000 0.000000   600:             $self->error("Don't know what
        0 0.000000 0.000000   601:         }
        0 0.000000 0.000000   602:     } else {
        0 0.000000 0.000000   603:         $self->error("Can't insert new ID
        0 0.000000 0.000000   604:     }
        0 0.000000 0.000000   605: }
        0 0.000000 0.000000   606: $self->debug(2, "Returning new_id($id)") if
        0 0.000000 0.000000   607:    return $id;
        0 0.000000 0.000000   608:}
        0 0.000000 0.000000   609:
        0 0.000000 0.000000   610:
        0 0.000000 0.000000   611:=item get_id
        0 0.000000 0.000000   612:
        0 0.000000 0.000000   613:
        0 0.000000 0.000000   614:
        0 0.000000 0.000000   615:
        0 0.000000 0.000000   616:
            ================ SmallProf version 0.9 ================
                      Profile of ../Perlbug/Object/Bug.pm              Page 194
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   617:
        0 0.000000 0.000000   618:
        0 0.000000 0.000000   619:sub get_id {
        0 0.000000 0.000000   620:    my $self = shift;
        0 0.000000 0.000000   621:    my $str = shift;
        0 0.000000 0.000000   622:    my ($ok, $id) = (0, '');
        0 0.000000 0.000000   623:    # /^\[[ID]*\s*(\d{8}\.\d{3})\s*\]$/ ->
        0 0.000000 0.000000   624:    if ($str =~ /(\d{8}\.\d{3})/) { # no \b
        0 0.000000 0.000000   625:        $id = $1;
        0 0.000000 0.000000   626:        $ok = 1;
        0 0.000000 0.000000   627:    }
        0 0.000000 0.000000   628:    $self->debug(3, "str($str) -> $ok ($id)")
        0 0.000000 0.000000   629:    return ($ok, $id);
        0 0.000000 0.000000   630:}
        0 0.000000 0.000000   631:
        0 0.000000 0.000000   632:
        0 0.000000 0.000000   633:=head1 AUTHOR
        0 0.000000 0.000000   634:
        0 0.000000 0.000000   635:
        0 0.000000 0.000000   636:
        0 0.000000 0.000000   637:
        0 0.000000 0.000000   638:
        0 0.000000 0.000000   639:#
        1 0.000080 0.000000   640:1;
        0 0.000000 0.000000   641:
            ================ SmallProf version 0.9 ================
                    Profile of ../Perlbug/Object/Change.pm             Page 195
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000     1:# Perlbug bug record handler
        0 0.000000 0.000000     2:# (C) 1999 Richard Foley RFI perlbug@rfi.net
        0 0.000000 0.000000     3:# $Id: Change.pm,v 1.9 2001/04/21 20:48:48
        0 0.000000 0.000000     4:#
        0 0.000000 0.000000     5:
        0 0.000000 0.000000     6:=head1 NAME
        0 0.000000 0.000000     7:
        0 0.000000 0.000000     8:
        0 0.000000 0.000000     9:
        0 0.000000 0.000000    10:
        0 0.000000 0.000000    11:
        0 0.000000 0.000000    12:package Perlbug::Object::Change;
        3 0.000104 0.000000    13:use strict;
        3 0.000105 0.000000    14:use vars qw($VERSION @ISA);
        3 0.000062 0.000000    15:$VERSION = do { my @r = (q$Revision: 1.9 $ =~
        1 0.000008 0.000000    16:my $DEBUG =
        1 0.000005 0.000000    17:$|=1;
        0 0.000000 0.000000    18:
        0 0.000000 0.000000    19:=head1 DESCRIPTION
        0 0.000000 0.000000    20:
        0 0.000000 0.000000    21:
        0 0.000000 0.000000    22:
        0 0.000000 0.000000    23:
        0 0.000000 0.000000    24:
        0 0.000000 0.000000    25:
        0 0.000000 0.000000    26:
        3 0.000118 0.000000    27:use Data::Dumper;
        3 0.000208 0.000000    28:use Perlbug::Base;
        3 0.000863 0.000000    29:use Perlbug::Object;
        1 0.000011 0.000000    30:@ISA = qw(Perlbug::Object);
        0 0.000000 0.000000    31:
        0 0.000000 0.000000    32:
        0 0.000000 0.000000    33:=head1 SYNOPSIS
        0 0.000000 0.000000    34:
        0 0.000000 0.000000    35:
        0 0.000000 0.000000    36:
        0 0.000000 0.000000    37:
        0 0.000000 0.000000    38:
        0 0.000000 0.000000    39:
        0 0.000000 0.000000    40:
        0 0.000000 0.000000    41:
        0 0.000000 0.000000    42:
        0 0.000000 0.000000    43:
        0 0.000000 0.000000    44:
        0 0.000000 0.000000    45:
        0 0.000000 0.000000    46:
        0 0.000000 0.000000    47:
        0 0.000000 0.000000    48:
        0 0.000000 0.000000    49:
        0 0.000000 0.000000    50:
        0 0.000000 0.000000    51:
        1 0.000000 0.000000    52:sub new {
        1 0.000007 0.000000    53:    my $proto = shift;
        1 0.000005 0.000000    54:    my $class = ref($proto) || $proto;
        1 0.000006 0.000000    55: my $o_base = (ref($_[0])) ? shift :
        0 0.000000 0.000000    56:
            ================ SmallProf version 0.9 ================
                    Profile of ../Perlbug/Object/Change.pm             Page 196
       =================================================================
    count wall tm  cpu time line
        1 0.000097 0.000000    57: my $self = Perlbug::Object->new( $o_base,
        0 0.000000 0.000000    58:  'name'  => 'Change',
        0 0.000000 0.000000    59:  'from'  => [qw(bug patch)],
        0 0.000000 0.000000    60:  'to'  => [],
        0 0.000000 0.000000    61: );
        0 0.000000 0.000000    62:
        1 0.000008 0.000000    63: $DEBUG = $Perlbug::DEBUG || $DEBUG;
        0 0.000000 0.000000    64:
        1 0.000043 0.000000    65: bless($self, $class);
        0 0.000000 0.000000    66:}
        0 0.000000 0.000000    67:
        0 0.000000 0.000000    68:
        0 0.000000 0.000000    69:=head1 AUTHOR
        0 0.000000 0.000000    70:
        0 0.000000 0.000000    71:
        0 0.000000 0.000000    72:
        0 0.000000 0.000000    73:
        0 0.000000 0.000000    74:
        0 0.000000 0.000000    75:
        0 0.000000 0.000000    76:#
        1 0.000069 0.000000    77:1;
        0 0.000000 0.000000    78:
            ================ SmallProf version 0.9 ================
                     Profile of ../Perlbug/Object/Child.pm             Page 197
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000     1:# Perlbug bug parent handler
        0 0.000000 0.000000     2:# (C) 1999 Richard Foley RFI perlbug@rfi.net
        0 0.000000 0.000000     3:# $Id: Child.pm,v 1.9 2001/04/21 20:48:48
        0 0.000000 0.000000     4:#
        0 0.000000 0.000000     5:#
        0 0.000000 0.000000     6:
        0 0.000000 0.000000     7:=head1 NAME
        0 0.000000 0.000000     8:
        0 0.000000 0.000000     9:
        0 0.000000 0.000000    10:
        0 0.000000 0.000000    11:
        0 0.000000 0.000000    12:
        0 0.000000 0.000000    13:package Perlbug::Object::Child;
        3 0.000100 0.000000    14:use strict;
        3 0.000108 0.000000    15:use vars qw($VERSION @ISA);
        3 0.000062 0.000000    16:$VERSION = do { my @r = (q$Revision: 1.9 $ =~
        1 0.000008 0.000000    17:my $DEBUG =
        1 0.000006 0.000000    18:$|=1;
        0 0.000000 0.000000    19:
        1 0.000004 0.000000    20:my %fmt = ();
        0 0.000000 0.000000    21:
        0 0.000000 0.000000    22:=head1 DESCRIPTION
        0 0.000000 0.000000    23:
        0 0.000000 0.000000    24:
        0 0.000000 0.000000    25:
        0 0.000000 0.000000    26:
        0 0.000000 0.000000    27:
        0 0.000000 0.000000    28:
        0 0.000000 0.000000    29:
        3 0.000117 0.000000    30:use Data::Dumper;
        3 0.000103 0.000000    31:use HTML::Entities;
        3 0.000152 0.000000    32:use Perlbug::Base;
        3 0.000861 0.000000    33:use Perlbug::Object::Bug;
        1 0.000012 0.000000    34:@ISA = qw(Perlbug::Object::Bug);
        0 0.000000 0.000000    35:
        0 0.000000 0.000000    36:
        0 0.000000 0.000000    37:=head1 SYNOPSIS
        0 0.000000 0.000000    38:
        0 0.000000 0.000000    39:
        0 0.000000 0.000000    40:
        0 0.000000 0.000000    41:
        0 0.000000 0.000000    42:
        0 0.000000 0.000000    43:
        0 0.000000 0.000000    44:
        0 0.000000 0.000000    45:
        0 0.000000 0.000000    46:
        0 0.000000 0.000000    47:
        0 0.000000 0.000000    48:
        0 0.000000 0.000000    49:
        0 0.000000 0.000000    50:
        0 0.000000 0.000000    51:
        0 0.000000 0.000000    52:
        0 0.000000 0.000000    53:
        0 0.000000 0.000000    54:
        0 0.000000 0.000000    55:
        0 0.000000 0.000000    56:
            ================ SmallProf version 0.9 ================
                     Profile of ../Perlbug/Object/Child.pm             Page 198
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000    57:
        1 0.000000 0.000000    58:sub new {
        1 0.000006 0.000000    59:    my $proto = shift;
        1 0.000005 0.000000    60:    my $class = ref($proto) || $proto;
        1 0.000006 0.000000    61: my $o_base = (ref($_[0])) ? shift :
        0 0.000000 0.000000    62:
        1 0.000082 0.000000    63: my $self = Perlbug::Object::Bug->new(
        0 0.000000 0.000000    64:  'hint'   => 'Child',
        0 0.000000 0.000000    65: );
        1 0.000022 0.000000    66: bless($self, $class);
        0 0.000000 0.000000    67: # $self->attr({'Name', 'Child'});
        0 0.000000 0.000000    68:
        1 0.000007 0.000000    69: $DEBUG = $Perlbug::DEBUG || $DEBUG;
        0 0.000000 0.000000    70:
        1 0.000011 0.000000    71: return $self;
        0 0.000000 0.000000    72:}
        0 0.000000 0.000000    73:
        0 0.000000 0.000000    74:
        0 0.000000 0.000000    75:=head1 AUTHOR
        0 0.000000 0.000000    76:
        0 0.000000 0.000000    77:
        0 0.000000 0.000000    78:
        0 0.000000 0.000000    79:
        0 0.000000 0.000000    80:
        0 0.000000 0.000000    81:#
        1 0.000069 0.000000    82:1;
        0 0.000000 0.000000    83:
            ================ SmallProf version 0.9 ================
                     Profile of ../Perlbug/Object/Fixed.pm             Page 199
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000     1:# Perlbug bug record handler
        0 0.000000 0.000000     2:# (C) 1999 Richard Foley RFI perlbug@rfi.net
        0 0.000000 0.000000     3:# $Id: Fixed.pm,v 1.6 2001/04/21 20:48:48
        0 0.000000 0.000000     4:#
        0 0.000000 0.000000     5:
        0 0.000000 0.000000     6:=head1 NAME
        0 0.000000 0.000000     7:
        0 0.000000 0.000000     8:
        0 0.000000 0.000000     9:
        0 0.000000 0.000000    10:
        0 0.000000 0.000000    11:
        0 0.000000 0.000000    12:package Perlbug::Object::Fixed;
        3 0.000107 0.000000    13:use strict;
        3 0.000105 0.000000    14:use vars qw($VERSION @ISA);
        3 0.000065 0.000000    15:$VERSION = do { my @r = (q$Revision: 1.6 $ =~
        1 0.000009 0.000000    16:my $DEBUG =
        1 0.000004 0.000000    17:$|=1;
        0 0.000000 0.000000    18:
        0 0.000000 0.000000    19:
        0 0.000000 0.000000    20:=head1 DESCRIPTION
        0 0.000000 0.000000    21:
        0 0.000000 0.000000    22:
        0 0.000000 0.000000    23:
        0 0.000000 0.000000    24:
        0 0.000000 0.000000    25:
        0 0.000000 0.000000    26:
        0 0.000000 0.000000    27:
        3 0.000118 0.000000    28:use Data::Dumper;
        3 0.000159 0.000000    29:use Perlbug::Base;
        3 0.001200 0.000000    30:use Perlbug::Object::Version;
        1 0.000014 0.000000    31:@ISA = qw(Perlbug::Object::Version);
        0 0.000000 0.000000    32:
        0 0.000000 0.000000    33:
        0 0.000000 0.000000    34:=head1 SYNOPSIS
        0 0.000000 0.000000    35:
        0 0.000000 0.000000    36:
        0 0.000000 0.000000    37:
        0 0.000000 0.000000    38:
        0 0.000000 0.000000    39:
        0 0.000000 0.000000    40:
        0 0.000000 0.000000    41:
        0 0.000000 0.000000    42:
        0 0.000000 0.000000    43:
        0 0.000000 0.000000    44:
        0 0.000000 0.000000    45:
        0 0.000000 0.000000    46:
        0 0.000000 0.000000    47:
        0 0.000000 0.000000    48:
        0 0.000000 0.000000    49:
        0 0.000000 0.000000    50:
        0 0.000000 0.000000    51:
        0 0.000000 0.000000    52:
        1 0.000000 0.000000    53:sub new {
        1 0.000006 0.000000    54:    my $proto = shift;
        1 0.000005 0.000000    55:    my $class = ref($proto) || $proto;
        1 0.000007 0.000000    56: my $o_base = (ref($_[0])) ? shift :
            ================ SmallProf version 0.9 ================
                     Profile of ../Perlbug/Object/Fixed.pm             Page 200
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000    57:
        1 0.000082 0.000000    58: my $self = Perlbug::Object::Version->new(
        0 0.000000 0.000000    59:  'hint'  => 'Fixed',
        0 0.000000 0.000000    60:  # 'from'  => [qw(bug patch test)],
        0 0.000000 0.000000    61:  @_,
        0 0.000000 0.000000    62: );
        0 0.000000 0.000000    63:
        1 0.000007 0.000000    64: $DEBUG = $Perlbug::DEBUG || $DEBUG;
        0 0.000000 0.000000    65:
        1 0.000034 0.000000    66: bless($self, $class);
        0 0.000000 0.000000    67:}
        0 0.000000 0.000000    68:
        0 0.000000 0.000000    69:
        0 0.000000 0.000000    70:=head1 AUTHOR
        0 0.000000 0.000000    71:
        0 0.000000 0.000000    72:
        0 0.000000 0.000000    73:
        0 0.000000 0.000000    74:
        0 0.000000 0.000000    75:
        0 0.000000 0.000000    76:
        0 0.000000 0.000000    77:#
        1 0.000066 0.000000    78:1;
        0 0.000000 0.000000    79:
            ================ SmallProf version 0.9 ================
                     Profile of ../Perlbug/Object/Group.pm             Page 201
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000     1:# Perlbug bug record handler
        0 0.000000 0.000000     2:# (C) 1999 Richard Foley RFI perlbug@rfi.net
        0 0.000000 0.000000     3:# $Id: Group.pm,v 1.22 2001/07/04 15:27:37
        0 0.000000 0.000000     4:#
        0 0.000000 0.000000     5:
        0 0.000000 0.000000     6:=head1 NAME
        0 0.000000 0.000000     7:
        0 0.000000 0.000000     8:
        0 0.000000 0.000000     9:
        0 0.000000 0.000000    10:
        0 0.000000 0.000000    11:
        0 0.000000 0.000000    12:package Perlbug::Object::Group;
        3 0.000103 0.000000    13:use strict;
        3 0.000102 0.000000    14:use vars qw($VERSION @ISA);
        3 0.000074 0.000000    15:$VERSION = do { my @r = (q$Revision: 1.22 $
        1 0.000010 0.000000    16:my $DEBUG =
        1 0.000006 0.000000    17:$|=1;
        0 0.000000 0.000000    18:
        0 0.000000 0.000000    19:
        0 0.000000 0.000000    20:=head1 DESCRIPTION
        0 0.000000 0.000000    21:
        0 0.000000 0.000000    22:
        0 0.000000 0.000000    23:
        0 0.000000 0.000000    24:
        0 0.000000 0.000000    25:
        0 0.000000 0.000000    26:
        0 0.000000 0.000000    27:
        3 0.000115 0.000000    28:use Data::Dumper;
        3 0.000158 0.000000    29:use Perlbug::Base;
        3 0.006760 0.010000    30:use Perlbug::Object;
        1 0.000013 0.000000    31:@ISA = qw(Perlbug::Object);
        0 0.000000 0.000000    32:
        0 0.000000 0.000000    33:
        0 0.000000 0.000000    34:=head1 SYNOPSIS
        0 0.000000 0.000000    35:
        0 0.000000 0.000000    36:
        0 0.000000 0.000000    37:
        0 0.000000 0.000000    38:
        0 0.000000 0.000000    39:
        0 0.000000 0.000000    40:
        0 0.000000 0.000000    41:
        0 0.000000 0.000000    42:
        0 0.000000 0.000000    43:
        0 0.000000 0.000000    44:
        0 0.000000 0.000000    45:
        0 0.000000 0.000000    46:
        0 0.000000 0.000000    47:
        0 0.000000 0.000000    48:
        0 0.000000 0.000000    49:
        0 0.000000 0.000000    50:
        0 0.000000 0.000000    51:
        0 0.000000 0.000000    52:
        1 0.000000 0.000000    53:sub new {
        1 0.000005 0.000000    54:    my $proto = shift;
        1 0.000004 0.000000    55:    my $class = ref($proto) || $proto;
        1 0.000007 0.000000    56: my $o_base = (ref($_[0])) ? shift :
            ================ SmallProf version 0.9 ================
                     Profile of ../Perlbug/Object/Group.pm             Page 202
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000    57:
        1 0.000100 0.000000    58: my $self = Perlbug::Object->new( $o_base,
        0 0.000000 0.000000    59:  'name'  => 'Group',
        0 0.000000 0.000000    60:  'from'  => [qw()],
        0 0.000000 0.000000    61:  'to'  => [qw(address bug user)],
        0 0.000000 0.000000    62: );
        0 0.000000 0.000000    63:
        1 0.000007 0.000000    64: $DEBUG = $Perlbug::DEBUG || $DEBUG;
        0 0.000000 0.000000    65:
        1 0.000042 0.000000    66: bless($self, $class);
        0 0.000000 0.000000    67:}
        0 0.000000 0.000000    68:
        0 0.000000 0.000000    69:
        0 0.000000 0.000000    70:=item htmlify
        0 0.000000 0.000000    71:
        0 0.000000 0.000000    72:
        0 0.000000 0.000000    73:
        0 0.000000 0.000000    74:
        0 0.000000 0.000000    75:
        0 0.000000 0.000000    76:
        0 0.000000 0.000000    77:
        0 0.000000 0.000000    78:sub htmlify {
        0 0.000000 0.000000    79:    my $self = shift;
        0 0.000000 0.000000    80:    my $h_grp= shift;
        0 0.000000 0.000000    81: my $req  = shift || 'admin';
        0 0.000000 0.000000    82: return undef unless ref($h_grp) eq 'HASH';
        0 0.000000 0.000000    83:    my %grp = %{$h_grp};
        0 0.000000 0.000000    84:    my $cgi = $self->base->cgi();
        0 0.000000 0.000000    85:
        0 0.000000 0.000000    86:    my $gid  = $grp{'groupid'};
        0 0.000000 0.000000    87: my $name = my $stat = $grp{'name'};
        0 0.000000 0.000000    88:
        0 0.000000 0.000000    89: %grp = %{$self->SUPER::htmlify($h_grp)};
        0 0.000000 0.000000    90:
        0 0.000000 0.000000    91:    ($grp{'groupid'})  = $self-
        0 0.000000 0.000000    92: $grp{'groupid'} =~ s/format\=h/format\=H/gi;
        0 0.000000 0.000000    93: ($grp{'name'}) = $self->href('group_id',
        0 0.000000 0.000000    94:
        0 0.000000 0.000000    95: my $o_usr = $self->object('user');
        0 0.000000 0.000000    96:    if ($self->base->isadmin && $self->base-
        0 0.000000 0.000000    97:  $grp{'addaddress'} = $cgi->textfield(-
        0 0.000000 0.000000    98:  $grp{'addabugid'} = $cgi->textfield(-'name'
        0 0.000000 0.000000    99:  $grp{'description'} = $cgi->textfield(-
        0 0.000000 0.000000   100:  $grp{'name'}   = $cgi->textfield(-'name' =>
        0 0.000000 0.000000   101:  $grp{'select'}      = $cgi->checkbox(-
        0 0.000000 0.000000   102:  $grp{'user_ids'} = $o_usr-
        0 0.000000 0.000000   103: }
        0 0.000000 0.000000   104: # print '<pre>'.Dumper(\%grp).'</pre>';
        0 0.000000 0.000000   105: return \%grp;
        0 0.000000 0.000000   106:}
        0 0.000000 0.000000   107:
        0 0.000000 0.000000   108:# -------------------------------------------
        0 0.000000 0.000000   109:
        0 0.000000 0.000000   110:=head1 FORMATS
        0 0.000000 0.000000   111:
        0 0.000000 0.000000   112:
            ================ SmallProf version 0.9 ================
                     Profile of ../Perlbug/Object/Group.pm             Page 203
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   113:
        0 0.000000 0.000000   114:
        0 0.000000 0.000000   115:
        0 0.000000 0.000000   116:
        0 0.000000 0.000000   117:
        0 0.000000 0.000000   118:
        0 0.000000 0.000000   119:
        0 0.000000 0.000000   120:
        0 0.000000 0.000000   121:
        0 0.000000 0.000000   122:
        0 0.000000 0.000000   123:sub FORMAT_l { #
        0 0.000000 0.000000   124: my $self = shift;
        0 0.000000 0.000000   125: my $d    = shift; #
        0 0.000000 0.000000   126: my @args = (
        0 0.000000 0.000000   127:  $$d{'name'},  $$d{'groupid'},
        0 0.000000 0.000000   128:  $$d{'user_count'}, $$d{'bug_count'},
        0 0.000000 0.000000   129:  $$d{'created'},
        0 0.000000 0.000000   130: );
        0 0.000000 0.000000   131: my $top = qq|
        0 0.000000 0.000000   132:Name       GroupID  Admins  Bugs    Ccs
        0 0.000000 0.000000   133:---------------------------------------------
        0 0.000000 0.000000   134: my $format = qq|
        0 0.000000 0.000000   135:@<<<<<<<<  @<<<<<   @<<<<   @<<<<<< @<<<<
        0 0.000000 0.000000   136:|;
        0 0.000000 0.000000   137: return ($top, $format, @args);
        0 0.000000 0.000000   138:}
        0 0.000000 0.000000   139:
        0 0.000000 0.000000   140:
        0 0.000000 0.000000   141:=item FORMAT_a
        0 0.000000 0.000000   142:
        0 0.000000 0.000000   143:
        0 0.000000 0.000000   144:
        0 0.000000 0.000000   145:
        0 0.000000 0.000000   146:
        0 0.000000 0.000000   147:
        0 0.000000 0.000000   148:
        0 0.000000 0.000000   149:sub FORMAT_a { #
        0 0.000000 0.000000   150: my $self = shift;
        0 0.000000 0.000000   151: my $d    = shift; #
        0 0.000000 0.000000   152: my @args = (
        0 0.000000 0.000000   153:  $$d{'name'},  $$d{'groupid'},
        0 0.000000 0.000000   154:  $$d{'user_count'}, $$d{'bug_count'},
        0 0.000000 0.000000   155:  $$d{'created'}, $$d{'ts'},
        0 0.000000 0.000000   156:  $$d{'description'},
        0 0.000000 0.000000   157: );
        0 0.000000 0.000000   158: my $top = qq|
        0 0.000000 0.000000   159:Name       GroupID  Admins  Bugs    Ccs
        0 0.000000 0.000000   160:---------------------------------------------
        0 0.000000 0.000000   161: my $format = qq|
        0 0.000000 0.000000   162:@<<<<<<<<  @<<<<<   @<<<<   @<<<<<< @<<<<
        0 0.000000 0.000000   163:@<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
        0 0.000000 0.000000   164:|;
        0 0.000000 0.000000   165: return ($top, $format, @args);
        0 0.000000 0.000000   166:}
        0 0.000000 0.000000   167:
        0 0.000000 0.000000   168:
            ================ SmallProf version 0.9 ================
                     Profile of ../Perlbug/Object/Group.pm             Page 204
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   169:=item FORMAT_A
        0 0.000000 0.000000   170:
        0 0.000000 0.000000   171:
        0 0.000000 0.000000   172:
        0 0.000000 0.000000   173:
        0 0.000000 0.000000   174:
        0 0.000000 0.000000   175:
        0 0.000000 0.000000   176:
        0 0.000000 0.000000   177:sub FORMAT_A { #
        0 0.000000 0.000000   178: my $self = shift;
        0 0.000000 0.000000   179: my $d    = shift; #
        0 0.000000 0.000000   180: my @args = (
        0 0.000000 0.000000   181:  $$d{'name'},  $$d{'groupid'},
        0 0.000000 0.000000   182:  $$d{'user_count'}, $$d{'bug_count'},
        0 0.000000 0.000000   183:  $$d{'created'}, $$d{'ts'},
        0 0.000000 0.000000   184:  $$d{'description'},
        0 0.000000 0.000000   185:  $$d{'user_ids'}, $$d{'address_ids'},
        0 0.000000 0.000000   186:  $$d{'bug_ids'},
        0 0.000000 0.000000   187: );
        0 0.000000 0.000000   188: my $top = qq|
        0 0.000000 0.000000   189:Name       GroupID  Admins  Bugs    Ccs
        0 0.000000 0.000000   190:---------------------------------------------
        0 0.000000 0.000000   191: my $format = qq|
        0 0.000000 0.000000   192:@<<<<<<<<  @<<<<<   @<<<<   @<<<<<< @<<<<
        0 0.000000 0.000000   193:@<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
        0 0.000000 0.000000   194:Admins:
        0 0.000000 0.000000   195:Addresses: @*
        0 0.000000 0.000000   196:Bugids:    @*
        0 0.000000 0.000000   197:|;
        0 0.000000 0.000000   198: return ($top, $format, @args);
        0 0.000000 0.000000   199:}
        0 0.000000 0.000000   200:
        0 0.000000 0.000000   201:
        0 0.000000 0.000000   202:
        0 0.000000 0.000000   203:=item FORMAT_L
        0 0.000000 0.000000   204:
        0 0.000000 0.000000   205:
        0 0.000000 0.000000   206:
        0 0.000000 0.000000   207:
        0 0.000000 0.000000   208:
        0 0.000000 0.000000   209:
        0 0.000000 0.000000   210:
        0 0.000000 0.000000   211:sub FORMAT_L { #
        0 0.000000 0.000000   212: my $self = shift;
        0 0.000000 0.000000   213: my $d    = shift; #
        0 0.000000 0.000000   214: my @args = (
        0 0.000000 0.000000   215:  $$d{'select'},
        0 0.000000 0.000000   216:  $$d{'name'},  $$d{'groupid'},
        0 0.000000 0.000000   217:  $$d{'user_count'}, $$d{'bug_count'},
        0 0.000000 0.000000   218:  $$d{'description'},
        0 0.000000 0.000000   219:  $$d{'created'},
        0 0.000000 0.000000   220: );
        0 0.000000 0.000000   221: my $top = qq|<tr>
        0 0.000000 0.000000   222:<td><b>&nbsp;</b></td>
        0 0.000000 0.000000   223:<td><b>Name</b></td>
        0 0.000000 0.000000   224:<td><b>GroupID</b></td>
            ================ SmallProf version 0.9 ================
                     Profile of ../Perlbug/Object/Group.pm             Page 205
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   225:<td><b>Admins</b></td>
        0 0.000000 0.000000   226:<td><b>Bugs</b></td>
        0 0.000000 0.000000   227:<td><b>Ccs</b></td>
        0 0.000000 0.000000   228:<td><b>Description</b></td>
        0 0.000000 0.000000   229:<td><b>Created</b></td>
        0 0.000000 0.000000   230:</tr>|;
        0 0.000000 0.000000   231: my $format =
        0 0.000000 0.000000   232: return ($top, $format, @args);
        0 0.000000 0.000000   233:}
        0 0.000000 0.000000   234:
        0 0.000000 0.000000   235:
        0 0.000000 0.000000   236:=item FORMAT_h
        0 0.000000 0.000000   237:
        0 0.000000 0.000000   238:
        0 0.000000 0.000000   239:
        0 0.000000 0.000000   240:
        0 0.000000 0.000000   241:
        0 0.000000 0.000000   242:
        0 0.000000 0.000000   243:
        0 0.000000 0.000000   244:sub FORMAT_h { #
        0 0.000000 0.000000   245: my $self = shift;
        0 0.000000 0.000000   246: my $d    = shift; #
        0 0.000000 0.000000   247: my @args = (
        0 0.000000 0.000000   248:  $$d{'select'},
        0 0.000000 0.000000   249:  $$d{'name'},  $$d{'groupid'},
        0 0.000000 0.000000   250:  $$d{'user_count'}, $$d{'bug_count'},
        0 0.000000 0.000000   251:  $$d{'description'},
        0 0.000000 0.000000   252:  $$d{'created'}, $$d{'ts'},
        0 0.000000 0.000000   253: );
        0 0.000000 0.000000   254: my $top = qq|<tr>
        0 0.000000 0.000000   255:<td><b>&nbsp;</b></td>
        0 0.000000 0.000000   256:<td><b>Name</b></td>
        0 0.000000 0.000000   257:<td><b>GroupID</b></td>
        0 0.000000 0.000000   258:<td><b>Admins</b></td>
        0 0.000000 0.000000   259:<td><b>Bugs</b></td>
        0 0.000000 0.000000   260:<td><b>Ccs</b></td>
        0 0.000000 0.000000   261:<td><b>Description</b></td>
        0 0.000000 0.000000   262:<td><b>Created</b></td>
        0 0.000000 0.000000   263:<td><b>Modified</b></td>
        0 0.000000 0.000000   264:</tr>|;
        0 0.000000 0.000000   265: my $format =
        0 0.000000 0.000000   266: return ($top, $format, @args);
        0 0.000000 0.000000   267:}
        0 0.000000 0.000000   268:
        0 0.000000 0.000000   269:
        0 0.000000 0.000000   270:=item FORMAT_H
        0 0.000000 0.000000   271:
        0 0.000000 0.000000   272:
        0 0.000000 0.000000   273:
        0 0.000000 0.000000   274:
        0 0.000000 0.000000   275:
        0 0.000000 0.000000   276:
        0 0.000000 0.000000   277:
        0 0.000000 0.000000   278:sub FORMAT_H { #
        0 0.000000 0.000000   279: my $self = shift;
        0 0.000000 0.000000   280: my $d    = shift; #
            ================ SmallProf version 0.9 ================
                     Profile of ../Perlbug/Object/Group.pm             Page 206
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   281: my @args = (
        0 0.000000 0.000000   282:  $$d{'select'},
        0 0.000000 0.000000   283:  $$d{'name'},  $$d{'groupid'},
        0 0.000000 0.000000   284:  $$d{'user_count'}, $$d{'bug_count'},
        0 0.000000 0.000000   285:  $$d{'description'},
        0 0.000000 0.000000   286:  $$d{'created'}, $$d{'ts'},
        0 0.000000 0.000000   287: );
        0 0.000000 0.000000   288: my $top = qq|<tr>
        0 0.000000 0.000000   289:<td><b>&nbsp;</b></td>
        0 0.000000 0.000000   290:<td><b>Name</b></td>
        0 0.000000 0.000000   291:<td><b>GroupID</b></td>
        0 0.000000 0.000000   292:<td><b>Admins</b></td>
        0 0.000000 0.000000   293:<td><b>Bugs</b></td>
        0 0.000000 0.000000   294:<td><b>Ccs</b></td>
        0 0.000000 0.000000   295:<td><b>Description</b></td>
        0 0.000000 0.000000   296:<td><b>Created</b></td>
        0 0.000000 0.000000   297:<td><b>Modified</b></td>
        0 0.000000 0.000000   298:</tr>|;
        0 0.000000 0.000000   299: my $format =
        0 0.000000 0.000000   300: $format .= qq|
        0 0.000000 0.000000   301:<tr>
        0 0.000000 0.000000   302: <td><b>Admins:</b></td><td
        0 0.000000 0.000000   303:</tr>
        0 0.000000 0.000000   304:<tr>
        0 0.000000 0.000000   305: <td><b>Ccs:</b></td> <td
        0 0.000000 0.000000   306:</tr>
        0 0.000000 0.000000   307:|;
        0 0.000000 0.000000   308: $format .= qq|
        0 0.000000 0.000000   309:<tr>
        0 0.000000 0.000000   310: <td><b>Add Address:</b></td> <td
        0 0.000000 0.000000   311:</tr>
        0 0.000000 0.000000   312:<tr>
        0 0.000000 0.000000   313: <td><b>Add Bugid:</b></td> <td
        0 0.000000 0.000000   314:</tr>
        0 0.000000 0.000000   315:| if $self->base->isadmin;
        0 0.000000 0.000000   316: return ($top, $format, @args);
        0 0.000000 0.000000   317:}
        0 0.000000 0.000000   318:
        0 0.000000 0.000000   319:
        0 0.000000 0.000000   320:=head1 AUTHOR
        0 0.000000 0.000000   321:
        0 0.000000 0.000000   322:
        0 0.000000 0.000000   323:
        0 0.000000 0.000000   324:
        0 0.000000 0.000000   325:
        0 0.000000 0.000000   326:
        0 0.000000 0.000000   327:#
        1 0.000072 0.000000   328:1;
        0 0.000000 0.000000   329:
            ================ SmallProf version 0.9 ================
                    Profile of ../Perlbug/Object/Message.pm            Page 207
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000     1:# Perlbug bug record handler
        0 0.000000 0.000000     2:# (C) 1999 Richard Foley RFI perlbug@rfi.net
        0 0.000000 0.000000     3:# $Id: Message.pm,v 1.18 2001/04/21 20:48:48
        0 0.000000 0.000000     4:#
        0 0.000000 0.000000     5:
        0 0.000000 0.000000     6:=head1 NAME
        0 0.000000 0.000000     7:
        0 0.000000 0.000000     8:
        0 0.000000 0.000000     9:
        0 0.000000 0.000000    10:
        0 0.000000 0.000000    11:
        0 0.000000 0.000000    12:package Perlbug::Object::Message;
        3 0.000101 0.000000    13:use strict;
        3 0.000108 0.000000    14:use vars qw($VERSION @ISA);
        3 0.000061 0.000000    15:$VERSION = do { my @r = (q$Revision: 1.18 $
        1 0.000009 0.000000    16:my $DEBUG =
        1 0.000005 0.000000    17:$|=1;
        0 0.000000 0.000000    18:
        0 0.000000 0.000000    19:=head1 DESCRIPTION
        0 0.000000 0.000000    20:
        0 0.000000 0.000000    21:
        0 0.000000 0.000000    22:
        0 0.000000 0.000000    23:
        0 0.000000 0.000000    24:
        0 0.000000 0.000000    25:
        0 0.000000 0.000000    26:
        3 0.000114 0.000000    27:use Data::Dumper;
        3 0.000156 0.000000    28:use Perlbug::Base;
        3 0.000936 0.000000    29:use Perlbug::Object;
        1 0.000012 0.000000    30:@ISA = qw(Perlbug::Object);
        0 0.000000 0.000000    31:
        0 0.000000 0.000000    32:
        0 0.000000 0.000000    33:=head1 SYNOPSIS
        0 0.000000 0.000000    34:
        0 0.000000 0.000000    35:
        0 0.000000 0.000000    36:
        0 0.000000 0.000000    37:
        0 0.000000 0.000000    38:
        0 0.000000 0.000000    39:
        0 0.000000 0.000000    40:
        0 0.000000 0.000000    41:
        0 0.000000 0.000000    42:
        0 0.000000 0.000000    43:
        0 0.000000 0.000000    44:
        0 0.000000 0.000000    45:
        0 0.000000 0.000000    46:
        0 0.000000 0.000000    47:
        0 0.000000 0.000000    48:
        0 0.000000 0.000000    49:
        0 0.000000 0.000000    50:
        0 0.000000 0.000000    51:
        1 0.000000 0.000000    52:sub new {
        1 0.000006 0.000000    53:    my $proto = shift;
        1 0.000005 0.000000    54:    my $class = ref($proto) || $proto;
        1 0.000006 0.000000    55: my $o_base = (ref($_[0])) ? shift :
        0 0.000000 0.000000    56:
            ================ SmallProf version 0.9 ================
                    Profile of ../Perlbug/Object/Message.pm            Page 208
       =================================================================
    count wall tm  cpu time line
        1 0.000090 0.000000    57: my $self = Perlbug::Object->new( $o_base,
        0 0.000000 0.000000    58:  'name'  => 'Message',
        0 0.000000 0.000000    59:  'from'  => [qw(bug)],
        0 0.000000 0.000000    60:  'to'  => [qw()],  #
        0 0.000000 0.000000    61: );
        0 0.000000 0.000000    62:
        1 0.000008 0.000000    63: $DEBUG = $Perlbug::DEBUG || $DEBUG;
        0 0.000000 0.000000    64:
        1 0.000045 0.000000    65: bless($self, $class);
        0 0.000000 0.000000    66:}
        0 0.000000 0.000000    67:
        0 0.000000 0.000000    68:
        0 0.000000 0.000000    69:=head1 AUTHOR
        0 0.000000 0.000000    70:
        0 0.000000 0.000000    71:
        0 0.000000 0.000000    72:
        0 0.000000 0.000000    73:
        0 0.000000 0.000000    74:
        0 0.000000 0.000000    75:
        0 0.000000 0.000000    76:#
        1 0.000062 0.000000    77:1;
        0 0.000000 0.000000    78:
            ================ SmallProf version 0.9 ================
                     Profile of ../Perlbug/Object/Note.pm              Page 209
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000     1:# Perlbug bug record handler
        0 0.000000 0.000000     2:# (C) 1999 Richard Foley RFI perlbug@rfi.net
        0 0.000000 0.000000     3:# $Id: Note.pm,v 1.16 2001/04/21 20:48:48
        0 0.000000 0.000000     4:#
        0 0.000000 0.000000     5:
        0 0.000000 0.000000     6:=head1 NAME
        0 0.000000 0.000000     7:
        0 0.000000 0.000000     8:
        0 0.000000 0.000000     9:
        0 0.000000 0.000000    10:
        0 0.000000 0.000000    11:
        0 0.000000 0.000000    12:package Perlbug::Object::Note;
        3 0.000102 0.000000    13:use strict;
        3 0.000104 0.000000    14:use vars qw($VERSION @ISA);
        3 0.000064 0.000000    15:$VERSION = do { my @r = (q$Revision: 1.16 $
        1 0.000009 0.000000    16:my $DEBUG = $ENV{'Perlbug_Object_Note_DEBUG'}
        1 0.000005 0.000000    17:$|=1;
        0 0.000000 0.000000    18:
        0 0.000000 0.000000    19:
        0 0.000000 0.000000    20:=head1 DESCRIPTION
        0 0.000000 0.000000    21:
        0 0.000000 0.000000    22:
        0 0.000000 0.000000    23:
        0 0.000000 0.000000    24:
        0 0.000000 0.000000    25:
        0 0.000000 0.000000    26:
        0 0.000000 0.000000    27:
        3 0.000119 0.000000    28:use Data::Dumper;
        3 0.000160 0.000000    29:use Perlbug::Base;
        3 0.000929 0.000000    30:use Perlbug::Object;
        1 0.000012 0.000000    31:@ISA = qw(Perlbug::Object);
        0 0.000000 0.000000    32:
        0 0.000000 0.000000    33:
        0 0.000000 0.000000    34:=head1 SYNOPSIS
        0 0.000000 0.000000    35:
        0 0.000000 0.000000    36:
        0 0.000000 0.000000    37:
        0 0.000000 0.000000    38:
        0 0.000000 0.000000    39:
        0 0.000000 0.000000    40:
        0 0.000000 0.000000    41:
        0 0.000000 0.000000    42:
        0 0.000000 0.000000    43:
        0 0.000000 0.000000    44:
        0 0.000000 0.000000    45:
        0 0.000000 0.000000    46:
        0 0.000000 0.000000    47:
        0 0.000000 0.000000    48:
        0 0.000000 0.000000    49:
        0 0.000000 0.000000    50:
        0 0.000000 0.000000    51:
        0 0.000000 0.000000    52:
        1 0.000000 0.000000    53:sub new {
        1 0.000007 0.000000    54:    my $proto = shift;
        1 0.000005 0.000000    55:    my $class = ref($proto) || $proto;
        1 0.000008 0.000000    56: my $o_base = (ref($_[0])) ? shift :
            ================ SmallProf version 0.9 ================
                     Profile of ../Perlbug/Object/Note.pm              Page 210
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000    57:
        1 0.000090 0.000000    58: my $self = Perlbug::Object->new( $o_base,
        0 0.000000 0.000000    59:  'name'  => 'note',
        0 0.000000 0.000000    60:  'from'  => [qw(bug)],
        0 0.000000 0.000000    61:  'to'  => [qw()],
        0 0.000000 0.000000    62: );
        0 0.000000 0.000000    63:
        1 0.000007 0.000000    64: $DEBUG = $Perlbug::DEBUG || $DEBUG;
        0 0.000000 0.000000    65:
        1 0.000042 0.000000    66: bless($self, $class);
        0 0.000000 0.000000    67:}
        0 0.000000 0.000000    68:
        0 0.000000 0.000000    69:
        0 0.000000 0.000000    70:=head1 AUTHOR
        0 0.000000 0.000000    71:
        0 0.000000 0.000000    72:
        0 0.000000 0.000000    73:
        0 0.000000 0.000000    74:
        0 0.000000 0.000000    75:
        0 0.000000 0.000000    76:
        0 0.000000 0.000000    77:#
        1 0.000065 0.000000    78:1;
            ================ SmallProf version 0.9 ================
                    Profile of ../Perlbug/Object/Osname.pm             Page 211
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000     1:# Perlbug bug record handler
        0 0.000000 0.000000     2:# (C) 1999 Richard Foley RFI perlbug@rfi.net
        0 0.000000 0.000000     3:# $Id: Osname.pm,v 1.8 2001/04/21 20:48:48
        0 0.000000 0.000000     4:#
        0 0.000000 0.000000     5:
        0 0.000000 0.000000     6:=head1 NAME
        0 0.000000 0.000000     7:
        0 0.000000 0.000000     8:
        0 0.000000 0.000000     9:
        0 0.000000 0.000000    10:
        0 0.000000 0.000000    11:
        0 0.000000 0.000000    12:package Perlbug::Object::Osname;
        3 0.000098 0.000000    13:use strict;
        3 0.000108 0.000000    14:use vars qw($VERSION @ISA);
        3 0.000064 0.000000    15:$VERSION = do { my @r = (q$Revision: 1.8 $ =~
        1 0.000008 0.000000    16:my $DEBUG =
        1 0.000004 0.000000    17:$|=1;
        0 0.000000 0.000000    18:
        0 0.000000 0.000000    19:=head1 DESCRIPTION
        0 0.000000 0.000000    20:
        0 0.000000 0.000000    21:
        0 0.000000 0.000000    22:
        0 0.000000 0.000000    23:
        0 0.000000 0.000000    24:
        0 0.000000 0.000000    25:
        0 0.000000 0.000000    26:
        3 0.000117 0.000000    27:use Data::Dumper;
        3 0.000167 0.000000    28:use Perlbug::Base;
        3 0.000907 0.000000    29:use Perlbug::Object;
        1 0.000011 0.000000    30:@ISA = qw(Perlbug::Object);
        0 0.000000 0.000000    31:
        0 0.000000 0.000000    32:
        0 0.000000 0.000000    33:=head1 SYNOPSIS
        0 0.000000 0.000000    34:
        0 0.000000 0.000000    35:
        0 0.000000 0.000000    36:
        0 0.000000 0.000000    37:
        0 0.000000 0.000000    38:
        0 0.000000 0.000000    39:
        0 0.000000 0.000000    40:
        0 0.000000 0.000000    41:
        0 0.000000 0.000000    42:
        0 0.000000 0.000000    43:
        0 0.000000 0.000000    44:
        0 0.000000 0.000000    45:
        0 0.000000 0.000000    46:
        0 0.000000 0.000000    47:
        0 0.000000 0.000000    48:
        0 0.000000 0.000000    49:
        0 0.000000 0.000000    50:
        0 0.000000 0.000000    51:
        1 0.000000 0.000000    52:sub new {
        1 0.000006 0.000000    53:    my $proto = shift;
        1 0.000005 0.000000    54:    my $class = ref($proto) || $proto;
        1 0.000008 0.000000    55: my $o_base = (ref($_[0])) ? shift :
        0 0.000000 0.000000    56:
            ================ SmallProf version 0.9 ================
                    Profile of ../Perlbug/Object/Osname.pm             Page 212
       =================================================================
    count wall tm  cpu time line
        1 0.000139 0.010000    57: my $self = Perlbug::Object->new( $o_base,
        0 0.000000 0.000000    58:  'name'  => 'Osname',
        0 0.000000 0.000000    59:  'from'  => [qw(bug)],
        0 0.000000 0.000000    60:  'to'  => [],
        0 0.000000 0.000000    61: );
        0 0.000000 0.000000    62:
        1 0.000008 0.000000    63: $DEBUG = $Perlbug::DEBUG || $DEBUG;
        0 0.000000 0.000000    64:
        1 0.000040 0.000000    65: bless($self, $class);
        0 0.000000 0.000000    66:}
        0 0.000000 0.000000    67:
        0 0.000000 0.000000    68:
        0 0.000000 0.000000    69:=head1 AUTHOR
        0 0.000000 0.000000    70:
        0 0.000000 0.000000    71:
        0 0.000000 0.000000    72:
        0 0.000000 0.000000    73:
        0 0.000000 0.000000    74:
        0 0.000000 0.000000    75:
        0 0.000000 0.000000    76:#
        1 0.000064 0.000000    77:1;
        0 0.000000 0.000000    78:
            ================ SmallProf version 0.9 ================
                    Profile of ../Perlbug/Object/Parent.pm             Page 213
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000     1:# Perlbug bug parent handler
        0 0.000000 0.000000     2:# (C) 1999 Richard Foley RFI perlbug@rfi.net
        0 0.000000 0.000000     3:# $Id: Parent.pm,v 1.9 2001/04/21 20:48:48
        0 0.000000 0.000000     4:#
        0 0.000000 0.000000     5:
        0 0.000000 0.000000     6:=head1 NAME
        0 0.000000 0.000000     7:
        0 0.000000 0.000000     8:
        0 0.000000 0.000000     9:
        0 0.000000 0.000000    10:
        0 0.000000 0.000000    11:
        0 0.000000 0.000000    12:package Perlbug::Object::Parent;
        3 0.000102 0.000000    13:use strict;
        3 0.000103 0.000000    14:use vars qw($VERSION @ISA);
        3 0.000065 0.000000    15:$VERSION = do { my @r = (q$Revision: 1.9 $ =~
        1 0.000007 0.000000    16:my $DEBUG =
        1 0.000005 0.000000    17:$|=1;
        0 0.000000 0.000000    18:
        0 0.000000 0.000000    19:
        0 0.000000 0.000000    20:=head1 DESCRIPTION
        0 0.000000 0.000000    21:
        0 0.000000 0.000000    22:
        0 0.000000 0.000000    23:
        0 0.000000 0.000000    24:
        0 0.000000 0.000000    25:
        0 0.000000 0.000000    26:
        0 0.000000 0.000000    27:
        3 0.000120 0.000000    28:use Data::Dumper;
        3 0.000104 0.000000    29:use HTML::Entities;
        3 0.000156 0.000000    30:use Perlbug::Base;
        3 0.000881 0.000000    31:use Perlbug::Object::Bug;
        1 0.000012 0.000000    32:@ISA = qw(Perlbug::Object::Bug);
        0 0.000000 0.000000    33:
        1 0.000004 0.000000    34:my %fmt = ();
        0 0.000000 0.000000    35:
        0 0.000000 0.000000    36:
        0 0.000000 0.000000    37:=head1 SYNOPSIS
        0 0.000000 0.000000    38:
        0 0.000000 0.000000    39:
        0 0.000000 0.000000    40:
        0 0.000000 0.000000    41:
        0 0.000000 0.000000    42:
        0 0.000000 0.000000    43:
        0 0.000000 0.000000    44:
        0 0.000000 0.000000    45:
        0 0.000000 0.000000    46:
        0 0.000000 0.000000    47:
        0 0.000000 0.000000    48:
        0 0.000000 0.000000    49:
        0 0.000000 0.000000    50:
        0 0.000000 0.000000    51:
        0 0.000000 0.000000    52:
        0 0.000000 0.000000    53:
        0 0.000000 0.000000    54:
        0 0.000000 0.000000    55:
        0 0.000000 0.000000    56:
            ================ SmallProf version 0.9 ================
                    Profile of ../Perlbug/Object/Parent.pm             Page 214
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000    57:
        1 0.000000 0.000000    58:sub new {
        1 0.000006 0.000000    59:    my $proto = shift;
        1 0.000005 0.000000    60:    my $class = ref($proto) || $proto;
        1 0.000008 0.000000    61: my $o_base = (ref($_[0])) ? shift :
        0 0.000000 0.000000    62:
        1 0.000083 0.000000    63: my $self = Perlbug::Object::Bug->new(
        0 0.000000 0.000000    64:  'hint'  => 'Parent',
        0 0.000000 0.000000    65: );
        1 0.000022 0.000000    66: bless($self, $class);
        0 0.000000 0.000000    67:
        1 0.000008 0.000000    68: $DEBUG = $Perlbug::DEBUG || $DEBUG;
        1 0.000013 0.000000    69: return $self;
        0 0.000000 0.000000    70:}
        0 0.000000 0.000000    71:
        0 0.000000 0.000000    72:
        0 0.000000 0.000000    73:=head1 AUTHOR
        0 0.000000 0.000000    74:
        0 0.000000 0.000000    75:
        0 0.000000 0.000000    76:
        0 0.000000 0.000000    77:
        0 0.000000 0.000000    78:
        0 0.000000 0.000000    79:
        0 0.000000 0.000000    80:#
        1 0.000071 0.000000    81:1;
        0 0.000000 0.000000    82:
            ================ SmallProf version 0.9 ================
                     Profile of ../Perlbug/Object/Patch.pm             Page 215
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000     1:# Perlbug bug record handler
        0 0.000000 0.000000     2:# (C) 1999 Richard Foley RFI perlbug@rfi.net
        0 0.000000 0.000000     3:# $Id: Patch.pm,v 1.14 2001/04/21 20:48:48
        0 0.000000 0.000000     4:#
        0 0.000000 0.000000     5:
        0 0.000000 0.000000     6:=head1 NAME
        0 0.000000 0.000000     7:
        0 0.000000 0.000000     8:
        0 0.000000 0.000000     9:
        0 0.000000 0.000000    10:
        0 0.000000 0.000000    11:
        0 0.000000 0.000000    12:package Perlbug::Object::Patch;
        3 0.000098 0.000000    13:use strict;
        3 0.000105 0.000000    14:use vars qw($VERSION @ISA);
        3 0.000062 0.000000    15:$VERSION = do { my @r = (q$Revision: 1.14 $
        1 0.000007 0.000000    16:my $DEBUG =
        1 0.000005 0.000000    17:$|=1;
        0 0.000000 0.000000    18:
        0 0.000000 0.000000    19:
        0 0.000000 0.000000    20:=head1 DESCRIPTION
        0 0.000000 0.000000    21:
        0 0.000000 0.000000    22:
        0 0.000000 0.000000    23:
        0 0.000000 0.000000    24:
        0 0.000000 0.000000    25:
        0 0.000000 0.000000    26:
        0 0.000000 0.000000    27:
        3 0.000124 0.000000    28:use Data::Dumper;
        3 0.000196 0.000000    29:use Perlbug::Base;
        3 0.000934 0.000000    30:use Perlbug::Object;
        1 0.000012 0.000000    31:@ISA = qw(Perlbug::Object);
        0 0.000000 0.000000    32:
        0 0.000000 0.000000    33:
        0 0.000000 0.000000    34:=head1 SYNOPSIS
        0 0.000000 0.000000    35:
        0 0.000000 0.000000    36:
        0 0.000000 0.000000    37:
        0 0.000000 0.000000    38:
        0 0.000000 0.000000    39:
        0 0.000000 0.000000    40:
        0 0.000000 0.000000    41:
        0 0.000000 0.000000    42:
        0 0.000000 0.000000    43:
        0 0.000000 0.000000    44:
        0 0.000000 0.000000    45:
        0 0.000000 0.000000    46:
        0 0.000000 0.000000    47:
        0 0.000000 0.000000    48:
        0 0.000000 0.000000    49:
        0 0.000000 0.000000    50:
        0 0.000000 0.000000    51:
        0 0.000000 0.000000    52:
        1 0.000000 0.000000    53:sub new {
        1 0.000007 0.000000    54:    my $proto = shift;
        1 0.000004 0.000000    55:    my $class = ref($proto) || $proto;
        1 0.000007 0.000000    56: my $o_base = (ref($_[0])) ? shift :
            ================ SmallProf version 0.9 ================
                     Profile of ../Perlbug/Object/Patch.pm             Page 216
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000    57:
        1 0.000093 0.000000    58: my $self = Perlbug::Object->new( $o_base,
        0 0.000000 0.000000    59:  'name'  => 'Patch',
        0 0.000000 0.000000    60:  'from'  => [qw(bug)],
        0 0.000000 0.000000    61:  'to'  => [qw(change version)],
        0 0.000000 0.000000    62: );
        0 0.000000 0.000000    63:
        1 0.000008 0.000000    64: $DEBUG = $Perlbug::DEBUG || $DEBUG;
        0 0.000000 0.000000    65:
        1 0.000043 0.000000    66: bless($self, $class);
        0 0.000000 0.000000    67:}
        0 0.000000 0.000000    68:
        0 0.000000 0.000000    69:
        0 0.000000 0.000000    70:=head1 AUTHOR
        0 0.000000 0.000000    71:
        0 0.000000 0.000000    72:
        0 0.000000 0.000000    73:
        0 0.000000 0.000000    74:
        0 0.000000 0.000000    75:
        0 0.000000 0.000000    76:
        0 0.000000 0.000000    77:#
        1 0.000065 0.000000    78:1;
        0 0.000000 0.000000    79:
            ================ SmallProf version 0.9 ================
                    Profile of ../Perlbug/Object/Project.pm            Page 217
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000     1:# Perlbug bug record handler
        0 0.000000 0.000000     2:# (C) 1999 Richard Foley RFI perlbug@rfi.net
        0 0.000000 0.000000     3:# $Id: Project.pm,v 1.5 2001/04/21 20:48:48
        0 0.000000 0.000000     4:#
        0 0.000000 0.000000     5:
        0 0.000000 0.000000     6:=head1 NAME
        0 0.000000 0.000000     7:
        0 0.000000 0.000000     8:
        0 0.000000 0.000000     9:
        0 0.000000 0.000000    10:
        0 0.000000 0.000000    11:
        0 0.000000 0.000000    12:package Perlbug::Object::Project;
        3 0.000105 0.000000    13:use strict;
        3 0.000117 0.000000    14:use vars qw($VERSION @ISA);
        3 0.000070 0.000000    15:$VERSION = do { my @r = (q$Revision: 1.5 $ =~
        1 0.000009 0.000000    16:my $DEBUG =
        1 0.000006 0.000000    17:$|=1;
        0 0.000000 0.000000    18:
        0 0.000000 0.000000    19:=head1 DESCRIPTION
        0 0.000000 0.000000    20:
        0 0.000000 0.000000    21:
        0 0.000000 0.000000    22:
        0 0.000000 0.000000    23:
        0 0.000000 0.000000    24:
        0 0.000000 0.000000    25:
        0 0.000000 0.000000    26:
        3 0.000121 0.000000    27:use Data::Dumper;
        3 0.000164 0.000000    28:use Perlbug::Base;
        3 0.000940 0.000000    29:use Perlbug::Object;
        1 0.000011 0.000000    30:@ISA = qw(Perlbug::Object);
        0 0.000000 0.000000    31:
        0 0.000000 0.000000    32:
        0 0.000000 0.000000    33:=head1 SYNOPSIS
        0 0.000000 0.000000    34:
        0 0.000000 0.000000    35:
        0 0.000000 0.000000    36:
        0 0.000000 0.000000    37:
        0 0.000000 0.000000    38:
        0 0.000000 0.000000    39:
        0 0.000000 0.000000    40:
        0 0.000000 0.000000    41:
        0 0.000000 0.000000    42:
        0 0.000000 0.000000    43:
        0 0.000000 0.000000    44:
        0 0.000000 0.000000    45:
        0 0.000000 0.000000    46:
        0 0.000000 0.000000    47:
        0 0.000000 0.000000    48:
        0 0.000000 0.000000    49:
        0 0.000000 0.000000    50:
        0 0.000000 0.000000    51:
        1 0.000000 0.000000    52:sub new {
        1 0.000007 0.000000    53:    my $proto = shift;
        1 0.000006 0.000000    54:    my $class = ref($proto) || $proto;
        1 0.000007 0.000000    55: my $o_base = (ref($_[0])) ? shift :
        0 0.000000 0.000000    56:
            ================ SmallProf version 0.9 ================
                    Profile of ../Perlbug/Object/Project.pm            Page 218
       =================================================================
    count wall tm  cpu time line
        1 0.000094 0.000000    57: my $self = Perlbug::Object->new( $o_base,
        0 0.000000 0.000000    58:  'name'  => 'Project',
        0 0.000000 0.000000    59:  'from'  => [qw()],
        0 0.000000 0.000000    60:  'to'  => [qw(bug)],
        0 0.000000 0.000000    61:  'type'  => 'prejudicial',
        0 0.000000 0.000000    62: );
        0 0.000000 0.000000    63:
        1 0.000010 0.000000    64: $DEBUG = $Perlbug::DEBUG || $DEBUG;
        1 0.000048 0.000000    65: bless($self, $class);
        0 0.000000 0.000000    66:}
        0 0.000000 0.000000    67:
        0 0.000000 0.000000    68:
        0 0.000000 0.000000    69:=head1 AUTHOR
        0 0.000000 0.000000    70:
        0 0.000000 0.000000    71:
        0 0.000000 0.000000    72:
        0 0.000000 0.000000    73:
        0 0.000000 0.000000    74:
        0 0.000000 0.000000    75:
        0 0.000000 0.000000    76:#
        1 0.000067 0.000000    77:1;
        0 0.000000 0.000000    78:
            ================ SmallProf version 0.9 ================
                     Profile of ../Perlbug/Object/Range.pm             Page 219
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000     1:# Perlbug bug record handler
        0 0.000000 0.000000     2:# (C) 1999 Richard Foley RFI perlbug@rfi.net
        0 0.000000 0.000000     3:# $Id: Range.pm,v 1.8 2001/04/21 20:48:48
        0 0.000000 0.000000     4:#
        0 0.000000 0.000000     5:
        0 0.000000 0.000000     6:=head1 NAME
        0 0.000000 0.000000     7:
        0 0.000000 0.000000     8:
        0 0.000000 0.000000     9:
        0 0.000000 0.000000    10:
        0 0.000000 0.000000    11:
        0 0.000000 0.000000    12:package Perlbug::Object::Range;
        3 0.000131 0.010000    13:use strict;
        3 0.000111 0.000000    14:use vars qw(@ISA $VERSION);
        3 0.000065 0.000000    15:$VERSION = do { my @r = (q$Revision: 1.8 $ =~
        1 0.000014 0.000000    16:@ISA = qw(Perlbug::Object);
        1 0.000011 0.000000    17:my $DEBUG =
        1 0.000007 0.000000    18:$|=1;
        0 0.000000 0.000000    19:
        0 0.000000 0.000000    20:=head1 DESCRIPTION
        0 0.000000 0.000000    21:
        0 0.000000 0.000000    22:
        0 0.000000 0.000000    23:
        0 0.000000 0.000000    24:
        0 0.000000 0.000000    25:
        0 0.000000 0.000000    26:
        0 0.000000 0.000000    27:
        3 0.000122 0.000000    28:use Data::Dumper;
        3 0.000169 0.000000    29:use Perlbug::Base;
        3 0.000810 0.000000    30:use Perlbug::Object;
        0 0.000000 0.000000    31:
        0 0.000000 0.000000    32:
        0 0.000000 0.000000    33:=head1 SYNOPSIS
        0 0.000000 0.000000    34:
        0 0.000000 0.000000    35:
        0 0.000000 0.000000    36:
        0 0.000000 0.000000    37:
        0 0.000000 0.000000    38:
        0 0.000000 0.000000    39:
        0 0.000000 0.000000    40:
        0 0.000000 0.000000    41:
        0 0.000000 0.000000    42:
        0 0.000000 0.000000    43:
        0 0.000000 0.000000    44:
        0 0.000000 0.000000    45:
        0 0.000000 0.000000    46:
        0 0.000000 0.000000    47:
        0 0.000000 0.000000    48:
        0 0.000000 0.000000    49:
        0 0.000000 0.000000    50:
        0 0.000000 0.000000    51:
        1 0.000000 0.000000    52:sub new {
        1 0.000006 0.000000    53:    my $proto = shift;
        1 0.000005 0.000000    54:    my $class = ref($proto) || $proto;
        1 0.000008 0.000000    55: my $o_base = (ref($_[0])) ? shift :
        0 0.000000 0.000000    56:
            ================ SmallProf version 0.9 ================
                     Profile of ../Perlbug/Object/Range.pm             Page 220
       =================================================================
    count wall tm  cpu time line
        1 0.000093 0.000000    57: my $self = Perlbug::Object->new( $o_base,
        0 0.000000 0.000000    58:  'name'  => 'Range',
        0 0.000000 0.000000    59:  'from'  => [qw()],
        0 0.000000 0.000000    60:  'to'  => [qw(bug)],
        0 0.000000 0.000000    61:  'track'  => 0,
        0 0.000000 0.000000    62: );
        0 0.000000 0.000000    63:
        1 0.000008 0.000000    64: $DEBUG = $Perlbug::DEBUG || $DEBUG;
        0 0.000000 0.000000    65:
        1 0.000046 0.000000    66: bless($self, $class);
        0 0.000000 0.000000    67:}
        0 0.000000 0.000000    68:
        0 0.000000 0.000000    69:
        0 0.000000 0.000000    70:=head1 AUTHOR
        0 0.000000 0.000000    71:
        0 0.000000 0.000000    72:
        0 0.000000 0.000000    73:
        0 0.000000 0.000000    74:
        0 0.000000 0.000000    75:
        0 0.000000 0.000000    76:
        0 0.000000 0.000000    77:#
        1 0.000069 0.000000    78:1;
        0 0.000000 0.000000    79:
            ================ SmallProf version 0.9 ================
                   Profile of ../Perlbug/Object/Severity.pm            Page 221
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000     1:# Perlbug bug record handler
        0 0.000000 0.000000     2:# (C) 1999 Richard Foley RFI perlbug@rfi.net
        0 0.000000 0.000000     3:# $Id: Severity.pm,v 1.8 2001/04/21 20:48:48
        0 0.000000 0.000000     4:#
        0 0.000000 0.000000     5:
        0 0.000000 0.000000     6:=head1 NAME
        0 0.000000 0.000000     7:
        0 0.000000 0.000000     8:
        0 0.000000 0.000000     9:
        0 0.000000 0.000000    10:
        0 0.000000 0.000000    11:
        0 0.000000 0.000000    12:package Perlbug::Object::Severity;
        3 0.000105 0.000000    13:use strict;
        3 0.000108 0.000000    14:use vars qw($VERSION @ISA);
        3 0.000062 0.000000    15:$VERSION = do { my @r = (q$Revision: 1.8 $ =~
        1 0.000007 0.000000    16:my $DEBUG =
        1 0.000005 0.000000    17:$|=1;
        0 0.000000 0.000000    18:
        0 0.000000 0.000000    19:
        0 0.000000 0.000000    20:=head1 DESCRIPTION
        0 0.000000 0.000000    21:
        0 0.000000 0.000000    22:
        0 0.000000 0.000000    23:
        0 0.000000 0.000000    24:
        0 0.000000 0.000000    25:
        0 0.000000 0.000000    26:
        0 0.000000 0.000000    27:
        3 0.000111 0.000000    28:use Data::Dumper;
        3 0.000164 0.000000    29:use Perlbug::Base;
        3 0.000894 0.000000    30:use Perlbug::Object;
        1 0.000011 0.000000    31:@ISA = qw(Perlbug::Object);
        0 0.000000 0.000000    32:
        0 0.000000 0.000000    33:
        0 0.000000 0.000000    34:=head1 SYNOPSIS
        0 0.000000 0.000000    35:
        0 0.000000 0.000000    36:
        0 0.000000 0.000000    37:
        0 0.000000 0.000000    38:
        0 0.000000 0.000000    39:
        0 0.000000 0.000000    40:
        0 0.000000 0.000000    41:
        0 0.000000 0.000000    42:
        0 0.000000 0.000000    43:
        0 0.000000 0.000000    44:
        0 0.000000 0.000000    45:
        0 0.000000 0.000000    46:
        0 0.000000 0.000000    47:
        0 0.000000 0.000000    48:
        0 0.000000 0.000000    49:
        0 0.000000 0.000000    50:
        0 0.000000 0.000000    51:
        0 0.000000 0.000000    52:
        1 0.000000 0.000000    53:sub new {
        1 0.000007 0.000000    54:    my $proto = shift;
        1 0.000006 0.000000    55:    my $class = ref($proto) || $proto;
        1 0.000007 0.000000    56: my $o_base = (ref($_[0])) ? shift :
            ================ SmallProf version 0.9 ================
                   Profile of ../Perlbug/Object/Severity.pm            Page 222
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000    57:
        1 0.000091 0.000000    58: my $self = Perlbug::Object->new( $o_base,
        0 0.000000 0.000000    59:  'name'  => 'Severity',
        0 0.000000 0.000000    60:  'from'  => [qw(bug)],
        0 0.000000 0.000000    61:  'to'  => [],
        0 0.000000 0.000000    62:  'type'  => 'prejudicial',
        0 0.000000 0.000000    63: );
        0 0.000000 0.000000    64:
        1 0.000009 0.000000    65: $DEBUG = $Perlbug::DEBUG || $DEBUG;
        0 0.000000 0.000000    66:
        1 0.000044 0.000000    67: bless($self, $class);
        0 0.000000 0.000000    68:}
        0 0.000000 0.000000    69:
        0 0.000000 0.000000    70:
        0 0.000000 0.000000    71:=head1 AUTHOR
        0 0.000000 0.000000    72:
        0 0.000000 0.000000    73:
        0 0.000000 0.000000    74:
        0 0.000000 0.000000    75:
        0 0.000000 0.000000    76:
        0 0.000000 0.000000    77:
        0 0.000000 0.000000    78:#
        1 0.000065 0.000000    79:1;
        0 0.000000 0.000000    80:
            ================ SmallProf version 0.9 ================
                    Profile of ../Perlbug/Object/Status.pm             Page 223
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000     1:# Perlbug bug record handler
        0 0.000000 0.000000     2:# (C) 1999 Richard Foley RFI perlbug@rfi.net
        0 0.000000 0.000000     3:# $Id: Status.pm,v 1.8 2001/04/21 20:48:48
        0 0.000000 0.000000     4:#
        0 0.000000 0.000000     5:
        0 0.000000 0.000000     6:=head1 NAME
        0 0.000000 0.000000     7:
        0 0.000000 0.000000     8:
        0 0.000000 0.000000     9:
        0 0.000000 0.000000    10:
        0 0.000000 0.000000    11:
        0 0.000000 0.000000    12:package Perlbug::Object::Status;
        3 0.000102 0.000000    13:use strict;
        3 0.000125 0.000000    14:use vars qw($VERSION @ISA);
        3 0.000064 0.000000    15:$VERSION = do { my @r = (q$Revision: 1.8 $ =~
        1 0.000008 0.000000    16:my $DEBUG =
        1 0.000005 0.000000    17:$|=1;
        0 0.000000 0.000000    18:
        0 0.000000 0.000000    19:
        0 0.000000 0.000000    20:=head1 DESCRIPTION
        0 0.000000 0.000000    21:
        0 0.000000 0.000000    22:
        0 0.000000 0.000000    23:
        0 0.000000 0.000000    24:
        0 0.000000 0.000000    25:
        0 0.000000 0.000000    26:
        0 0.000000 0.000000    27:
        3 0.000118 0.000000    28:use Data::Dumper;
        3 0.000162 0.000000    29:use Perlbug::Base;
        3 0.000935 0.000000    30:use Perlbug::Object;
        1 0.000014 0.000000    31:@ISA = qw(Perlbug::Object);
        0 0.000000 0.000000    32:
        0 0.000000 0.000000    33:
        0 0.000000 0.000000    34:=head1 SYNOPSIS
        0 0.000000 0.000000    35:
        0 0.000000 0.000000    36:
        0 0.000000 0.000000    37:
        0 0.000000 0.000000    38:
        0 0.000000 0.000000    39:
        0 0.000000 0.000000    40:
        0 0.000000 0.000000    41:
        0 0.000000 0.000000    42:
        0 0.000000 0.000000    43:
        0 0.000000 0.000000    44:
        0 0.000000 0.000000    45:
        0 0.000000 0.000000    46:
        0 0.000000 0.000000    47:
        0 0.000000 0.000000    48:
        0 0.000000 0.000000    49:
        0 0.000000 0.000000    50:
        0 0.000000 0.000000    51:
        0 0.000000 0.000000    52:
        1 0.000000 0.000000    53:sub new {
        1 0.000005 0.000000    54:    my $proto = shift;
        1 0.000004 0.000000    55:    my $class = ref($proto) || $proto;
        1 0.000007 0.000000    56: my $o_base = (ref($_[0])) ? shift :
            ================ SmallProf version 0.9 ================
                    Profile of ../Perlbug/Object/Status.pm             Page 224
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000    57:
        1 0.000089 0.000000    58: my $self = Perlbug::Object->new( $o_base,
        0 0.000000 0.000000    59:  'name'  => 'Status',
        0 0.000000 0.000000    60:  'from'  => [qw(bug)],
        0 0.000000 0.000000    61:  'to'  => [],
        0 0.000000 0.000000    62:  'type'  => 'prejudicial',
        0 0.000000 0.000000    63: );
        0 0.000000 0.000000    64:
        1 0.000009 0.000000    65: $DEBUG = $Perlbug::DEBUG || $DEBUG;
        0 0.000000 0.000000    66:
        1 0.000041 0.000000    67: bless($self, $class);
        0 0.000000 0.000000    68:}
        0 0.000000 0.000000    69:
        0 0.000000 0.000000    70:
        0 0.000000 0.000000    71:=head1 AUTHOR
        0 0.000000 0.000000    72:
        0 0.000000 0.000000    73:
        0 0.000000 0.000000    74:
        0 0.000000 0.000000    75:
        0 0.000000 0.000000    76:
        0 0.000000 0.000000    77:
        0 0.000000 0.000000    78:#
        1 0.000065 0.000000    79:1;
        0 0.000000 0.000000    80:
            ================ SmallProf version 0.9 ================
                     Profile of ../Perlbug/Object/Test.pm              Page 225
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000     1:# Perlbug bug record handler
        0 0.000000 0.000000     2:# (C) 1999 Richard Foley RFI perlbug@rfi.net
        0 0.000000 0.000000     3:# $Id: Test.pm,v 1.17 2001/04/21 20:48:48
        0 0.000000 0.000000     4:#
        0 0.000000 0.000000     5:
        0 0.000000 0.000000     6:=head1 NAME
        0 0.000000 0.000000     7:
        0 0.000000 0.000000     8:
        0 0.000000 0.000000     9:
        0 0.000000 0.000000    10:
        0 0.000000 0.000000    11:
        0 0.000000 0.000000    12:package Perlbug::Object::Test;
        3 0.000101 0.000000    13:use strict;
        3 0.000105 0.000000    14:use vars qw($VERSION @ISA);
        3 0.000061 0.000000    15:$VERSION = do { my @r = (q$Revision: 1.17 $
        1 0.000008 0.000000    16:my $DEBUG = $ENV{'Perlbug_Object_Test_DEBUG'}
        1 0.000005 0.000000    17:$|=1;
        0 0.000000 0.000000    18:
        0 0.000000 0.000000    19:=head1 DESCRIPTION
        0 0.000000 0.000000    20:
        0 0.000000 0.000000    21:
        0 0.000000 0.000000    22:
        0 0.000000 0.000000    23:
        0 0.000000 0.000000    24:
        0 0.000000 0.000000    25:
        0 0.000000 0.000000    26:
        3 0.000116 0.000000    27:use Data::Dumper;
        3 0.000157 0.000000    28:use Perlbug::Base;
        3 0.000934 0.000000    29:use Perlbug::Object;
        1 0.000011 0.000000    30:@ISA = qw(Perlbug::Object);
        0 0.000000 0.000000    31:
        0 0.000000 0.000000    32:
        0 0.000000 0.000000    33:=head1 SYNOPSIS
        0 0.000000 0.000000    34:
        0 0.000000 0.000000    35:
        0 0.000000 0.000000    36:
        0 0.000000 0.000000    37:
        0 0.000000 0.000000    38:
        0 0.000000 0.000000    39:
        0 0.000000 0.000000    40:
        0 0.000000 0.000000    41:
        0 0.000000 0.000000    42:
        0 0.000000 0.000000    43:
        0 0.000000 0.000000    44:
        0 0.000000 0.000000    45:
        0 0.000000 0.000000    46:
        0 0.000000 0.000000    47:
        0 0.000000 0.000000    48:
        0 0.000000 0.000000    49:
        0 0.000000 0.000000    50:
        0 0.000000 0.000000    51:
        1 0.000000 0.000000    52:sub new {
        1 0.000006 0.000000    53:    my $proto = shift;
        1 0.000005 0.000000    54:    my $class = ref($proto) || $proto;
        1 0.000006 0.000000    55: my $o_base = (ref($_[0])) ? shift :
        0 0.000000 0.000000    56:
            ================ SmallProf version 0.9 ================
                     Profile of ../Perlbug/Object/Test.pm              Page 226
       =================================================================
    count wall tm  cpu time line
        1 0.000090 0.000000    57: my $self = Perlbug::Object->new( $o_base,
        0 0.000000 0.000000    58:  'name'  => 'Test',
        0 0.000000 0.000000    59:  'from'  => [qw(bug)],
        0 0.000000 0.000000    60:  'to'  => [qw(version)],
        0 0.000000 0.000000    61: );
        0 0.000000 0.000000    62:
        1 0.000007 0.000000    63: $DEBUG = $Perlbug::DEBUG || $DEBUG;
        0 0.000000 0.000000    64:
        1 0.000040 0.000000    65: bless($self, $class);
        0 0.000000 0.000000    66:}
        0 0.000000 0.000000    67:
        0 0.000000 0.000000    68:
        0 0.000000 0.000000    69:=head1 AUTHOR
        0 0.000000 0.000000    70:
        0 0.000000 0.000000    71:
        0 0.000000 0.000000    72:
        0 0.000000 0.000000    73:
        0 0.000000 0.000000    74:
        0 0.000000 0.000000    75:
        0 0.000000 0.000000    76:#
        1 0.000068 0.000000    77:1;
        0 0.000000 0.000000    78:
            ================ SmallProf version 0.9 ================
                     Profile of ../Perlbug/Object/Thing.pm             Page 227
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000     1:# Perlbug bug record handler
        0 0.000000 0.000000     2:# (C) 1999 Richard Foley RFI perlbug@rfi.net
        0 0.000000 0.000000     3:# $Id: Thing.pm,v 1.4 2001/04/21 20:48:48
        0 0.000000 0.000000     4:#
        0 0.000000 0.000000     5:
        0 0.000000 0.000000     6:=head1 NAME
        0 0.000000 0.000000     7:
        0 0.000000 0.000000     8:
        0 0.000000 0.000000     9:
        0 0.000000 0.000000    10:
        0 0.000000 0.000000    11:
        0 0.000000 0.000000    12:package Perlbug::Object::Thing;
        3 0.000096 0.000000    13:use strict;
        3 0.000104 0.000000    14:use vars qw($VERSION @ISA);
        3 0.000063 0.000000    15:$VERSION = do { my @r = (q$Revision: 1.4 $ =~
        1 0.000007 0.000000    16:my $DEBUG =
        1 0.000005 0.000000    17:$|=1;
        0 0.000000 0.000000    18:
        0 0.000000 0.000000    19:
        0 0.000000 0.000000    20:=head1 DESCRIPTION
        0 0.000000 0.000000    21:
        0 0.000000 0.000000    22:
        0 0.000000 0.000000    23:
        0 0.000000 0.000000    24:
        0 0.000000 0.000000    25:
        0 0.000000 0.000000    26:
        0 0.000000 0.000000    27:
        0 0.000000 0.000000    28:
        0 0.000000 0.000000    29:
        3 0.000120 0.000000    30:use Data::Dumper;
        3 0.000161 0.000000    31:use Perlbug::Base;
        3 0.000934 0.000000    32:use Perlbug::Object;
        1 0.000014 0.000000    33:@ISA = qw(Perlbug::Object);
        0 0.000000 0.000000    34:
        0 0.000000 0.000000    35:
        0 0.000000 0.000000    36:=head1 SYNOPSIS
        0 0.000000 0.000000    37:
        0 0.000000 0.000000    38:
        0 0.000000 0.000000    39:
        0 0.000000 0.000000    40:
        0 0.000000 0.000000    41:
        0 0.000000 0.000000    42:
        0 0.000000 0.000000    43:
        0 0.000000 0.000000    44:
        0 0.000000 0.000000    45:
        0 0.000000 0.000000    46:
        0 0.000000 0.000000    47:
        0 0.000000 0.000000    48:
        0 0.000000 0.000000    49:
        0 0.000000 0.000000    50:
        0 0.000000 0.000000    51:
        0 0.000000 0.000000    52:
        0 0.000000 0.000000    53:
        0 0.000000 0.000000    54:
        1 0.000000 0.000000    55:sub new {
        1 0.000007 0.000000    56:    my $proto = shift;
            ================ SmallProf version 0.9 ================
                     Profile of ../Perlbug/Object/Thing.pm             Page 228
       =================================================================
    count wall tm  cpu time line
        1 0.000005 0.000000    57:    my $class = ref($proto) || $proto;
        1 0.000006 0.000000    58: my $o_base = (ref($_[0])) ? shift :
        0 0.000000 0.000000    59:
        1 0.000088 0.000000    60: my $self = Perlbug::Object->new( $o_base,
        0 0.000000 0.000000    61:  'name'  => 'Thing',
        0 0.000000 0.000000    62:  'from'  => [qw()],
        0 0.000000 0.000000    63:  'to'  => [qw()],
        0 0.000000 0.000000    64: );
        0 0.000000 0.000000    65:
        1 0.000009 0.000000    66: $DEBUG = $Perlbug::DEBUG || $DEBUG;
        0 0.000000 0.000000    67:
        1 0.000042 0.000000    68: bless($self, $class);
        0 0.000000 0.000000    69:}
        0 0.000000 0.000000    70:
        0 0.000000 0.000000    71:
        0 0.000000 0.000000    72:=head1 AUTHOR
        0 0.000000 0.000000    73:
        0 0.000000 0.000000    74:
        0 0.000000 0.000000    75:
        0 0.000000 0.000000    76:
        0 0.000000 0.000000    77:
        0 0.000000 0.000000    78:
        0 0.000000 0.000000    79:#
        1 0.000262 0.010000    80:1;
        0 0.000000 0.000000    81:
            ================ SmallProf version 0.9 ================
                     Profile of ../Perlbug/Object/User.pm              Page 229
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000     1:# Perlbug bug record handler
        0 0.000000 0.000000     2:# (C) 1999 Richard Foley RFI perlbug@rfi.net
        0 0.000000 0.000000     3:# $Id: User.pm,v 1.26 2001/07/04 15:27:37
        0 0.000000 0.000000     4:#
        0 0.000000 0.000000     5:
        0 0.000000 0.000000     6:=head1 NAME
        0 0.000000 0.000000     7:
        0 0.000000 0.000000     8:
        0 0.000000 0.000000     9:
        0 0.000000 0.000000    10:
        0 0.000000 0.000000    11:
        0 0.000000 0.000000    12:package Perlbug::Object::User;
        3 0.000103 0.000000    13:use strict;
        3 0.000107 0.000000    14:use vars qw($VERSION @ISA);
        3 0.000076 0.000000    15:$VERSION = do { my @r = (q$Revision: 1.26 $
        1 0.000008 0.000000    16:my $DEBUG = $ENV{'Perlbug_Object_User_DEBUG'}
        1 0.000008 0.000000    17:$|=1;
        0 0.000000 0.000000    18:
        0 0.000000 0.000000    19:
        0 0.000000 0.000000    20:=head1 DESCRIPTION
        0 0.000000 0.000000    21:
        0 0.000000 0.000000    22:
        0 0.000000 0.000000    23:
        0 0.000000 0.000000    24:
        0 0.000000 0.000000    25:
        0 0.000000 0.000000    26:
        0 0.000000 0.000000    27:
        3 0.000139 0.000000    28:use Data::Dumper;
        3 0.000173 0.000000    29:use Perlbug::Object;
        3 0.007465 0.010000    30:use Perlbug::Base;
        1 0.000014 0.000000    31:@ISA = qw(Perlbug::Object);
        0 0.000000 0.000000    32:
        0 0.000000 0.000000    33:
        0 0.000000 0.000000    34:=head1 SYNOPSIS
        0 0.000000 0.000000    35:
        0 0.000000 0.000000    36:
        0 0.000000 0.000000    37:
        0 0.000000 0.000000    38:
        0 0.000000 0.000000    39:
        0 0.000000 0.000000    40:
        0 0.000000 0.000000    41:
        0 0.000000 0.000000    42:
        0 0.000000 0.000000    43:
        0 0.000000 0.000000    44:
        0 0.000000 0.000000    45:
        0 0.000000 0.000000    46:
        0 0.000000 0.000000    47:
        0 0.000000 0.000000    48:
        0 0.000000 0.000000    49:
        0 0.000000 0.000000    50:
        1 0.000000 0.000000    51:sub new {
        1 0.000009 0.000000    52:    my $proto = shift;
        1 0.000006 0.000000    53:    my $class = ref($proto) || $proto;
        1 0.000008 0.000000    54: my $o_base = (ref($_[0])) ? shift :
        0 0.000000 0.000000    55:
        1 0.000111 0.000000    56: my $self = Perlbug::Object->new( $o_base,
            ================ SmallProf version 0.9 ================
                     Profile of ../Perlbug/Object/User.pm              Page 230
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000    57:  'name'  => 'User',
        0 0.000000 0.000000    58:  'match_oid' => '([a-zA-Z]+)',
        0 0.000000 0.000000    59:  'from'  => [qw(group)],
        0 0.000000 0.000000    60:  'to'  => [qw(bug)],
        0 0.000000 0.000000    61: );
        0 0.000000 0.000000    62:
        1 0.000009 0.000000    63: $DEBUG = $Perlbug::DEBUG || $DEBUG;
        0 0.000000 0.000000    64:
        1 0.000047 0.000000    65: bless($self, $class);
        0 0.000000 0.000000    66:}
        0 0.000000 0.000000    67:
        0 0.000000 0.000000    68:
        0 0.000000 0.000000    69:=item updatable
        0 0.000000 0.000000    70:
        0 0.000000 0.000000    71:
        0 0.000000 0.000000    72:
        0 0.000000 0.000000    73:
        0 0.000000 0.000000    74:
        0 0.000000 0.000000    75:
        0 0.000000 0.000000    76:
        0 0.000000 0.000000    77:
        0 0.000000 0.000000    78:
        0 0.000000 0.000000    79:sub updatable {
        0 0.000000 0.000000    80:    my $self   = shift;
        0 0.000000 0.000000    81:
        0 0.000000 0.000000    82:    my $a_uids = shift; #
        0 0.000000 0.000000    83: my $user   = $self->base->isadmin;
        0 0.000000 0.000000    84:
        0 0.000000 0.000000    85: my @uids   = $self-
        0 0.000000 0.000000    86:
        0 0.000000 0.000000    87: if ($user ne $self->base-
        0 0.000000 0.000000    88:  @uids = grep(/^$user$/, @{$a_uids});
        0 0.000000 0.000000    89: }
        0 0.000000 0.000000    90:
        0 0.000000 0.000000    91:    return @uids;
        0 0.000000 0.000000    92:}
        0 0.000000 0.000000    93:
        0 0.000000 0.000000    94:
        0 0.000000 0.000000    95:=item insertid
        0 0.000000 0.000000    96:
        0 0.000000 0.000000    97:
        0 0.000000 0.000000    98:
        0 0.000000 0.000000    99:
        0 0.000000 0.000000   100:
        0 0.000000 0.000000   101:
        0 0.000000 0.000000   102:
        0 0.000000 0.000000   103:sub insertid {
        0 0.000000 0.000000   104: my $self = shift;
        0 0.000000 0.000000   105:
        0 0.000000 0.000000   106: my $oid = $self->data($self-
        0 0.000000 0.000000   107: $self->debug(0, "newly inserted
        0 0.000000 0.000000   108:
        0 0.000000 0.000000   109: return $oid;
        0 0.000000 0.000000   110:}
        0 0.000000 0.000000   111:
        0 0.000000 0.000000   112:
            ================ SmallProf version 0.9 ================
                     Profile of ../Perlbug/Object/User.pm              Page 231
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   113:
        0 0.000000 0.000000   114:=item htmlify
        0 0.000000 0.000000   115:
        0 0.000000 0.000000   116:
        0 0.000000 0.000000   117:
        0 0.000000 0.000000   118:
        0 0.000000 0.000000   119:
        0 0.000000 0.000000   120:
        0 0.000000 0.000000   121:
        0 0.000000 0.000000   122:sub htmlify {
        0 0.000000 0.000000   123:    my $self = shift;
        0 0.000000 0.000000   124:    my $h_usr= shift || $self->_oref('data');
        0 0.000000 0.000000   125: my $req  = shift || 'admin';
        0 0.000000 0.000000   126: return undef unless ref($h_usr) eq 'HASH';
        0 0.000000 0.000000   127:    my $cgi = $self->base->cgi();
        0 0.000000 0.000000   128:    my $url = $self->base->url;
        0 0.000000 0.000000   129:    my %usr = %{$h_usr};
        0 0.000000 0.000000   130:    my $userid  = $usr{'userid'};
        0 0.000000 0.000000   131:
        0 0.000000 0.000000   132:    my $active  = ($usr{'active'} == 1) ? 1 :
        0 0.000000 0.000000   133:    my $address = ($usr{'address'});
        0 0.000000 0.000000   134:    my $name    = $usr{'name'};
        0 0.000000 0.000000   135:
        0 0.000000 0.000000   136: my $o_grp = $self->object('group');
        0 0.000000 0.000000   137: my @mygids = $self->read($userid)-
        0 0.000000 0.000000   138:    my $match_address =
        0 0.000000 0.000000   139:    my $password = $usr{'password'};
        0 0.000000 0.000000   140: %usr = %{$self->SUPER::htmlify($h_usr)};
        0 0.000000 0.000000   141:
        0 0.000000 0.000000   142:    if ($self->base->isadmin && $self-
        0 0.000000 0.000000   143:  my @status = qw(1 0); push(@status, 'NULL')
        0 0.000000 0.000000   144:        $usr{'active'}        = $cgi-
        0 0.000000 0.000000   145:        $usr{'name'}          = $cgi-
        0 0.000000 0.000000   146:     $usr{'address'}       = $cgi->textfield(
        0 0.000000 0.000000   147:  $usr{'group_ids'}    = $o_grp-
        0 0.000000 0.000000   148:        $usr{'match_address'} = $cgi-
        0 0.000000 0.000000   149:        $usr{'password_update'}= $cgi-
        0 0.000000 0.000000   150:        $usr{'password'}      = $cgi-
        0 0.000000 0.000000   151:        $usr{'select'}        = $cgi-
        0 0.000000 0.000000   152:        $usr{'select'}       .=
        0 0.000000 0.000000   153:    } else {
        0 0.000000 0.000000   154:        $usr{'active'}        = ($active) ?
        0 0.000000 0.000000   155:  my ($addr) = $self-
        0 0.000000 0.000000   156:        $usr{'address'}       = qq|<a
        0 0.000000 0.000000   157:        $name = "<b>$name</b>" if $active;
        0 0.000000 0.000000   158:        $usr{'name'}          = qq|<a
        0 0.000000 0.000000   159:        $usr{'password'}      = '-';
        0 0.000000 0.000000   160:        $usr{'match_address'} = '-';
        0 0.000000 0.000000   161:        $usr{'userid'}        = '';
        0 0.000000 0.000000   162:    }
        0 0.000000 0.000000   163: # print '<pre>'.Dumper(\%usr).'</pre>';
        0 0.000000 0.000000   164:    return \%usr;
        0 0.000000 0.000000   165:}
        0 0.000000 0.000000   166:
        0 0.000000 0.000000   167:
        0 0.000000 0.000000   168:=head1 FORMATS
            ================ SmallProf version 0.9 ================
                     Profile of ../Perlbug/Object/User.pm              Page 232
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   169:
        0 0.000000 0.000000   170:
        0 0.000000 0.000000   171:
        0 0.000000 0.000000   172:
        0 0.000000 0.000000   173:
        0 0.000000 0.000000   174:
        0 0.000000 0.000000   175:
        0 0.000000 0.000000   176:
        0 0.000000 0.000000   177:
        0 0.000000 0.000000   178:
        0 0.000000 0.000000   179:
        0 0.000000 0.000000   180:
        0 0.000000 0.000000   181:sub FORMAT_l { #
        0 0.000000 0.000000   182: my $self = shift;
        0 0.000000 0.000000   183: my $x = shift; #
        0 0.000000 0.000000   184: my @args = (
        0 0.000000 0.000000   185:  $$x{'userid'},   $$x{'active'},
        0 0.000000 0.000000   186:  $$x{'bug_count'},  $$x{'group_count'},
        0 0.000000 0.000000   187:  $$x{'address'},
        0 0.000000 0.000000   188: );
        0 0.000000 0.000000   189: my $top = qq|
        0 0.000000 0.000000   190:User ID    Active Bugs  Groups Address |;
        0 0.000000 0.000000   191: my $format = qq|
        0 0.000000 0.000000   192:@<<<<<<<<  @<<<<  @<<<  @<<<
        0 0.000000 0.000000   193:|;
        0 0.000000 0.000000   194: return ($top, $format, @args);
        0 0.000000 0.000000   195:}
        0 0.000000 0.000000   196:
        0 0.000000 0.000000   197:
        0 0.000000 0.000000   198:=item FORMAT_a
        0 0.000000 0.000000   199:
        0 0.000000 0.000000   200:
        0 0.000000 0.000000   201:
        0 0.000000 0.000000   202:
        0 0.000000 0.000000   203:
        0 0.000000 0.000000   204:
        0 0.000000 0.000000   205:
        0 0.000000 0.000000   206:sub FORMAT_a { #
        0 0.000000 0.000000   207: my $self = shift;
        0 0.000000 0.000000   208: my $x = shift; #
        0 0.000000 0.000000   209: my @args = (
        0 0.000000 0.000000   210:  $$x{'userid'},   $$x{'active'},
        0 0.000000 0.000000   211:  $$x{'bug_count'},  $$x{'group_count'},
        0 0.000000 0.000000   212:  $$x{'name'},
        0 0.000000 0.000000   213:  $$x{'created'},  $$x{'address'},
        0 0.000000 0.000000   214:  $$x{'group_ids'},
        0 0.000000 0.000000   215: );
        0 0.000000 0.000000   216: my $top = qq|
        0 0.000000 0.000000   217:User ID    Active Bugs  Groups    Name
        0 0.000000 0.000000   218:---------------------------------------------
        0 0.000000 0.000000   219: my $format = qq|
        0 0.000000 0.000000   220:@<<<<<<<<  @<<<<  @<<<  @<<<
        0 0.000000 0.000000   221:Created:   @<<<<<<<<<<<<<<<<<<<<
        0 0.000000 0.000000   222:Groups:
        0 0.000000 0.000000   223:|;
        0 0.000000 0.000000   224: return ($top, $format, @args);
            ================ SmallProf version 0.9 ================
                     Profile of ../Perlbug/Object/User.pm              Page 233
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   225:}
        0 0.000000 0.000000   226:
        0 0.000000 0.000000   227:
        0 0.000000 0.000000   228:=item FORMAT_A
        0 0.000000 0.000000   229:
        0 0.000000 0.000000   230:
        0 0.000000 0.000000   231:
        0 0.000000 0.000000   232:
        0 0.000000 0.000000   233:
        0 0.000000 0.000000   234:
        0 0.000000 0.000000   235:
        0 0.000000 0.000000   236:sub FORMAT_A {
        0 0.000000 0.000000   237: my $self = shift;
        0 0.000000 0.000000   238: my $x = shift; #
        0 0.000000 0.000000   239: my @args = (
        0 0.000000 0.000000   240:  $$x{'userid'},   $$x{'active'},
        0 0.000000 0.000000   241:  $$x{'bug_count'},  $$x{'group_count'},
        0 0.000000 0.000000   242:  $$x{'name'},
        0 0.000000 0.000000   243:  $$x{'created'},  $$x{'address'},
        0 0.000000 0.000000   244:  $$x{'group_ids'},
        0 0.000000 0.000000   245:  $$x{'password'}, $$x{'match_address'},
        0 0.000000 0.000000   246:  $$x{'bug_ids'},
        0 0.000000 0.000000   247: );
        0 0.000000 0.000000   248: my $top = qq|
        0 0.000000 0.000000   249:User ID    Active Bugs  Groups    Name
        0 0.000000 0.000000   250:---------------------------------------------
        0 0.000000 0.000000   251: my $format = qq|
        0 0.000000 0.000000   252:@<<<<<<<<  @<<<<  @<<<  @<<<
        0 0.000000 0.000000   253:Created:   @<<<<<<<<<<<<<<<<<<<
        0 0.000000 0.000000   254:Groups:
        0 0.000000 0.000000   255:@<<<<<<<<<<<<<<<<<<<<<
        0 0.000000 0.000000   256:@*
        0 0.000000 0.000000   257:|;
        0 0.000000 0.000000   258: return ($top, $format, @args);
        0 0.000000 0.000000   259:}
        0 0.000000 0.000000   260:
        0 0.000000 0.000000   261:
        0 0.000000 0.000000   262:=item FORMAT_L
        0 0.000000 0.000000   263:
        0 0.000000 0.000000   264:
        0 0.000000 0.000000   265:
        0 0.000000 0.000000   266:
        0 0.000000 0.000000   267:
        0 0.000000 0.000000   268:
        0 0.000000 0.000000   269:
        0 0.000000 0.000000   270:sub FORMAT_L {
        0 0.000000 0.000000   271: my $self = shift;
        0 0.000000 0.000000   272: return $self->FORMAT_h(@_); # rjsf temp
        0 0.000000 0.000000   273:}
        0 0.000000 0.000000   274:
        0 0.000000 0.000000   275:
        0 0.000000 0.000000   276:=item FORMAT_h
        0 0.000000 0.000000   277:
        0 0.000000 0.000000   278:
        0 0.000000 0.000000   279:
        0 0.000000 0.000000   280:
            ================ SmallProf version 0.9 ================
                     Profile of ../Perlbug/Object/User.pm              Page 234
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   281:
        0 0.000000 0.000000   282:
        0 0.000000 0.000000   283:
        0 0.000000 0.000000   284:sub FORMAT_h { #
        0 0.000000 0.000000   285: my $self = shift;
        0 0.000000 0.000000   286: my $x    = shift; #
        0 0.000000 0.000000   287: my @args = (
        0 0.000000 0.000000   288:  $$x{'select'},
        0 0.000000 0.000000   289:  $$x{'name'},   $$x{'active'},
        0 0.000000 0.000000   290:  $$x{'bug_count'},   $$x{'address'},
        0 0.000000 0.000000   291:  $$x{'password'}, $$x{'match_address'},
        0 0.000000 0.000000   292:  $$x{'group_names'},
        0 0.000000 0.000000   293: );
        0 0.000000 0.000000   294: my $top = qq|<tr>
        0 0.000000 0.000000   295:<td width=35><b>&nbsp;</b></td>
        0 0.000000 0.000000   296:<td width=35><b>Name</b></td>
        0 0.000000 0.000000   297:<td width=15><b>Active?</b></td>
        0 0.000000 0.000000   298:<td><b>Bugs</b></td>
        0 0.000000 0.000000   299:<td><b>Address</b></td>
        0 0.000000 0.000000   300:<td><b>Password</b></td>
        0 0.000000 0.000000   301:<td><b>Match Address</b></td>
        0 0.000000 0.000000   302:<td><b>Groups</b></td>
        0 0.000000 0.000000   303:</tr>
        0 0.000000 0.000000   304:|;
        0 0.000000 0.000000   305: my $format =
        0 0.000000 0.000000   306: return ($top, $format, @args);
        0 0.000000 0.000000   307:}
        0 0.000000 0.000000   308:
        0 0.000000 0.000000   309:
        0 0.000000 0.000000   310:=item FORMAT_H
        0 0.000000 0.000000   311:
        0 0.000000 0.000000   312:
        0 0.000000 0.000000   313:
        0 0.000000 0.000000   314:
        0 0.000000 0.000000   315:
        0 0.000000 0.000000   316:
        0 0.000000 0.000000   317:
        0 0.000000 0.000000   318:sub FORMAT_H {
        0 0.000000 0.000000   319: my $self = shift;
        0 0.000000 0.000000   320: # my $x = shift;
        0 0.000000 0.000000   321: my ($top, $format, @args) = $self-
        0 0.000000 0.000000   322: # $format .= "<tr><td><b>Bug
        0 0.000000 0.000000   323: return ($top, $format, @args);
        0 0.000000 0.000000   324:}
        0 0.000000 0.000000   325:
        0 0.000000 0.000000   326:
        0 0.000000 0.000000   327:=head1 AUTHOR
        0 0.000000 0.000000   328:
        0 0.000000 0.000000   329:
        0 0.000000 0.000000   330:
        0 0.000000 0.000000   331:
        0 0.000000 0.000000   332:
        0 0.000000 0.000000   333:
        0 0.000000 0.000000   334:#
        1 0.000070 0.000000   335:1;
        0 0.000000 0.000000   336:
            ================ SmallProf version 0.9 ================
                    Profile of ../Perlbug/Object/Version.pm            Page 235
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000     1:# Perlbug bug record handler
        0 0.000000 0.000000     2:# (C) 1999 Richard Foley RFI perlbug@rfi.net
        0 0.000000 0.000000     3:# $Id: Version.pm,v 1.10 2001/04/21 20:48:48
        0 0.000000 0.000000     4:#
        0 0.000000 0.000000     5:
        0 0.000000 0.000000     6:=head1 NAME
        0 0.000000 0.000000     7:
        0 0.000000 0.000000     8:
        0 0.000000 0.000000     9:
        0 0.000000 0.000000    10:
        0 0.000000 0.000000    11:
        0 0.000000 0.000000    12:package Perlbug::Object::Version;
        3 0.000096 0.000000    13:use strict;
        3 0.000098 0.000000    14:use vars qw($VERSION @ISA);
        3 0.000069 0.000000    15:$VERSION = do { my @r = (q$Revision: 1.10 $
        1 0.000009 0.000000    16:my $DEBUG =
        1 0.000005 0.000000    17:$|=1;
        0 0.000000 0.000000    18:
        0 0.000000 0.000000    19:
        0 0.000000 0.000000    20:=head1 DESCRIPTION
        0 0.000000 0.000000    21:
        0 0.000000 0.000000    22:
        0 0.000000 0.000000    23:
        0 0.000000 0.000000    24:
        0 0.000000 0.000000    25:
        0 0.000000 0.000000    26:
        0 0.000000 0.000000    27:
        3 0.000111 0.000000    28:use Data::Dumper;
        3 0.000160 0.000000    29:use Perlbug::Base;
        3 0.000920 0.000000    30:use Perlbug::Object;
        1 0.000011 0.000000    31:@ISA = qw(Perlbug::Object);
        0 0.000000 0.000000    32:
        0 0.000000 0.000000    33:
        0 0.000000 0.000000    34:=head1 SYNOPSIS
        0 0.000000 0.000000    35:
        0 0.000000 0.000000    36:
        0 0.000000 0.000000    37:
        0 0.000000 0.000000    38:
        0 0.000000 0.000000    39:
        0 0.000000 0.000000    40:
        0 0.000000 0.000000    41:
        0 0.000000 0.000000    42:
        0 0.000000 0.000000    43:
        0 0.000000 0.000000    44:
        0 0.000000 0.000000    45:
        0 0.000000 0.000000    46:
        0 0.000000 0.000000    47:
        0 0.000000 0.000000    48:
        0 0.000000 0.000000    49:
        0 0.000000 0.000000    50:
        0 0.000000 0.000000    51:
        0 0.000000 0.000000    52:
        2 0.000000 0.000000    53:sub new {
        2 0.000012 0.000000    54:    my $proto = shift;
        2 0.000010 0.000000    55:    my $class = ref($proto) || $proto;
        2 0.000012 0.000000    56: my $o_base = (ref($_[0])) ? shift :
            ================ SmallProf version 0.9 ================
                    Profile of ../Perlbug/Object/Version.pm            Page 236
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000    57:
        2 0.000197 0.000000    58: my $self = Perlbug::Object->new( $o_base,
        0 0.000000 0.000000    59:  'name'  => 'Version',
        0 0.000000 0.000000    60:  'from'  => [qw(bug patch test)],
        0 0.000000 0.000000    61:  'to'  => [],
        0 0.000000 0.000000    62:  'type'  => 'prejudicial',
        0 0.000000 0.000000    63:  @_,
        0 0.000000 0.000000    64: );
        0 0.000000 0.000000    65:
        2 0.000017 0.000000    66: $DEBUG = $Perlbug::DEBUG || $DEBUG;
        0 0.000000 0.000000    67:
        2 0.000094 0.000000    68: bless($self, $class);
        0 0.000000 0.000000    69:}
        0 0.000000 0.000000    70:
        0 0.000000 0.000000    71:
        0 0.000000 0.000000    72:=head1 AUTHOR
        0 0.000000 0.000000    73:
        0 0.000000 0.000000    74:
        0 0.000000 0.000000    75:
        0 0.000000 0.000000    76:
        0 0.000000 0.000000    77:
        0 0.000000 0.000000    78:
        0 0.000000 0.000000    79:#
        1 0.000062 0.000000    80:1;
        0 0.000000 0.000000    81:
            ================ SmallProf version 0.9 ================
                       Profile of ../Perlbug/Relation.pm               Page 237
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000     1:# Perlbug bug record handler
        0 0.000000 0.000000     2:# (C) 1999 Richard Foley RFI perlbug@rfi.net
        0 0.000000 0.000000     3:# $Id: Relation.pm,v 1.27 2001/04/21 20:48:48
        0 0.000000 0.000000     4:#
        0 0.000000 0.000000     5:
        0 0.000000 0.000000     6:=head1 NAME
        0 0.000000 0.000000     7:
        0 0.000000 0.000000     8:
        0 0.000000 0.000000     9:
        0 0.000000 0.000000    10:
        0 0.000000 0.000000    11:
        0 0.000000 0.000000    12:package Perlbug::Relation;
        0 0.000000 0.000000    13:use strict;
        0 0.000000 0.000000    14:use vars(qw($VERSION @ISA));
        0 0.000000 0.000000    15:@ISA = qw(Perlbug::Object);
        0 0.000000 0.000000    16:$VERSION = do { my @r = (q$Revision: 1.27 $
        0 0.000000 0.000000    17:my $DEBUG = $ENV{'Perlbug_Relation_DEBUG'} ||
        0 0.000000 0.000000    18:$|=1;
        0 0.000000 0.000000    19:
        0 0.000000 0.000000    20:=head1 DESCRIPTION
        0 0.000000 0.000000    21:
        0 0.000000 0.000000    22:
        0 0.000000 0.000000    23:
        0 0.000000 0.000000    24:
        0 0.000000 0.000000    25:
        0 0.000000 0.000000    26:
        0 0.000000 0.000000    27:
        0 0.000000 0.000000    28:
        0 0.000000 0.000000    29:
        0 0.000000 0.000000    30:use Data::Dumper;
        0 0.000000 0.000000    31:use Perlbug::Base;
        0 0.000000 0.000000    32:use Perlbug::Object;
        0 0.000000 0.000000    33:
        0 0.000000 0.000000    34:
        0 0.000000 0.000000    35:=head1 SYNOPSIS
        0 0.000000 0.000000    36:
        0 0.000000 0.000000    37:
        0 0.000000 0.000000    38:
        0 0.000000 0.000000    39:
        0 0.000000 0.000000    40:
        0 0.000000 0.000000    41:
        0 0.000000 0.000000    42:
        0 0.000000 0.000000    43:
        0 0.000000 0.000000    44:
        0 0.000000 0.000000    45:
        0 0.000000 0.000000    46:
        0 0.000000 0.000000    47:
        0 0.000000 0.000000    48:
        0 0.000000 0.000000    49:
        0 0.000000 0.000000    50:
        0 0.000000 0.000000    51:
        0 0.000000 0.000000    52:
        0 0.000000 0.000000    53:
        0 0.000000 0.000000    54:
        0 0.000000 0.000000    55:
        0 0.000000 0.000000    56:
            ================ SmallProf version 0.9 ================
                       Profile of ../Perlbug/Relation.pm               Page 238
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000    57:
        0 0.000000 0.000000    58:
        0 0.000000 0.000000    59:
        0 0.000000 0.000000    60:
        0 0.000000 0.000000    61:
        0 0.000000 0.000000    62:
        0 0.000000 0.000000    63:
        0 0.000000 0.000000    64:
        0 0.000000 0.000000    65:
        0 0.000000 0.000000    66:
        0 0.000000 0.000000    67:
        0 0.000000 0.000000    68:
        0 0.000000 0.000000    69:
       19 0.000000 0.000000    70:sub new {
       19 0.000111 0.000000    71:    my $proto = shift;
       19 0.000100 0.000000    72:    my $class = ref($proto) || $proto;
       19 0.000306 0.000000    73: my $o_Perlbug_Base =
        0 0.000000 0.000000    74:  (ref($_[0]) =~
        0 0.000000 0.000000    75:  ? shift
        0 0.000000 0.000000    76:  : Perlbug::Base->new; # yek, but...
        0 0.000000 0.000000    77:
       19 0.000088 0.000000    78: my $src    = shift;
       19 0.000091 0.000000    79: my $tgt    = shift;
       19 0.000082 0.000000    80: my $type   = shift || 'to';
       19 0.000262 0.000000    81: ($src, $tgt) = ($type eq 'from') ? ($tgt,
        0 0.000000 0.000000    82:
       19 0.000111 0.000000    83: $DEBUG = $Perlbug::DEBUG || $DEBUG;
        0 0.000000 0.000000    84:
       19 0.001375 0.000000    85: my $o_src = (ref($src)) ? $src :
       19 0.001436 0.000000    86: my $s_key = $o_src->attr('key');
        0 0.000000 0.000000    87:
       19 0.001410 0.000000    88: my $o_tgt = (ref($tgt)) ? $tgt :
       19 0.000129 0.000000    89: my $hint = $src.'_x_'.$tgt;
       19 0.001591 0.000000    90: my $t_key = lc(($hint =~ /(parent|child)/i)
        0 0.000000 0.000000    91:
        0 0.000000 0.000000    92: # $self->check($o_src, $o_tgt);
       19 0.000383 0.010000    93: my $table = 'pb_'.join('_', sort($s_key,
       19 0.001800 0.010000    94: my $self = Perlbug::Object->new(
        0 0.000000 0.000000    95:  'hint'   => $hint,     # bug->child|parent
        0 0.000000 0.000000    96:  'key'   => $s_key.'->'.$t_key,  # bug-
        0 0.000000 0.000000    97:  'match_oid'  => $o_src->attr('match_oid'),
        0 0.000000 0.000000    98:  'name'    => ucfirst($s_key),
        0 0.000000 0.000000    99:  # 'table'     => 'pb_'.$s_key.'_'.$t_key, #
        0 0.000000 0.000000   100:  'table'     => $table,     # pb_bug_patch |
        0 0.000000 0.000000   101:  'type'   => $type,     # from|to
        0 0.000000 0.000000   102: );
       19 0.000219 0.000000   103: $self->{'_attribute'}{'source'} = $s_key;  #
       19 0.000187 0.000000   104: $self->{'_attribute'}{'target'} = $t_key;  #
        0 0.000000 0.000000   105:
       19 0.000257 0.000000   106: bless($self, $class);
        0 0.000000 0.000000   107:
       19 0.001537 0.010000   108: $table = $self->attr('table');
       19 0.002277 0.000000   109: $self->debug(4, "rjsf: Relation::new($type)
        0 0.000000 0.000000   110:  sprintf('%-15s', $o_src).") & tgt($tgt)\t->
        0 0.000000 0.000000   111:  sprintf('%-15s', $o_tgt)." table($table)"
        0 0.000000 0.000000   112: ) if $DEBUG;
            ================ SmallProf version 0.9 ================
                       Profile of ../Perlbug/Relation.pm               Page 239
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   113:
       19 0.001368 0.000000   114: $self->source($o_src);
       19 0.001432 0.000000   115: $self->target($o_tgt);
       19 0.001409 0.000000   116: $self->check();
        0 0.000000 0.000000   117:
       19 0.000312 0.000000   118: return $self;
        0 0.000000 0.000000   119:}
        0 0.000000 0.000000   120:
        0 0.000000 0.000000   121:
        0 0.000000 0.000000   122:=item source
        0 0.000000 0.000000   123:
        0 0.000000 0.000000   124:
        0 0.000000 0.000000   125:
        0 0.000000 0.000000   126:
        0 0.000000 0.000000   127:
        0 0.000000 0.000000   128:
        0 0.000000 0.000000   129:
     1122 0.000000 0.000000   130:sub source {
     1122 0.006708 0.040000   131: my $self  = shift;
     1122 0.003412 0.020000   132: my $o_src = shift;
     1122 0.077092 0.090000   133: my $key   = lc(shift || $self-
        0 0.000000 0.000000   134:
     1122 0.098328 0.090000   135: my $o_obj = $self->object($key, $o_src);
        0 0.000000 0.000000   136:
     1122 0.069054 0.060000   137: return $o_obj;
        0 0.000000 0.000000   138:}
        0 0.000000 0.000000   139:
        0 0.000000 0.000000   140:
        0 0.000000 0.000000   141:=item target
        0 0.000000 0.000000   142:
        0 0.000000 0.000000   143:
        0 0.000000 0.000000   144:
        0 0.000000 0.000000   145:
        0 0.000000 0.000000   146:
        0 0.000000 0.000000   147:
        0 0.000000 0.000000   148:
     1122 0.000000 0.000000   149:sub target {
     1122 0.005581 0.000000   150: my $self  = shift;
     1122 0.018218 0.000000   151: my $o_tgt = shift;
     1122 0.085474 0.110000   152: my $key   = lc(shift || $self-
        0 0.000000 0.000000   153:
     1122 0.088173 0.070000   154: my $o_obj = $self->object($key, $o_tgt);
        0 0.000000 0.000000   155:
     1122 0.055383 0.030000   156: return $o_obj;
        0 0.000000 0.000000   157:}
        0 0.000000 0.000000   158:
        0 0.000000 0.000000   159:
        0 0.000000 0.000000   160:=item check
        0 0.000000 0.000000   161:
        0 0.000000 0.000000   162:
        0 0.000000 0.000000   163:
        0 0.000000 0.000000   164:
        0 0.000000 0.000000   165:
        0 0.000000 0.000000   166:
        0 0.000000 0.000000   167:
      191 0.000000 0.000000   168:sub check {
            ================ SmallProf version 0.9 ================
                       Profile of ../Perlbug/Relation.pm               Page 240
       =================================================================
    count wall tm  cpu time line
      191 0.000960 0.000000   169: my $self = shift;
      191 0.013734 0.030000   170: my $o_src = shift || $self->source;
      191 0.015329 0.030000   171: my $o_tgt = shift || $self->target;
      191 0.000554 0.000000   172: my $i_ok  = 1;
        0 0.000000 0.000000   173:
      191 0.015300 0.030000   174: my $hint = $self->attr('hint');
      191 0.014036 0.000000   175: my $name = $self->attr('name');
      191 0.013670 0.010000   176: my $table= $self->attr('table');
        0 0.000000 0.000000   177:
      191 0.014419 0.010000   178: my $src = $o_src->key;
      382 0.014329 0.030000   179: my @src_from = @{$o_src->attr('from')};
      382 0.014115 0.020000   180: my @src_to = @{$o_src->attr('to')};
        0 0.000000 0.000000   181:
      191 0.013812 0.010000   182: my $tgt = $o_tgt->key;
      382 0.014230 0.010000   183: my @tgt_from = @{$o_tgt->attr('from')};
      382 0.015707 0.030000   184: my @tgt_to   = @{$o_tgt->attr('to')};
        0 0.000000 0.000000   185:
        0 0.000000 0.000000   186: # $src = 'parent' if $o_src =~ /parent/i;
        0 0.000000 0.000000   187: # $tgt = 'child'  if $o_tgt =~ /child/i;
        0 0.000000 0.000000   188:
      191 0.013695 0.030000   189: my $data = qq|$self $hint $name $table
        0 0.000000 0.000000   190: Src($src) $o_src
        0 0.000000 0.000000   191:  from(@src_from)
        0 0.000000 0.000000   192:  to(@src_to)
        0 0.000000 0.000000   193: Tgt($tgt) $o_tgt
        0 0.000000 0.000000   194:  from(@tgt_from)
        0 0.000000 0.000000   195:  to(@tgt_to)
        0 0.000000 0.000000   196: \n|;
        0 0.000000 0.000000   197:
        0 0.000000 0.000000   198: # VET
      191 0.002553 0.010000   199: unless ($hint =~ /(parent|child)/i) {
      169 0.001108 0.010000   200:  if (lc($src) eq lc($tgt)) {
        0 0.000000 0.000000   201:   $self->debug(0, "Source(".ref($o_src).")
        0 0.000000 0.000000   202:   print "x: src($src) eq tgt($tgt) $data\n"
        0 0.000000 0.000000   203:   $i_ok = 0;
        0 0.000000 0.000000   204:  }
      169 0.011587 0.000000   205:  if (!(grep(/^$tgt$/, @src_to, @src_from)))
        0 0.000000 0.000000   206:   $self->debug(0, "Source(".ref($o_src).")
        0 0.000000 0.000000   207:   print "x: tgt($tgt) not in src(@src_to
        0 0.000000 0.000000   208:   $i_ok = 0;
        0 0.000000 0.000000   209:  }
      169 0.003727 0.010000   210:  if (!(grep(/^$src$/, @tgt_to, @tgt_from)))
        0 0.000000 0.000000   211:   $self->debug(0, "Target(".ref($o_tgt).")
        0 0.000000 0.000000   212:   print "x: src($src) not in tgt(@tgt_to
        0 0.000000 0.000000   213:   $i_ok = 0;
        0 0.000000 0.000000   214:  }
        0 0.000000 0.000000   215: }
        0 0.000000 0.000000   216: # print "check done($i_ok)\n" if $0 =~
        0 0.000000 0.000000   217:
      191 0.004190 0.000000   218: return $i_ok;
        0 0.000000 0.000000   219:}
        0 0.000000 0.000000   220:
        0 0.000000 0.000000   221:
        0 0.000000 0.000000   222:=item set_source
        0 0.000000 0.000000   223:
        0 0.000000 0.000000   224:
            ================ SmallProf version 0.9 ================
                       Profile of ../Perlbug/Relation.pm               Page 241
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   225:
        0 0.000000 0.000000   226:
        0 0.000000 0.000000   227:
        0 0.000000 0.000000   228:
        0 0.000000 0.000000   229:
        0 0.000000 0.000000   230:
        0 0.000000 0.000000   231:
        0 0.000000 0.000000   232:
        0 0.000000 0.000000   233:
        0 0.000000 0.000000   234:
        0 0.000000 0.000000   235:
        0 0.000000 0.000000   236:
        0 0.000000 0.000000   237:
        0 0.000000 0.000000   238:
        0 0.000000 0.000000   239:
        0 0.000000 0.000000   240:
        0 0.000000 0.000000   241:
      172 0.000000 0.000000   242:sub set_source {
      172 0.000935 0.000000   243: my $self  = shift;
      172 0.001174 0.000000   244: my $key = lc(shift);
      172 0.000746 0.000000   245: my $oid = shift || '';
        0 0.000000 0.000000   246:
      172 0.011907 0.020000   247: my ($o_src, $o_tgt) = ($self->source, $self-
      172 0.013242 0.020000   248: my ($s_key, $t_key) = ($o_src->key, $o_tgt-
      172 0.012393 0.000000   249: my $type = ($self->attr('type') eq 'from') ?
      172 0.001957 0.010000   250: if ($key =~ /\w+/ && $key eq $t_key) { #
       26 0.002367 0.010000   251:  $self->attr({
        0 0.000000 0.000000   252:   'type'   => $type, #
        0 0.000000 0.000000   253:   'source' => $t_key,
        0 0.000000 0.000000   254:   'target' => $s_key
        0 0.000000 0.000000   255:  }); #
       26 0.002084 0.000000   256:  $self->source($o_tgt, $t_key);
       26 0.001861 0.000000   257:  $self->target($o_src, $s_key);
       26 0.001802 0.000000   258:  $o_src = $self->source;
       26 0.005653 0.000000   259:  $o_tgt = $self->target;
        0 0.000000 0.000000   260: }
      172 0.012364 0.010000   261: $o_src->oid($oid) if $oid;
        0 0.000000 0.000000   262:
      172 0.013295 0.000000   263: $self->check();
      172 0.020416 0.020000   264: $self->debug(3, qq|key($key) oid($oid)
        0 0.000000 0.000000   265:  src($s_key)\t-> o_src($o_src)
        0 0.000000 0.000000   266:  tgt($t_key)\t-> o_tgt($o_tgt)
        0 0.000000 0.000000   267: |) if $DEBUG;
        0 0.000000 0.000000   268:
      172 0.002703 0.010000   269: return $self;
        0 0.000000 0.000000   270:}
        0 0.000000 0.000000   271:
        0 0.000000 0.000000   272:
        0 0.000000 0.000000   273:=item key
        0 0.000000 0.000000   274:
        0 0.000000 0.000000   275:
        0 0.000000 0.000000   276:
        0 0.000000 0.000000   277:
        0 0.000000 0.000000   278:
        0 0.000000 0.000000   279:
        0 0.000000 0.000000   280:
            ================ SmallProf version 0.9 ================
                       Profile of ../Perlbug/Relation.pm               Page 242
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   281:
        0 0.000000 0.000000   282:
      688 0.000000 0.000000   283:sub key {
      688 0.003221 0.010000   284: my $self = shift;
      688 0.004641 0.020000   285: my $type = shift || 'source';
        0 0.000000 0.000000   286:
      688 0.046952 0.070000   287: my $res = lc($self->$type()->key).'id';
        0 0.000000 0.000000   288:
      688 0.008185 0.010000   289: return $res;
        0 0.000000 0.000000   290:}
        0 0.000000 0.000000   291:
        0 0.000000 0.000000   292:
        0 0.000000 0.000000   293:=item oid
        0 0.000000 0.000000   294:
        0 0.000000 0.000000   295:
        0 0.000000 0.000000   296:
        0 0.000000 0.000000   297:
        0 0.000000 0.000000   298:
        0 0.000000 0.000000   299:
        0 0.000000 0.000000   300:
      172 0.000000 0.000000   301:sub oid { # ?
      172 0.000865 0.000000   302: my $self = shift;
      172 0.000719 0.000000   303: my $in  = shift;
        0 0.000000 0.000000   304:
      172 0.011581 0.000000   305: my ($o_src, $s_key) = ($self->source, $self-
      172 0.013394 0.010000   306: my ($o_tgt, $t_key) = ($self->target, $self-
        0 0.000000 0.000000   307:
      172 0.000453 0.000000   308: if (defined($in)) {
        0 0.000000 0.000000   309:  my $src = $self->source->oid($in);
        0 0.000000 0.000000   310:  $self->attr({'objectid' => $in});
        0 0.000000 0.000000   311:  $self->data({ $s_key => $in });
        0 0.000000 0.000000   312: }
      172 0.013625 0.020000   313: my $oid = $self->attr('objectid');
        0 0.000000 0.000000   314: # my $oid = $self->SUPER::oid($src);
        0 0.000000 0.000000   315:
      172 0.008010 0.010000   316: return $oid;
        0 0.000000 0.000000   317:}
        0 0.000000 0.000000   318:
        0 0.000000 0.000000   319:
        0 0.000000 0.000000   320:=item ids
        0 0.000000 0.000000   321:
        0 0.000000 0.000000   322:
        0 0.000000 0.000000   323:
        0 0.000000 0.000000   324:
        0 0.000000 0.000000   325:
        0 0.000000 0.000000   326:
        0 0.000000 0.000000   327:
        0 0.000000 0.000000   328:
        0 0.000000 0.000000   329:
        0 0.000000 0.000000   330:
        0 0.000000 0.000000   331:
      172 0.000000 0.000000   332:sub ids { # class
      172 0.000845 0.000000   333: my $self = shift;
      172 0.000905 0.000000   334: my $input = shift || '';
      172 0.001068 0.010000   335: my $extra = shift || '';
        0 0.000000 0.000000   336:
            ================ SmallProf version 0.9 ================
                       Profile of ../Perlbug/Relation.pm               Page 243
       =================================================================
    count wall tm  cpu time line
      172 0.011821 0.030000   337: my ($o_src, $s_key) = ($self->source, $self-
      172 0.014688 0.020000   338: my ($o_tgt, $t_key) = ($self->target, $self-
        0 0.000000 0.000000   339:
      172 0.013504 0.020000   340: my $sql = "SELECT DISTINCT $t_key FROM
      172 0.000835 0.000000   341: if (ref($input)) {    # OBJECT with ids,
      170 0.013104 0.020000   342:  $sql .= ' WHERE '.$input->key."id =
      170 0.001185 0.010000   343:  $sql .= " AND $extra" if $extra;
        2 0.000012 0.000000   344: } elsif ($input =~ /\w+/) {  # SQL where
        1 0.000007 0.000000   345:  $input =~ s/^\s*WHERE\s*//i;
        1 0.000011 0.000000   346:  $sql  .= " WHERE $input";
        0 0.000000 0.000000   347: } # else = all
        0 0.000000 0.000000   348:
      172 0.020604 0.050000   349: my @ids = $self->base->get_list($sql);
        0 0.000000 0.000000   350:
      172 0.008898 0.000000   351: return @ids;
        0 0.000000 0.000000   352:}
        0 0.000000 0.000000   353:
        0 0.000000 0.000000   354:
        0 0.000000 0.000000   355:=item reset
        0 0.000000 0.000000   356:
        0 0.000000 0.000000   357:
        0 0.000000 0.000000   358:
        0 0.000000 0.000000   359:
        0 0.000000 0.000000   360:
        0 0.000000 0.000000   361:
        0 0.000000 0.000000   362:
        0 0.000000 0.000000   363:sub reset {
        0 0.000000 0.000000   364: my $self = shift;
        0 0.000000 0.000000   365: my $oid = shift || $self->oid;
        0 0.000000 0.000000   366:
        0 0.000000 0.000000   367: $self->SUPER::reset($oid);
        0 0.000000 0.000000   368: $self->ASSIGNED(0);
        0 0.000000 0.000000   369:
        0 0.000000 0.000000   370: $self;
        0 0.000000 0.000000   371:}
        0 0.000000 0.000000   372:
        0 0.000000 0.000000   373:
        0 0.000000 0.000000   374:sub prep {
        0 0.000000 0.000000   375: my $self = shift;
        0 0.000000 0.000000   376: my $sql = $self->SUPER::prep(@_);
        0 0.000000 0.000000   377:
        0 0.000000 0.000000   378: $self->error("NULL's not allowed in
        0 0.000000 0.000000   379:
        0 0.000000 0.000000   380: # useless query while patchid=3, addressid=3
        0 0.000000 0.000000   381: # $self->error("Duplicate ids? 1($1) 2($2):
        0 0.000000 0.000000   382: # if $sql =~ /(\w+)id\s*=\s*\'*([^\'])\'*/
        0 0.000000 0.000000   383:
        0 0.000000 0.000000   384: return $sql;
        0 0.000000 0.000000   385:}
        0 0.000000 0.000000   386:
        0 0.000000 0.000000   387:
        0 0.000000 0.000000   388:sub track { # do nothing (wasteful)
        0 0.000000 0.000000   389: my $self = shift;
        0 0.000000 0.000000   390:
        0 0.000000 0.000000   391: $self->TRACKED(1);
        0 0.000000 0.000000   392:
            ================ SmallProf version 0.9 ================
                       Profile of ../Perlbug/Relation.pm               Page 244
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   393: return $self;
        0 0.000000 0.000000   394:}
        0 0.000000 0.000000   395:
        0 0.000000 0.000000   396:
        0 0.000000 0.000000   397:=head1 RECORDS
        0 0.000000 0.000000   398:
        0 0.000000 0.000000   399:
        0 0.000000 0.000000   400:
        0 0.000000 0.000000   401:
        0 0.000000 0.000000   402:
        0 0.000000 0.000000   403:
        0 0.000000 0.000000   404:
        0 0.000000 0.000000   405:
        0 0.000000 0.000000   406:
        0 0.000000 0.000000   407:
        0 0.000000 0.000000   408:
        0 0.000000 0.000000   409:
        0 0.000000 0.000000   410:
        0 0.000000 0.000000   411:
        0 0.000000 0.000000   412:sub assign {
        0 0.000000 0.000000   413: my $self = shift;
        0 0.000000 0.000000   414: my $a_input = shift;
        0 0.000000 0.000000   415:
        0 0.000000 0.000000   416: if (!ref($a_input)) {
        0 0.000000 0.000000   417:  $self->error("no input ids given to
        0 0.000000 0.000000   418: } else {
        0 0.000000 0.000000   419:  my @given = @{$a_input};
        0 0.000000 0.000000   420:
        0 0.000000 0.000000   421:  my ($o_src, $s_key) = ($self->source,
        0 0.000000 0.000000   422:  my ($o_tgt, $t_key) = ($self->target,
        0 0.000000 0.000000   423:
        0 0.000000 0.000000   424:  my @ids = $o_tgt->exists($a_input);
        0 0.000000 0.000000   425:  my $oid = $o_src->oid;
        0 0.000000 0.000000   426:  if (!$o_src->exists([$oid])) { # rjsf -
        0 0.000000 0.000000   427:   $self->error("has no source valid
        0 0.000000 0.000000   428:  } else {
        0 0.000000 0.000000   429:   my $ids = join("', '", @ids);
        0 0.000000 0.000000   430:   $self->debug(3, "working with ids(@ids)")
        0 0.000000 0.000000   431:   foreach my $id (@ids) {
        0 0.000000 0.000000   432:    $self->oid($oid);
        0 0.000000 0.000000   433:    $self->data({ $t_key => $id, });
        0 0.000000 0.000000   434:    $self->create($self->_oref('data'),
        0 0.000000 0.000000   435:    if ($self->CREATED) {
        0 0.000000 0.000000   436:     $self->ASSIGNED(1);
        0 0.000000 0.000000   437:     $self->debug(2, "assigned: $s_key($oid)
        0 0.000000 0.000000   438:    }
        0 0.000000 0.000000   439:   }
        0 0.000000 0.000000   440:  }
        0 0.000000 0.000000   441: }
        0 0.000000 0.000000   442:
        0 0.000000 0.000000   443: return $self;
        0 0.000000 0.000000   444:}
        0 0.000000 0.000000   445:
        0 0.000000 0.000000   446:
        0 0.000000 0.000000   447:=item ASSIGNED
        0 0.000000 0.000000   448:
            ================ SmallProf version 0.9 ================
                       Profile of ../Perlbug/Relation.pm               Page 245
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   449:
        0 0.000000 0.000000   450:
        0 0.000000 0.000000   451:
        0 0.000000 0.000000   452:
        0 0.000000 0.000000   453:
        0 0.000000 0.000000   454:
        0 0.000000 0.000000   455:sub ASSIGNED {
        0 0.000000 0.000000   456: my $self = shift;
        0 0.000000 0.000000   457: my $i_flag = shift || '';
        0 0.000000 0.000000   458:
        0 0.000000 0.000000   459: $self->flag({'assigned', $1}) if $i_flag =~
        0 0.000000 0.000000   460:
        0 0.000000 0.000000   461: $i_flag = $self->flag('assigned');
        0 0.000000 0.000000   462:
        0 0.000000 0.000000   463:
        0 0.000000 0.000000   464: return $i_flag;
        0 0.000000 0.000000   465:}
        0 0.000000 0.000000   466:
        0 0.000000 0.000000   467:
        0 0.000000 0.000000   468:=item _assign
        0 0.000000 0.000000   469:
        0 0.000000 0.000000   470:
        0 0.000000 0.000000   471:
        0 0.000000 0.000000   472:
        0 0.000000 0.000000   473:
        0 0.000000 0.000000   474:
        0 0.000000 0.000000   475:
        0 0.000000 0.000000   476:sub _assign {
        0 0.000000 0.000000   477: my $self = shift;
        0 0.000000 0.000000   478: my $a_input = shift;
        0 0.000000 0.000000   479:
        0 0.000000 0.000000   480: if (!ref($a_input)) {
        0 0.000000 0.000000   481:  $self->error("no input names given to
        0 0.000000 0.000000   482: } else {
        0 0.000000 0.000000   483:  $self->create_target($a_input);
        0 0.000000 0.000000   484:  my @ids = $self->target->name2id($a_input);
        0 0.000000 0.000000   485:  $self->assign(\@ids);
        0 0.000000 0.000000   486: }
        0 0.000000 0.000000   487:
        0 0.000000 0.000000   488:
        0 0.000000 0.000000   489: return $self;
        0 0.000000 0.000000   490:}
        0 0.000000 0.000000   491:
        0 0.000000 0.000000   492:
        0 0.000000 0.000000   493:=item store
        0 0.000000 0.000000   494:
        0 0.000000 0.000000   495:
        0 0.000000 0.000000   496:
        0 0.000000 0.000000   497:
        0 0.000000 0.000000   498:
        0 0.000000 0.000000   499:
        0 0.000000 0.000000   500:
        0 0.000000 0.000000   501:
        0 0.000000 0.000000   502:
        0 0.000000 0.000000   503:
        0 0.000000 0.000000   504:
            ================ SmallProf version 0.9 ================
                       Profile of ../Perlbug/Relation.pm               Page 246
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   505:sub store {
        0 0.000000 0.000000   506: my $self = shift;
        0 0.000000 0.000000   507: my $a_input= shift || '';
        0 0.000000 0.000000   508:
        0 0.000000 0.000000   509: if (!ref($a_input)) {
        0 0.000000 0.000000   510:  $self->error("no input ids given to
        0 0.000000 0.000000   511: } else {
        0 0.000000 0.000000   512:  my @orig = @{$a_input};
        0 0.000000 0.000000   513:  my @IDS  = ();
        0 0.000000 0.000000   514:
        0 0.000000 0.000000   515:  my ($o_src, $s_key) = ($self->source,
        0 0.000000 0.000000   516:  my ($o_tgt, $t_key) = ($self->target,
        0 0.000000 0.000000   517:
        0 0.000000 0.000000   518:  my @ids = $o_tgt->exists($a_input);
        0 0.000000 0.000000   519:  my $ids = join("', '", @ids);
        0 0.000000 0.000000   520:  my $oid = $o_src->oid();
        0 0.000000 0.000000   521:
        0 0.000000 0.000000   522:  if (scalar($o_src->exists([$oid])) == 0) {
        0 0.000000 0.000000   523:   $self->error("has no source objectid($oid)
        0 0.000000 0.000000   524:  } else {
        0 0.000000 0.000000   525:   if (!(scalar(@ids) >= 1)) {
        0 0.000000 0.000000   526:    $self->error("not trashing($oid) records
        0 0.000000 0.000000   527:   } else { # can't use $self->delete([target
        0 0.000000 0.000000   528:    $self->assign(\@ids); # first!
        0 0.000000 0.000000   529:    if ($self->ASSIGNED) {
        0 0.000000 0.000000   530:     my $where = " WHERE $s_key = '".$o_src-
        0 0.000000 0.000000   531:     my $sql = "DELETE FROM ".$self-
        0 0.000000 0.000000   532:     my $sth = $self->base->exec($sql);
        0 0.000000 0.000000   533:     if (defined($sth)) {
        0 0.000000 0.000000   534:      $self->STORED(1);
        0 0.000000 0.000000   535:      $self->base->clean_cache('sql');
        0 0.000000 0.000000   536:     } else {
        0 0.000000 0.000000   537:      $self->error(ref($self)." trim failed:
        0 0.000000 0.000000   538:     }
        0 0.000000 0.000000   539:    }
        0 0.000000 0.000000   540:   }
        0 0.000000 0.000000   541:  }
        0 0.000000 0.000000   542: }
        0 0.000000 0.000000   543:
        0 0.000000 0.000000   544:
        0 0.000000 0.000000   545: return $self;
        0 0.000000 0.000000   546:}
        0 0.000000 0.000000   547:
        0 0.000000 0.000000   548:
        0 0.000000 0.000000   549:=item _store
        0 0.000000 0.000000   550:
        0 0.000000 0.000000   551:
        0 0.000000 0.000000   552:
        0 0.000000 0.000000   553:
        0 0.000000 0.000000   554:
        0 0.000000 0.000000   555:
        0 0.000000 0.000000   556:
        0 0.000000 0.000000   557:sub _store {
        0 0.000000 0.000000   558: my $self = shift;
        0 0.000000 0.000000   559: my $a_input = shift || '';
        0 0.000000 0.000000   560:
            ================ SmallProf version 0.9 ================
                       Profile of ../Perlbug/Relation.pm               Page 247
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   561: if (!ref($a_input)) {
        0 0.000000 0.000000   562:  $self->error("no input names given to
        0 0.000000 0.000000   563: } else {
        0 0.000000 0.000000   564:  $self->create_target($a_input);
        0 0.000000 0.000000   565:  my @ids = $self->target->name2id($a_input);
        0 0.000000 0.000000   566:  $self->store(\@ids);
        0 0.000000 0.000000   567: }
        0 0.000000 0.000000   568:
        0 0.000000 0.000000   569:
        0 0.000000 0.000000   570: return $self;
        0 0.000000 0.000000   571:}
        0 0.000000 0.000000   572:
        0 0.000000 0.000000   573:
        0 0.000000 0.000000   574:=item delete
        0 0.000000 0.000000   575:
        0 0.000000 0.000000   576:
        0 0.000000 0.000000   577:
        0 0.000000 0.000000   578:
        0 0.000000 0.000000   579:
        0 0.000000 0.000000   580:
        0 0.000000 0.000000   581:
        0 0.000000 0.000000   582:sub delete {
        0 0.000000 0.000000   583: my $self = shift;
        0 0.000000 0.000000   584: my $a_input= shift || '';
        0 0.000000 0.000000   585:
        0 0.000000 0.000000   586: if (!ref($a_input)) {
        0 0.000000 0.000000   587:  $self->error("no input ids given to
        0 0.000000 0.000000   588: } else {
        0 0.000000 0.000000   589:  my @orig = @{$a_input};
        0 0.000000 0.000000   590:  my @IDS  = ();
        0 0.000000 0.000000   591:
        0 0.000000 0.000000   592:  my ($o_src, $s_key) = ($self->source,
        0 0.000000 0.000000   593:  my ($o_tgt, $t_key) = ($self->target,
        0 0.000000 0.000000   594:
        0 0.000000 0.000000   595:  my @ids = $o_tgt->exists($a_input);
        0 0.000000 0.000000   596:  $self->debug(3, "working with ids(@ids)")
        0 0.000000 0.000000   597:  my $ids = join("', '", @ids);
        0 0.000000 0.000000   598:  my $oid = $o_src->oid();
        0 0.000000 0.000000   599:  if (scalar($o_src->exists([$oid])) == 0) {
        0 0.000000 0.000000   600:   $self->error("has no source objectid($oid)
        0 0.000000 0.000000   601:  } else {
        0 0.000000 0.000000   602:   my $where = " WHERE $s_key = '$oid'";
        0 0.000000 0.000000   603:   my $sql = "DELETE FROM ".$self-
        0 0.000000 0.000000   604:   my $sth = $self->base->exec($sql);
        0 0.000000 0.000000   605:   if (!defined($sth)) {
        0 0.000000 0.000000   606:    $self->error(ref($self)." delete failed:
        0 0.000000 0.000000   607:   } else {
        0 0.000000 0.000000   608:    $self->DELETED(1);
        0 0.000000 0.000000   609:    $self->base->clean_cache('sql');
        0 0.000000 0.000000   610:   }
        0 0.000000 0.000000   611:  }
        0 0.000000 0.000000   612: }
        0 0.000000 0.000000   613:
        0 0.000000 0.000000   614:
        0 0.000000 0.000000   615: return $self;
        0 0.000000 0.000000   616:}
            ================ SmallProf version 0.9 ================
                       Profile of ../Perlbug/Relation.pm               Page 248
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   617:
        0 0.000000 0.000000   618:
        0 0.000000 0.000000   619:=item _delete
        0 0.000000 0.000000   620:
        0 0.000000 0.000000   621:
        0 0.000000 0.000000   622:
        0 0.000000 0.000000   623:
        0 0.000000 0.000000   624:
        0 0.000000 0.000000   625:
        0 0.000000 0.000000   626:
        0 0.000000 0.000000   627:sub _delete {
        0 0.000000 0.000000   628: my $self = shift;
        0 0.000000 0.000000   629: my $a_input = shift || '';
        0 0.000000 0.000000   630:
        0 0.000000 0.000000   631: if (!ref($a_input)) {
        0 0.000000 0.000000   632:  $self->error("no input names given to
        0 0.000000 0.000000   633: } else {
        0 0.000000 0.000000   634:  my @ids = $self->target->name2id($a_input);
        0 0.000000 0.000000   635:  $self->delete(\@ids);
        0 0.000000 0.000000   636: }
        0 0.000000 0.000000   637:
        0 0.000000 0.000000   638:
        0 0.000000 0.000000   639: return $self;
        0 0.000000 0.000000   640:}
        0 0.000000 0.000000   641:
        0 0.000000 0.000000   642:
        0 0.000000 0.000000   643:=item create_target
        0 0.000000 0.000000   644:
        0 0.000000 0.000000   645:
        0 0.000000 0.000000   646:
        0 0.000000 0.000000   647:
        0 0.000000 0.000000   648:
        0 0.000000 0.000000   649:
        0 0.000000 0.000000   650:
        0 0.000000 0.000000   651:
        0 0.000000 0.000000   652:
        0 0.000000 0.000000   653:
        0 0.000000 0.000000   654:
        0 0.000000 0.000000   655:sub create_target { # by id from hashref
        0 0.000000 0.000000   656: my $self = shift;
        0 0.000000 0.000000   657: my $a_input= shift;
        0 0.000000 0.000000   658:
        0 0.000000 0.000000   659: my ($table, $pri) = ($self->attr('table'),
        0 0.000000 0.000000   660:
        0 0.000000 0.000000   661: if (!ref($a_input) eq 'ARRAY') {
        0 0.000000 0.000000   662:  $self->error("no ids given to
        0 0.000000 0.000000   663: } else {
        0 0.000000 0.000000   664:  my @given = $self->trim($a_input);
        0 0.000000 0.000000   665:
        0 0.000000 0.000000   666:  my ($o_src, $s_key) = ($self->source,
        0 0.000000 0.000000   667:  my ($o_tgt, $t_key) = ($self->target,
        0 0.000000 0.000000   668:  my $t_pri = $o_tgt->primary_key;
        0 0.000000 0.000000   669:
        0 0.000000 0.000000   670:  if (scalar(@given) == 0) {
        0 0.000000 0.000000   671:   $self->error("has no target
        0 0.000000 0.000000   672:  } else {
            ================ SmallProf version 0.9 ================
                       Profile of ../Perlbug/Relation.pm               Page 249
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   673:   my @exist = $o_tgt->_exists(\@given);
        0 0.000000 0.000000   674:   my @extantids = $o_tgt->name2id(\@exist);
        0 0.000000 0.000000   675:   $self->debug(0, "pri($t_pri) given(@given)
        0 0.000000 0.000000   676:   ID:
        0 0.000000 0.000000   677:   foreach my $ident (@given) {
        0 0.000000 0.000000   678:    $self->debug(0, "does $ident
        0 0.000000 0.000000   679:    next ID if grep(/^$ident$/, @exist);
        0 0.000000 0.000000   680:    $self->debug(0, "NOPE($ident) ->
        0 0.000000 0.000000   681:    $o_tgt->reset->data({
        0 0.000000 0.000000   682:     $t_key => $self->new_id,
        0 0.000000 0.000000   683:     $o_tgt->identifier => $ident,
        0 0.000000 0.000000   684:    });
        0 0.000000 0.000000   685:    $o_tgt->create($o_tgt->_oref('data')); #
        0 0.000000 0.000000   686:   }
        0 0.000000 0.000000   687:  }
        0 0.000000 0.000000   688: }
        0 0.000000 0.000000   689:
        0 0.000000 0.000000   690:
        0 0.000000 0.000000   691: return $self;
        0 0.000000 0.000000   692:}
        0 0.000000 0.000000   693:
        0 0.000000 0.000000   694:
        0 0.000000 0.000000   695:=head1 AUTHOR
        0 0.000000 0.000000   696:
        0 0.000000 0.000000   697:
        0 0.000000 0.000000   698:
        0 0.000000 0.000000   699:
        0 0.000000 0.000000   700:
        0 0.000000 0.000000   701:
        0 0.000000 0.000000   702:#
        0 0.000000 0.000000   703:1;
        0 0.000000 0.000000   704:
            ================ SmallProf version 0.9 ================
                 Profile of /home/perlbug/config/Configuration         Page 250
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000     1:# Perlbug site configuration
        0 0.000000 0.000000     2:# (C) 2000 Richard Foley RFI perlbug@rfi.net
        0 0.000000 0.000000     3:# $Id: Configuration,v 1.1.1.1 2001/04/18
        0 0.000000 0.000000     4:#
        0 0.000000 0.000000     5:
        1 0.000896 0.000000     6:my $h_Config = {
        0 0.000000 0.000000     7: #CURRENT
        0 0.000000 0.000000     8: 'CURRENT'  => {        #
        0 0.000000 0.000000     9:  'context'  => 'text',
        0 0.000000 0.000000    10:  'debug'  => '01sxX',                      #
        0 0.000000 0.000000    11:  'format' => 'a',                         #
        0 0.000000 0.000000    12:  'framed' => 1,                           #
        0 0.000000 0.000000    13:  'isatest' => 1,                           #
        0 0.000000 0.000000    14:  'log_file' => '',
        0 0.000000 0.000000    15:  'switches' => 'bcfghjmnoprstu',
        0 0.000000 0.000000    16:  'tmp_file' => '',
        0 0.000000 0.000000    17:  'url'  => 'perlbug.cgi',               #
        0 0.000000 0.000000    18:  'user'  => 'generic',       # user
        0 0.000000 0.000000    19: },
        0 0.000000 0.000000    20: #DATABASE
        0 0.000000 0.000000    21: 'DATABASE' => {        #
        0 0.000000 0.000000    22:  # -t(no create statements) -d(no data) -
        0 0.000000 0.000000    23:  'backup_args'    => '-l',                 #
        0 0.000000 0.000000    24:  'backup_command' => '/usr/bin/mysqldump',
        0 0.000000 0.000000    25:  'backup_interval'=> 7,            # auto
        0 0.000000 0.000000    26:  'connect'       => '',        # use this if
        0 0.000000 0.000000    27:  'database'       => 'perlbug',
        0 0.000000 0.000000    28:  'engine'         => 'Mysql',
        0 0.000000 0.000000    29:  'latest'         => 'Perlbug.sql.gz',
        0 0.000000 0.000000    30:  'passfile'       => 'x2',
        0 0.000000 0.000000    31:  'password'       => 'm0use1',
        0 0.000000 0.000000    32:  'remote'         => 'n',
        0 0.000000 0.000000    33:  'sqlhost'        => 'localhost',
        0 0.000000 0.000000    34:  'tableprefix'    => 'pb_',
        0 0.000000 0.000000    35:  'user'           => 'perlbug',
        0 0.000000 0.000000    36: },
        0 0.000000 0.000000    37: #DIRECTORY
        0 0.000000 0.000000    38: 'DIRECTORY' => {        #
        0 0.000000 0.000000    39:  'arch'      =>
        0 0.000000 0.000000    40:  'config'  => '/home/perlbug/config',  #
        0 0.000000 0.000000    41:  'lists'      => '/home/perlmail/perl5-
        0 0.000000 0.000000    42:  'root'       => '/home/perlbug',         #
        0 0.000000 0.000000    43:  'spool'   => '/home/perlbug/spool',   #
        0 0.000000 0.000000    44:  'text'    => '/home/perlbug/text',    #
        0 0.000000 0.000000    45:  'web'     => '/home/perlbug/web',     #
        0 0.000000 0.000000    46: },
        0 0.000000 0.000000    47: #EMAIL
        0 0.000000 0.000000    48: 'EMAIL'  => {
        0 0.000000 0.000000    49:  'bugdb'         => 'bugdb@perl.org',
        0 0.000000 0.000000    50:  'bugtron'       => 'perlbug@perl.org',
        0 0.000000 0.000000    51:  'deny_from'     => '(postmaster|MAILER\-
        0 0.000000 0.000000    52:  'domain'        => 'bugs.perl.org',      #
        0 0.000000 0.000000    53:  'from'          =>
        0 0.000000 0.000000    54:  'hint'          => 'Hint: mail should
        0 0.000000 0.000000    55:  'help'          => 'help@bugs.perl.org',
        0 0.000000 0.000000    56:  'mailer'        => 'sendmail',           #
            ================ SmallProf version 0.9 ================
                 Profile of /home/perlbug/config/Configuration         Page 251
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000    57:  'master_list'   => 'p5p_list',
        0 0.000000 0.000000    58:  'match'         => '\bperl|perl\b',
        0 0.000000 0.000000    59:  'test'          =>
        0 0.000000 0.000000    60:  'X-Test'        => 'X-Perlbug-Test',
        0 0.000000 0.000000    61: },
        0 0.000000 0.000000    62: #FEEDBACK on tickets
        0 0.000000 0.000000    63: 'FEEDBACK' => {
        0 0.000000 0.000000    64:  'auto'   => 'maintainer',            #
        0 0.000000 0.000000    65:  'delete'    => 'admin|maintainer|group',
        0 0.000000 0.000000    66:  'new'    => 'group|maintainer',     #
        0 0.000000 0.000000    67:  'reminder'   => 'group|source',
        0 0.000000 0.000000    68:  'update'    => 'admin|cc|group|source',
        0 0.000000 0.000000    69: },
        0 0.000000 0.000000    70: #FORWARD (transparent forwards to address,
        0 0.000000 0.000000    71: 'FORWARD' => {
        0 0.000000 0.000000    72:  'generic'    => [qw(perl5-
        0 0.000000 0.000000    73:  'macos'      => [qw(macperl-
        0 0.000000 0.000000    74:  'win32'      => [qw(perl-win32-
        0 0.000000 0.000000    75:  'ok'            => [qw(perl-ok@perl.org)],
        0 0.000000 0.000000    76:  'test'          =>
        0 0.000000 0.000000    77: },
        0 0.000000 0.000000    78: #SYSTEM
        0 0.000000 0.000000    79: 'SYSTEM'  => {        #
        0 0.000000 0.000000    80:  'admin_switches'=> 'aACDGiILMNPTxXyz',
        0 0.000000 0.000000    81:  'assign'  => 5,                    # max
        0 0.000000 0.000000    82:  'bugmaster'  => 'richardf',      # master
        0 0.000000 0.000000    83:  'cachable'  => 1,      # cachable objects?
        0 0.000000 0.000000    84:  'compress'  => 'gzip',     # compression
        0 0.000000 0.000000    85:  'enabled'  => 1,        # enabler
        0 0.000000 0.000000    86:  'hostname'  => 'pc026991',              #
        0 0.000000 0.000000    87:  'maintainer'    => 'perlbug@rfi.net',
        0 0.000000 0.000000    88:  'max_age'       => 3,
        0 0.000000 0.000000    89:  'max_errors'    => 1,
        0 0.000000 0.000000    90:  'path'          => '/bin:/usr/bin',
        0 0.000000 0.000000    91:  'preload'       => 0,      # objects at
        0 0.000000 0.000000    92:  'restricted'    => 1,
        0 0.000000 0.000000    93:  'separator'     => '/',
        0 0.000000 0.000000    94:  'source'   =>'Perlbug.tar.gz',   # name for
        0 0.000000 0.000000    95:  'timeout_auto'  => 360,
        0 0.000000 0.000000    96:  'timeout_interactive' => 33600,
        0 0.000000 0.000000    97:  'title'   => 'Perlbug',      # :-)
        0 0.000000 0.000000    98:  'user'          => 'perlbug',
        0 0.000000 0.000000    99:  'user_switches' =>
        0 0.000000 0.000000   100: },
        0 0.000000 0.000000   101: #TARGET set off a new bug, undef -> generic
        0 0.000000 0.000000   102: 'TARGET' => {
        0 0.000000 0.000000   103:  'generic'      => [qw(perlbug@perl.com
        0 0.000000 0.000000   104:  'macos'         =>
        0 0.000000 0.000000   105:  'unix'       => [qw(perlbug@perl.com
        0 0.000000 0.000000   106:  'win32'      => [qw(perl-win32-
        0 0.000000 0.000000   107:  'module'      => [qw(modulebug@perl.org)],
        0 0.000000 0.000000   108:  'dailybuild'    =>
        0 0.000000 0.000000   109:  'ok'            => [qw(ok@bugs.perl.org)],
        0 0.000000 0.000000   110:  'test'          =>
        0 0.000000 0.000000   111: },
        0 0.000000 0.000000   112: #WEB
            ================ SmallProf version 0.9 ================
                 Profile of /home/perlbug/config/Configuration         Page 252
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   113: 'WEB' => {
        0 0.000000 0.000000   114:  'cgi'           => 'perlbug.cgi',
        0 0.000000 0.000000   115:  'domain'        => 'bugs.perl.org',
        0 0.000000 0.000000   116:  'home'          => 'index.html',
        0 0.000000 0.000000   117:  'hard_wired_url'=>
        0 0.000000 0.000000   118:  'htpasswd'      => '.htpasswd',
        0 0.000000 0.000000   119:  'logo'          => '<img
        0 0.000000 0.000000   120: },
        0 0.000000 0.000000   121: #
        0 0.000000 0.000000   122: # Perlbug Mail Matches for new bugs (better
        0 0.000000 0.000000   123: 'DEFAULT'  => {  # DEFAULT
        0 0.000000 0.000000   124:  'group'   => 'unknown',  # d
        0 0.000000 0.000000   125:  'osname'  => 'generic',  # d
        0 0.000000 0.000000   126:  'severity'  => 'none',   # d
        0 0.000000 0.000000   127:  'status'  => 'open',   # d
        0 0.000000 0.000000   128:  'version'  => '5.0',   # d
        0 0.000000 0.000000   129: },
        0 0.000000 0.000000   130: 'GROUP' => {   # GROUP
        0 0.000000 0.000000   131:  '\bsuccess\sreport\sfor\sperl\sfrom\b'   =>
        0 0.000000 0.000000   132:  '\bbuild\sfailure\sreport\sfor\sperl\sfrom'
        0 0.000000 0.000000   133:  '\btron_internal\b'       => 'notabug',  #
        0 0.000000 0.000000   134: },
        0 0.000000 0.000000   135: 'SEVERITY' => { # SEVERITY
        0 0.000000 0.000000   136:  '\bsuccess\sreport\sfor\sperl\sfrom'   =>
        0 0.000000 0.000000   137:  '\bbuild\sfailure\sreport\sfor\sperl\sfrom'
        0 0.000000 0.000000   138:  '\btron_internal\b'       => 'none',   #
        0 0.000000 0.000000   139:  '\bdailybuild\b'        => 'none',   #
        0 0.000000 0.000000   140: },
        0 0.000000 0.000000   141: 'STATUS' => {  # STATUS
        0 0.000000 0.000000   142:  '\bsuccess\sreport\sfor\sperl\sfrom'   =>
        0 0.000000 0.000000   143:  '\btron_internal\b'       => 'closed',  #
        0 0.000000 0.000000   144:  '\bdailybuild\b'        => 'closed',  #
        0 0.000000 0.000000   145: },
        0 0.000000 0.000000   146: 'VERSION' => {  # VERSION
        0 0.000000 0.000000   147:  # Summary of my perl5 (5.0 patchlevel 5
        0 0.000000 0.000000   148:  # Summary of my perl5 (revision 5.0 version
        0 0.000000 0.000000   149:
        0 0.000000 0.000000   150:  # generated with the help of perlbug 1.27
        0 0.000000 0.000000   151:  '(?:\brunning\sunder\sperl\sv*(\d[\d\.]+))'
        0 0.000000 0.000000   152:  '(?:\bperl\s+version\s*(\d[\d\.]+))'  =>
        0 0.000000 0.000000   153:  # Site configuration information for perl
        0 0.000000 0.000000   154:
        0 0.000000 0.000000   155: },
        0 0.000000 0.000000   156:};  # Config
        0 0.000000 0.000000   157:
            ================ SmallProf version 0.9 ================
         Profile of /home/perlbug/perlbug/scripts/../Perlbug/Interface Page 253
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000     1:# Perlbug WWW interface
        0 0.000000 0.000000     2:# (C) 1999 Richard Foley RFI perlbug@rfi.net
        0 0.000000 0.000000     3:# $Id: Web.pm,v 1.97 2001/07/05 09:28:39
        0 0.000000 0.000000     4:#
        0 0.000000 0.000000     5:
        0 0.000000 0.000000     6:=head1 NAME
        0 0.000000 0.000000     7:
        0 0.000000 0.000000     8:
        0 0.000000 0.000000     9:
        0 0.000000 0.000000    10:
        0 0.000000 0.000000    11:
        0 0.000000 0.000000    12:
        0 0.000000 0.000000    13:
        0 0.000000 0.000000    14:
        0 0.000000 0.000000    15:
        0 0.000000 0.000000    16:package Perlbug::Interface::Web;
        0 0.000000 0.000000    17:use strict;
        0 0.000000 0.000000    18:use vars qw(@ISA $VERSION);
        0 0.000000 0.000000    19:@ISA = qw(Perlbug::Base);
        0 0.000000 0.000000    20:$VERSION = do { my @r = (q$Revision: 1.97 $
        0 0.000000 0.000000    21:my $DEBUG =
        0 0.000000 0.000000    22:$| = 1;
        0 0.000000 0.000000    23:
        0 0.000000 0.000000    24:use lib qw(../);
        0 0.000000 0.000000    25:use CGI;
        0 0.000000 0.000000    26:use CGI::Carp 'fatalsToBrowser';
        0 0.000000 0.000000    27:use Data::Dumper;
        0 0.000000 0.000000    28:use HTML::Entities;
        0 0.000000 0.000000    29:use Perlbug::Base;
        0 0.000000 0.000000    30:use Perlbug::Format; # href's
        0 0.000000 0.000000    31:use Perlbug::JS;
        0 0.000000 0.000000    32:use URI::Escape;
        0 0.000000 0.000000    33:
        0 0.000000 0.000000    34:
        0 0.000000 0.000000    35:=head1 SYNOPSIS
        0 0.000000 0.000000    36:
        0 0.000000 0.000000    37:
        0 0.000000 0.000000    38:
        0 0.000000 0.000000    39:
        0 0.000000 0.000000    40:
        0 0.000000 0.000000    41:
        0 0.000000 0.000000    42:
        0 0.000000 0.000000    43:
        0 0.000000 0.000000    44:
        0 0.000000 0.000000    45:
        0 0.000000 0.000000    46:
        0 0.000000 0.000000    47:
        0 0.000000 0.000000    48:
        0 0.000000 0.000000    49:
        0 0.000000 0.000000    50:
        0 0.000000 0.000000    51:
        0 0.000000 0.000000    52:
        0 0.000000 0.000000    53:
        0 0.000000 0.000000    54:
        0 0.000000 0.000000    55:
        0 0.000000 0.000000    56:
            ================ SmallProf version 0.9 ================
         Profile of /home/perlbug/perlbug/scripts/../Perlbug/Interface Page 254
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000    57:
        1 0.000000 0.000000    58:sub new {
        1 0.000009 0.000000    59:    my $proto = shift;
        1 0.000008 0.000000    60:    my $class = ref($proto) || $proto;
        1 0.000117 0.000000    61: my $self  = Perlbug::Base->new();
        1 0.000031 0.000000    62: bless($self, $class);
        0 0.000000 0.000000    63:
        1 0.000089 0.000000    64: $self->cgi(@_);
        1 0.000098 0.000000    65:    $self->check_user($ENV{'REMOTE_USER'});
        1 0.000096 0.000000    66:    $self->setup; # default pars etc.
        1 0.000090 0.000000    67: $self->clean_cache('sql'); # mod_perl
        1 0.000012 0.000000    68: return $self;
        0 0.000000 0.000000    69:}
        0 0.000000 0.000000    70:
        0 0.000000 0.000000    71:
        0 0.000000 0.000000    72:=item setup
        0 0.000000 0.000000    73:
        0 0.000000 0.000000    74:
        0 0.000000 0.000000    75:
        0 0.000000 0.000000    76:
        0 0.000000 0.000000    77:
        0 0.000000 0.000000    78:
        0 0.000000 0.000000    79:
        1 0.000000 0.000000    80:sub setup {
        1 0.000006 0.000000    81:    my $self = shift;
        1 0.000081 0.000000    82:    my $cgi  = $self->cgi();
        0 0.000000 0.000000    83:
        1 0.000009 0.000000    84: ($DEBUG) = $Perlbug::DEBUG || $cgi-
        1 0.000093 0.000000    85: ($DEBUG) = $self->current({'debug', $DEBUG})
        0 0.000000 0.000000    86:
        1 0.000086 0.000000    87:    $self->{'_range'} = $cgi->param('range')
        0 0.000000 0.000000    88:
        1 0.000014 0.000000    89: my $framed = ($0 =~ /_([a-z]+\.{0,1})cgi$/)
        1 0.000088 0.000000    90: $self->current({'framed', $framed});
        1 0.000094 0.000000    91: $self->debug(0, "$0 => framed($framed)") if
        0 0.000000 0.000000    92:
        1 0.000070 0.000000    93: $self->current({'format', $cgi-
        1 0.000089 0.000000    94: $self->current({'context', 'http'});
        0 0.000000 0.000000    95:
        1 0.000076 0.000000    96: $self->debug(0, "Web::setup :-)") if $DEBUG;
        0 0.000000 0.000000    97:
        1 0.000007 0.000000    98:    return $self;
        0 0.000000 0.000000    99:}
        0 0.000000 0.000000   100:
        0 0.000000 0.000000   101:
        0 0.000000 0.000000   102:=item check_user
        0 0.000000 0.000000   103:
        0 0.000000 0.000000   104:
        0 0.000000 0.000000   105:
        0 0.000000 0.000000   106:
        0 0.000000 0.000000   107:
        1 0.000000 0.000000   108:sub check_user {
        1 0.000004 0.000000   109: my $self = shift;
        1 0.000009 0.000000   110: my $remote_user = shift || '';
        1 0.000004 0.000000   111: my $user = '';
        1 0.000006 0.000000   112:    if (defined($ENV{'REQUEST_URI'}) &&
            ================ SmallProf version 0.9 ================
         Profile of /home/perlbug/perlbug/scripts/../Perlbug/Interface Page 255
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   113:  $user = $self-
        0 0.000000 0.000000   114:  $self->debug(1, "Checked
        0 0.000000 0.000000   115: } else {
        1 0.000118 0.000000   116:  $user = $self->SUPER::check_user(''); #
        0 0.000000 0.000000   117:  # $user = $self->current('admin', '');
        1 0.000005 0.000000   118:  $self->debug(2, "Neutralising
        0 0.000000 0.000000   119: }
        1 0.000015 0.000000   120: return $user;
        0 0.000000 0.000000   121:}
        0 0.000000 0.000000   122:
        0 0.000000 0.000000   123:
        0 0.000000 0.000000   124:# SETUP
        0 0.000000 0.000000   125:#
        0 0.000000 0.000000   126:#
        0 0.000000 0.000000   127:
        0 0.000000 0.000000   128:=item menu
        0 0.000000 0.000000   129:
        0 0.000000 0.000000   130:
        0 0.000000 0.000000   131:
        0 0.000000 0.000000   132:
        0 0.000000 0.000000   133:
        0 0.000000 0.000000   134:
        0 0.000000 0.000000   135:
        0 0.000000 0.000000   136:sub menu {
        0 0.000000 0.000000   137: my $self = shift;
        0 0.000000 0.000000   138:
        0 0.000000 0.000000   139: my $ret = $self->logo.$self->title.$self-
        0 0.000000 0.000000   140: # links = (menu) ? menu : links=~s/tr/br/
        0 0.000000 0.000000   141:
        0 0.000000 0.000000   142: $ret =~ s/<(table|tr|td)[^>]*(?:>)//gsi;
        0 0.000000 0.000000   143: $ret =~ s/<\/td>/<br>/gsi;
        0 0.000000 0.000000   144: $ret =~ s/<\/(tr|table)>//gsi;
        0 0.000000 0.000000   145: $ret .= '<hr>'.$self->isadmin;
        0 0.000000 0.000000   146:
        0 0.000000 0.000000   147: return $ret;
        0 0.000000 0.000000   148:}
        0 0.000000 0.000000   149:
        0 0.000000 0.000000   150:
        0 0.000000 0.000000   151:=item logo
        0 0.000000 0.000000   152:
        0 0.000000 0.000000   153:
        0 0.000000 0.000000   154:
        0 0.000000 0.000000   155:
        0 0.000000 0.000000   156:
        0 0.000000 0.000000   157:
        0 0.000000 0.000000   158:
        0 0.000000 0.000000   159:sub logo {
        0 0.000000 0.000000   160: my $self = shift;
        0 0.000000 0.000000   161: my $logo = '';
        0 0.000000 0.000000   162:
        0 0.000000 0.000000   163: my $home = $self->web('hard_wired_url');
        0 0.000000 0.000000   164:    $logo = qq|<center><a href="$home"
        0 0.000000 0.000000   165:
        0 0.000000 0.000000   166: return $logo;
        0 0.000000 0.000000   167:}
        0 0.000000 0.000000   168:
            ================ SmallProf version 0.9 ================
         Profile of /home/perlbug/perlbug/scripts/../Perlbug/Interface Page 256
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   169:
        0 0.000000 0.000000   170:=item title
        0 0.000000 0.000000   171:
        0 0.000000 0.000000   172:
        0 0.000000 0.000000   173:
        0 0.000000 0.000000   174:
        0 0.000000 0.000000   175:
        0 0.000000 0.000000   176:
        0 0.000000 0.000000   177:
        0 0.000000 0.000000   178:sub title {
        0 0.000000 0.000000   179: my $self = shift;
        0 0.000000 0.000000   180:
        0 0.000000 0.000000   181:    my $title = '<center><h3>'.$self-
        0 0.000000 0.000000   182:
        0 0.000000 0.000000   183: return $title;
        0 0.000000 0.000000   184:}
        0 0.000000 0.000000   185:
        0 0.000000 0.000000   186:
        0 0.000000 0.000000   187:=item links
        0 0.000000 0.000000   188:
        0 0.000000 0.000000   189:
        0 0.000000 0.000000   190:
        0 0.000000 0.000000   191:
        0 0.000000 0.000000   192:
        0 0.000000 0.000000   193:
        0 0.000000 0.000000   194:
        0 0.000000 0.000000   195:sub links {
        0 0.000000 0.000000   196: my $self = shift;
        0 0.000000 0.000000   197: my $links = '&nbsp; links';
        0 0.000000 0.000000   198:
        0 0.000000 0.000000   199:    $links = join('', $self->read('footer'));
        0 0.000000 0.000000   200:
        0 0.000000 0.000000   201: my $url = $self->url;
        0 0.000000 0.000000   202:    if ($self->isadmin) {
        0 0.000000 0.000000   203:  $links =~ s#\Q<!-- FAQ -->\E#<td><a
        0 0.000000 0.000000   204: }
        0 0.000000 0.000000   205: $links =~ s/(perlbug\.cgi)/_$1/gi unless
        0 0.000000 0.000000   206:
        0 0.000000 0.000000   207: return $links;
        0 0.000000 0.000000   208:}
        0 0.000000 0.000000   209:
        0 0.000000 0.000000   210:
        0 0.000000 0.000000   211:=item index
        0 0.000000 0.000000   212:
        0 0.000000 0.000000   213:
        0 0.000000 0.000000   214:
        0 0.000000 0.000000   215:
        0 0.000000 0.000000   216:
        0 0.000000 0.000000   217:sub index {
        0 0.000000 0.000000   218: my $self = shift;
        0 0.000000 0.000000   219: my $ret  = '';
        0 0.000000 0.000000   220:
        0 0.000000 0.000000   221: my $url   = $self->url;
        0 0.000000 0.000000   222: my $ehelp = $self->email('help');
        0 0.000000 0.000000   223: $ret .= $self->logo;
        0 0.000000 0.000000   224: $ret .= $self->title;
            ================ SmallProf version 0.9 ================
         Profile of /home/perlbug/perlbug/scripts/../Perlbug/Interface Page 257
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   225: $ret .= qq|
        0 0.000000 0.000000   226:  <center>
        0 0.000000 0.000000   227:  <h4>
        0 0.000000 0.000000   228:  Anyone may search the bug Database via
        0 0.000000 0.000000   229:  or the <a href="$url">web</a> interface.
        0 0.000000 0.000000   230:  </h4>
        0 0.000000 0.000000   231:  <hr>
        0 0.000000 0.000000   232:
        0 0.000000 0.000000   233:  <a href="perlbug.cgi?req=search"><h3>Enter
        0 0.000000 0.000000   234:  <a
        0 0.000000 0.000000   235:
        0 0.000000 0.000000   236:  <h4>Or enter a quick search on just the
        0 0.000000 0.000000   237:  <input type=hidden name=req value=query>
        0 0.000000 0.000000   238:  <input type=hidden name=status value=open>
        0 0.000000 0.000000   239:  <input type=hidden name=trim value=35>
        0 0.000000 0.000000   240:  <input type=hidden name=index value=yes>
        0 0.000000 0.000000   241:  <input type=text name=subject value="">
        0 0.000000 0.000000   242:  <br><i>
        0 0.000000 0.000000   243:  N.B. - Shortcuts to bugids if the text
        0 0.000000 0.000000   244:  </i> <br>
        0 0.000000 0.000000   245:
        0 0.000000 0.000000   246:  <hr>
        0 0.000000 0.000000   247:  </center>
        0 0.000000 0.000000   248: |;
        0 0.000000 0.000000   249:
        0 0.000000 0.000000   250: return $ret;
        0 0.000000 0.000000   251:}
        0 0.000000 0.000000   252:
        0 0.000000 0.000000   253:
        0 0.000000 0.000000   254:=item commands
        0 0.000000 0.000000   255:
        0 0.000000 0.000000   256:
        0 0.000000 0.000000   257:
        0 0.000000 0.000000   258:
        0 0.000000 0.000000   259:
        0 0.000000 0.000000   260:
        0 0.000000 0.000000   261:
        0 0.000000 0.000000   262:sub commands {
        0 0.000000 0.000000   263: my $self = shift;
        0 0.000000 0.000000   264: my $req  = shift;
        0 0.000000 0.000000   265:
        0 0.000000 0.000000   266: my $cgi  = $self->cgi();
        0 0.000000 0.000000   267: my $ret  = '';
        0 0.000000 0.000000   268:
        0 0.000000 0.000000   269: # Commands
        0 0.000000 0.000000   270: my %com = ( # back home refresh search
        0 0.000000 0.000000   271:  'nix' => [qw()],
        0 0.000000 0.000000   272:  'read' => [qw(query reset)],
        0 0.000000 0.000000   273:  'write' => [qw(query update nocc select
        0 0.000000 0.000000   274: );
        0 0.000000 0.000000   275:
        0 0.000000 0.000000   276: my $a_cmds = ($req =~
        0 0.000000 0.000000   277: if ($self->isadmin) {
        0 0.000000 0.000000   278:  my $opts = join('|', $self->editable);
        0 0.000000 0.000000   279:  $a_cmds = $com{'write'} if $req =~
        0 0.000000 0.000000   280: }
            ================ SmallProf version 0.9 ================
         Profile of /home/perlbug/perlbug/scripts/../Perlbug/Interface Page 258
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   281: $ret .= '<br>'.$self-
        0 0.000000 0.000000   282:
        0 0.000000 0.000000   283: # Controls
        0 0.000000 0.000000   284: if (1 == 0 && $self->isadmin eq $self-
        0 0.000000 0.000000   285:  my $o_js = Perlbug::JS->new();
        0 0.000000 0.000000   286:  $ret .= "\n".join("&nbsp;\n", '',
        0 0.000000 0.000000   287:   # $o_js->frames(),
        0 0.000000 0.000000   288:   $o_js->control('menu'),
        0 0.000000 0.000000   289:   $o_js->control('perlbug'),
        0 0.000000 0.000000   290:   $o_js->control('commands'),
        0 0.000000 0.000000   291:  );
        0 0.000000 0.000000   292: }
        0 0.000000 0.000000   293: $self->debug(2, "req($req) cmd($a_cmds)
        0 0.000000 0.000000   294:
        0 0.000000 0.000000   295: return $ret;
        0 0.000000 0.000000   296:}
        0 0.000000 0.000000   297:
        0 0.000000 0.000000   298:
        0 0.000000 0.000000   299:=item editable
        0 0.000000 0.000000   300:
        0 0.000000 0.000000   301:
        0 0.000000 0.000000   302:
        0 0.000000 0.000000   303:
        0 0.000000 0.000000   304:
        0 0.000000 0.000000   305:
        0 0.000000 0.000000   306:
        0 0.000000 0.000000   307:sub editable { #
        0 0.000000 0.000000   308: my $self = shift;
        0 0.000000 0.000000   309: my @reqs = qw(
        0 0.000000 0.000000   310:   \w+ids{0,1}
        0 0.000000 0.000000   311:   administrators
        0 0.000000 0.000000   312:   commands
        0 0.000000 0.000000   313:   date
        0 0.000000 0.000000   314:   delete
        0 0.000000 0.000000   315:   groups
        0 0.000000 0.000000   316:   nocc
        0 0.000000 0.000000   317:   query
        0 0.000000 0.000000   318:   sql
        0 0.000000 0.000000   319:   update
        0 0.000000 0.000000   320: );
        0 0.000000 0.000000   321: return @reqs;
        0 0.000000 0.000000   322:}
        0 0.000000 0.000000   323:
        0 0.000000 0.000000   324:
        0 0.000000 0.000000   325:# PROCESS
        0 0.000000 0.000000   326:#
        0 0.000000 0.000000   327:#
        0 0.000000 0.000000   328:
        0 0.000000 0.000000   329:=item switch
        0 0.000000 0.000000   330:
        0 0.000000 0.000000   331:
        0 0.000000 0.000000   332:
        0 0.000000 0.000000   333:
        0 0.000000 0.000000   334:
        0 0.000000 0.000000   335:
        0 0.000000 0.000000   336:
            ================ SmallProf version 0.9 ================
         Profile of /home/perlbug/perlbug/scripts/../Perlbug/Interface Page 259
       =================================================================
    count wall tm  cpu time line
        1 0.000000 0.000000   337:sub switch {
        1 0.000005 0.000000   338: my $self = shift;
        1 0.000004 0.000000   339: my $req  = shift;
        1 0.000004 0.000000   340: my $ret  = '';
        0 0.000000 0.000000   341:
        1 0.000071 0.000000   342: $req = $req || $self->cgi()->param('req') ||
        0 0.000000 0.000000   343:
        1 0.000060 0.000000   344: my @ok = qw(
        0 0.000000 0.000000   345:  menu perlbug commands index
        0 0.000000 0.000000   346:  start header logo title links footer finish
        0 0.000000 0.000000   347:  headers objectids hist bidmids date
        0 0.000000 0.000000   348:  spec mailhelp webhelp overview groups
        0 0.000000 0.000000   349:  query nocc sql delete update info search
        0 0.000000 0.000000   350: ); # (bug|status|user)_(ids|headers|search)
        0 0.000000 0.000000   351:
        1 0.000015 0.000000   352:    if ($req =~ /^\w+$/) {
        1 0.000005 0.000000   353:  $ret = $req;
        0 0.000000 0.000000   354: } else {
        0 0.000000 0.000000   355:        $self->error("Invalid
        0 0.000000 0.000000   356: }
        1 0.000083 0.000000   357: $self->debug(0, "requested($req) ->
        0 0.000000 0.000000   358:
        1 0.000026 0.000000   359: return $ret;
        0 0.000000 0.000000   360:}
        0 0.000000 0.000000   361:
        0 0.000000 0.000000   362:
        0 0.000000 0.000000   363:=item start
        0 0.000000 0.000000   364:
        0 0.000000 0.000000   365:
        0 0.000000 0.000000   366:
        0 0.000000 0.000000   367:
        0 0.000000 0.000000   368:
        0 0.000000 0.000000   369:
        0 0.000000 0.000000   370:
        0 0.000000 0.000000   371:
        0 0.000000 0.000000   372:
        1 0.000000 0.000000   373:sub start { # index/display/top - see also
        1 0.000005 0.000000   374: my $self = shift;
        1 0.000005 0.000000   375: my $req  = shift;
        1 0.000005 0.000000   376: my $ret  = '';
        1 0.000066 0.000000   377:    my $cgi  = $self->cgi();
        0 0.000000 0.000000   378:
        1 0.000072 0.000000   379: $self->debug(1, "start($req)") if $DEBUG;
        0 0.000000 0.000000   380:
        1 0.000077 0.000000   381: $ret .= $self->header($req);
        0 0.000000 0.000000   382:
        1 0.000113 0.000000   383: unless ($self->current('framed')) {
        0 0.000000 0.000000   384:  $ret .= $self->logo($req);
        0 0.000000 0.000000   385:  $ret .=$self->title($req);
        0 0.000000 0.000000   386: }
        0 0.000000 0.000000   387:
        0 0.000000 0.000000   388: # $ret .= $cgi->dump if $self->isadmin eq
        0 0.000000 0.000000   389:
        1 0.000008 0.000000   390: $ret .= qq|<table border=1 width=100%>|;
        1 0.000011 0.000000   391: my $target = ($req =~ /^(menu|commands)$/i)
        1 0.000082 0.000000   392: $ret .= $self->form($target);
            ================ SmallProf version 0.9 ================
         Profile of /home/perlbug/perlbug/scripts/../Perlbug/Interface Page 260
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   393:
        1 0.000076 0.000000   394: unless ($self->current('framed')) {
        0 0.000000 0.000000   395:  $ret .= $self->commands($req);
        0 0.000000 0.000000   396: }
        0 0.000000 0.000000   397:
        1 0.000187 0.000000   398: return $ret;
        0 0.000000 0.000000   399:}
        0 0.000000 0.000000   400:
        0 0.000000 0.000000   401:
        0 0.000000 0.000000   402:=item form
        0 0.000000 0.000000   403:
        0 0.000000 0.000000   404:
        0 0.000000 0.000000   405:
        0 0.000000 0.000000   406:
        0 0.000000 0.000000   407:
        0 0.000000 0.000000   408:
        0 0.000000 0.000000   409:
        1 0.000000 0.000000   410:sub form {
        1 0.000004 0.000000   411: my $self = shift;
        1 0.000005 0.000000   412: my $name = shift || 'undefined_form';
        0 0.000000 0.000000   413:
        1 0.000078 0.000000   414: my $url  = $self->url;
        1 0.000011 0.000000   415: my $form = qq|<FORM name="$name"
        0 0.000000 0.000000   416:
        1 0.000012 0.000000   417: return $form;
        0 0.000000 0.000000   418:}
        0 0.000000 0.000000   419:
        0 0.000000 0.000000   420:
        0 0.000000 0.000000   421:=item header
        0 0.000000 0.000000   422:
        0 0.000000 0.000000   423:
        0 0.000000 0.000000   424:
        0 0.000000 0.000000   425:
        0 0.000000 0.000000   426:
        0 0.000000 0.000000   427:
        0 0.000000 0.000000   428:
        1 0.000000 0.000000   429:sub header { #web
        1 0.000004 0.000000   430:    my $self = shift;
        1 0.000006 0.000000   431: my $req  = shift;
        1 0.000004 0.000000   432: my $ret  = '';
        0 0.000000 0.000000   433:
        1 0.000064 0.000000   434:    my $cgi  = $self->cgi();
        1 0.000084 0.000000   435: my $url  = $self->url;
        1 0.000103 0.000000   436: my $title = $self->system('title');
        1 0.000087 0.000000   437: my $version = $self->version;
        0 0.000000 0.000000   438:
        1 0.000088 0.000000   439: $ret .= $cgi->header(
        0 0.000000 0.000000   440:  -'expires' => '+15m',
        0 0.000000 0.000000   441:  -'type'  => (($req eq 'graph') ?
        0 0.000000 0.000000   442: );
        0 0.000000 0.000000   443:
        1 0.000013 0.000000   444: $title = qq|$title Web Interface $version
        1 0.000012 0.000000   445: my $call = ($req =~ /(commands|menu)/) ? $1
        1 0.000092 0.000000   446: my $functions = Perlbug::JS->new()->$call();
        0 0.000000 0.000000   447:
        1 0.000090 0.000000   448: $ret .= $cgi->start_html(
            ================ SmallProf version 0.9 ================
         Profile of /home/perlbug/perlbug/scripts/../Perlbug/Interface Page 261
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   449:  -'script' => $functions,
        0 0.000000 0.000000   450:  -'title' => $title,
        0 0.000000 0.000000   451: );
        0 0.000000 0.000000   452:
        1 0.000128 0.000000   453: $self->debug(3, "req($req) -> $call ->
        0 0.000000 0.000000   454:
        1 0.000049 0.000000   455:    return $ret;
        0 0.000000 0.000000   456:}
        0 0.000000 0.000000   457:
        0 0.000000 0.000000   458:
        0 0.000000 0.000000   459:=item request
        0 0.000000 0.000000   460:
        0 0.000000 0.000000   461:
        0 0.000000 0.000000   462:
        0 0.000000 0.000000   463:
        0 0.000000 0.000000   464:
        0 0.000000 0.000000   465:
        0 0.000000 0.000000   466:
        1 0.000000 0.000000   467:sub request {
        1 0.000005 0.000000   468:    my $self = shift;
        1 0.000006 0.000000   469: my $req  = shift;
        1 0.000004 0.000000   470: my $ret  = '';
        0 0.000000 0.000000   471:
        1 0.000070 0.000000   472:    my $cgi  = $self->cgi();
        0 0.000000 0.000000   473:
        1 0.000005 0.000000   474: my $orig = $req;
        1 0.000002 0.000000   475:    if (defined($req)) {
        1 0.000003 0.000000   476:  $req = 'headers'  if $req =~
        1 0.000009 0.000000   477:  $req = 'objectids'  if $req =~
        1 0.000004 0.000000   478:  $req = 'spec'   if $req =~ /^info$/i;
        1 0.000003 0.000000   479:  $req = 'update'  if $req =~ /^nocc$/i;
        1 0.000010 0.000000   480:  $req = 'web_query'  if $req =~ /^query$/i;
        0 0.000000 0.000000   481:    }
        1 0.000073 0.000000   482: $self->debug(0, "Web::request($req)
        0 0.000000 0.000000   483:
        1 0.000067 0.000000   484:    if (!($self->can($req))) { # ok and can
        0 0.000000 0.000000   485:  $self->error("unsupported request($req)!");
        0 0.000000 0.000000   486: } else {
        1 0.000012 0.000000   487:  if ($req !~ /^delete|sql|update$/i) {
        1 0.000156 0.000000   488:   print $self->$req($orig);
        0 0.000000 0.000000   489:  } else {
        0 0.000000 0.000000   490:   if ($self->isadmin =~ /^(\w+)$/) {
        0 0.000000 0.000000   491:    print $self->$req();
        0 0.000000 0.000000   492:   } else {
        0 0.000000 0.000000   493:    $self->error("User(".$self->isadmin.")
        0 0.000000 0.000000   494:   }
        0 0.000000 0.000000   495:  }
        0 0.000000 0.000000   496: }
        0 0.000000 0.000000   497:
        1 0.000120 0.000000   498: $self->debug(0, "Web::request($req) done");
        0 0.000000 0.000000   499:
        1 0.000018 0.000000   500:    return '';
        0 0.000000 0.000000   501:}
        0 0.000000 0.000000   502:
        0 0.000000 0.000000   503:
        0 0.000000 0.000000   504:=item target2file
            ================ SmallProf version 0.9 ================
         Profile of /home/perlbug/perlbug/scripts/../Perlbug/Interface Page 262
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   505:
        0 0.000000 0.000000   506:
        0 0.000000 0.000000   507:
        0 0.000000 0.000000   508:
        0 0.000000 0.000000   509:
        0 0.000000 0.000000   510:
        0 0.000000 0.000000   511:
        0 0.000000 0.000000   512:
        0 0.000000 0.000000   513:
        0 0.000000 0.000000   514:sub target2file {
        0 0.000000 0.000000   515: my $self = shift;
        0 0.000000 0.000000   516: my $tgt  = shift;
        0 0.000000 0.000000   517: my $file = '';
        0 0.000000 0.000000   518:
        0 0.000000 0.000000   519: if ($tgt !~ /\w+/) {
        0 0.000000 0.000000   520:  $self->error("can't remap duff
        0 0.000000 0.000000   521: } else {
        0 0.000000 0.000000   522:  $file = $self->directory('web').$self-
        0 0.000000 0.000000   523: }
        0 0.000000 0.000000   524:
        0 0.000000 0.000000   525: return $file;
        0 0.000000 0.000000   526:}
        0 0.000000 0.000000   527:
        0 0.000000 0.000000   528:
        0 0.000000 0.000000   529:=item finish
        0 0.000000 0.000000   530:
        0 0.000000 0.000000   531:
        0 0.000000 0.000000   532:
        0 0.000000 0.000000   533:
        0 0.000000 0.000000   534:
        0 0.000000 0.000000   535:
        0 0.000000 0.000000   536:
        0 0.000000 0.000000   537:
        0 0.000000 0.000000   538:
        1 0.000000 0.000000   539:sub finish { # index/display/bottom/base -
        1 0.000006 0.000000   540: my $self = shift;
        1 0.000006 0.000000   541: my $req  = shift;
        1 0.000005 0.000000   542: my $ret  = '';
        0 0.000000 0.000000   543:
        1 0.000073 0.000000   544:    my $cgi  = $self->cgi();
        0 0.000000 0.000000   545:
        1 0.000010 0.000000   546: my $range = $self->{'_range'};
        1 0.000081 0.000000   547: if ($self->current('framed')) {
        1 0.000104 0.000000   548:  $ret .= $cgi->hidden(
        0 0.000000 0.000000   549:   -'name'  => 'req',
        0 0.000000 0.000000   550:   -'default'  => '',
        0 0.000000 0.000000   551:   -'override' => 1
        0 0.000000 0.000000   552:  ) unless $req =~ /index/i; # has it's own
        1 0.000067 0.000000   553:  $ret .= $cgi->hidden(
        0 0.000000 0.000000   554:   -'name'  => 'range',
        0 0.000000 0.000000   555:   -'default'  => $range,
        0 0.000000 0.000000   556:   -'override' => 1
        0 0.000000 0.000000   557:  );
        0 0.000000 0.000000   558: }
        1 0.000089 0.000000   559: $ret .= '<tr><td colspan=100%>'.$self-
        1 0.000007 0.000000   560: $ret .= '</table>';
            ================ SmallProf version 0.9 ================
         Profile of /home/perlbug/perlbug/scripts/../Perlbug/Interface Page 263
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   561:
        1 0.000139 0.000000   562: unless ($self->current('framed')) {
        0 0.000000 0.000000   563:  $ret .= $self->commands($req);
        0 0.000000 0.000000   564:  $ret .= $self->links($req);
        0 0.000000 0.000000   565: }
        0 0.000000 0.000000   566:
        1 0.000094 0.000000   567: $ret .= $cgi->end_form.$cgi->end_html;
        0 0.000000 0.000000   568:
        1 0.000153 0.000000   569: $self->debug(3, "ret($ret)") if $DEBUG;
        0 0.000000 0.000000   570:
        1 0.000135 0.000000   571: return $ret;
        0 0.000000 0.000000   572:}
        0 0.000000 0.000000   573:
        0 0.000000 0.000000   574:
        0 0.000000 0.000000   575:# REQUESTS
        0 0.000000 0.000000   576:#
        0 0.000000 0.000000   577:
        0 0.000000 0.000000   578:
        0 0.000000 0.000000   579:=item overview
        0 0.000000 0.000000   580:
        0 0.000000 0.000000   581:
        0 0.000000 0.000000   582:
        0 0.000000 0.000000   583:
        0 0.000000 0.000000   584:
        0 0.000000 0.000000   585:sub overview {
        0 0.000000 0.000000   586:    my $self = shift;
        0 0.000000 0.000000   587:    print $self->doo('h');
        0 0.000000 0.000000   588:}
        0 0.000000 0.000000   589:
        0 0.000000 0.000000   590:
        0 0.000000 0.000000   591:=item graph
        0 0.000000 0.000000   592:
        0 0.000000 0.000000   593:
        0 0.000000 0.000000   594:
        0 0.000000 0.000000   595:
        0 0.000000 0.000000   596:
        0 0.000000 0.000000   597:sub graph {
        0 0.000000 0.000000   598: my $self = shift;
        0 0.000000 0.000000   599:
        0 0.000000 0.000000   600:    my $cgi  = $self->cgi();
        0 0.000000 0.000000   601: my $flag = $cgi->param('graph') || 'status';
        0 0.000000 0.000000   602: my $title = $self->system('title');
        0 0.000000 0.000000   603:
        0 0.000000 0.000000   604: # DATA
        0 0.000000 0.000000   605: my @keys = ();
        0 0.000000 0.000000   606: my @vals = ();
        0 0.000000 0.000000   607: my $data = $self->stats;
        0 0.000000 0.000000   608: foreach my $key (keys %{$$data{$flag}}) {
        0 0.000000 0.000000   609:  next unless $key =~ /^(\w+)$/;
        0 0.000000 0.000000   610:  next unless $$data{$flag}{$key} =~
        0 0.000000 0.000000   611:  push(@keys, "$key ($$data{$flag}{$key})");
        0 0.000000 0.000000   612:  push(@vals, $$data{$flag}{$key});
        0 0.000000 0.000000   613: }
        0 0.000000 0.000000   614:
        0 0.000000 0.000000   615: # GRAPH
        0 0.000000 0.000000   616: eval { require GD::Graph::pie; }; # make
            ================ SmallProf version 0.9 ================
         Profile of /home/perlbug/perlbug/scripts/../Perlbug/Interface Page 264
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   617: if ($@) {
        0 0.000000 0.000000   618:  my $maintainer = $self-
        0 0.000000 0.000000   619:  print "<h3>Graph functionality unsupported,
        0 0.000000 0.000000   620:  $self->debug(0, "Failed to load GD::Graph
        0 0.000000 0.000000   621: } else {
        0 0.000000 0.000000   622:  my $gd = GD::Graph::pie->new(300, 300);
        0 0.000000 0.000000   623:  #        'types'        => [qw(pie lines
        0 0.000000 0.000000   624:  #        'default_type' => 'points',
        0 0.000000 0.000000   625:  #);
        0 0.000000 0.000000   626:  #$gd->set_legend( qw( one two three four
        0 0.000000 0.000000   627:  $gd->set(
        0 0.000000 0.000000   628:   'axislabelclr'     => 'black',
        0 0.000000 0.000000   629:   'title'            => "$title overview
        0 0.000000 0.000000   630:  );
        0 0.000000 0.000000   631:  my $graph = $gd->plot([\@keys, \@vals]);
        0 0.000000 0.000000   632:  my $image = $graph->png;
        0 0.000000 0.000000   633:  binmode STDOUT;
        0 0.000000 0.000000   634:  print $image;
        0 0.000000 0.000000   635: }
        0 0.000000 0.000000   636:
        0 0.000000 0.000000   637: return '';
        0 0.000000 0.000000   638:}
        0 0.000000 0.000000   639:
        0 0.000000 0.000000   640:
        0 0.000000 0.000000   641:=item date
        0 0.000000 0.000000   642:
        0 0.000000 0.000000   643:
        0 0.000000 0.000000   644:
        0 0.000000 0.000000   645:
        0 0.000000 0.000000   646:
        0 0.000000 0.000000   647:sub date {
        0 0.000000 0.000000   648:    my $self = shift;
        0 0.000000 0.000000   649:
        0 0.000000 0.000000   650:    my $cgi  = $self->cgi();
        0 0.000000 0.000000   651:
        0 0.000000 0.000000   652:    my $date = $cgi->param('date');
        0 0.000000 0.000000   653:    $self->debug(1, "date($date)") if $DEBUG;
        0 0.000000 0.000000   654:    my $filter = '';
        0 0.000000 0.000000   655:
        0 0.000000 0.000000   656:    if ($date =~ /^\d{8}$/) {
        0 0.000000 0.000000   657:  $filter = "TO_DAYS($date)";
        0 0.000000 0.000000   658:  $self->debug(0, "using given date($date)")
        0 0.000000 0.000000   659:    } elsif ($date =~ /^\d+$/) {
        0 0.000000 0.000000   660:  $filter = "TO_DAYS($date)";
        0 0.000000 0.000000   661:  $self->debug(0, "using non-norm given
        0 0.000000 0.000000   662:    } elsif ($date =~ /^\-(\d+)$/) {
        0 0.000000 0.000000   663:  $filter = "(TO_DAYS(now())-$1)";
        0 0.000000 0.000000   664:  $self->debug(0, "using minus given
        0 0.000000 0.000000   665:    } else {
        0 0.000000 0.000000   666:  $filter = "TO_DAYS(now()) - 10";
        0 0.000000 0.000000   667:  $self->debug(0, "unrecognised date($date)
        0 0.000000 0.000000   668:    }
        0 0.000000 0.000000   669:
        0 0.000000 0.000000   670: my $o_bug = $self->object('bug');
        0 0.000000 0.000000   671:    my @bids = $o_bug->ids("TO_DAYS(created)
        0 0.000000 0.000000   672:
            ================ SmallProf version 0.9 ================
         Profile of /home/perlbug/perlbug/scripts/../Perlbug/Interface Page 265
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   673: my $max = $cgi->param('trim') || 10;
        0 0.000000 0.000000   674: print "found ".@bids." bugs ($filter)
        0 0.000000 0.000000   675: ($#bids) = ($max - 1) if scalar(@bids) >
        0 0.000000 0.000000   676: foreach my $id (@bids) {
        0 0.000000 0.000000   677:  print $o_bug->read($id)->format;
        0 0.000000 0.000000   678: }
        0 0.000000 0.000000   679:
        0 0.000000 0.000000   680:    return '';
        0 0.000000 0.000000   681:}
        0 0.000000 0.000000   682:
        0 0.000000 0.000000   683:
        0 0.000000 0.000000   684:=item objectids
        0 0.000000 0.000000   685:
        0 0.000000 0.000000   686:
        0 0.000000 0.000000   687:
        0 0.000000 0.000000   688:
        0 0.000000 0.000000   689:
        0 0.000000 0.000000   690:
        0 0.000000 0.000000   691:
        0 0.000000 0.000000   692:sub objectids {
        0 0.000000 0.000000   693:    my $self = shift;
        0 0.000000 0.000000   694:    my $cgi  = $self->cgi();
        0 0.000000 0.000000   695:
        0 0.000000 0.000000   696: my ($obj) = my ($req) = lc($cgi-
        0 0.000000 0.000000   697: $obj =~ s/^(\w+)_id$/$1/;
        0 0.000000 0.000000   698:    my @ids = $cgi->param("${obj}_id");
        0 0.000000 0.000000   699: my $trim = $cgi->param('trim') || 50;
        0 0.000000 0.000000   700:
        0 0.000000 0.000000   701: my $objects = join('|', $self-
        0 0.000000 0.000000   702: $self->debug(0, "req($req) obj($obj)
        0 0.000000 0.000000   703:
        0 0.000000 0.000000   704: if ($obj !~ /^($objects)$/) {
        0 0.000000 0.000000   705:  print "<h3>unrecognised obj($obj) header
        0 0.000000 0.000000   706: } else {
        0 0.000000 0.000000   707:  $#ids = $trim if $trim <= scalar(@ids);
        0 0.000000 0.000000   708:  my $o_obj = $self->object($obj);
        0 0.000000 0.000000   709:  foreach my $oid (@ids) {
        0 0.000000 0.000000   710:   $o_obj->read($oid);
        0 0.000000 0.000000   711:   print $o_obj->format if $o_obj->READ &&
        0 0.000000 0.000000   712:  }
        0 0.000000 0.000000   713:    }
        0 0.000000 0.000000   714:
        0 0.000000 0.000000   715:    return '';
        0 0.000000 0.000000   716:}
        0 0.000000 0.000000   717:
        0 0.000000 0.000000   718:
        0 0.000000 0.000000   719:=item hist
        0 0.000000 0.000000   720:
        0 0.000000 0.000000   721:
        0 0.000000 0.000000   722:
        0 0.000000 0.000000   723:
        0 0.000000 0.000000   724:
        0 0.000000 0.000000   725:
        0 0.000000 0.000000   726:
        0 0.000000 0.000000   727:sub hist {
        0 0.000000 0.000000   728:    my $self = shift;
            ================ SmallProf version 0.9 ================
         Profile of /home/perlbug/perlbug/scripts/../Perlbug/Interface Page 266
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   729:    my $cgi  = $self->cgi();
        0 0.000000 0.000000   730:
        0 0.000000 0.000000   731:    my ($bid) = $cgi->param('hist');
        0 0.000000 0.000000   732:    $self->debug(1, "hist: bid($bid)") if
        0 0.000000 0.000000   733:
        0 0.000000 0.000000   734:    my ($bik) = $self->href('bug_id', [$bid],
        0 0.000000 0.000000   735:    my $title = $self->system('title');
        0 0.000000 0.000000   736:    my $hist = qq|<table border=1>
        0 0.000000 0.000000   737:        <tr><td colspan=3 width=500><b>$title
        0 0.000000 0.000000   738:
        0 0.000000 0.000000   739:    |;
        0 0.000000 0.000000   740:    my $sql = "SELECT * FROM pb_log WHERE
        0 0.000000 0.000000   741:    my @data = $self->get_data($sql);
        0 0.000000 0.000000   742: my $o_usr = $self->object('user');
        0 0.000000 0.000000   743:    foreach my $data (@data) {
        0 0.000000 0.000000   744:  next unless ref($data) eq 'HASH';
        0 0.000000 0.000000   745:  my %data = %{$data};
        0 0.000000 0.000000   746:  my $admin = $data{'userid'};
        0 0.000000 0.000000   747:  $o_usr->read($admin);
        0 0.000000 0.000000   748:  if ($o_usr->READ) {
        0 0.000000 0.000000   749:   my $h_usr = $o_usr->htmlify($o_usr-
        0 0.000000 0.000000   750:   my $name = $$h_usr{'name'}.'
        0 0.000000 0.000000   751:   my $date = $data{'ts'};
        0 0.000000 0.000000   752:   my $entry = $data{'entry'};
        0 0.000000 0.000000   753:   $hist .=
        0 0.000000 0.000000   754:  }
        0 0.000000 0.000000   755:    }
        0 0.000000 0.000000   756:    $hist .= '</table>';
        0 0.000000 0.000000   757:    print $hist;
        0 0.000000 0.000000   758:    return '';
        0 0.000000 0.000000   759:}
        0 0.000000 0.000000   760:
        0 0.000000 0.000000   761:
        0 0.000000 0.000000   762:=item headers
        0 0.000000 0.000000   763:
        0 0.000000 0.000000   764:
        0 0.000000 0.000000   765:
        0 0.000000 0.000000   766:
        0 0.000000 0.000000   767:
        0 0.000000 0.000000   768:
        0 0.000000 0.000000   769:
        0 0.000000 0.000000   770:sub headers {
        0 0.000000 0.000000   771:    my $self = shift;
        0 0.000000 0.000000   772:    my $cgi  = $self->cgi();
        0 0.000000 0.000000   773:
        0 0.000000 0.000000   774: my ($obj) = my ($req) = lc($cgi-
        0 0.000000 0.000000   775: $obj =~ s/^(\w+)_header$/$1/;
        0 0.000000 0.000000   776:    my ($id)  = $cgi->param("${obj}_header");
        0 0.000000 0.000000   777:
        0 0.000000 0.000000   778: my $objects = join('|', $self-
        0 0.000000 0.000000   779: $self->debug(0, "req($req) obj($obj)
        0 0.000000 0.000000   780:
        0 0.000000 0.000000   781: if ($obj !~ /^($objects)$/) {
        0 0.000000 0.000000   782:  $self->error("Can't do invalid obj($obj)
        0 0.000000 0.000000   783: } else {
        0 0.000000 0.000000   784:  $obj = 'bug' if $obj =~ /parent|child/i;
            ================ SmallProf version 0.9 ================
         Profile of /home/perlbug/perlbug/scripts/../Perlbug/Interface Page 267
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   785:     my ($item) = $self->href($obj.'_id',
        0 0.000000 0.000000   786:     my $title = $self->system('title');
        0 0.000000 0.000000   787:     my $headers = qq|<table border=1>
        0 0.000000 0.000000   788:         <tr><td colspan=3
        0 0.000000 0.000000   789:     |;
        0 0.000000 0.000000   790:  my $data = $self->object($obj)->read($id)-
        0 0.000000 0.000000   791:     $headers .= "<tr><td colspan=3>&nbsp;";
        0 0.000000 0.000000   792:  $data = encode_entities($data);
        0 0.000000 0.000000   793:  $headers .= qq|<tr><td><pre>$data
        0 0.000000 0.000000   794:     $headers .= '</td></tr></table>';
        0 0.000000 0.000000   795:     print $headers;
        0 0.000000 0.000000   796:    }
        0 0.000000 0.000000   797:
        0 0.000000 0.000000   798: return '';
        0 0.000000 0.000000   799:}
        0 0.000000 0.000000   800:
        0 0.000000 0.000000   801:
        0 0.000000 0.000000   802:=item bidmids
        0 0.000000 0.000000   803:
        0 0.000000 0.000000   804:
        0 0.000000 0.000000   805:
        0 0.000000 0.000000   806:
        0 0.000000 0.000000   807:
        0 0.000000 0.000000   808:sub bidmids {
        0 0.000000 0.000000   809:    my $self = shift;
        0 0.000000 0.000000   810:    my $cgi  = $self->cgi();
        0 0.000000 0.000000   811:
        0 0.000000 0.000000   812:    my @bids = $cgi->param('bidmids');
        0 0.000000 0.000000   813:
        0 0.000000 0.000000   814: foreach my $bid (@bids) {
        0 0.000000 0.000000   815:  print $self->doB([$bid]);
        0 0.000000 0.000000   816: }
        0 0.000000 0.000000   817:
        0 0.000000 0.000000   818:    return '';
        0 0.000000 0.000000   819:}
        0 0.000000 0.000000   820:
        0 0.000000 0.000000   821:
        0 0.000000 0.000000   822:=item administrators
        0 0.000000 0.000000   823:
        0 0.000000 0.000000   824:
        0 0.000000 0.000000   825:
        0 0.000000 0.000000   826:
        0 0.000000 0.000000   827:
        0 0.000000 0.000000   828:sub administrators {
        0 0.000000 0.000000   829:    my $self  = shift;
        0 0.000000 0.000000   830:    my $cgi   = $self->cgi();
        0 0.000000 0.000000   831:    my $url   = $self->url;
        0 0.000000 0.000000   832:    my $title = $self->system('title');
        0 0.000000 0.000000   833:    print qq|<h2>$title
        0 0.000000 0.000000   834:
        0 0.000000 0.000000   835: my $o_usr  = $self->object('user');
        0 0.000000 0.000000   836: my $filter = ($self->isadmin eq $self-
        0 0.000000 0.000000   837:  ? ''
        0 0.000000 0.000000   838:  : "active IN ('1', '0')";
        0 0.000000 0.000000   839: my @admins = $o_usr->ids($filter);
        0 0.000000 0.000000   840:
            ================ SmallProf version 0.9 ================
         Profile of /home/perlbug/perlbug/scripts/../Perlbug/Interface Page 268
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   841:    foreach my $oid (@admins) {
        0 0.000000 0.000000   842:  print $o_usr->read($oid)->format;
        0 0.000000 0.000000   843: }
        0 0.000000 0.000000   844:
        0 0.000000 0.000000   845:    my $ADMIN = '';
        0 0.000000 0.000000   846:    if ($self->isadmin eq $self-
        0 0.000000 0.000000   847:        my $hidden = qq|<input type=hidden
        0 0.000000 0.000000   848:        $ADMIN = qq|</table><table><tr><td
        0 0.000000 0.000000   849:    join("</td></tr>\n<tr><td>",
        0 0.000000 0.000000   850:                                    $cgi-
        0 0.000000 0.000000   851:    'Userid:&nbsp; </td><td>'.      $cgi-
        0 0.000000 0.000000   852:    'Name:&nbsp; </td><td>'.        $cgi-
        0 0.000000 0.000000   853:    'Active:&nbsp; </td><td>'.      $cgi-
        0 0.000000 0.000000   854:    'Password:&nbsp; </td><td>'.    $cgi-
        0 0.000000 0.000000   855:    'Address:&nbsp; </td><td>'.     $cgi-
        0 0.000000 0.000000   856:    'Match Adress:&nbsp; </td><td>'.$cgi-
        0 0.000000 0.000000   857:        );
        0 0.000000 0.000000   858:        $ADMIN .= '</td></tr>';
        0 0.000000 0.000000   859:    }
        0 0.000000 0.000000   860:    print $ADMIN.'</table>';
        0 0.000000 0.000000   861:    return '';
        0 0.000000 0.000000   862:}
        0 0.000000 0.000000   863:
        0 0.000000 0.000000   864:
        0 0.000000 0.000000   865:=item groups
        0 0.000000 0.000000   866:
        0 0.000000 0.000000   867:
        0 0.000000 0.000000   868:
        0 0.000000 0.000000   869:
        0 0.000000 0.000000   870:
        0 0.000000 0.000000   871:sub groups {
        0 0.000000 0.000000   872:    my $self  = shift;
        0 0.000000 0.000000   873:    my $cgi   = $self->cgi();
        0 0.000000 0.000000   874:    my $url   = $self->url;
        0 0.000000 0.000000   875:    my $title = $self->system('title');
        0 0.000000 0.000000   876:    print qq|<h2>$title groups:</h2>|;
        0 0.000000 0.000000   877:
        0 0.000000 0.000000   878:    my $o_grp = $self->object('group');
        0 0.000000 0.000000   879:    my $o_usr = $self->object('user');
        0 0.000000 0.000000   880: my @gids = $o_grp->ids;
        0 0.000000 0.000000   881:
        0 0.000000 0.000000   882:    foreach my $oid (@gids) {
        0 0.000000 0.000000   883:  print $o_grp->read($oid)->format;
        0 0.000000 0.000000   884: }
        0 0.000000 0.000000   885:
        0 0.000000 0.000000   886: if ($self->isadmin =~ /\w+/ and $self-
        0 0.000000 0.000000   887:  my $add = $cgi->textfield(-'name' =>
        0 0.000000 0.000000   888:  my $groups = "</table><hr><table
        0 0.000000 0.000000   889:
        0 0.000000 0.000000   890:  $groups .= "<tr><td><b>Add a new group
        0 0.000000 0.000000   891:
        0 0.000000 0.000000   892:  my $desc = $cgi->textfield(-'name' =>
        0 0.000000 0.000000   893:  $groups .= "<tr><td><b>Description for new
        0 0.000000 0.000000   894:
        0 0.000000 0.000000   895:  my $admins = $o_usr->selector('addusers');
        0 0.000000 0.000000   896:  $groups .= "<tr><td><b>New group
            ================ SmallProf version 0.9 ================
         Profile of /home/perlbug/perlbug/scripts/../Perlbug/Interface Page 269
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   897:
        0 0.000000 0.000000   898:  $groups .= "</table><hr>";
        0 0.000000 0.000000   899:  print $groups;
        0 0.000000 0.000000   900: }
        0 0.000000 0.000000   901:
        0 0.000000 0.000000   902: return '';
        0 0.000000 0.000000   903:}
        0 0.000000 0.000000   904:
        0 0.000000 0.000000   905:
        0 0.000000 0.000000   906:=item spec
        0 0.000000 0.000000   907:
        0 0.000000 0.000000   908:
        0 0.000000 0.000000   909:
        0 0.000000 0.000000   910:
        0 0.000000 0.000000   911:
        0 0.000000 0.000000   912:sub spec {
        0 0.000000 0.000000   913:    my $self    = shift;
        0 0.000000 0.000000   914: my ($dynamic) = $self->SUPER::spec; # Base
        0 0.000000 0.000000   915: my $spec = join('', $self->read('spec'));
        0 0.000000 0.000000   916:=pod
        0 0.000000 0.000000   917:
        0 0.000000 0.000000   918:
        0 0.000000 0.000000   919:
        0 0.000000 0.000000   920:
        0 0.000000 0.000000   921:
        0 0.000000 0.000000   922:
        0 0.000000 0.000000   923:
        0 0.000000 0.000000   924:
        0 0.000000 0.000000   925:
        0 0.000000 0.000000   926:
        0 0.000000 0.000000   927:
        0 0.000000 0.000000   928:
        0 0.000000 0.000000   929:
        0 0.000000 0.000000   930:
        0 0.000000 0.000000   931:
        0 0.000000 0.000000   932: my $dynaspec = qq|
        0 0.000000 0.000000   933:  <table border=0 align=center>
        0 0.000000 0.000000   934:   <tr><td><pre>$dynamic</pre></td></tr>
        0 0.000000 0.000000   935:   <tr><td><pre>$spec</pre></td></tr>
        0 0.000000 0.000000   936:  </table>
        0 0.000000 0.000000   937: |;
        0 0.000000 0.000000   938: print $dynaspec;
        0 0.000000 0.000000   939:    return '';
        0 0.000000 0.000000   940:}
        0 0.000000 0.000000   941:
        0 0.000000 0.000000   942:
        0 0.000000 0.000000   943:=item webhelp
        0 0.000000 0.000000   944:
        0 0.000000 0.000000   945:
        0 0.000000 0.000000   946:
        0 0.000000 0.000000   947:
        0 0.000000 0.000000   948:
        0 0.000000 0.000000   949:
        0 0.000000 0.000000   950:
        0 0.000000 0.000000   951:sub webhelp { #web help
        0 0.000000 0.000000   952: my $self = shift;
            ================ SmallProf version 0.9 ================
         Profile of /home/perlbug/perlbug/scripts/../Perlbug/Interface Page 270
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   953:
        0 0.000000 0.000000   954: my $perlbug = $self->SUPER::help; # Base
        0 0.000000 0.000000   955: my $webhelp = join('', $self-
        0 0.000000 0.000000   956:
        0 0.000000 0.000000   957: # rjsf - may not need to do all this
        0 0.000000 0.000000   958: # $perlbug_help =~
        0 0.000000 0.000000   959: # $perlbug_help =~ s/\b([\<\w+\-
        0 0.000000 0.000000   960:
        0 0.000000 0.000000   961: my $help = qq|
        0 0.000000 0.000000   962:  <table align=center>
        0 0.000000 0.000000   963:   <tr><td><pre>$perlbug</pre><hr></td></tr>
        0 0.000000 0.000000   964:  </table>
        0 0.000000 0.000000   965:  <hr>
        0 0.000000 0.000000   966:  <table border=0 align=center>
        0 0.000000 0.000000   967:   <tr><td> $webhelp </td></tr>
        0 0.000000 0.000000   968:  </table>
        0 0.000000 0.000000   969:    |;
        0 0.000000 0.000000   970: print $help;
        0 0.000000 0.000000   971:
        0 0.000000 0.000000   972: return '';
        0 0.000000 0.000000   973:}
        0 0.000000 0.000000   974:
        0 0.000000 0.000000   975:
        0 0.000000 0.000000   976:=item mailhelp
        0 0.000000 0.000000   977:
        0 0.000000 0.000000   978:
        0 0.000000 0.000000   979:
        0 0.000000 0.000000   980:
        0 0.000000 0.000000   981:
        0 0.000000 0.000000   982:
        0 0.000000 0.000000   983:
        0 0.000000 0.000000   984:sub mailhelp { #mailhelp
        0 0.000000 0.000000   985: my $self = shift;
        0 0.000000 0.000000   986: my $url  = $self->url;
        0 0.000000 0.000000   987: my $email = $self->email('domain');
        0 0.000000 0.000000   988: my $bugdb = $self->email('bugdb');
        0 0.000000 0.000000   989: my ($perlbug_help) = $self->SUPER::doh; #
        0 0.000000 0.000000   990: my $help = join('', $self-
        0 0.000000 0.000000   991: my $total = $self->object('bug')->ids;
        0 0.000000 0.000000   992: $perlbug_help =~
        0 0.000000 0.000000   993: $perlbug_help =~ s/\b([\<\w+\-
        0 0.000000 0.000000   994: my $HELP = qq|
        0 0.000000 0.000000   995:  <table align=center>
        0 0.000000 0.000000   996:
        0 0.000000 0.000000   997:  </table>
        0 0.000000 0.000000   998:  <hr>
        0 0.000000 0.000000   999:  <table border=0 align=center>
        0 0.000000 0.000000  1000:   <tr><td><pre>$help</pre></td></tr>
        0 0.000000 0.000000  1001:  </table>
        0 0.000000 0.000000  1002:    |;
        0 0.000000 0.000000  1003: print $HELP;
        0 0.000000 0.000000  1004: return '';
        0 0.000000 0.000000  1005:}
        0 0.000000 0.000000  1006:
        0 0.000000 0.000000  1007:
        0 0.000000 0.000000  1008:=item delete
            ================ SmallProf version 0.9 ================
         Profile of /home/perlbug/perlbug/scripts/../Perlbug/Interface Page 271
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000  1009:
        0 0.000000 0.000000  1010:
        0 0.000000 0.000000  1011:
        0 0.000000 0.000000  1012:
        0 0.000000 0.000000  1013:
        0 0.000000 0.000000  1014:sub delete {
        0 0.000000 0.000000  1015:    my $self = shift;
        0 0.000000 0.000000  1016:    my $cgi  = $self->cgi();
        0 0.000000 0.000000  1017:
        0 0.000000 0.000000  1018: my @bugids = $cgi->param('bugids');
        0 0.000000 0.000000  1019: if (scalar @bugids >= 1) {
        0 0.000000 0.000000  1020:   my $res = $self->dox(\@bugids); # doX
        0 0.000000 0.000000  1021:  if ($res >= 1) {
        0 0.000000 0.000000  1022:   print "bugids (@bugids) succesfully
        0 0.000000 0.000000  1023:  } else {
        0 0.000000 0.000000  1024:   my $maintainer = $self-
        0 0.000000 0.000000  1025:   $maintainer = qq|<a href="mailto:
        0 0.000000 0.000000  1026:   print "<hr>bugids not entirely deleted,
        0 0.000000 0.000000  1027:   print '<table border=1>', $self-
        0 0.000000 0.000000  1028:  }
        0 0.000000 0.000000  1029:    } else {
        0 0.000000 0.000000  1030:  if ($cgi->param('userids') >= 1) {
        0 0.000000 0.000000  1031:   my $maintainer = $self-
        0 0.000000 0.000000  1032:   print "Cannot delete adminstrator from web
        0 0.000000 0.000000  1033:  } else {
        0 0.000000 0.000000  1034:   print "No bugids (@bugids) selected for
        0 0.000000 0.000000  1035:  }
        0 0.000000 0.000000  1036: }
        0 0.000000 0.000000  1037: return '';
        0 0.000000 0.000000  1038:}
        0 0.000000 0.000000  1039:
        0 0.000000 0.000000  1040:
        0 0.000000 0.000000  1041:=item sql
        0 0.000000 0.000000  1042:
        0 0.000000 0.000000  1043:
        0 0.000000 0.000000  1044:
        0 0.000000 0.000000  1045:
        0 0.000000 0.000000  1046:
        0 0.000000 0.000000  1047:sub sql {
        0 0.000000 0.000000  1048:    my $self = shift;
        0 0.000000 0.000000  1049:    my $cgi  = $self->cgi();
        0 0.000000 0.000000  1050:
        0 0.000000 0.000000  1051:    my $sql = $cgi->param('sql');
        0 0.000000 0.000000  1052:    $sql =~ s/^\s*\w+(.*)$/SELECT $1/;
        0 0.000000 0.000000  1053:    my ($res) = $self->doq($sql);
        0 0.000000 0.000000  1054:
        0 0.000000 0.000000  1055:    return $res;
        0 0.000000 0.000000  1056:}
        0 0.000000 0.000000  1057:
        0 0.000000 0.000000  1058:
        0 0.000000 0.000000  1059:=item todo
        0 0.000000 0.000000  1060:
        0 0.000000 0.000000  1061:
        0 0.000000 0.000000  1062:
        0 0.000000 0.000000  1063:
        0 0.000000 0.000000  1064:
            ================ SmallProf version 0.9 ================
         Profile of /home/perlbug/perlbug/scripts/../Perlbug/Interface Page 272
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000  1065:sub todo { # mailto -> maintainer
        0 0.000000 0.000000  1066:    my $self = shift;
        0 0.000000 0.000000  1067: my $cgi = $self->cgi();
        0 0.000000 0.000000  1068: my $tup = $cgi->param('append');
        0 0.000000 0.000000  1069: if (defined($tup) && $tup =~ /\w+/ &&
        0 0.000000 0.000000  1070:  # just append it
        0 0.000000 0.000000  1071:  my $spacer = '       '; # 7
        0 0.000000 0.000000  1072:  $self->debug(0, "Appending to todo:
        0 0.000000 0.000000  1073:  $self->append('todo', "\n$spacer $tup\n");
        0 0.000000 0.000000  1074:  # my $i_todo = $self->SUPER::todo($tup); #
        0 0.000000 0.000000  1075: }
        0 0.000000 0.000000  1076: my $todo = join('', $self->read('todo'));
        0 0.000000 0.000000  1077:    print "<pre>$todo</pre>";
        0 0.000000 0.000000  1078:    return '';
        0 0.000000 0.000000  1079:}
        0 0.000000 0.000000  1080:
        0 0.000000 0.000000  1081:
        0 0.000000 0.000000  1082:=item adminfaq
        0 0.000000 0.000000  1083:
        0 0.000000 0.000000  1084:
        0 0.000000 0.000000  1085:
        0 0.000000 0.000000  1086:
        0 0.000000 0.000000  1087:
        0 0.000000 0.000000  1088:sub adminfaq { # ...
        0 0.000000 0.000000  1089:    my $self = shift;
        0 0.000000 0.000000  1090: my $cgi = $self->cgi();
        0 0.000000 0.000000  1091: my $adminfaq = join('', $self-
        0 0.000000 0.000000  1092:    print "<pre>$adminfaq</pre>";
        0 0.000000 0.000000  1093:    return '';
        0 0.000000 0.000000  1094:}
        0 0.000000 0.000000  1095:
        0 0.000000 0.000000  1096:
        0 0.000000 0.000000  1097:=item web_query
        0 0.000000 0.000000  1098:
        0 0.000000 0.000000  1099:
        0 0.000000 0.000000  1100:
        0 0.000000 0.000000  1101:
        0 0.000000 0.000000  1102:
        1 0.000000 0.000000  1103:sub web_query { # results - don't map to
        1 0.000006 0.000000  1104:    my $self = shift;
        1 0.000078 0.000000  1105:    my $cgi  = $self->cgi();
        0 0.000000 0.000000  1106:
        1 0.000084 0.000000  1107:    my $sql = $self->format_query($cgi);
        0 0.000000 0.000000  1108:
        1 0.000089 0.000000  1109: my $o_bug = $self->object('bug');
        1 0.000115 0.000000  1110: my $found = my @bids = $o_bug->ids($sql);
        1 0.000066 0.000000  1111: print "Found $found relevant bug ids<br>";
        0 0.000000 0.000000  1112:
        1 0.000005 0.000000  1113: if (@bids) {
        1 0.000086 0.000000  1114:  my $o_rng = $self->object('range');
        1 0.000091 0.000000  1115:  $o_rng->create({
        0 0.000000 0.000000  1116:   'rangeid' => $o_rng->new_id,
        0 0.000000 0.000000  1117:   'processid' => $$,
        0 0.000000 0.000000  1118:   'range'  => join(',', @bids), # $o_rng-
        0 0.000000 0.000000  1119:  });
        1 0.000087 0.000000  1120:  $self->{'_range'} = $o_rng->oid if $o_rng-
            ================ SmallProf version 0.9 ================
         Profile of /home/perlbug/perlbug/scripts/../Perlbug/Interface Page 273
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000  1121: }
        0 0.000000 0.000000  1122:
        1 0.000085 0.000000  1123: my $trim = $cgi->param('trim') || 25;
        1 0.000037 0.000000  1124: if (($trim !~ /^\d+$/) || ($trim >= 2501)) {
        0 0.000000 0.000000  1125:  print "Sorry trim($trim) is not conducive
        0 0.000000 0.000000  1126:  $trim = 101;
        0 0.000000 0.000000  1127: }
        0 0.000000 0.000000  1128:
        1 0.000006 0.000000  1129: if ($found >= $trim) {
        1 0.000058 0.000000  1130:        print "Showing '$trim'<br>" if $trim
        1 0.000128 0.000000  1131:  $#bids = $trim - 1 if $trim =~ /^\d+$/;
        0 0.000000 0.000000  1132:    }
        0 0.000000 0.000000  1133:
        6 0.000441 0.000000  1134: print map { $o_bug->read($_)->format }
        0 0.000000 0.000000  1135:
        1 0.000038 0.000000  1136: return '';
        0 0.000000 0.000000  1137:}
        0 0.000000 0.000000  1138:
        0 0.000000 0.000000  1139:
        0 0.000000 0.000000  1140:=item search
        0 0.000000 0.000000  1141:
        0 0.000000 0.000000  1142:
        0 0.000000 0.000000  1143:
        0 0.000000 0.000000  1144:
        0 0.000000 0.000000  1145:
        0 0.000000 0.000000  1146:
        0 0.000000 0.000000  1147:
        0 0.000000 0.000000  1148:sub search {
        0 0.000000 0.000000  1149:    my $self = shift;
        0 0.000000 0.000000  1150:    my $cgi = $self->cgi();
        0 0.000000 0.000000  1151: my $o_bug = $self->object('bug');
        0 0.000000 0.000000  1152: my @bugs  = $o_bug->ids;
        0 0.000000 0.000000  1153: # my @sourceaddr = $o_bug-
        0 0.000000 0.000000  1154:
        0 0.000000 0.000000  1155: # Elements
        0 0.000000 0.000000  1156:    $self->debug(3, "Setting search form
        0 0.000000 0.000000  1157: my $body     = $cgi->textfield(-'name'  =>
        0 0.000000 0.000000  1158: my $bugid   = $cgi->textfield(-'name'  =>
        0 0.000000 0.000000  1159:    my $version  = $cgi->textfield(-'name'
        0 0.000000 0.000000  1160: my $patchid  = $cgi->textfield(-'name'  =>
        0 0.000000 0.000000  1161: my $patch    = $cgi->textfield(-'name'  =>
        0 0.000000 0.000000  1162: my $noteid   = $cgi->textfield(-'name'  =>
        0 0.000000 0.000000  1163: my $note     = $cgi->textfield(-'name'  =>
        0 0.000000 0.000000  1164: my $testid   = $cgi->textfield(-'name'  =>
        0 0.000000 0.000000  1165: my $test     = $cgi->textfield(-'name'  =>
        0 0.000000 0.000000  1166: my $changeid = $cgi->textfield(-'name'  =>
        0 0.000000 0.000000  1167: my $subject  = $cgi->textfield(-'name'  =>
        0 0.000000 0.000000  1168: my $sourceaddr= $cgi->textfield(-'name' =>
        0 0.000000 0.000000  1169: my $fixedin  = $cgi->textfield(-'name'  =>
        0 0.000000 0.000000  1170: my $msgid = $cgi->textfield(-'name'  =>
        0 0.000000 0.000000  1171:
        0 0.000000 0.000000  1172: my $admins   = $self->object('user')-
        0 0.000000 0.000000  1173: my $group    = $self->object('group')-
        0 0.000000 0.000000  1174: my $osnames  = $self->object('osname')-
        0 0.000000 0.000000  1175: my $project  = $self->object('project')-
        0 0.000000 0.000000  1176: my $severity = $self->object('severity')-
            ================ SmallProf version 0.9 ================
         Profile of /home/perlbug/perlbug/scripts/../Perlbug/Interface Page 274
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000  1177: my $status   = $self->object('status')-
        0 0.000000 0.000000  1178:
        0 0.000000 0.000000  1179: my %dates    = $self->date_hash; # 'labels'
        0 0.000000 0.000000  1180: my @dates    = keys %dates;
        0 0.000000 0.000000  1181: my $date     = $cgi->popup_menu(-'name' =>
        0 0.000000 0.000000  1182: # no case sensitivity in mysql?
        0 0.000000 0.000000  1183:    # my $case     = '';
        0 0.000000 0.000000  1184:    #if ($self->isadmin eq $self-
        0 0.000000 0.000000  1185:    #    $case     = 'Case: '.$cgi-
        0 0.000000 0.000000  1186:    #}
        0 0.000000 0.000000  1187:    my $andor_def = ($cgi->param('andor') =~
        0 0.000000 0.000000  1188:    my $andor    = $cgi->radio_group(-
        0 0.000000 0.000000  1189:    my $msgs_def = ($cgi->param('msgs') =~
        0 0.000000 0.000000  1190:    my $msgs     = $cgi->popup_menu(-'name'
        0 0.000000 0.000000  1191:    my $restrict_def = ($cgi->param('trim')
        0 0.000000 0.000000  1192:    my $restrict = $cgi->popup_menu(-'name'
        0 0.000000 0.000000  1193:    my %format   = ( 'h' => 'Html list', 'H'
        0 0.000000 0.000000  1194: # my %format   = ( 'h' => 'Html list', 'H'
        0 0.000000 0.000000  1195: my $format   = $cgi->radio_group(-'name' =>
        0 0.000000 0.000000  1196:    my $sqlshow_def = ($cgi->param('sqlshow')
        0 0.000000 0.000000  1197:    my $sqlshow  = $cgi->radio_group(-'name'
        0 0.000000 0.000000  1198:    my $url = $self->url;
        0 0.000000 0.000000  1199:    # Form <form name="bug query"
        0 0.000000 0.000000  1200: my $withbug  = $cgi->radio_group(-'name' =>
        0 0.000000 0.000000  1201: my $order  = $cgi->radio_group(-'name' =>
        0 0.000000 0.000000  1202: # HELP
        0 0.000000 0.000000  1203: my $BUG    = $self->help_ref('bug', 'Bug
        0 0.000000 0.000000  1204: my $VERSION = $self->help_ref('version',
        0 0.000000 0.000000  1205: my $FIXED  = $self->help_ref('fixed', 'Fixed
        0 0.000000 0.000000  1206: my $CHANGE = $self->help_ref('change',
        0 0.000000 0.000000  1207: my $STAT = $self->help_ref('status',
        0 0.000000 0.000000  1208: my $CAT  = $self->help_ref('group',
        0 0.000000 0.000000  1209: my $SEV  = $self->help_ref('severity',
        0 0.000000 0.000000  1210: my $OS  = $self->help_ref('osname',
        0 0.000000 0.000000  1211: my $SUBJ = $self->help_ref('subject',
        0 0.000000 0.000000  1212: my $BODY  = $self->help_ref('body', 'Body');
        0 0.000000 0.000000  1213: my $MSGID   = $self->help_ref('message_id',
        0 0.000000 0.000000  1214: my $SRCADDR = $self->help_ref('source_addr',
        0 0.000000 0.000000  1215: my $DATES = $self->help_ref('dates',
        0 0.000000 0.000000  1216: my $ADMIN   = $self->help_ref('admin',
        0 0.000000 0.000000  1217: my $MSGS    = $self->help_ref('messages',
        0 0.000000 0.000000  1218: my $RESTRICT= $self->help_ref('restrict',
        0 0.000000 0.000000  1219: my $FMT  = $self->help_ref('format',
        0 0.000000 0.000000  1220: my $SHOWSQL = $self->help_ref('show_sql',
        0 0.000000 0.000000  1221: my $ANDOR = $self->help_ref('and_or',
        0 0.000000 0.000000  1222: my $ASCD = $self->help_ref('asc_desc',
        0 0.000000 0.000000  1223: my $NOTE = $self->help_ref('note', 'Note
        0 0.000000 0.000000  1224: my $PATCH  = $self->help_ref('patch', 'Patch
        0 0.000000 0.000000  1225: my $TEST = $self->help_ref('test', 'Test
        0 0.000000 0.000000  1226: my $PROJECT = $self->help_ref('project',
        0 0.000000 0.000000  1227: my $form = qq|
        0 0.000000 0.000000  1228:     <table border=1><tr><td colspan=5><i>
        0 0.000000 0.000000  1229:     Select from the options (see <a
        0 0.000000 0.000000  1230:     </td></tr>
        0 0.000000 0.000000  1231:
        0 0.000000 0.000000  1232:
            ================ SmallProf version 0.9 ================
         Profile of /home/perlbug/perlbug/scripts/../Perlbug/Interface Page 275
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000  1233:     <tr><td
        0 0.000000 0.000000  1234:     <tr><td
        0 0.000000 0.000000  1235:
        0 0.000000 0.000000  1236:     <tr><td
        0 0.000000 0.000000  1237:
        0 0.000000 0.000000  1238:  </table>
        0 0.000000 0.000000  1239:    |;
        0 0.000000 0.000000  1240:=pod
        0 0.000000 0.000000  1241:
        0 0.000000 0.000000  1242:
        0 0.000000 0.000000  1243:
        0 0.000000 0.000000  1244:
        0 0.000000 0.000000  1245:
        0 0.000000 0.000000  1246:
        0 0.000000 0.000000  1247:
        0 0.000000 0.000000  1248:
        0 0.000000 0.000000  1249:
        0 0.000000 0.000000  1250:
        0 0.000000 0.000000  1251:
        0 0.000000 0.000000  1252:
        0 0.000000 0.000000  1253:    return $form;
        0 0.000000 0.000000  1254:}
        0 0.000000 0.000000  1255:
        0 0.000000 0.000000  1256:
        0 0.000000 0.000000  1257:=item update
        0 0.000000 0.000000  1258:
        0 0.000000 0.000000  1259:
        0 0.000000 0.000000  1260:
        0 0.000000 0.000000  1261:
        0 0.000000 0.000000  1262:
        0 0.000000 0.000000  1263:
        0 0.000000 0.000000  1264:
        0 0.000000 0.000000  1265:
        0 0.000000 0.000000  1266:
        0 0.000000 0.000000  1267:sub update {
        0 0.000000 0.000000  1268:    my $self = shift;
        0 0.000000 0.000000  1269:    my $req  = shift;
        0 0.000000 0.000000  1270:
        0 0.000000 0.000000  1271: my $nocc = ($req eq 'nocc') ? 1 : 0;
        0 0.000000 0.000000  1272: my $orig_fmt = $self->current('format');
        0 0.000000 0.000000  1273: my $orig_cxt = $self->current('context');
        0 0.000000 0.000000  1274:
        0 0.000000 0.000000  1275:    my $cgi = $self->cgi();
        0 0.000000 0.000000  1276:    my $newgroup = $cgi->param('addgroup');
        0 0.000000 0.000000  1277:    my $desc = $cgi->param('adddescription');
        0 0.000000 0.000000  1278:    my @bids = $cgi->param('bugids');
        0 0.000000 0.000000  1279:    my @cids = $cgi->param('changeids');
        0 0.000000 0.000000  1280:    my @gids = $cgi->param('groupids');
        0 0.000000 0.000000  1281:    my @nids = $cgi->param('noteids');
        0 0.000000 0.000000  1282:    my @pids = $cgi->param('patchids');
        0 0.000000 0.000000  1283:    my @tids = $cgi->param('testids');
        0 0.000000 0.000000  1284: my @uids = $cgi->param('userids');
        0 0.000000 0.000000  1285: my $args = "bugids(@bids), changeids(@cids),
        0 0.000000 0.000000  1286: my $total=
        0 0.000000 0.000000  1287:    my $ok   = 1;
        0 0.000000 0.000000  1288: if (!(scalar($total)) >= 1) {
            ================ SmallProf version 0.9 ================
         Profile of /home/perlbug/perlbug/scripts/../Perlbug/Interface Page 276
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000  1289:  $ok = 0;
        0 0.000000 0.000000  1290:  my $err = "Nothing($total) selected to
        0 0.000000 0.000000  1291:  $self->error($err);
        0 0.000000 0.000000  1292: } else {
        0 0.000000 0.000000  1293:  $self->debug(1, "working with $args") if
        0 0.000000 0.000000  1294: }
        0 0.000000 0.000000  1295:
        0 0.000000 0.000000  1296:=pod
        0 0.000000 0.000000  1297:
        0 0.000000 0.000000  1298:
        0 0.000000 0.000000  1299:
        0 0.000000 0.000000  1300:
        0 0.000000 0.000000  1301:
        0 0.000000 0.000000  1302:
        0 0.000000 0.000000  1303:
        0 0.000000 0.000000  1304:
        0 0.000000 0.000000  1305:
        0 0.000000 0.000000  1306:
        0 0.000000 0.000000  1307:
        0 0.000000 0.000000  1308:
        0 0.000000 0.000000  1309:
        0 0.000000 0.000000  1310:
        0 0.000000 0.000000  1311:
        0 0.000000 0.000000  1312:
        0 0.000000 0.000000  1313: # GROUP
        0 0.000000 0.000000  1314: if ($ok == 1 && scalar @gids >= 1) {
        0 0.000000 0.000000  1315:  my $o_grp = $self->object('group');
        0 0.000000 0.000000  1316:  $self->debug(1, "groups(@gids)") if $DEBUG;
        0 0.000000 0.000000  1317:     GROUP:
        0 0.000000 0.000000  1318:  foreach my $gid (@gids) {
        0 0.000000 0.000000  1319:   next GROUP unless $gid =~ /\d+/;
        0 0.000000 0.000000  1320:            next GROUP unless $ok == 1;
        0 0.000000 0.000000  1321:   my $o_grp = $self->object('group')-
        0 0.000000 0.000000  1322:   if ($o_grp->READ) {
        0 0.000000 0.000000  1323:    my $desc = $cgi-
        0 0.000000 0.000000  1324:    my $name = $cgi->param($gid.'_name') ||
        0 0.000000 0.000000  1325:    $o_grp->update({
        0 0.000000 0.000000  1326:     'name'   => $name,
        0 0.000000 0.000000  1327:     'description'  => $desc,
        0 0.000000 0.000000  1328:    });
        0 0.000000 0.000000  1329:
        0 0.000000 0.000000  1330:    my @uids = $cgi->param($gid.'_userids');
        0 0.000000 0.000000  1331:    $o_grp->relation('user')->store(\@uids)
        0 0.000000 0.000000  1332:
        0 0.000000 0.000000  1333:    my $addr = $cgi-
        0 0.000000 0.000000  1334:    $o_grp->relation('address')-
        0 0.000000 0.000000  1335:
        0 0.000000 0.000000  1336:    my @bids = $cgi-
        0 0.000000 0.000000  1337:    $o_grp->relation('bug')->assign(\@bids)
        0 0.000000 0.000000  1338:   }
        0 0.000000 0.000000  1339:     }
        0 0.000000 0.000000  1340:  print '<table border=1>', $self-
        0 0.000000 0.000000  1341: }
        0 0.000000 0.000000  1342:
        0 0.000000 0.000000  1343: # NEW GROUP
        0 0.000000 0.000000  1344: if ($ok == 1 && $newgroup) {
            ================ SmallProf version 0.9 ================
         Profile of /home/perlbug/perlbug/scripts/../Perlbug/Interface Page 277
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000  1345:  if ($newgroup !~ /^\w\w\w+$/) {
        0 0.000000 0.000000  1346:   $ok = 0;
        0 0.000000 0.000000  1347:   print "Group($newgroup) notallowed: please
        0 0.000000 0.000000  1348:  } else {
        0 0.000000 0.000000  1349:   my $o_grp = $self->object('group');
        0 0.000000 0.000000  1350:   my @gindb = $o_grp->col('name');
        0 0.000000 0.000000  1351:   my $pri = $o_grp->primary_key;
        0 0.000000 0.000000  1352:   $o_grp->create({
        0 0.000000 0.000000  1353:    $pri    => $o_grp->new_id,
        0 0.000000 0.000000  1354:    'name'   => $newgroup,
        0 0.000000 0.000000  1355:    'description' => $desc,
        0 0.000000 0.000000  1356:   });
        0 0.000000 0.000000  1357:   if ($o_grp->CREATED) {
        0 0.000000 0.000000  1358:    push(@gids, $o_grp->oid);
        0 0.000000 0.000000  1359:    my @uids = $cgi->param('addusers');
        0 0.000000 0.000000  1360:    $o_grp->relation('user')->store(\@uids)
        0 0.000000 0.000000  1361:   }
        0 0.000000 0.000000  1362:  }
        0 0.000000 0.000000  1363:        print '<table border=1>', $self-
        0 0.000000 0.000000  1364: }
        0 0.000000 0.000000  1365:
        0 0.000000 0.000000  1366: # BUG IDs
        0 0.000000 0.000000  1367:    if ($ok == 1 && scalar @bids >= 1) {
        0 0.000000 0.000000  1368:  my $o_bug = $self->object('bug');
        0 0.000000 0.000000  1369:  $self->debug(1, "bugs(@bids)") if $DEBUG;
        0 0.000000 0.000000  1370:  $self->current({'context', 'text'}); #
        0 0.000000 0.000000  1371:  $self->current({'format',  'a'});
        0 0.000000 0.000000  1372:     BUG:
        0 0.000000 0.000000  1373:  foreach my $bid (@bids) {
        0 0.000000 0.000000  1374:            next BUG unless $ok == 1;
        0 0.000000 0.000000  1375:   my $o_bug = $self->object('bug')-
        0 0.000000 0.000000  1376:   next BUG unless $o_bug->READ;
        0 0.000000 0.000000  1377:         # my $orig = $self-
        0 0.000000 0.000000  1378:   my $orig = $o_bug->format('a');
        0 0.000000 0.000000  1379:         $self->dok([$bid]);
        0 0.000000 0.000000  1380:   REL: # space separated(str2ids),
        0 0.000000 0.000000  1381:   foreach my $rel ($o_bug->rels) {
        0 0.000000 0.000000  1382:    next if $rel eq 'message';
        0 0.000000 0.000000  1383:    my $o_rel = $o_bug->relation($rel);
        0 0.000000 0.000000  1384:    my @update = ($rel =~
        0 0.000000 0.000000  1385:     ? split(/\s+/, $cgi-
        0 0.000000 0.000000  1386:     : $cgi->param($bid."_$rel");    # plain
        0 0.000000 0.000000  1387:    if (scalar(@update) >= 1 && $update[0] =~
        0 0.000000 0.000000  1388:     my $call = 'assign';    # additional by
        0 0.000000 0.000000  1389:     if ($rel =~ /(status|severity)/i) { #
        0 0.000000 0.000000  1390:      $call = 'store';
        0 0.000000 0.000000  1391:     } elsif ($rel =~
        0 0.000000 0.000000  1392:      $call = ($rel =~ /(version|fixed)/i)
        0 0.000000 0.000000  1393:       ? '_store'  # prejudicial by name
        0 0.000000 0.000000  1394:       : '_assign'; # additional by name
        0 0.000000 0.000000  1395:     }
        0 0.000000 0.000000  1396:     $self->debug(0, "calling $o_rel-
        0 0.000000 0.000000  1397:     $o_rel->$call(\@update);
        0 0.000000 0.000000  1398:    }
        0 0.000000 0.000000  1399:   }
        0 0.000000 0.000000  1400:
            ================ SmallProf version 0.9 ================
         Profile of /home/perlbug/perlbug/scripts/../Perlbug/Interface Page 278
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000  1401:   my $ix = $self->notify_cc($bid, $orig)
        0 0.000000 0.000000  1402:   my $i_newnoteid  = $self->doN($bid, $cgi-
        0 0.000000 0.000000  1403:   my $i_newpatchid = $self->doP($bid, $cgi-
        0 0.000000 0.000000  1404:   my $i_newtestid  = $self->doT($bid, $cgi-
        0 0.000000 0.000000  1405:   my @cids = split(/\s+/, $cgi-
        0 0.000000 0.000000  1406:
        0 0.000000 0.000000  1407:   if ($i_newpatchid =~ /\w+/ &&
        0 0.000000 0.000000  1408:    $self->debug(2, "given both a new
        0 0.000000 0.000000  1409:    my $o_pat = $self->object('patch')-
        0 0.000000 0.000000  1410:    $o_pat->relation('change')-
        0 0.000000 0.000000  1411:   }
        0 0.000000 0.000000  1412:   my $ref = "<p>Bug ($bid) updated
        0 0.000000 0.000000  1413:   $self->debug(2, $ref) if $DEBUG;
        0 0.000000 0.000000  1414:     }
        0 0.000000 0.000000  1415:
        0 0.000000 0.000000  1416:  $self->current({'context', 'html'});
        0 0.000000 0.000000  1417:  $self->current({'format', $orig_fmt});
        0 0.000000 0.000000  1418:  print '<table border=1>', $self-
        0 0.000000 0.000000  1419: }
        0 0.000000 0.000000  1420: # PATCH IDs
        0 0.000000 0.000000  1421:    if ($ok == 1 && scalar @pids >= 1) {
        0 0.000000 0.000000  1422:  my $o_pat = $self->object('patch');
        0 0.000000 0.000000  1423:  $self->debug(1, "patches(@pids)") if
        0 0.000000 0.000000  1424:     PATCH:
        0 0.000000 0.000000  1425:  foreach my $pid (@pids) {
        0 0.000000 0.000000  1426:   next PATCH unless $pid =~ /\d+/;
        0 0.000000 0.000000  1427:            next PATCH unless $ok == 1;
        0 0.000000 0.000000  1428:   my $o_pat = $self->object('patch')-
        0 0.000000 0.000000  1429:   next BUG unless $o_pat->READ;
        0 0.000000 0.000000  1430:         my $cid = $cgi-
        0 0.000000 0.000000  1431:   $o_pat->relation('change')-
        0 0.000000 0.000000  1432:     }
        0 0.000000 0.000000  1433:  print '<table border=1>', $self-
        0 0.000000 0.000000  1434: }
        0 0.000000 0.000000  1435: # USER IDs
        0 0.000000 0.000000  1436:    if ($ok == 1 && scalar @uids >= 1) {
        0 0.000000 0.000000  1437:  my $o_usr = $self->object('user');
        0 0.000000 0.000000  1438:  $self->debug(1, "users(@uids)") if $DEBUG;
        0 0.000000 0.000000  1439:  my $NEWID = '';
        0 0.000000 0.000000  1440:        USER:
        0 0.000000 0.000000  1441:        foreach my $uid (@uids) {
        0 0.000000 0.000000  1442:   next USER unless $uid =~ /^\w+$/;
        0 0.000000 0.000000  1443:            next USER unless $ok == 1;
        0 0.000000 0.000000  1444:   $self->debug(2, "looking at admin($uid)")
        0 0.000000 0.000000  1445:            my $active   = $cgi-
        0 0.000000 0.000000  1446:         my $address  = $cgi-
        0 0.000000 0.000000  1447:         my @gids  = $cgi-
        0 0.000000 0.000000  1448:            my $name     = $cgi-
        0 0.000000 0.000000  1449:         my $password = $cgi-
        0 0.000000 0.000000  1450:            my $pwdupdate= $cgi-
        0 0.000000 0.000000  1451:            my $userid   = $cgi-
        0 0.000000 0.000000  1452:            $password    = crypt($password,
        0 0.000000 0.000000  1453:         my $match_address = $self->db-
        0 0.000000 0.000000  1454:   my %data = (
        0 0.000000 0.000000  1455:    'password' => $password,
        0 0.000000 0.000000  1456:    'address' => $address,
            ================ SmallProf version 0.9 ================
         Profile of /home/perlbug/perlbug/scripts/../Perlbug/Interface Page 279
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000  1457:    'name'  => $name,
        0 0.000000 0.000000  1458:    'match_address' => $match_address,
        0 0.000000 0.000000  1459:    'active' => $active,
        0 0.000000 0.000000  1460:   );
        0 0.000000 0.000000  1461:   if ($uid ne 'newAdmin') {
        0 0.000000 0.000000  1462:    $o_usr->read($uid)->update(\%data);
        0 0.000000 0.000000  1463:   } else {
        0 0.000000 0.000000  1464:    if ($self->isadmin eq $self-
        0 0.000000 0.000000  1465:     $o_usr->create({
        0 0.000000 0.000000  1466:      'userid' => $userid,
        0 0.000000 0.000000  1467:      %data,
        0 0.000000 0.000000  1468:     });
        0 0.000000 0.000000  1469:     $NEWID = $uid = $o_usr->read($userid)-
        0 0.000000 0.000000  1470:                }
        0 0.000000 0.000000  1471:   }
        0 0.000000 0.000000  1472:   $o_usr->relation('group')->store(\@gids)
        0 0.000000 0.000000  1473:            if ($ok == 1) { # track it and do
        0 0.000000 0.000000  1474:    $ok = $self->htpasswd($uid, $password) if
        0 0.000000 0.000000  1475:            }
        0 0.000000 0.000000  1476:     }
        0 0.000000 0.000000  1477:  push(@uids, $NEWID) if $NEWID =~ /\w+/;
        0 0.000000 0.000000  1478:  print '<table border=1>', $self-
        0 0.000000 0.000000  1479: }
        0 0.000000 0.000000  1480: # UPDATE DONE
        0 0.000000 0.000000  1481:    $self->debug(1, "update? -> '$ok'") if
        0 0.000000 0.000000  1482:    return '';
        0 0.000000 0.000000  1483:}
        0 0.000000 0.000000  1484:
        0 0.000000 0.000000  1485:
        0 0.000000 0.000000  1486:# UTILITIES
        0 0.000000 0.000000  1487:#
        0 0.000000 0.000000  1488:
        0 0.000000 0.000000  1489:=item current_buttons
        0 0.000000 0.000000  1490:
        0 0.000000 0.000000  1491:
        0 0.000000 0.000000  1492:
        0 0.000000 0.000000  1493:
        0 0.000000 0.000000  1494:
        0 0.000000 0.000000  1495:
        0 0.000000 0.000000  1496:
        0 0.000000 0.000000  1497:sub current_buttons {
        0 0.000000 0.000000  1498:    my $self = shift;
        0 0.000000 0.000000  1499: my $akeys= shift;       # [submit query
        0 0.000000 0.000000  1500: my $cgi  = $self->cgi();
        0 0.000000 0.000000  1501: my $buttons = '';
        0 0.000000 0.000000  1502:
        0 0.000000 0.000000  1503:    my @keys = (ref($akeys) eq 'ARRAY') ?
        0 0.000000 0.000000  1504: if (scalar(@keys) >= 1 && $self-
        0 0.000000 0.000000  1505:  my $reset = $cgi->reset();
        0 0.000000 0.000000  1506:  my @submit= ();
        0 0.000000 0.000000  1507:  my @name = (-'name' => 'req');
        0 0.000000 0.000000  1508:  my $pointer =
        0 0.000000 0.000000  1509:
        0 0.000000 0.000000  1510:  if ($self->current('framed')) {
        0 0.000000 0.000000  1511:   $reset  = $cgi->submit(
        0 0.000000 0.000000  1512:    -'name'    => 'reset', -'value' =>
            ================ SmallProf version 0.9 ================
         Profile of /home/perlbug/perlbug/scripts/../Perlbug/Interface Page 280
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000  1513:    -'onClick' => $pointer.'reset();  return
        0 0.000000 0.000000  1514:   @submit = ('onClick' => "request(this);
        0 0.000000 0.000000  1515:  }
        0 0.000000 0.000000  1516:
        0 0.000000 0.000000  1517:  my %map = (
        0 0.000000 0.000000  1518:   'back'      => $cgi->submit(@name, -
        0 0.000000 0.000000  1519:   'delete'    => $cgi->submit(@name, -
        0 0.000000 0.000000  1520:   'home'      => $cgi->submit(@name, -
        0 0.000000 0.000000  1521:   'insert'    => $cgi->submit(@name, -
        0 0.000000 0.000000  1522:         'nocc'      => $cgi->submit(@name, -
        0 0.000000 0.000000  1523:   'reset'  => $reset,
        0 0.000000 0.000000  1524:   'search'    => $cgi->submit(@name, -
        0 0.000000 0.000000  1525:         'sql'   => $cgi->submit(@name, -
        0 0.000000 0.000000  1526:         'select' => $cgi->submit(@name, -
        0 0.000000 0.000000  1527:            'query'     => $cgi-
        0 0.000000 0.000000  1528:         'unselect' => $cgi->submit(@name, -
        0 0.000000 0.000000  1529:         'update'    => $cgi->submit(@name, -
        0 0.000000 0.000000  1530:     );
        0 0.000000 0.000000  1531:
        0 0.000000 0.000000  1532:        foreach my $key (@keys) { # set
        0 0.000000 0.000000  1533:      $buttons .= "&nbsp; $map{$key}\n";
        0 0.000000 0.000000  1534:     }
        0 0.000000 0.000000  1535:  $buttons .= "<br>\n";
        0 0.000000 0.000000  1536: }
        0 0.000000 0.000000  1537:
        0 0.000000 0.000000  1538: return $buttons;
        0 0.000000 0.000000  1539:}
        0 0.000000 0.000000  1540:
        0 0.000000 0.000000  1541:
        1 0.000000 0.000000  1542:sub ranges {
        1 0.000006 0.000000  1543: my $self = shift;
        1 0.000007 0.000000  1544: my $req  = shift || '';
        1 0.000081 0.000000  1545: my $cgi  = $self->cgi();
        0 0.000000 0.000000  1546:
        1 0.000007 0.000000  1547: my $rng  = $self->{'_range'};
        1 0.000004 0.000000  1548: my $ret  = '';
        0 0.000000 0.000000  1549:
        1 0.000003 0.000000  1550: if ($rng) {
        1 0.000077 0.000000  1551:  my $o_rng  = $self->object('range')-
        1 0.000108 0.000000  1552:  my ($data)  = $o_rng->col('range', $o_rng);
        1 0.000553 0.000000  1553:  my @ranges  = split(/,\s*/, $data);
        1 0.000091 0.000000  1554:  $ret   = $self->tenify(\@ranges);
        0 0.000000 0.000000  1555: }
        0 0.000000 0.000000  1556:
        1 0.000076 0.000000  1557: return $ret;
        0 0.000000 0.000000  1558:}
        0 0.000000 0.000000  1559:
        0 0.000000 0.000000  1560:
        0 0.000000 0.000000  1561:sub file_ext { return '.html'; }
        0 0.000000 0.000000  1562:
        0 0.000000 0.000000  1563:
        0 0.000000 0.000000  1564:=item help_ref
        0 0.000000 0.000000  1565:
        0 0.000000 0.000000  1566:
        0 0.000000 0.000000  1567:
        0 0.000000 0.000000  1568:
            ================ SmallProf version 0.9 ================
         Profile of /home/perlbug/perlbug/scripts/../Perlbug/Interface Page 281
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000  1569:
        0 0.000000 0.000000  1570:
        0 0.000000 0.000000  1571:
        0 0.000000 0.000000  1572:sub help_ref {
        0 0.000000 0.000000  1573: my $self = shift;
        0 0.000000 0.000000  1574: my $targ = shift || '';
        0 0.000000 0.000000  1575: my $title= shift || $targ;
        0 0.000000 0.000000  1576:    my $url  = $self->url;
        0 0.000000 0.000000  1577:
        0 0.000000 0.000000  1578: my $sect = ($targ =~ /\w+/) ? "\#$targ" :
        0 0.000000 0.000000  1579: my $with = ($targ =~ /\w+/) ? "help with
        0 0.000000 0.000000  1580: my $hint = "click for $with";
        0 0.000000 0.000000  1581: my $help = qq|<a
        0 0.000000 0.000000  1582:   href="$url?req=webhelp$sect"
        0 0.000000 0.000000  1583:   onMouseOver="window.status='$hint'; return
        0 0.000000 0.000000  1584:   onMouseOut="window.status='';"
        0 0.000000 0.000000  1585:  >$title</a>
        0 0.000000 0.000000  1586: |;
        0 0.000000 0.000000  1587: $help =~ s/\s*\n+\s*/ /g;
        0 0.000000 0.000000  1588: return "$help\n";
        0 0.000000 0.000000  1589:}
        0 0.000000 0.000000  1590:
        0 0.000000 0.000000  1591:
        0 0.000000 0.000000  1592:=item case
        0 0.000000 0.000000  1593:
        0 0.000000 0.000000  1594:
        0 0.000000 0.000000  1595:
        0 0.000000 0.000000  1596:
        0 0.000000 0.000000  1597:
        0 0.000000 0.000000  1598:sub case {
        0 0.000000 0.000000  1599:    my $self = shift;
        0 0.000000 0.000000  1600:    my $arg = shift;
        0 0.000000 0.000000  1601:    return $self->{'attr'}{'PRE'}.$arg.$self-
        0 0.000000 0.000000  1602:}
        0 0.000000 0.000000  1603:
        0 0.000000 0.000000  1604:
        0 0.000000 0.000000  1605:=item format_query
        0 0.000000 0.000000  1606:
        0 0.000000 0.000000  1607:
        0 0.000000 0.000000  1608:
        0 0.000000 0.000000  1609:
        0 0.000000 0.000000  1610:
        0 0.000000 0.000000  1611:
        0 0.000000 0.000000  1612:
        0 0.000000 0.000000  1613:
        0 0.000000 0.000000  1614:
        1 0.000000 0.000000  1615:sub format_query {
        1 0.000007 0.000000  1616:    my $self = shift;
        1 0.000064 0.000000  1617:    my $cgi = $self->cgi();
        1 0.000067 0.000000  1618:    $self->debug(3, "Formating web query") if
        1 0.000083 0.000000  1619:    my %dates = $self->date_hash;
        0 0.000000 0.000000  1620:    # parameters
        1 0.000077 0.000000  1621:    my $admin       = ($cgi->param('admin')
        1 0.000067 0.000000  1622:    my $andor       = $cgi->param('andor') ||
        1 0.000087 0.000000  1623:    my $body     = $cgi->param('body') || '';
        1 0.000065 0.000000  1624:    my $bugid       = $self->wildcard($cgi-
            ================ SmallProf version 0.9 ================
         Profile of /home/perlbug/perlbug/scripts/../Perlbug/Interface Page 282
       =================================================================
    count wall tm  cpu time line
        1 0.000065 0.000000  1625:    my $case        = $cgi->param('case') ||
        1 0.000063 0.000000  1626:    my $group       = ($cgi->param('group')
        1 0.000062 0.000000  1627:    my $changeid    = $cgi->param('changeid')
        1 0.000062 0.000000  1628:    my $date        = ($cgi->param('dates')
        1 0.000064 0.000000  1629:    my $fixed  = $cgi->param('fixedin') ||
        1 0.000063 0.000000  1630:    my $index  = $cgi->param('index') || '';
        1 0.000062 0.000000  1631:    my $msgid       = $self->wildcard($cgi-
        1 0.000066 0.000000  1632:    my $msgs        = ($cgi->param('msgs') eq
        1 0.000064 0.000000  1633:    my $noteid      = $cgi->param('noteid')
        1 0.000095 0.000000  1634: my $note        = $cgi->param('note') || '';
        1 0.000066 0.000000  1635:    my $testid      = $cgi->param('testid')
        1 0.000064 0.000000  1636: my $test        = $cgi->param('test') || '';
        1 0.000065 0.000000  1637:    my $patchid     = $cgi->param('patchid')
        1 0.000063 0.000000  1638: my $patch       = $cgi->param('patch') ||
        1 0.000064 0.000000  1639: my $order       = $cgi->param('order') ||
        1 0.000063 0.000000  1640: my $osname      = ($cgi->param('osname') eq
        1 0.000063 0.000000  1641:    my $severity    = ($cgi-
        1 0.000064 0.000000  1642:    my $sourceaddr  = $self->wildcard($cgi-
        1 0.000064 0.000000  1643:    my $sqlshow     = $cgi->param('sqlshow')
        1 0.000066 0.000000  1644:    my $status      = ($cgi->param('status')
        1 0.000067 0.000000  1645:    my $subject     = $self->wildcard($cgi-
        1 0.000064 0.000000  1646:    my $version     = $self->wildcard($cgi-
        1 0.000062 0.000000  1647:    my $withbug     = $cgi->param('withbug')
        0 0.000000 0.000000  1648: #
        0 0.000000 0.000000  1649:    # case inoperative on mysql
        1 0.000004 0.000000  1650: if ($case =~ /Insensitive/) {
        0 0.000000 0.000000  1651:     $self->{'attr'}{'PRE'} = 'UPPER(';
        0 0.000000 0.000000  1652:     $self->{'attr'}{'POST'} = ')';
        0 0.000000 0.000000  1653: }
        1 0.000003 0.000000  1654: my $wnt = 0;
        1 0.000003 0.000000  1655: my $fnd = 0;
        0 0.000000 0.000000  1656:
        0 0.000000 0.000000  1657:    # Work through parameters given above to
        1 0.000003 0.000000  1658: my $sql = '';
        1 0.000004 0.000000  1659:    if ($date =~ /\w+/) {
        0 0.000000 0.000000  1660:        my $crit = $dates{$date};
        0 0.000000 0.000000  1661:        $sql .= " $crit ";
        0 0.000000 0.000000  1662:    } else {
        0 0.000000 0.000000  1663:        # let's default to all of them :-)
        1 0.000006 0.000000  1664:        $sql .= " bugid IS NOT NULL ";
        0 0.000000 0.000000  1665:    }
        0 0.000000 0.000000  1666:
        1 0.000088 0.000000  1667: my $o_bug    = $self->object('bug');
        1 0.000005 0.000000  1668: if ($index =~ /^yes$/i && $subject =~
        0 0.000000 0.000000  1669:  my $match = $1;
        0 0.000000 0.000000  1670:  $match =~ s/\*/%/g;
        0 0.000000 0.000000  1671:  # $match =~ s/\+/_/g;
        0 0.000000 0.000000  1672:  print "running shortcut($1)<br>\n";
        0 0.000000 0.000000  1673:  $sql .= " $andor bugid LIKE '$1'";
        0 0.000000 0.000000  1674: } else {      # full search
        1 0.000080 0.000000  1675:  my $o_addr   = $self->object('address');
        1 0.000077 0.000000  1676:  my $o_grp    = $self->object('group');
        1 0.000078 0.000000  1677:  my $o_msg    = $self->object('message');
        1 0.000080 0.000000  1678:  my $o_usr    = $self->object('user');
        0 0.000000 0.000000  1679:
        1 0.000066 0.000000  1680:  my $o_note   = $self->object('note');
            ================ SmallProf version 0.9 ================
         Profile of /home/perlbug/perlbug/scripts/../Perlbug/Interface Page 283
       =================================================================
    count wall tm  cpu time line
        1 0.000078 0.000000  1681:  my $o_patch  = $self->object('patch');
        1 0.000078 0.000000  1682:  my $o_test   = $self->object('test');
        0 0.000000 0.000000  1683:
        1 0.000080 0.000000  1684:  my $o_change = $self->object('change');
        1 0.000081 0.000000  1685:  my $o_child  = $self->object('child');
        1 0.000078 0.000000  1686:  my $o_fixed  = $self->object('fixed');
        1 0.000079 0.000000  1687:  my $o_parent = $self->object('parent');
        1 0.000080 0.000000  1688:  my $o_project= $self->object('project');
        1 0.000108 0.000000  1689:  my $o_osname = $self->object('osname');
        1 0.000077 0.000000  1690:  my $o_severity = $self->object('severity');
        1 0.000077 0.000000  1691:  my $o_status = $self->object('status');
        1 0.000077 0.000000  1692:  my $o_version= $self->object('version');
        0 0.000000 0.000000  1693:
        1 0.000004 0.000000  1694:  if ($admin =~ /^(\w+)$/) {
        0 0.000000 0.000000  1695:   my $x = $1;
        0 0.000000 0.000000  1696:   $wnt++;
        0 0.000000 0.000000  1697:   $fnd += my @ids = $o_usr->relation('bug')-
        0 0.000000 0.000000  1698:   print "Found ".@ids." user_bug relations
        0 0.000000 0.000000  1699:   my $found = join("', '", @ids);
        0 0.000000 0.000000  1700:   $sql .= " $andor bugid IN ('$found') " if
        0 0.000000 0.000000  1701:  }
        1 0.000004 0.000000  1702:  if ($patchid =~ /^(\w+)$/) {
        0 0.000000 0.000000  1703:   my $x = $1;
        0 0.000000 0.000000  1704:   $wnt++;
        0 0.000000 0.000000  1705:   $fnd += my @ids = $o_patch-
        0 0.000000 0.000000  1706:   print "Found ".@ids." bug_patch relations
        0 0.000000 0.000000  1707:   my $found = join("', '", @ids);
        0 0.000000 0.000000  1708:   $sql .= " $andor bugid IN ('$found') " if
        0 0.000000 0.000000  1709:  }
        1 0.000004 0.000000  1710:  if ($testid =~ /^(\w+)$/) {
        0 0.000000 0.000000  1711:   my $x = $1;
        0 0.000000 0.000000  1712:   $wnt++;
        0 0.000000 0.000000  1713:   $fnd += my @ids = $o_test-
        0 0.000000 0.000000  1714:   print "Found ".@ids." bug_test relations
        0 0.000000 0.000000  1715:   my $found = join("', '", @ids);
        0 0.000000 0.000000  1716:   $sql .= " $andor bugid IN ('$found') " if
        0 0.000000 0.000000  1717:  }
        1 0.000003 0.000000  1718:  if ($noteid =~ /^(\w+)$/) {
        0 0.000000 0.000000  1719:   my $x = $1;
        0 0.000000 0.000000  1720:   $wnt++;
        0 0.000000 0.000000  1721:   $fnd += my @ids = $o_note-
        0 0.000000 0.000000  1722:   print "Found ".@ids." bug_note relations
        0 0.000000 0.000000  1723:   my $found = join("', '", @ids);
        0 0.000000 0.000000  1724:   $sql .= " $andor bugid IN ('$found') " if
        0 0.000000 0.000000  1725:  }
        1 0.000003 0.000000  1726:  if ($patch =~ /(.+)/) {
        0 0.000000 0.000000  1727:   my $x = $1;
        0 0.000000 0.000000  1728:   $wnt++;
        0 0.000000 0.000000  1729:   $fnd += my @ids = $o_patch->ids("body LIKE
        0 0.000000 0.000000  1730:   my $ids = join("', '", @ids);
        0 0.000000 0.000000  1731:   $fnd += @ids = $o_patch->relation('bug')-
        0 0.000000 0.000000  1732:   print "Found ".@ids." bug_patch relations
        0 0.000000 0.000000  1733:   my $found = join("', '", @ids);
        0 0.000000 0.000000  1734:   $sql .= " $andor bugid IN ('$found') ";
        0 0.000000 0.000000  1735:  }
        1 0.000003 0.000000  1736:  if ($test =~ /(.+)/) {
            ================ SmallProf version 0.9 ================
         Profile of /home/perlbug/perlbug/scripts/../Perlbug/Interface Page 284
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000  1737:   my $x = $1;
        0 0.000000 0.000000  1738:   $wnt++;
        0 0.000000 0.000000  1739:   $fnd += my @ids = $o_test->ids("body LIKE
        0 0.000000 0.000000  1740:   my $ids = join("', '", @ids);
        0 0.000000 0.000000  1741:   $fnd += @ids = $o_test->relation('bug')-
        0 0.000000 0.000000  1742:   print "Found ".@ids." bug_test relations
        0 0.000000 0.000000  1743:   my $found = join("', '", @ids);
        0 0.000000 0.000000  1744:   $sql .= " $andor bugid IN ('$found') ";
        0 0.000000 0.000000  1745:  }
        1 0.000004 0.000000  1746:  if ($note =~ /(.+)/) {
        0 0.000000 0.000000  1747:   my $x = $1;
        0 0.000000 0.000000  1748:   $wnt++;
        0 0.000000 0.000000  1749:   $fnd += my @ids = $o_note->ids("body LIKE
        0 0.000000 0.000000  1750:   print "Found ".@ids." bug_note relations
        0 0.000000 0.000000  1751:   my $ids = join("', '", @ids);
        0 0.000000 0.000000  1752:   $fnd += @ids = $o_note->relation('bug')-
        0 0.000000 0.000000  1753:   my $found = join("', '", @ids);
        0 0.000000 0.000000  1754:   $sql .= " $andor bugid IN ('$found') " if
        0 0.000000 0.000000  1755:  }
        1 0.000003 0.000000  1756:  if ($changeid =~ /^(.+)$/) {
        0 0.000000 0.000000  1757:   my $x = $1;
        0 0.000000 0.000000  1758:   $wnt++;
        0 0.000000 0.000000  1759:   my @ids  = ();
        0 0.000000 0.000000  1760:   $fnd += my @pids = $o_change-
        0 0.000000 0.000000  1761:   if (scalar(@pids) >= 1) {
        0 0.000000 0.000000  1762:    $self->debug(2, "Found ".@pids." patch
        0 0.000000 0.000000  1763:    my $found = join("', '", @pids);
        0 0.000000 0.000000  1764:    $fnd += @pids = $o_patch-
        0 0.000000 0.000000  1765:   } else {
        0 0.000000 0.000000  1766:    $self->debug(2, "No patches found with
        0 0.000000 0.000000  1767:    $fnd += @pids = $o_change-
        0 0.000000 0.000000  1768:    $self->debug(2, "Found ".@ids." bug
        0 0.000000 0.000000  1769:   }
        0 0.000000 0.000000  1770:   my $found = join("', '", @ids);
        0 0.000000 0.000000  1771:   print "Found bugids(".@ids.") with
        0 0.000000 0.000000  1772:   $sql .= " $andor bugid IN ('$found') " if
        0 0.000000 0.000000  1773:  }
        1 0.000003 0.000000  1774:  if ($body =~ /(.+)/) {
        0 0.000000 0.000000  1775:   my $x = $1;
        0 0.000000 0.000000  1776:   $wnt++;
        0 0.000000 0.000000  1777:   $fnd += my @mids = $o_msg->ids("body LIKE
        0 0.000000 0.000000  1778:   print "Found ".@mids." messageids from
        0 0.000000 0.000000  1779:   my $mids = join("', '", @mids);
        0 0.000000 0.000000  1780:   $fnd += my @ids = $o_msg->relation('bug')-
        0 0.000000 0.000000  1781:   print "Found ".@ids." message_bug
        0 0.000000 0.000000  1782:   my $found = join("', '", @ids);
        0 0.000000 0.000000  1783:   $sql .= " $andor bugid IN ('$found') ";
        0 0.000000 0.000000  1784:  }
        1 0.000003 0.000000  1785:  if ($msgid =~ /(.+)/) {
        0 0.000000 0.000000  1786:   my $x = $1;
        0 0.000000 0.000000  1787:   $wnt++;
        0 0.000000 0.000000  1788:   $fnd += my @mids = $o_msg-
        0 0.000000 0.000000  1789:   print "Found ".@mids." messageids from
        0 0.000000 0.000000  1790:   my $mids = join("', '", @mids);
        0 0.000000 0.000000  1791:   $fnd += my @ids = $o_msg->relation('bug')-
        0 0.000000 0.000000  1792:   print "Found ".@ids." message_bug
            ================ SmallProf version 0.9 ================
         Profile of /home/perlbug/perlbug/scripts/../Perlbug/Interface Page 285
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000  1793:   my $found = join("', '", @ids);
        0 0.000000 0.000000  1794:   $sql .= " $andor bugid IN ('$found') ";
        0 0.000000 0.000000  1795:  }
        1 0.000011 0.000000  1796:  if ($msgs =~ /(\d+)(\+)*/) {
        1 0.000011 0.000000  1797:   my $x = $1;
        1 0.000011 0.000000  1798:   my $comp = ($2 eq '+') ? '>=' : '=';
        1 0.000003 0.000000  1799:   $wnt++;
        1 0.000093 0.000000  1800:   $self->exec('DELETE FROM
        1 0.000081 0.000000  1801:   $self->exec(q|INSERT INTO
        0 0.000000 0.000000  1802:    SELECT bugid, COUNT(messageid) FROM
        0 0.000000 0.000000  1803:   );
        1 0.000121 0.000000  1804:   my @replied = $o_msg->relation('bug')-
        1 0.001085 0.000000  1805:   my $replied = join("', '", @replied);
        1 0.000439 0.000000  1806:   my $insert = qq|INSERT INTO
        1 0.000127 0.000000  1807:   $self->exec($insert);
        1 0.000016 0.000000  1808:   my $count = qq|SELECT DISTINCT bugid FROM
        1 0.000089 0.000000  1809:   $fnd += my @ids = $self->get_list($count);
        1 0.000077 0.000000  1810:   print "Found ".@ids." message_bug count
        1 0.000374 0.000000  1811:   my $found = join("', '", @ids);
        1 0.001621 0.000000  1812:   $sql .= " $andor bugid IN ('$found') ";
        0 0.000000 0.000000  1813:  }
        1 0.000009 0.000000  1814:  if ($bugid =~ /^\s*(.*\w+.*)\s*$/) {
        0 0.000000 0.000000  1815:   my $x = $1;
        0 0.000000 0.000000  1816:   $sql .= " $andor bugid LIKE '$x' ";
        0 0.000000 0.000000  1817:  }
        1 0.000004 0.000000  1818:  if ($version =~ /(.+)/) {
        0 0.000000 0.000000  1819:   my $x = $1;
        0 0.000000 0.000000  1820:   $wnt++;
        0 0.000000 0.000000  1821:   # ($x) = $o_version->name2id([$x]) if $x
        0 0.000000 0.000000  1822:   my @vids = $o_version->ids("name LIKE
        0 0.000000 0.000000  1823:   $fnd += my @ids = map { $o_version-
        0 0.000000 0.000000  1824:   print "Found ".@ids." bug_version
        0 0.000000 0.000000  1825:   my $found = join("', '", @ids);
        0 0.000000 0.000000  1826:   $sql .= " $andor bugid IN ('$found') " if
        0 0.000000 0.000000  1827:  }
        1 0.000004 0.000000  1828:  if ($fixed =~ /(.+)/) {
        0 0.000000 0.000000  1829:   my $x = $1;
        0 0.000000 0.000000  1830:   $wnt++;
        0 0.000000 0.000000  1831:   # ($x) = $o_fixed->name2id([$x]) if $x !~
        0 0.000000 0.000000  1832:   my @fids = $o_fixed->ids("name LIKE
        0 0.000000 0.000000  1833:   $fnd += my @ids = map { $o_fixed-
        0 0.000000 0.000000  1834:   print "Found ".@ids." bug_fixed relations
        0 0.000000 0.000000  1835:   my $found = join("', '", @ids);
        0 0.000000 0.000000  1836:   $sql .= " $andor bugid IN ('$found') " if
        0 0.000000 0.000000  1837:  }
        1 0.000023 0.000000  1838:  if ($status =~ /(\w+)/) {
        1 0.000018 0.000000  1839:   my $x = $1;
        1 0.000003 0.000000  1840:   $wnt++;
        1 0.000159 0.000000  1841:   ($x) = $o_status->name2id([$x]) if $x !~
        1 0.000102 0.000000  1842:   $fnd += my @ids = $o_status-
        1 0.000071 0.000000  1843:   print "Found ".@ids." bug_status relations
        1 0.000806 0.000000  1844:   my $found = join("', '", @ids);
        1 0.001436 0.010000  1845:   $sql .= " $andor bugid IN ('$found') " if
        0 0.000000 0.000000  1846:  }
        1 0.000009 0.000000  1847:  if ($group =~ /(\w+)/) {
        0 0.000000 0.000000  1848:   my $x = $1;
            ================ SmallProf version 0.9 ================
         Profile of /home/perlbug/perlbug/scripts/../Perlbug/Interface Page 286
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000  1849:   $wnt++;
        0 0.000000 0.000000  1850:   ($x) = $o_grp->name2id([$x]) if $x !~
        0 0.000000 0.000000  1851:   $fnd += my @ids = $o_grp->relation('bug')-
        0 0.000000 0.000000  1852:   print "Found ".@ids." bug_group relations
        0 0.000000 0.000000  1853:   my $found = join("', '", @ids);
        0 0.000000 0.000000  1854:   $sql .= " $andor bugid IN ('$found') " if
        0 0.000000 0.000000  1855:  }
        1 0.000005 0.000000  1856:  if ($severity =~ /(\w+)/) {
        0 0.000000 0.000000  1857:   my $x = $1;
        0 0.000000 0.000000  1858:   $wnt++;
        0 0.000000 0.000000  1859:   ($x) = $o_severity->name2id([$x]) if $x !~
        0 0.000000 0.000000  1860:   $fnd += my @ids = $o_severity-
        0 0.000000 0.000000  1861:   print "Found ".@ids." bug_severity
        0 0.000000 0.000000  1862:   my $found = join("', '", @ids);
        0 0.000000 0.000000  1863:   $sql .= " $andor bugid IN ('$found') " if
        0 0.000000 0.000000  1864:  }
        1 0.000004 0.000000  1865:  if ($osname =~ /(\w+)/) {
        0 0.000000 0.000000  1866:   my $x = $1;
        0 0.000000 0.000000  1867:   $wnt++;
        0 0.000000 0.000000  1868:   ($x) = $o_osname->name2id([$x]) if $x !~
        0 0.000000 0.000000  1869:   $fnd += my @ids = $o_osname-
        0 0.000000 0.000000  1870:   print "Found ".@ids." bug_osname relations
        0 0.000000 0.000000  1871:   my $found = join("', '", @ids);
        0 0.000000 0.000000  1872:   $sql .= " $andor bugid IN ('$found') " if
        0 0.000000 0.000000  1873:  }
        1 0.000003 0.000000  1874:  if ($subject =~ /.+/) {
        0 0.000000 0.000000  1875:   $sql .= " $andor subject LIKE '%".$self-
        0 0.000000 0.000000  1876:  }
        1 0.000025 0.000000  1877:  if ($sourceaddr =~ /.+/) {
        0 0.000000 0.000000  1878:   $sql .= " $andor sourceaddr LIKE
        0 0.000000 0.000000  1879:  }
        0 0.000000 0.000000  1880: }
        0 0.000000 0.000000  1881: #
        1 0.000009 0.000000  1882: if ($wnt >= 1 && $fnd == 0 && $andor eq
        0 0.000000 0.000000  1883:  $self->debug(1, "appear to want($wnt)
        0 0.000000 0.000000  1884:  $sql .= " $andor 1 = 0 ";
        0 0.000000 0.000000  1885: }
        0 0.000000 0.000000  1886: # ref
        0 0.000000 0.000000  1887: # $self->result("want($wnt) fnd($fnd)
        0 0.000000 0.000000  1888: # $self->result("SQL: $sql<hr>");
        0 0.000000 0.000000  1889:
        1 0.000009 0.000000  1890: $sql .= " ORDER BY bugid $order"; #?
        1 0.000004 0.000000  1891: print "SQL: $sql<hr>" if $sqlshow =~ /y/i;
        0 0.000000 0.000000  1892:
        1 0.000400 0.000000  1893: $self->debug(2, "SQL built: '$sql'") if
        1 0.000296 0.000000  1894: return $sql;
        0 0.000000 0.000000  1895:}
        0 0.000000 0.000000  1896:
        0 0.000000 0.000000  1897:
        0 0.000000 0.000000  1898:=item wildcard
        0 0.000000 0.000000  1899:
        0 0.000000 0.000000  1900:
        0 0.000000 0.000000  1901:
        0 0.000000 0.000000  1902:
        0 0.000000 0.000000  1903:
        0 0.000000 0.000000  1904:
            ================ SmallProf version 0.9 ================
         Profile of /home/perlbug/perlbug/scripts/../Perlbug/Interface Page 287
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000  1905:
        5 0.000000 0.000000  1906:sub wildcard {
        5 0.000019 0.000000  1907:    my $self = shift;
        5 0.000012 0.000000  1908:    my $str  = shift;
        5 0.000018 0.000000  1909:    $str =~ s/\*/%/g;
        5 0.000045 0.000000  1910:    return $str;
        0 0.000000 0.000000  1911:}
        0 0.000000 0.000000  1912:
        0 0.000000 0.000000  1913:
        0 0.000000 0.000000  1914:=item tenify
        0 0.000000 0.000000  1915:
        0 0.000000 0.000000  1916:
        0 0.000000 0.000000  1917:
        0 0.000000 0.000000  1918:
        0 0.000000 0.000000  1919:
        0 0.000000 0.000000  1920:
        0 0.000000 0.000000  1921:
        1 0.000000 0.000000  1922:sub tenify {
        1 0.000007 0.000000  1923:    my $self    = shift;
        1 0.000005 0.000000  1924:    my $a_bids  = shift;
        1 0.000006 0.000000  1925:    my $given   = shift || 25;
        1 0.000011 0.000000  1926:    my $slice   = (($given >= 1) && ($given
        1 0.000011 0.000000  1927: my $rng     = $self->{'_range'};
        1 0.000004 0.000000  1928: my $ret     = '';
        0 0.000000 0.000000  1929:
        1 0.000007 0.000000  1930:    if (ref($a_bids) ne 'ARRAY') {
        0 0.000000 0.000000  1931:  $self->error("Duff bug arrayref given to
        0 0.000000 0.000000  1932: } else {
        1 0.000007 0.000000  1933:  my ($cnt, $min, $max) = (0, 1, 0);
        1 0.000087 0.000000  1934:     my $url = $self->current('url');
        1 0.000085 0.000000  1935:        my $fmt = $self->current('format');
        1 0.000017 0.000000  1936:  my $range = $rng =~ /\w+/ ? "&range=$rng" :
        1 0.000007 0.000000  1937:  my $bids  = '';
        2 0.000225 0.000000  1938:  my @bids = @{$a_bids};
      168 0.000517 0.000000  1939:  foreach my $bid (@bids) {
      167 0.000316 0.000000  1940:         $cnt++;
      167 0.000447 0.010000  1941:         $max++;
      167 0.000756 0.000000  1942:         $bids .= "&bug_id=$bid";
      167 0.001111 0.000000  1943:         if (($cnt == $slice) || ($max ==
        7 0.000440 0.000000  1944:             $ret .= qq|<a
        7 0.000075 0.010000  1945:             $min = $max + 1;
        7 0.000029 0.000000  1946:             $bids = '';
        7 0.000022 0.000000  1947:             $cnt = 0;
        0 0.000000 0.000000  1948:         }
        0 0.000000 0.000000  1949:     }
        0 0.000000 0.000000  1950:    }
        0 0.000000 0.000000  1951:
        1 0.000196 0.000000  1952: return $ret;
        0 0.000000 0.000000  1953:}
        0 0.000000 0.000000  1954:
        0 0.000000 0.000000  1955:
        0 0.000000 0.000000  1956:=back
        0 0.000000 0.000000  1957:
        0 0.000000 0.000000  1958:
        0 0.000000 0.000000  1959:
        0 0.000000 0.000000  1960:
            ================ SmallProf version 0.9 ================
         Profile of /home/perlbug/perlbug/scripts/../Perlbug/Interface Page 288
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000  1961:
        0 0.000000 0.000000  1962:
        0 0.000000 0.000000  1963:
        0 0.000000 0.000000  1964:1;
        0 0.000000 0.000000  1965:
            ================ SmallProf version 0.9 ================
                Profile of /usr/lib/perl5/5.00503/AutoLoader.pm        Page 289
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000     1:package AutoLoader;
        0 0.000000 0.000000     2:
        0 0.000000 0.000000     3:use vars qw(@EXPORT @EXPORT_OK);
        0 0.000000 0.000000     4:
        0 0.000000 0.000000     5:my $is_dosish;
        0 0.000000 0.000000     6:my $is_vms;
        0 0.000000 0.000000     7:
        0 0.000000 0.000000     8:BEGIN {
        0 0.000000 0.000000     9:    require Exporter;
        0 0.000000 0.000000    10:    @EXPORT = ();
        0 0.000000 0.000000    11:    @EXPORT_OK = qw(AUTOLOAD);
        0 0.000000 0.000000    12:    $is_dosish = $^O eq 'dos' || $^O eq 'os2'
        0 0.000000 0.000000    13:    $is_vms = $^O eq 'VMS';
        0 0.000000 0.000000    14:}
        0 0.000000 0.000000    15:
        0 0.000000 0.000000    16:AUTOLOAD {
        0 0.000000 0.000000    17:    my $name;
        0 0.000000 0.000000    18:    # Braces used to preserve $1 et al.
        0 0.000000 0.000000    19:    {
        0 0.000000 0.000000    20: # Try to find the autoloaded file from the
        0 0.000000 0.000000    21: # name of the sub. e.g., if the sub needed
        0 0.000000 0.000000    22: # Getopt::Long::GetOptions(), then
        0 0.000000 0.000000    23: # something like
        0 0.000000 0.000000    24: # autoload file is
        0 0.000000 0.000000    25: #
        0 0.000000 0.000000    26: # However, if @INC is a relative path, this
        0 0.000000 0.000000    27: # for example, @INC = ('lib'), then
        0 0.000000 0.000000    28: # 'lib/Getopt/Long.pm', and we want to
        0 0.000000 0.000000    29: # 'auto/Getopt/Long/GetOptions.al' (without
        0 0.000000 0.000000    30: # In this case, we simple prepend the
        0 0.000000 0.000000    31: # C<require> take care of the searching for
        0 0.000000 0.000000    32:
        0 0.000000 0.000000    33: my ($pkg,$func) = $AUTOLOAD =~
        0 0.000000 0.000000    34: $pkg =~ s#::#/#g;
        0 0.000000 0.000000    35: if (defined($name=$INC{"$pkg.pm"})) {
        0 0.000000 0.000000    36:     $name =~
        0 0.000000 0.000000    37:
        0 0.000000 0.000000    38:     # if the file exists, then make sure
        0 0.000000 0.000000    39:     # a fully anchored path (i.e either
        0 0.000000 0.000000    40:     # or './lib/auto/foo/bar.al'.  This
        0 0.000000 0.000000    41:     # (and failing) to find the
        0 0.000000 0.000000    42:     # looked for 'lib/lib/auto/foo/bar.al',
        0 0.000000 0.000000    43:
        0 0.000000 0.000000    44:     if (-r $name) {
        0 0.000000 0.000000    45:         unless ($name =~ m|^/|) {
        0 0.000000 0.000000    46:      if ($is_dosish) {
        0 0.000000 0.000000    47:   unless ($name =~ m{^([a-z]:)?[\\/]}i) {
        0 0.000000 0.000000    48:        $name = "./$name";
        0 0.000000 0.000000    49:   }
        0 0.000000 0.000000    50:      }
        0 0.000000 0.000000    51:      elsif ($is_vms) {
        0 0.000000 0.000000    52:          # XXX todo by VMSmiths
        0 0.000000 0.000000    53:   $name = "./$name";
        0 0.000000 0.000000    54:      }
        0 0.000000 0.000000    55:      else {
        0 0.000000 0.000000    56:   $name = "./$name";
            ================ SmallProf version 0.9 ================
                Profile of /usr/lib/perl5/5.00503/AutoLoader.pm        Page 290
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000    57:      }
        0 0.000000 0.000000    58:  }
        0 0.000000 0.000000    59:     }
        0 0.000000 0.000000    60:     else {
        0 0.000000 0.000000    61:  $name = undef;
        0 0.000000 0.000000    62:     }
        0 0.000000 0.000000    63: }
        0 0.000000 0.000000    64: unless (defined $name) {
        0 0.000000 0.000000    65:     # let C<require> do the searching
        0 0.000000 0.000000    66:     $name = "auto/$AUTOLOAD.al";
        0 0.000000 0.000000    67:     $name =~ s#::#/#g;
        0 0.000000 0.000000    68: }
        0 0.000000 0.000000    69:    }
        0 0.000000 0.000000    70:    my $save = $@;
        0 0.000000 0.000000    71:    eval { local $SIG{__DIE__}; require $name
        0 0.000000 0.000000    72:    if ($@) {
        0 0.000000 0.000000    73: if (substr($AUTOLOAD,-9) eq '::DESTROY') {
        0 0.000000 0.000000    74:     *$AUTOLOAD = sub {};
        0 0.000000 0.000000    75: } else {
        0 0.000000 0.000000    76:     # The load might just have failed
        0 0.000000 0.000000    77:     # long for some old SVR3 systems which
        0 0.000000 0.000000    78:     # If we can succesfully truncate a long
        0 0.000000 0.000000    79:     # There is a slight risk that we could
        0 0.000000 0.000000    80:     # but autosplit should have warned about
        0 0.000000 0.000000    81:     if ($name =~
        0 0.000000 0.000000    82:  eval {local $SIG{__DIE__};require $name};
        0 0.000000 0.000000    83:     }
        0 0.000000 0.000000    84:     if ($@){
        0 0.000000 0.000000    85:  $@ =~ s/ at .*\n//;
        0 0.000000 0.000000    86:  my $error = $@;
        0 0.000000 0.000000    87:  require Carp;
        0 0.000000 0.000000    88:  Carp::croak($error);
        0 0.000000 0.000000    89:     }
        0 0.000000 0.000000    90: }
        0 0.000000 0.000000    91:    }
        0 0.000000 0.000000    92:    $@ = $save;
        0 0.000000 0.000000    93:    goto &$AUTOLOAD;
        0 0.000000 0.000000    94:}
        0 0.000000 0.000000    95:
        1 0.000000 0.000000    96:sub import {
        0 0.000000 0.000000    97:    my $pkg = shift;
        0 0.000000 0.000000    98:    my $callpkg = caller;
        0 0.000000 0.000000    99:
        0 0.000000 0.000000   100:    #
        0 0.000000 0.000000   101:    # Export symbols, but not by accident of
        0 0.000000 0.000000   102:    #
        0 0.000000 0.000000   103:
        0 0.000000 0.000000   104:    Exporter::export $pkg, $callpkg, @_ if
        0 0.000000 0.000000   105:
        0 0.000000 0.000000   106:    #
        0 0.000000 0.000000   107:    # Try to find the autosplit index file.
        0 0.000000 0.000000   108:    # is POSIX, then $INC{POSIX.pm} is
        0 0.000000 0.000000   109:    # '/usr/local/lib/perl5/POSIX.pm', and
        0 0.000000 0.000000   110:    #
        0 0.000000 0.000000   111:    #
        0 0.000000 0.000000   112:    # However, if @INC is a relative path,
            ================ SmallProf version 0.9 ================
                Profile of /usr/lib/perl5/5.00503/AutoLoader.pm        Page 291
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   113:    # for example, @INC = ('lib'), then
        0 0.000000 0.000000   114:    # $INC{POSIX.pm} is 'lib/POSIX.pm', and
        0 0.000000 0.000000   115:    # 'auto/POSIX/autosplit.ix' (without the
        0 0.000000 0.000000   116:    #
        0 0.000000 0.000000   117:
        0 0.000000 0.000000   118:    (my $calldir = $callpkg) =~ s#::#/#g;
        0 0.000000 0.000000   119:    my $path = $INC{$calldir . '.pm'};
        0 0.000000 0.000000   120:    if (defined($path)) {
        0 0.000000 0.000000   121: # Try absolute path name.
        0 0.000000 0.000000   122: $path =~
        0 0.000000 0.000000   123: eval { require $path; };
        0 0.000000 0.000000   124: # If that failed, try relative path with
        0 0.000000 0.000000   125: if ($@) {
        0 0.000000 0.000000   126:     $path ="auto/$calldir/autosplit.ix";
        0 0.000000 0.000000   127:     eval { require $path; };
        0 0.000000 0.000000   128: }
        0 0.000000 0.000000   129: if ($@) {
        0 0.000000 0.000000   130:     my $error = $@;
        0 0.000000 0.000000   131:     require Carp;
        0 0.000000 0.000000   132:     Carp::carp($error);
        0 0.000000 0.000000   133: }
        0 0.000000 0.000000   134:    }
        0 0.000000 0.000000   135:}
        0 0.000000 0.000000   136:
        0 0.000000 0.000000   137:1;
        0 0.000000 0.000000   138:
        0 0.000000 0.000000   139:__END__
            ================ SmallProf version 0.9 ================
                Profile of /usr/lib/perl5/5.00503/Benchmark.pm         Page 292
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000     1:package Benchmark;
        0 0.000000 0.000000     2:
        0 0.000000 0.000000     3:=head1 NAME
        0 0.000000 0.000000     4:
        0 0.000000 0.000000     5:
        0 0.000000 0.000000     6:
        0 0.000000 0.000000     7:
        0 0.000000 0.000000     8:
        0 0.000000 0.000000     9:
        0 0.000000 0.000000    10:
        0 0.000000 0.000000    11:
        0 0.000000 0.000000    12:
        0 0.000000 0.000000    13:
        0 0.000000 0.000000    14:
        0 0.000000 0.000000    15:
        0 0.000000 0.000000    16:
        0 0.000000 0.000000    17:
        0 0.000000 0.000000    18:
        0 0.000000 0.000000    19:
        0 0.000000 0.000000    20:
        0 0.000000 0.000000    21:
        0 0.000000 0.000000    22:
        0 0.000000 0.000000    23:
        0 0.000000 0.000000    24:
        0 0.000000 0.000000    25:
        0 0.000000 0.000000    26:
        0 0.000000 0.000000    27:
        0 0.000000 0.000000    28:
        0 0.000000 0.000000    29:
        0 0.000000 0.000000    30:
        0 0.000000 0.000000    31:
        0 0.000000 0.000000    32:
        0 0.000000 0.000000    33:
        0 0.000000 0.000000    34:
        0 0.000000 0.000000    35:
        0 0.000000 0.000000    36:
        0 0.000000 0.000000    37:
        0 0.000000 0.000000    38:
        0 0.000000 0.000000    39:
        0 0.000000 0.000000    40:
        0 0.000000 0.000000    41:
        0 0.000000 0.000000    42:
        0 0.000000 0.000000    43:
        0 0.000000 0.000000    44:
        0 0.000000 0.000000    45:
        0 0.000000 0.000000    46:
        0 0.000000 0.000000    47:
        0 0.000000 0.000000    48:
        0 0.000000 0.000000    49:
        0 0.000000 0.000000    50:
        0 0.000000 0.000000    51:
        0 0.000000 0.000000    52:
        0 0.000000 0.000000    53:
        0 0.000000 0.000000    54:
        0 0.000000 0.000000    55:
        0 0.000000 0.000000    56:
            ================ SmallProf version 0.9 ================
                Profile of /usr/lib/perl5/5.00503/Benchmark.pm         Page 293
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000    57:
        0 0.000000 0.000000    58:
        0 0.000000 0.000000    59:
        0 0.000000 0.000000    60:
        0 0.000000 0.000000    61:
        0 0.000000 0.000000    62:
        0 0.000000 0.000000    63:
        0 0.000000 0.000000    64:
        0 0.000000 0.000000    65:
        0 0.000000 0.000000    66:
        0 0.000000 0.000000    67:
        0 0.000000 0.000000    68:
        0 0.000000 0.000000    69:
        0 0.000000 0.000000    70:
        0 0.000000 0.000000    71:
        0 0.000000 0.000000    72:
        0 0.000000 0.000000    73:
        0 0.000000 0.000000    74:
        0 0.000000 0.000000    75:
        0 0.000000 0.000000    76:
        0 0.000000 0.000000    77:
        0 0.000000 0.000000    78:
        0 0.000000 0.000000    79:
        0 0.000000 0.000000    80:
        0 0.000000 0.000000    81:
        0 0.000000 0.000000    82:
        0 0.000000 0.000000    83:
        0 0.000000 0.000000    84:
        0 0.000000 0.000000    85:
        0 0.000000 0.000000    86:
        0 0.000000 0.000000    87:
        0 0.000000 0.000000    88:
        0 0.000000 0.000000    89:
        0 0.000000 0.000000    90:
        0 0.000000 0.000000    91:
        0 0.000000 0.000000    92:
        0 0.000000 0.000000    93:
        0 0.000000 0.000000    94:
        0 0.000000 0.000000    95:
        0 0.000000 0.000000    96:
        0 0.000000 0.000000    97:
        0 0.000000 0.000000    98:
        0 0.000000 0.000000    99:
        0 0.000000 0.000000   100:
        0 0.000000 0.000000   101:
        0 0.000000 0.000000   102:
        0 0.000000 0.000000   103:
        0 0.000000 0.000000   104:
        0 0.000000 0.000000   105:
        0 0.000000 0.000000   106:
        0 0.000000 0.000000   107:
        0 0.000000 0.000000   108:
        0 0.000000 0.000000   109:
        0 0.000000 0.000000   110:
        0 0.000000 0.000000   111:
        0 0.000000 0.000000   112:
            ================ SmallProf version 0.9 ================
                Profile of /usr/lib/perl5/5.00503/Benchmark.pm         Page 294
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   113:
        0 0.000000 0.000000   114:
        0 0.000000 0.000000   115:
        0 0.000000 0.000000   116:
        0 0.000000 0.000000   117:
        0 0.000000 0.000000   118:
        0 0.000000 0.000000   119:
        0 0.000000 0.000000   120:
        0 0.000000 0.000000   121:
        0 0.000000 0.000000   122:
        0 0.000000 0.000000   123:
        0 0.000000 0.000000   124:
        0 0.000000 0.000000   125:
        0 0.000000 0.000000   126:
        0 0.000000 0.000000   127:
        0 0.000000 0.000000   128:
        0 0.000000 0.000000   129:
        0 0.000000 0.000000   130:
        0 0.000000 0.000000   131:
        0 0.000000 0.000000   132:
        0 0.000000 0.000000   133:
        0 0.000000 0.000000   134:
        0 0.000000 0.000000   135:
        0 0.000000 0.000000   136:
        0 0.000000 0.000000   137:
        0 0.000000 0.000000   138:
        0 0.000000 0.000000   139:
        0 0.000000 0.000000   140:
        0 0.000000 0.000000   141:
        0 0.000000 0.000000   142:
        0 0.000000 0.000000   143:
        0 0.000000 0.000000   144:
        0 0.000000 0.000000   145:
        0 0.000000 0.000000   146:
        0 0.000000 0.000000   147:
        0 0.000000 0.000000   148:
        0 0.000000 0.000000   149:
        0 0.000000 0.000000   150:
        0 0.000000 0.000000   151:
        0 0.000000 0.000000   152:
        0 0.000000 0.000000   153:
        0 0.000000 0.000000   154:
        0 0.000000 0.000000   155:
        0 0.000000 0.000000   156:
        0 0.000000 0.000000   157:
        0 0.000000 0.000000   158:
        0 0.000000 0.000000   159:
        0 0.000000 0.000000   160:
        0 0.000000 0.000000   161:
        0 0.000000 0.000000   162:
        0 0.000000 0.000000   163:
        0 0.000000 0.000000   164:
        0 0.000000 0.000000   165:
        0 0.000000 0.000000   166:
        0 0.000000 0.000000   167:
        0 0.000000 0.000000   168:
            ================ SmallProf version 0.9 ================
                Profile of /usr/lib/perl5/5.00503/Benchmark.pm         Page 295
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   169:
        0 0.000000 0.000000   170:
        0 0.000000 0.000000   171:
        0 0.000000 0.000000   172:
        0 0.000000 0.000000   173:
        0 0.000000 0.000000   174:
        0 0.000000 0.000000   175:
        0 0.000000 0.000000   176:
        0 0.000000 0.000000   177:
        0 0.000000 0.000000   178:
        0 0.000000 0.000000   179:
        0 0.000000 0.000000   180:
        0 0.000000 0.000000   181:
        0 0.000000 0.000000   182:
        0 0.000000 0.000000   183:
        0 0.000000 0.000000   184:
        0 0.000000 0.000000   185:
        0 0.000000 0.000000   186:
        0 0.000000 0.000000   187:
        0 0.000000 0.000000   188:
        0 0.000000 0.000000   189:
        0 0.000000 0.000000   190:
        0 0.000000 0.000000   191:
        0 0.000000 0.000000   192:
        0 0.000000 0.000000   193:
        0 0.000000 0.000000   194:
        0 0.000000 0.000000   195:
        0 0.000000 0.000000   196:
        0 0.000000 0.000000   197:
        0 0.000000 0.000000   198:
        0 0.000000 0.000000   199:
        0 0.000000 0.000000   200:
        0 0.000000 0.000000   201:
        0 0.000000 0.000000   202:
        0 0.000000 0.000000   203:
        0 0.000000 0.000000   204:
        0 0.000000 0.000000   205:
        0 0.000000 0.000000   206:
        0 0.000000 0.000000   207:
        0 0.000000 0.000000   208:
        0 0.000000 0.000000   209:
        0 0.000000 0.000000   210:
        0 0.000000 0.000000   211:
        0 0.000000 0.000000   212:
        0 0.000000 0.000000   213:
        0 0.000000 0.000000   214:
        0 0.000000 0.000000   215:
        0 0.000000 0.000000   216:
        0 0.000000 0.000000   217:
        0 0.000000 0.000000   218:
        0 0.000000 0.000000   219:
        0 0.000000 0.000000   220:
        0 0.000000 0.000000   221:
        0 0.000000 0.000000   222:
        0 0.000000 0.000000   223:
        0 0.000000 0.000000   224:
            ================ SmallProf version 0.9 ================
                Profile of /usr/lib/perl5/5.00503/Benchmark.pm         Page 296
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   225:
        0 0.000000 0.000000   226:
        0 0.000000 0.000000   227:
        0 0.000000 0.000000   228:
        0 0.000000 0.000000   229:
        0 0.000000 0.000000   230:
        0 0.000000 0.000000   231:
        0 0.000000 0.000000   232:
        0 0.000000 0.000000   233:
        0 0.000000 0.000000   234:
        0 0.000000 0.000000   235:
        0 0.000000 0.000000   236:
        0 0.000000 0.000000   237:
        0 0.000000 0.000000   238:
        0 0.000000 0.000000   239:
        0 0.000000 0.000000   240:
        0 0.000000 0.000000   241:
        0 0.000000 0.000000   242:
        0 0.000000 0.000000   243:
        0 0.000000 0.000000   244:
        0 0.000000 0.000000   245:
        0 0.000000 0.000000   246:# evaluate something in a clean lexical
        0 0.000000 0.000000   247:sub _doeval { eval shift }
        0 0.000000 0.000000   248:
        0 0.000000 0.000000   249:#
        0 0.000000 0.000000   250:# put any lexicals at file scope AFTER here
        0 0.000000 0.000000   251:#
        0 0.000000 0.000000   252:
        0 0.000000 0.000000   253:use Carp;
        0 0.000000 0.000000   254:use Exporter;
        0 0.000000 0.000000   255:@ISA=(Exporter);
        0 0.000000 0.000000   256:@EXPORT=qw(timeit timethis timethese timediff
        0 0.000000 0.000000   257:@EXPORT_OK=qw(clearcache clearallcache
        0 0.000000 0.000000   258:
        0 0.000000 0.000000   259:&init;
        0 0.000000 0.000000   260:
        1 0.000000 0.000000   261:sub init {
        0 0.000000 0.000000   262:    $debug = 0;
        0 0.000000 0.000000   263:    $min_count = 4;
        0 0.000000 0.000000   264:    $min_cpu   = 0.4;
        0 0.000000 0.000000   265:    $defaultfmt = '5.2f';
        0 0.000000 0.000000   266:    $defaultstyle = 'auto';
        0 0.000000 0.000000   267:    # The cache can cause a slight loss of
        0 0.000000 0.000000   268:    # user does many tests (>10) with *very*
        0 0.000000 0.000000   269:    # or works on a very slow machine the
        0 0.000000 0.000000   270:    &disablecache;
        0 0.000000 0.000000   271:    &clearallcache;
        0 0.000000 0.000000   272:}
        0 0.000000 0.000000   273:
        0 0.000000 0.000000   274:sub debug { $debug = ($_[1] != 0); }
        0 0.000000 0.000000   275:
        0 0.000000 0.000000   276:sub clearcache    { delete $cache{$_[0]}; }
        1 0.000000 0.000000   277:sub clearallcache { %cache = (); }
        0 0.000000 0.000000   278:sub enablecache   { $cache = 1; }
        1 0.000000 0.000000   279:sub disablecache  { $cache = 0; }
        0 0.000000 0.000000   280:
            ================ SmallProf version 0.9 ================
                Profile of /usr/lib/perl5/5.00503/Benchmark.pm         Page 297
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   281:# --- Functions to process the 'time' data
        0 0.000000 0.000000   282:
        8 0.000073 0.000000   283:sub new { my @t = (time, times, @_ == 2 ?
        4 0.000013 0.000000   284:   print "new=@t\n" if $debug;
        4 0.000122 0.000000   285:   bless \@t; }
        0 0.000000 0.000000   286:
       16 0.000314 0.000000   287:sub cpu_p { my($r,$pu,$ps,$cu,$cs) =
       16 0.000306 0.000000   288:sub cpu_c { my($r,$pu,$ps,$cu,$cs) =
       16 0.000070 0.000000   289:sub cpu_a { my($r,$pu,$ps,$cu,$cs) =
        0 0.000000 0.000000   290:sub real  { my($r,$pu,$ps,$cu,$cs) =
        0 0.000000 0.000000   291:
        4 0.000000 0.000000   292:sub timediff {
        4 0.000024 0.000000   293:    my($a, $b) = @_;
        4 0.000014 0.000000   294:    my @r;
       28 0.000109 0.000000   295:    for (my $i=0; $i < @$a; ++$i) {
       24 0.000184 0.000000   296: push(@r, $a->[$i] - $b->[$i]);
        0 0.000000 0.000000   297:    }
        4 0.000046 0.000000   298:    bless \@r;
        0 0.000000 0.000000   299:}
        0 0.000000 0.000000   300:
        0 0.000000 0.000000   301:sub timesum {
        0 0.000000 0.000000   302:     my($a, $b) = @_;
        0 0.000000 0.000000   303:     my @r;
        0 0.000000 0.000000   304:     for (my $i=0; $i < @$a; ++$i) {
        0 0.000000 0.000000   305:  push(@r, $a->[$i] + $b->[$i]);
        0 0.000000 0.000000   306:     }
        0 0.000000 0.000000   307:     bless \@r;
        0 0.000000 0.000000   308:}
        0 0.000000 0.000000   309:
        4 0.000000 0.000000   310:sub timestr {
        4 0.000024 0.000000   311:    my($tr, $style, $f) = @_;
        4 0.000066 0.000000   312:    my @t = @$tr;
        4 0.000032 0.000000   313:    warn "bad time value (@t)" unless @t==6;
        4 0.000028 0.000000   314:    my($r, $pu, $ps, $cu, $cs, $n) = @t;
        4 0.000297 0.000000   315:    my($pt, $ct, $t) = ($tr->cpu_p, $tr-
        4 0.000019 0.000000   316:    $f = $defaultfmt unless defined $f;
        0 0.000000 0.000000   317:    # format a time in the required style,
        4 0.000021 0.000000   318:    $style ||= $defaultstyle;
        4 0.000025 0.000000   319:    $style = ($ct>0) ? 'all' : 'noc' if
        4 0.000374 0.000000   320:    my $s = "@t $style"; # default for
        4 0.000015 0.000000   321:    $s=sprintf("%2d wallclock secs (%$f usr
        0 0.000000 0.000000   322:       @t,$t) if $style eq 'all';
        4 0.000334 0.000000   323:    $s=sprintf("%2d wallclock secs (%$f usr +
        0 0.000000 0.000000   324:       $r,$pu,$ps,$pt) if $style eq 'noc';
        4 0.000021 0.000000   325:    $s=sprintf("%2d wallclock secs (%$f cusr
        0 0.000000 0.000000   326:       $r,$cu,$cs,$ct) if $style eq 'nop';
        4 0.000010 0.000000   327:    $s .= sprintf(" @ %$f/s (n=$n)", $n / (
        4 0.000239 0.000000   328:    $s;
        0 0.000000 0.000000   329:}
        0 0.000000 0.000000   330:
        0 0.000000 0.000000   331:sub timedebug {
        0 0.000000 0.000000   332:    my($msg, $t) = @_;
        0 0.000000 0.000000   333:    print STDERR "$msg",timestr($t),"\n" if
        0 0.000000 0.000000   334:}
        0 0.000000 0.000000   335:
        0 0.000000 0.000000   336:# --- Functions implementing low-level
            ================ SmallProf version 0.9 ================
                Profile of /usr/lib/perl5/5.00503/Benchmark.pm         Page 298
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   337:
        0 0.000000 0.000000   338:sub runloop {
        0 0.000000 0.000000   339:    my($n, $c) = @_;
        0 0.000000 0.000000   340:
        0 0.000000 0.000000   341:    $n+=0; # force numeric now, so garbage
        0 0.000000 0.000000   342:    croak "negative loopcount $n" if $n<0;
        0 0.000000 0.000000   343:    confess "Usage: runloop(number, [string |
        0 0.000000 0.000000   344:    my($t0, $t1, $td); # before, after,
        0 0.000000 0.000000   345:
        0 0.000000 0.000000   346:    # find package of caller so we can
        0 0.000000 0.000000   347:    my($curpack) = caller(0);
        0 0.000000 0.000000   348:    my($i, $pack)= 0;
        0 0.000000 0.000000   349:    while (($pack) = caller(++$i)) {
        0 0.000000 0.000000   350: last if $pack ne $curpack;
        0 0.000000 0.000000   351:    }
        0 0.000000 0.000000   352:
        0 0.000000 0.000000   353:    my ($subcode, $subref);
        0 0.000000 0.000000   354:    if (ref $c eq 'CODE') {
        0 0.000000 0.000000   355: $subcode = "sub { for (1 .. $n) { local \$_;
        0 0.000000 0.000000   356:        $subref  = eval $subcode;
        0 0.000000 0.000000   357:    }
        0 0.000000 0.000000   358:    else {
        0 0.000000 0.000000   359: $subcode = "sub { for (1 .. $n) { local \$_;
        0 0.000000 0.000000   360:        $subref  = _doeval($subcode);
        0 0.000000 0.000000   361:    }
        0 0.000000 0.000000   362:    croak "runloop unable to compile '$c':
        0 0.000000 0.000000   363:    print STDERR "runloop $n '$subcode'\n" if
        0 0.000000 0.000000   364:
        0 0.000000 0.000000   365:    $t0 = Benchmark->new(0);
        0 0.000000 0.000000   366:    &$subref;
        0 0.000000 0.000000   367:    $t1 = Benchmark->new($n);
        0 0.000000 0.000000   368:    $td = &timediff($t1, $t0);
        0 0.000000 0.000000   369:
        0 0.000000 0.000000   370:    timedebug("runloop:",$td);
        0 0.000000 0.000000   371:    $td;
        0 0.000000 0.000000   372:}
        0 0.000000 0.000000   373:
        0 0.000000 0.000000   374:
        0 0.000000 0.000000   375:sub timeit {
        0 0.000000 0.000000   376:    my($n, $code) = @_;
        0 0.000000 0.000000   377:    my($wn, $wc, $wd);
        0 0.000000 0.000000   378:
        0 0.000000 0.000000   379:    printf STDERR "timeit $n $code\n" if
        0 0.000000 0.000000   380:
        0 0.000000 0.000000   381:    if ($cache && exists $cache{$n}) {
        0 0.000000 0.000000   382: $wn = $cache{$n};
        0 0.000000 0.000000   383:    } else {
        0 0.000000 0.000000   384: $wn = &runloop($n, '');
        0 0.000000 0.000000   385: $cache{$n} = $wn;
        0 0.000000 0.000000   386:    }
        0 0.000000 0.000000   387:
        0 0.000000 0.000000   388:    $wc = &runloop($n, $code);
        0 0.000000 0.000000   389:
        0 0.000000 0.000000   390:    $wd = timediff($wc, $wn);
        0 0.000000 0.000000   391:
        0 0.000000 0.000000   392:    timedebug("timeit: ",$wc);
            ================ SmallProf version 0.9 ================
                Profile of /usr/lib/perl5/5.00503/Benchmark.pm         Page 299
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   393:    timedebug("      - ",$wn);
        0 0.000000 0.000000   394:    timedebug("      = ",$wd);
        0 0.000000 0.000000   395:
        0 0.000000 0.000000   396:    $wd;
        0 0.000000 0.000000   397:}
        0 0.000000 0.000000   398:
        0 0.000000 0.000000   399:
        0 0.000000 0.000000   400:my $default_for = 3;
        0 0.000000 0.000000   401:my $min_for     = 0.1;
        0 0.000000 0.000000   402:
        0 0.000000 0.000000   403:sub runfor {
        0 0.000000 0.000000   404:    my ($code, $tmax) = @_;
        0 0.000000 0.000000   405:
        0 0.000000 0.000000   406:    if ( not defined $tmax or $tmax == 0 ) {
        0 0.000000 0.000000   407: $tmax = $default_for;
        0 0.000000 0.000000   408:    } elsif ( $tmax < 0 ) {
        0 0.000000 0.000000   409: $tmax = -$tmax;
        0 0.000000 0.000000   410:    }
        0 0.000000 0.000000   411:
        0 0.000000 0.000000   412:    die "runfor(..., $tmax): timelimit cannot
        0 0.000000 0.000000   413: if $tmax < $min_for;
        0 0.000000 0.000000   414:
        0 0.000000 0.000000   415:    my ($n, $td, $tc, $ntot, $rtot, $utot,
        0 0.000000 0.000000   416:
        0 0.000000 0.000000   417:    # First find the minimum $n that gives a
        0 0.000000 0.000000   418:
        0 0.000000 0.000000   419:    my $nmin;
        0 0.000000 0.000000   420:
        0 0.000000 0.000000   421:    for ($n = 1, $tc = 0; $tc <= 0; $n *= 2 )
        0 0.000000 0.000000   422: $td = timeit($n, $code);
        0 0.000000 0.000000   423: $tc = $td->[1] + $td->[2];
        0 0.000000 0.000000   424:    }
        0 0.000000 0.000000   425:
        0 0.000000 0.000000   426:    $nmin = $n;
        0 0.000000 0.000000   427:
        0 0.000000 0.000000   428:    my $ttot = 0;
        0 0.000000 0.000000   429:    my $tpra = 0.05 * $tmax; # Target/time
        0 0.000000 0.000000   430:
        0 0.000000 0.000000   431:    # Double $n until we have think we have
        0 0.000000 0.000000   432:    for ( $n = 1; $ttot < $tpra; $n *= 2 ) {
        0 0.000000 0.000000   433: $td = timeit($n, $code);
        0 0.000000 0.000000   434: $tc = $td->cpu_p;
        0 0.000000 0.000000   435: $ntot += $n;
        0 0.000000 0.000000   436: $rtot += $td->[0];
        0 0.000000 0.000000   437: $utot += $td->[1];
        0 0.000000 0.000000   438: $stot += $td->[2];
        0 0.000000 0.000000   439: $ttot = $utot + $stot;
        0 0.000000 0.000000   440: $cutot += $td->[3];
        0 0.000000 0.000000   441: $cstot += $td->[4];
        0 0.000000 0.000000   442:    }
        0 0.000000 0.000000   443:
        0 0.000000 0.000000   444:    my $r;
        0 0.000000 0.000000   445:
        0 0.000000 0.000000   446:    # Then iterate towards the $tmax.
        0 0.000000 0.000000   447:    while ( $ttot < $tmax ) {
        0 0.000000 0.000000   448: $r = $tmax / $ttot - 1; # Linear
            ================ SmallProf version 0.9 ================
                Profile of /usr/lib/perl5/5.00503/Benchmark.pm         Page 300
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   449: $n = int( $r * $n );
        0 0.000000 0.000000   450: $n = $nmin if $n < $nmin;
        0 0.000000 0.000000   451: $td = timeit($n, $code);
        0 0.000000 0.000000   452: $ntot += $n;
        0 0.000000 0.000000   453: $rtot += $td->[0];
        0 0.000000 0.000000   454: $utot += $td->[1];
        0 0.000000 0.000000   455: $stot += $td->[2];
        0 0.000000 0.000000   456: $ttot = $utot + $stot;
        0 0.000000 0.000000   457: $cutot += $td->[3];
        0 0.000000 0.000000   458: $cstot += $td->[4];
        0 0.000000 0.000000   459:    }
        0 0.000000 0.000000   460:
        0 0.000000 0.000000   461:    return bless [ $rtot, $utot, $stot,
        0 0.000000 0.000000   462:}
        0 0.000000 0.000000   463:
        0 0.000000 0.000000   464:# --- Functions implementing high-level time-
        0 0.000000 0.000000   465:
        0 0.000000 0.000000   466:sub n_to_for {
        0 0.000000 0.000000   467:    my $n = shift;
        0 0.000000 0.000000   468:    return $n == 0 ? $default_for : $n < 0 ?
        0 0.000000 0.000000   469:}
        0 0.000000 0.000000   470:
        0 0.000000 0.000000   471:sub timethis{
        0 0.000000 0.000000   472:    my($n, $code, $title, $style) = @_;
        0 0.000000 0.000000   473:    my($t, $for, $forn);
        0 0.000000 0.000000   474:
        0 0.000000 0.000000   475:    if ( $n > 0 ) {
        0 0.000000 0.000000   476: croak "non-integer loopcount $n, stopped" if
        0 0.000000 0.000000   477: $t = timeit($n, $code);
        0 0.000000 0.000000   478: $title = "timethis $n" unless defined
        0 0.000000 0.000000   479:    } else {
        0 0.000000 0.000000   480: $fort  = n_to_for( $n );
        0 0.000000 0.000000   481: $t     = runfor($code, $fort);
        0 0.000000 0.000000   482: $title = "timethis for $fort" unless defined
        0 0.000000 0.000000   483: $forn  = $t->[-1];
        0 0.000000 0.000000   484:    }
        0 0.000000 0.000000   485:    local $| = 1;
        0 0.000000 0.000000   486:    $style = "" unless defined $style;
        0 0.000000 0.000000   487:    printf("%10s: ", $title);
        0 0.000000 0.000000   488:    print timestr($t, $style,
        0 0.000000 0.000000   489:
        0 0.000000 0.000000   490:    $n = $forn if defined $forn;
        0 0.000000 0.000000   491:
        0 0.000000 0.000000   492:    # A conservative warning to spot very
        0 0.000000 0.000000   493:    # Don't assume that your benchmark is ok
        0 0.000000 0.000000   494:    # you don't get this warning!
        0 0.000000 0.000000   495:    print "            (warning: too few
        0 0.000000 0.000000   496: if     $n < $min_count
        0 0.000000 0.000000   497:     || ($t->real < 1 && $n < 1000)
        0 0.000000 0.000000   498:     || $t->cpu_a < $min_cpu;
        0 0.000000 0.000000   499:    $t;
        0 0.000000 0.000000   500:}
        0 0.000000 0.000000   501:
        0 0.000000 0.000000   502:sub timethese{
        0 0.000000 0.000000   503:    my($n, $alt, $style) = @_;
        0 0.000000 0.000000   504:    die "usage: timethese(count, {
            ================ SmallProf version 0.9 ================
                Profile of /usr/lib/perl5/5.00503/Benchmark.pm         Page 301
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   505:  unless ref $alt eq HASH;
        0 0.000000 0.000000   506:    my @names = sort keys %$alt;
        0 0.000000 0.000000   507:    $style = "" unless defined $style;
        0 0.000000 0.000000   508:    print "Benchmark: ";
        0 0.000000 0.000000   509:    if ( $n > 0 ) {
        0 0.000000 0.000000   510: croak "non-integer loopcount $n, stopped" if
        0 0.000000 0.000000   511: print "timing $n iterations of";
        0 0.000000 0.000000   512:    } else {
        0 0.000000 0.000000   513: print "running";
        0 0.000000 0.000000   514:    }
        0 0.000000 0.000000   515:    print " ", join(', ',@names);
        0 0.000000 0.000000   516:    unless ( $n > 0 ) {
        0 0.000000 0.000000   517: my $for = n_to_for( $n );
        0 0.000000 0.000000   518: print ", each for at least $for CPU
        0 0.000000 0.000000   519:    }
        0 0.000000 0.000000   520:    print "...\n";
        0 0.000000 0.000000   521:
        0 0.000000 0.000000   522:    # we could save the results in an array
        0 0.000000 0.000000   523:    # sum, min, max, avg etc etc
        0 0.000000 0.000000   524:    foreach my $name (@names) {
        0 0.000000 0.000000   525:        timethis ($n, $alt -> {$name}, $name,
        0 0.000000 0.000000   526:    }
        0 0.000000 0.000000   527:}
        0 0.000000 0.000000   528:
        0 0.000000 0.000000   529:1;
            ================ SmallProf version 0.9 ================
                   Profile of /usr/lib/perl5/5.00503/CGI.pm            Page 302
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000     1:package CGI;
        0 0.000000 0.000000     2:require 5.004;
        0 0.000000 0.000000     3:
        0 0.000000 0.000000     4:# See the bottom of this file for the POD
        0 0.000000 0.000000     5:# string '=head'.
        0 0.000000 0.000000     6:
        0 0.000000 0.000000     7:# You can run this file through either
        0 0.000000 0.000000     8:# documentation in manual or html file format
        0 0.000000 0.000000     9:# Perl 5 distribution).
        0 0.000000 0.000000    10:
        0 0.000000 0.000000    11:# Copyright 1995-1998 Lincoln D. Stein.  All
        0 0.000000 0.000000    12:# It may be used and modified freely, but I
        0 0.000000 0.000000    13:# notice remain attached to the file.  You
        0 0.000000 0.000000    14:# wish, but if you redistribute a modified
        0 0.000000 0.000000    15:# listing the modifications you have made.
        0 0.000000 0.000000    16:
        0 0.000000 0.000000    17:# The most recent version and complete docs
        0 0.000000 0.000000    18:#   http://stein.cshl.org/WWW/software/CGI/
        0 0.000000 0.000000    19:
        0 0.000000 0.000000    20:$CGI::revision = '$Id: CGI.pm,v 1.5
        0 0.000000 0.000000    21:$CGI::VERSION='2.46';
        0 0.000000 0.000000    22:
        0 0.000000 0.000000    23:# HARD-CODED LOCATION FOR FILE UPLOAD
        0 0.000000 0.000000    24:# UNCOMMENT THIS ONLY IF YOU KNOW WHAT YOU'RE
        0 0.000000 0.000000    25:# $TempFile::TMPDIRECTORY = '/usr/tmp';
        0 0.000000 0.000000    26:
        0 0.000000 0.000000    27:# >>>>> Here are some globals that you might
        1 0.000000 0.000000    28:sub initialize_globals {
        0 0.000000 0.000000    29:    # Set this to 1 to enable copious
        0 0.000000 0.000000    30:    $AUTOLOAD_DEBUG = 0;
        0 0.000000 0.000000    31:
        0 0.000000 0.000000    32:    # Change this to the preferred DTD to
        0 0.000000 0.000000    33:    # or use default_dtd('text of DTD to
        0 0.000000 0.000000    34:    $DEFAULT_DTD = '-//IETF//DTD HTML//EN';
        0 0.000000 0.000000    35:
        0 0.000000 0.000000    36:    # Set this to 1 to enable NPH scripts
        0 0.000000 0.000000    37:    # or:
        0 0.000000 0.000000    38:    #    1) use CGI qw(-nph)
        0 0.000000 0.000000    39:    #    2) $CGI::nph(1)
        0 0.000000 0.000000    40:    #    3) print header(-nph=>1)
        0 0.000000 0.000000    41:    $NPH = 0;
        0 0.000000 0.000000    42:
        0 0.000000 0.000000    43:    # Set this to 1 to disable debugging from
        0 0.000000 0.000000    44:    # command line
        0 0.000000 0.000000    45:    $NO_DEBUG = 0;
        0 0.000000 0.000000    46:
        0 0.000000 0.000000    47:    # Set this to 1 to make the temporary
        0 0.000000 0.000000    48:    # during file uploads safe from prying
        0 0.000000 0.000000    49:    # or do...
        0 0.000000 0.000000    50:    #    1) use CGI qw(:private_tempfiles)
        0 0.000000 0.000000    51:    #    2) $CGI::private_tempfiles(1);
        0 0.000000 0.000000    52:    $PRIVATE_TEMPFILES = 0;
        0 0.000000 0.000000    53:
        0 0.000000 0.000000    54:    # Set this to a positive value to limit
        0 0.000000 0.000000    55:    # to a certain number of bytes:
        0 0.000000 0.000000    56:    $POST_MAX = -1;
            ================ SmallProf version 0.9 ================
                   Profile of /usr/lib/perl5/5.00503/CGI.pm            Page 303
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000    57:
        0 0.000000 0.000000    58:    # Change this to 1 to disable uploads
        0 0.000000 0.000000    59:    $DISABLE_UPLOADS = 0;
        0 0.000000 0.000000    60:
        0 0.000000 0.000000    61:    # Change this to 1 to suppress redundant
        0 0.000000 0.000000    62:    $HEADERS_ONCE = 0;
        0 0.000000 0.000000    63:
        0 0.000000 0.000000    64:    # separate the name=value pairs by
        0 0.000000 0.000000    65:    $USE_PARAM_SEMICOLONS = 0;
        0 0.000000 0.000000    66:
        0 0.000000 0.000000    67:    # Other globals that you shouldn't worry
        0 0.000000 0.000000    68:    undef $Q;
        0 0.000000 0.000000    69:    $BEEN_THERE = 0;
        0 0.000000 0.000000    70:    undef @QUERY_PARAM;
        0 0.000000 0.000000    71:    undef %EXPORT;
        0 0.000000 0.000000    72:
        0 0.000000 0.000000    73:    # prevent complaints by mod_perl
        0 0.000000 0.000000    74:    1;
        0 0.000000 0.000000    75:}
        0 0.000000 0.000000    76:
        0 0.000000 0.000000    77:# ------------------ START OF THE LIBRARY ---
        0 0.000000 0.000000    78:
        0 0.000000 0.000000    79:# make mod_perlhappy
        0 0.000000 0.000000    80:initialize_globals();
        0 0.000000 0.000000    81:
        0 0.000000 0.000000    82:# FIGURE OUT THE OS WE'RE RUNNING UNDER
        0 0.000000 0.000000    83:# Some systems support the $^O variable.  If
        0 0.000000 0.000000    84:# available then require() the Config library
        0 0.000000 0.000000    85:unless ($OS) {
        0 0.000000 0.000000    86:    unless ($OS = $^O) {
        0 0.000000 0.000000    87: require Config;
        0 0.000000 0.000000    88: $OS = $Config::Config{'osname'};
        0 0.000000 0.000000    89:    }
        0 0.000000 0.000000    90:}
        0 0.000000 0.000000    91:if ($OS=~/Win/i) {
        0 0.000000 0.000000    92:    $OS = 'WINDOWS';
        0 0.000000 0.000000    93:} elsif ($OS=~/vms/i) {
        0 0.000000 0.000000    94:    $OS = 'VMS';
        0 0.000000 0.000000    95:} elsif ($OS=~/^MacOS$/i) {
        0 0.000000 0.000000    96:    $OS = 'MACINTOSH';
        0 0.000000 0.000000    97:} elsif ($OS=~/os2/i) {
        0 0.000000 0.000000    98:    $OS = 'OS2';
        0 0.000000 0.000000    99:} else {
        0 0.000000 0.000000   100:    $OS = 'UNIX';
        0 0.000000 0.000000   101:}
        0 0.000000 0.000000   102:
        0 0.000000 0.000000   103:# Some OS logic.  Binary mode enabled on DOS,
        0 0.000000 0.000000   104:$needs_binmode = $OS=~/^(WINDOWS|VMS|OS2)/;
        0 0.000000 0.000000   105:
        0 0.000000 0.000000   106:# This is the default class for the CGI
        0 0.000000 0.000000   107:$DefaultClass = 'CGI' unless defined
        0 0.000000 0.000000   108:
        0 0.000000 0.000000   109:# This is where to look for autoloaded
        0 0.000000 0.000000   110:$AutoloadClass = $DefaultClass unless defined
        0 0.000000 0.000000   111:
        0 0.000000 0.000000   112:# The path separator is a slash, backslash or
            ================ SmallProf version 0.9 ================
                   Profile of /usr/lib/perl5/5.00503/CGI.pm            Page 304
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   113:# on the paltform.
        0 0.000000 0.000000   114:$SL = {
        0 0.000000 0.000000   115:    UNIX=>'/', OS2=>'\\', WINDOWS=>'\\',
        0 0.000000 0.000000   116:    }->{$OS};
        0 0.000000 0.000000   117:
        0 0.000000 0.000000   118:# This no longer seems to be necessary
        0 0.000000 0.000000   119:# Turn on NPH scripts by default when running
        0 0.000000 0.000000   120:# $NPH++ if defined($ENV{'SERVER_SOFTWARE'})
        0 0.000000 0.000000   121:$IIS++ if defined($ENV{'SERVER_SOFTWARE'}) &&
        0 0.000000 0.000000   122:
        0 0.000000 0.000000   123:# Turn on special checking for Doug
        0 0.000000 0.000000   124:if (exists $ENV{'GATEWAY_INTERFACE'}
        0 0.000000 0.000000   125:    &&
        0 0.000000 0.000000   126:    ($MOD_PERL = $ENV{'GATEWAY_INTERFACE'} =~
        0 0.000000 0.000000   127:{
        0 0.000000 0.000000   128:    $| = 1;
        0 0.000000 0.000000   129:    require Apache;
        0 0.000000 0.000000   130:}
        0 0.000000 0.000000   131:# Turn on special checking for ActiveState's
        0 0.000000 0.000000   132:$PERLEX++ if
        0 0.000000 0.000000   133:
        0 0.000000 0.000000   134:# Define the CRLF sequence.  I can't use a
        0 0.000000 0.000000   135:# of "\n" is different on different OS's
        0 0.000000 0.000000   136:# and sometimes CR).  The most popular VMS
        0 0.000000 0.000000   137:# doesn't accept CRLF -- instead it wants a
        0 0.000000 0.000000   138:# use ASCII, so \015\012 means something
        0 0.000000 0.000000   139:# really annoying.
        0 0.000000 0.000000   140:$EBCDIC = "\t" ne "\011";
        0 0.000000 0.000000   141:if ($OS eq 'VMS') {
        0 0.000000 0.000000   142:    $CRLF = "\n";
        0 0.000000 0.000000   143:} elsif ($EBCDIC) {
        0 0.000000 0.000000   144:    $CRLF= "\r\n";
        0 0.000000 0.000000   145:} else {
        0 0.000000 0.000000   146:    $CRLF = "\015\012";
        0 0.000000 0.000000   147:}
        0 0.000000 0.000000   148:
        0 0.000000 0.000000   149:if ($needs_binmode) {
        0 0.000000 0.000000   150:    $CGI::DefaultClass-
        0 0.000000 0.000000   151:    $CGI::DefaultClass->binmode(main::STDIN);
        0 0.000000 0.000000   152:    $CGI::DefaultClass-
        0 0.000000 0.000000   153:}
        0 0.000000 0.000000   154:
        0 0.000000 0.000000   155:%EXPORT_TAGS = (
        0 0.000000 0.000000   156:  ':html2'=>['h1'..'h6',qw/p br hr ol ul li
        0 0.000000 0.000000   157:      tt u i b blockquote pre img a address
        0 0.000000 0.000000   158:      base body Link nextid title meta kbd
        0 0.000000 0.000000   159:      input Select option comment/],
        0 0.000000 0.000000   160:  ':html3'=>[qw/div table caption th td TR Tr
        0 0.000000 0.000000   161:      embed basefont style span layer ilayer
        0 0.000000 0.000000   162:  ':netscape'=>[qw/blink fontsize center/],
        0 0.000000 0.000000   163:  ':form'=>[qw/textfield textarea filefield
        0 0.000000 0.000000   164:     submit reset defaults radio_group
        0 0.000000 0.000000   165:     scrolling_list image_button start_form
        0 0.000000 0.000000   166:     start_multipart_form end_multipart_form
        0 0.000000 0.000000   167:  ':cgi'=>[qw/param path_info path_translated
        0 0.000000 0.000000   168:    raw_cookie request_method query_string
            ================ SmallProf version 0.9 ================
                   Profile of /usr/lib/perl5/5.00503/CGI.pm            Page 305
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   169:    remote_addr referer server_name
        0 0.000000 0.000000   170:    virtual_host remote_ident auth_type http
        0 0.000000 0.000000   171:    save_parameters restore_parameters
        0 0.000000 0.000000   172:    remote_user user_name header redirect
        0 0.000000 0.000000   173:  ':ssl' => [qw/https/],
        0 0.000000 0.000000   174:  ':imagemap' => [qw/Area Map/],
        0 0.000000 0.000000   175:  ':cgi-lib' => [qw/ReadParse PrintHeader
        0 0.000000 0.000000   176:  ':html' => [qw/:html2 :html3 :netscape/],
        0 0.000000 0.000000   177:  ':standard' => [qw/:html2 :html3 :form
        0 0.000000 0.000000   178:  ':push' => [qw/multipart_init
        0 0.000000 0.000000   179:  ':all' => [qw/:html2 :html3 :netscape :form
        0 0.000000 0.000000   180:  );
        0 0.000000 0.000000   181:
        0 0.000000 0.000000   182:# to import symbols into caller
        4 0.000000 0.000000   183:sub import {
        0 0.000000 0.000000   184:    my $self = shift;
        0 0.000000 0.000000   185:
        0 0.000000 0.000000   186:# This causes modules to clash.
        0 0.000000 0.000000   187:#    undef %EXPORT_OK;
        0 0.000000 0.000000   188:#    undef %EXPORT;
        0 0.000000 0.000000   189:
        0 0.000000 0.000000   190:    $self->_setup_symbols(@_);
        0 0.000000 0.000000   191:    my ($callpack, $callfile, $callline) =
        0 0.000000 0.000000   192:
        0 0.000000 0.000000   193:    # To allow overriding, search through the
        0 0.000000 0.000000   194:    # Till we find one in which the correct
        0 0.000000 0.000000   195:    my @packages = ($self,@{"$self\:\:ISA"});
        0 0.000000 0.000000   196:    foreach $sym (keys %EXPORT) {
        0 0.000000 0.000000   197: my $pck;
        0 0.000000 0.000000   198: my $def = ${"$self\:\:AutoloadClass"} ||
        0 0.000000 0.000000   199: foreach $pck (@packages) {
        0 0.000000 0.000000   200:     if (defined(&{"$pck\:\:$sym"})) {
        0 0.000000 0.000000   201:  $def = $pck;
        0 0.000000 0.000000   202:  last;
        0 0.000000 0.000000   203:     }
        0 0.000000 0.000000   204: }
        0 0.000000 0.000000   205: *{"${callpack}::$sym"} = \&{"$def\:\:$sym"};
        0 0.000000 0.000000   206:    }
        0 0.000000 0.000000   207:}
        0 0.000000 0.000000   208:
        0 0.000000 0.000000   209:sub compile {
        0 0.000000 0.000000   210:    my $pack = shift;
        0 0.000000 0.000000   211:    $pack->_setup_symbols('-compile',@_);
        0 0.000000 0.000000   212:}
        0 0.000000 0.000000   213:
      140 0.000000 0.000000   214:sub expand_tags {
        0 0.000000 0.000000   215:    my($tag) = @_;
        0 0.000000 0.000000   216:    return ("start_$1","end_$1") if
        0 0.000000 0.000000   217:    my(@r);
        0 0.000000 0.000000   218:    return ($tag) unless $EXPORT_TAGS{$tag};
        0 0.000000 0.000000   219:    foreach (@{$EXPORT_TAGS{$tag}}) {
        0 0.000000 0.000000   220: push(@r,&expand_tags($_));
        0 0.000000 0.000000   221:    }
        0 0.000000 0.000000   222:    return @r;
        0 0.000000 0.000000   223:}
        0 0.000000 0.000000   224:
            ================ SmallProf version 0.9 ================
                   Profile of /usr/lib/perl5/5.00503/CGI.pm            Page 306
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   225:#### Method: new
        0 0.000000 0.000000   226:# The new routine.  This will check the
        0 0.000000 0.000000   227:# for an existing query string, and
        0 0.000000 0.000000   228:####
        1 0.000000 0.000000   229:sub new {
        1 0.000008 0.000000   230:    my($class,$initializer) = @_;
        1 0.000011 0.000000   231:    my $self = {};
        1 0.000019 0.000000   232:    bless $self,ref $class || $class ||
        1 0.000003 0.000000   233:    if ($MOD_PERL) {
        0 0.000000 0.000000   234: Apache->request-
        0 0.000000 0.000000   235: undef $NPH;
        0 0.000000 0.000000   236:    }
        1 0.000003 0.000000   237:    $self->_reset_globals if $PERLEX;
        1 0.000080 0.000000   238:    $self->init($initializer);
        1 0.000024 0.000000   239:    return $self;
        0 0.000000 0.000000   240:}
        0 0.000000 0.000000   241:
        0 0.000000 0.000000   242:# We provide a DESTROY method so that the
        0 0.000000 0.000000   243:# doesn't bother trying to find it.
        0 0.000000 0.000000   244:sub DESTROY { }
        0 0.000000 0.000000   245:
        0 0.000000 0.000000   246:#### Method: param
        0 0.000000 0.000000   247:# Returns the value(s)of a named parameter.
        0 0.000000 0.000000   248:# If invoked in a list context, returns the
        0 0.000000 0.000000   249:# entire list.  Otherwise returns the first
        0 0.000000 0.000000   250:# member of the list.
        0 0.000000 0.000000   251:# If name is not provided, return a list of
        0 0.000000 0.000000   252:# the known parameters names available.
        0 0.000000 0.000000   253:# If more than one argument is provided, the
        0 0.000000 0.000000   254:# second and subsequent arguments are used to
        0 0.000000 0.000000   255:# set the value of the parameter.
        0 0.000000 0.000000   256:####
       46 0.000000 0.000000   257:sub param {
       46 0.002893 0.000000   258:    my($self,@p) = self_or_default(@_);
       46 0.001579 0.010000   259:    return $self->all_parameters unless @p;
       43 0.000132 0.000000   260:    my($name,$value,@other);
        0 0.000000 0.000000   261:
        0 0.000000 0.000000   262:    # For compatibility between old calling
        0 0.000000 0.000000   263:    # we have to special case for a single
       43 0.000209 0.000000   264:    if (@p > 1) {
        0 0.000000 0.000000   265: ($name,$value,@other) = $self-
        0 0.000000 0.000000   266: my(@values);
        0 0.000000 0.000000   267:
        0 0.000000 0.000000   268: if (substr($p[0],0,1) eq '-' || $self-
        0 0.000000 0.000000   269:     @values = defined($value) ? (ref($value)
        0 0.000000 0.000000   270: } else {
        0 0.000000 0.000000   271:     foreach ($value,@other) {
        0 0.000000 0.000000   272:  push(@values,$_) if defined($_);
        0 0.000000 0.000000   273:     }
        0 0.000000 0.000000   274: }
        0 0.000000 0.000000   275: # If values is provided, then we set it.
        0 0.000000 0.000000   276: if (@values) {
        0 0.000000 0.000000   277:     $self->add_parameter($name);
        0 0.000000 0.000000   278:     $self->{$name}=[@values];
        0 0.000000 0.000000   279: }
        0 0.000000 0.000000   280:    } else {
            ================ SmallProf version 0.9 ================
                   Profile of /usr/lib/perl5/5.00503/CGI.pm            Page 307
       =================================================================
    count wall tm  cpu time line
       43 0.000192 0.000000   281: $name = $p[0];
        0 0.000000 0.000000   282:    }
        0 0.000000 0.000000   283:
       43 0.001199 0.010000   284:    return unless defined($name) && $self-
        8 0.000231 0.000000   285:    return wantarray ? @{$self->{$name}} :
        0 0.000000 0.000000   286:}
        0 0.000000 0.000000   287:
      243 0.000000 0.000000   288:sub self_or_default {
      243 0.001910 0.010000   289:    return @_ if defined($_[0]) &&
      243 0.001327 0.000000   290:    unless (defined($_[0]) &&
        0 0.000000 0.000000   291:     (ref($_[0]) eq 'CGI' ||
        0 0.000000 0.000000   292:     ) {
        0 0.000000 0.000000   293: $Q = $CGI::DefaultClass->new unless
        0 0.000000 0.000000   294: unshift(@_,$Q);
        0 0.000000 0.000000   295:    }
      243 0.002429 0.010000   296:    return @_;
        0 0.000000 0.000000   297:}
        0 0.000000 0.000000   298:
      376 0.000000 0.000000   299:sub self_or_CGI {
      376 0.004218 0.000000   300:    local $^W=0;                # prevent a
      376 0.007502 0.000000   301:    if (defined($_[0]) &&
        0 0.000000 0.000000   302: (substr(ref($_[0]),0,3) eq 'CGI'
        0 0.000000 0.000000   303:  || UNIVERSAL::isa($_[0],'CGI'))) {
      188 0.002552 0.000000   304: return @_;
        0 0.000000 0.000000   305:    } else {
      188 0.003285 0.010000   306: return ($DefaultClass,@_);
        0 0.000000 0.000000   307:    }
        0 0.000000 0.000000   308:}
        0 0.000000 0.000000   309:
        0 0.000000 0.000000   310:########################################
        0 0.000000 0.000000   311:# THESE METHODS ARE MORE OR LESS PRIVATE
        0 0.000000 0.000000   312:# GO TO THE __DATA__ SECTION TO SEE MORE
        0 0.000000 0.000000   313:# PUBLIC METHODS
        0 0.000000 0.000000   314:########################################
        0 0.000000 0.000000   315:
        0 0.000000 0.000000   316:# Initialize the query object from the
        0 0.000000 0.000000   317:# If a parameter list is found, this object
        0 0.000000 0.000000   318:# to an associative array in which parameter
        0 0.000000 0.000000   319:# and the values are stored as lists
        0 0.000000 0.000000   320:# If a keyword list is found, this method
        0 0.000000 0.000000   321:# parameter list with the single parameter
        0 0.000000 0.000000   322:
        1 0.000000 0.000000   323:sub init {
        1 0.000007 0.000000   324:    my($self,$initializer) = @_;
        1 0.000012 0.000000   325:
        1 0.000018 0.000000   326:    local($/) = "\n";
        0 0.000000 0.000000   327:
        0 0.000000 0.000000   328:    # if we get called more than once, we
        0 0.000000 0.000000   329:    # ourselves from the original query
        0 0.000000 0.000000   330:    # if it was read from STDIN originally.)
        1 0.000005 0.000000   331:    if (defined(@QUERY_PARAM) &&
        0 0.000000 0.000000   332: foreach (@QUERY_PARAM) {
        0 0.000000 0.000000   333:     $self->param('-name'=>$_,'-
        0 0.000000 0.000000   334: }
        0 0.000000 0.000000   335: return;
        0 0.000000 0.000000   336:    }
            ================ SmallProf version 0.9 ================
                   Profile of /usr/lib/perl5/5.00503/CGI.pm            Page 308
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   337:
        1 0.000007 0.000000   338:    $meth=$ENV{'REQUEST_METHOD'} if
        1 0.000008 0.000000   339:    $content_length =
        1 0.000006 0.000000   340:    die "Client attempted to POST
        0 0.000000 0.000000   341: if ($POST_MAX > 0) && ($content_length >
        1 0.000003 0.000000   342:    $fh = to_filehandle($initializer) if
        0 0.000000 0.000000   343:
        0 0.000000 0.000000   344:  METHOD: {
        0 0.000000 0.000000   345:
        0 0.000000 0.000000   346:      # Process multipart postings, but only
        0 0.000000 0.000000   347:      # not defined.
        2 0.000007 0.000000   348:      if ($meth eq 'POST'
        0 0.000000 0.000000   349:   && defined($ENV{'CONTENT_TYPE'})
        0 0.000000 0.000000   350:   &&
        0 0.000000 0.000000   351:   && !defined($initializer)
        0 0.000000 0.000000   352:   ) {
        0 0.000000 0.000000   353:   my($boundary) = $ENV{'CONTENT_TYPE'} =~
        0 0.000000 0.000000   354:   $self-
        0 0.000000 0.000000   355:   last METHOD;
        0 0.000000 0.000000   356:      }
        0 0.000000 0.000000   357:
        0 0.000000 0.000000   358:      # If initializer is defined, then read
        0 0.000000 0.000000   359:      # from it.
        1 0.000002 0.000000   360:      if (defined($initializer)) {
        0 0.000000 0.000000   361:   if (UNIVERSAL::isa($initializer,'CGI')) {
        0 0.000000 0.000000   362:       $query_string = $initializer-
        0 0.000000 0.000000   363:       last METHOD;
        0 0.000000 0.000000   364:   }
        0 0.000000 0.000000   365:   if (ref($initializer) && ref($initializer)
        0 0.000000 0.000000   366:       foreach (keys %$initializer) {
        0 0.000000 0.000000   367:    $self->param('-name'=>$_,'-
        0 0.000000 0.000000   368:       }
        0 0.000000 0.000000   369:       last METHOD;
        0 0.000000 0.000000   370:   }
        0 0.000000 0.000000   371:
        0 0.000000 0.000000   372:   if (defined($fh) && ($fh ne '')) {
        0 0.000000 0.000000   373:       while (<$fh>) {
        0 0.000000 0.000000   374:    chomp;
        0 0.000000 0.000000   375:    last if /^=/;
        0 0.000000 0.000000   376:    push(@lines,$_);
        0 0.000000 0.000000   377:       }
        0 0.000000 0.000000   378:       # massage back into standard format
        0 0.000000 0.000000   379:       if ("@lines" =~ /=/) {
        0 0.000000 0.000000   380:    $query_string=join("&",@lines);
        0 0.000000 0.000000   381:       } else {
        0 0.000000 0.000000   382:    $query_string=join("+",@lines);
        0 0.000000 0.000000   383:       }
        0 0.000000 0.000000   384:       last METHOD;
        0 0.000000 0.000000   385:   }
        0 0.000000 0.000000   386:
        0 0.000000 0.000000   387:   # last chance -- treat it as a string
        0 0.000000 0.000000   388:   $initializer = $$initializer if
        0 0.000000 0.000000   389:   $query_string = $initializer;
        0 0.000000 0.000000   390:
        0 0.000000 0.000000   391:   last METHOD;
        0 0.000000 0.000000   392:      }
            ================ SmallProf version 0.9 ================
                   Profile of /usr/lib/perl5/5.00503/CGI.pm            Page 309
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   393:
        0 0.000000 0.000000   394:      # If method is GET or HEAD, fetch the
        0 0.000000 0.000000   395:      # the environment.
        1 0.000002 0.000000   396:      if ($meth=~/^(GET|HEAD)$/) {
        0 0.000000 0.000000   397:   $query_string = $ENV{'QUERY_STRING'} if
        0 0.000000 0.000000   398:   last METHOD;
        0 0.000000 0.000000   399:      }
        0 0.000000 0.000000   400:
        1 0.000002 0.000000   401:      if ($meth eq 'POST') {
        0 0.000000 0.000000   402:   $self-
        0 0.000000 0.000000   403:       if $content_length > 0;
        0 0.000000 0.000000   404:   # Some people want to have their cake and
        0 0.000000 0.000000   405:   # Uncomment this line to have the contents
        0 0.000000 0.000000   406:   # APPENDED to the POST data.
        0 0.000000 0.000000   407:   # $query_string .= (length($query_string)
        0 0.000000 0.000000   408:   last METHOD;
        0 0.000000 0.000000   409:      }
        0 0.000000 0.000000   410:
        0 0.000000 0.000000   411:      # If $meth is not of GET, POST or HEAD,
        0 0.000000 0.000000   412:      # Check the command line and then the
        0 0.000000 0.000000   413:      # We use the shellwords package in
        0 0.000000 0.000000   414:      # UN*X programmers expect.
        1 0.000117 0.000000   415:      $query_string = read_from_cmdline()
        0 0.000000 0.000000   416:  }
        0 0.000000 0.000000   417:
        0 0.000000 0.000000   418:    # We now have the query string in hand.
        0 0.000000 0.000000   419:    # different things for keyword lists and
        1 0.000004 0.000000   420:    if ($query_string ne '') {
        1 0.000004 0.000000   421: if ($query_string =~ /=/) {
        1 0.000088 0.000000   422:     $self->parse_params($query_string);
        0 0.000000 0.000000   423: } else {
        0 0.000000 0.000000   424:     $self->add_parameter('keywords');
        0 0.000000 0.000000   425:     $self->{'keywords'} = [$self-
        0 0.000000 0.000000   426: }
        0 0.000000 0.000000   427:    }
        0 0.000000 0.000000   428:
        0 0.000000 0.000000   429:    # Special case.  Erase everything if
        0 0.000000 0.000000   430:    # .defaults.
        1 0.000070 0.000000   431:    if ($self->param('.defaults')) {
        0 0.000000 0.000000   432: undef %{$self};
        0 0.000000 0.000000   433:    }
        0 0.000000 0.000000   434:
        0 0.000000 0.000000   435:    # Associative array containing our
        1 0.000012 0.000000   436:    $self->{'.fieldnames'} = {};
        1 0.000066 0.000000   437:    foreach ($self->param('.cgifields')) {
        0 0.000000 0.000000   438: $self->{'.fieldnames'}->{$_}++;
        0 0.000000 0.000000   439:    }
        0 0.000000 0.000000   440:
        0 0.000000 0.000000   441:    # Clear out our default submission button
        1 0.000100 0.000000   442:    $self->delete('.submit');
        1 0.000064 0.000000   443:    $self->delete('.cgifields');
        1 0.000074 0.000000   444:    $self->save_request unless $initializer;
        0 0.000000 0.000000   445:}
        0 0.000000 0.000000   446:
        0 0.000000 0.000000   447:# FUNCTIONS TO OVERRIDE:
        0 0.000000 0.000000   448:# Turn a string into a filehandle
            ================ SmallProf version 0.9 ================
                   Profile of /usr/lib/perl5/5.00503/CGI.pm            Page 310
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   449:sub to_filehandle {
        0 0.000000 0.000000   450:    my $thingy = shift;
        0 0.000000 0.000000   451:    return undef unless $thingy;
        0 0.000000 0.000000   452:    return $thingy if
        0 0.000000 0.000000   453:    return $thingy if
        0 0.000000 0.000000   454:    if (!ref($thingy)) {
        0 0.000000 0.000000   455: my $caller = 1;
        0 0.000000 0.000000   456: while (my $package = caller($caller++)) {
        0 0.000000 0.000000   457:     my($tmp) = $thingy=~/[\':]/ ? $thingy :
        0 0.000000 0.000000   458:     return $tmp if defined(fileno($tmp));
        0 0.000000 0.000000   459: }
        0 0.000000 0.000000   460:    }
        0 0.000000 0.000000   461:    return undef;
        0 0.000000 0.000000   462:}
        0 0.000000 0.000000   463:
        0 0.000000 0.000000   464:# send output to the browser
        0 0.000000 0.000000   465:sub put {
        0 0.000000 0.000000   466:    my($self,@p) = self_or_default(@_);
        0 0.000000 0.000000   467:    $self->print(@p);
        0 0.000000 0.000000   468:}
        0 0.000000 0.000000   469:
        0 0.000000 0.000000   470:# print to standard output (for overriding in
        0 0.000000 0.000000   471:sub print {
        0 0.000000 0.000000   472:    shift;
        0 0.000000 0.000000   473:    CORE::print(@_);
        0 0.000000 0.000000   474:}
        0 0.000000 0.000000   475:
        0 0.000000 0.000000   476:# unescape URL-encoded data
       10 0.000000 0.000000   477:sub unescape {
       10 0.000021 0.000000   478:    shift() if ref($_[0]);
       10 0.000034 0.000000   479:    my $todecode = shift;
       10 0.000014 0.000000   480:    return undef unless defined($todecode);
       10 0.000021 0.000000   481:    $todecode =~ tr/+/ /;       # pluses
       10 0.000021 0.000000   482:    $todecode =~ s/%([0-9a-fA-
       10 0.000066 0.000000   483:    return $todecode;
        0 0.000000 0.000000   484:}
        0 0.000000 0.000000   485:
        0 0.000000 0.000000   486:# URL-encode data
        1 0.000000 0.000000   487:sub escape {
        1 0.000007 0.000000   488:    shift() if ref($_[0]) || $_[0] eq
        1 0.000004 0.000000   489:    my $toencode = shift;
        1 0.000007 0.000000   490:    return undef unless defined($toencode);
        0 0.000000 0.000000   491:    $toencode=~s/([^a-zA-Z0-9_.-])/uc
        0 0.000000 0.000000   492:    return $toencode;
        0 0.000000 0.000000   493:}
        0 0.000000 0.000000   494:
        1 0.000000 0.000000   495:sub save_request {
        1 0.000004 0.000000   496:    my($self) = @_;
        0 0.000000 0.000000   497:    # We're going to play with the package
        0 0.000000 0.000000   498:    # again, we initialize ourselves in
        0 0.000000 0.000000   499:    # us to have several of these objects.
        1 0.000061 0.000000   500:    @QUERY_PARAM = $self->param; # save list
        6 0.000037 0.000000   501:    foreach (@QUERY_PARAM) {
        5 0.000029 0.000000   502: $QUERY_PARAM{$_}=$self->{$_};
        0 0.000000 0.000000   503:    }
        0 0.000000 0.000000   504:}
            ================ SmallProf version 0.9 ================
                   Profile of /usr/lib/perl5/5.00503/CGI.pm            Page 311
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   505:
        1 0.000000 0.000000   506:sub parse_params {
        1 0.000008 0.000000   507:    my($self,$tosplit) = @_;
        1 0.000029 0.000000   508:    my(@pairs) = split(/[&;]/,$tosplit);
        1 0.000003 0.000000   509:    my($param,$value);
        6 0.000028 0.000000   510:    foreach (@pairs) {
        5 0.000050 0.000000   511: ($param,$value) = split('=',$_,2);
        5 0.000312 0.000000   512: $param = unescape($param);
        5 0.000321 0.010000   513: $value = unescape($value);
        5 0.000329 0.000000   514: $self->add_parameter($param);
       10 0.000056 0.000000   515: push (@{$self->{$param}},$value);
        0 0.000000 0.000000   516:    }
        0 0.000000 0.000000   517:}
        0 0.000000 0.000000   518:
        5 0.000000 0.000000   519:sub add_parameter {
        5 0.000026 0.000000   520:    my($self,$param)=@_;
       10 0.000067 0.000000   521:    push (@{$self->{'.parameters'}},$param)
        0 0.000000 0.000000   522: unless defined($self->{$param});
        0 0.000000 0.000000   523:}
        0 0.000000 0.000000   524:
        3 0.000000 0.000000   525:sub all_parameters {
        3 0.000013 0.000000   526:    my $self = shift;
        3 0.000013 0.000000   527:    return () unless defined($self) && $self-
        6 0.000021 0.000000   528:    return () unless @{$self-
        6 0.000071 0.000000   529:    return @{$self->{'.parameters'}};
        0 0.000000 0.000000   530:}
        0 0.000000 0.000000   531:
        0 0.000000 0.000000   532:# put a filehandle into binary mode (DOS)
        0 0.000000 0.000000   533:sub binmode {
        0 0.000000 0.000000   534:    CORE::binmode($_[1]);
        0 0.000000 0.000000   535:}
        0 0.000000 0.000000   536:
        1 0.000000 0.000000   537:sub _make_tag_func {
        1 0.000010 0.000000   538:    my ($self,$tagname) = @_;
        1 0.000015 0.000000   539:    my $func = qq#
        0 0.000000 0.000000   540: sub $tagname {
        0 0.000000 0.000000   541:     shift if \$_[0] &&
        0 0.000000 0.000000   542:  (!ref(\$_[0]) && \$_[0] eq
        0 0.000000 0.000000   543:      (ref(\$_[0]) &&
        0 0.000000 0.000000   544:       (substr(ref(\$_[0]),0,3) eq 'CGI' ||
        0 0.000000 0.000000   545:      UNIVERSAL::isa(\$_[0],'CGI')));
        0 0.000000 0.000000   546:
        0 0.000000 0.000000   547:     my(\$attr) = '';
        0 0.000000 0.000000   548:     if (ref(\$_[0]) && ref(\$_[0]) eq
        0 0.000000 0.000000   549:  my(\@attr) = make_attributes( '',shift() );
        0 0.000000 0.000000   550:  \$attr = " \@attr" if \@attr;
        0 0.000000 0.000000   551:     }
        0 0.000000 0.000000   552: #;
        1 0.000003 0.000000   553:    if ($tagname=~/start_(\w+)/i) {
        0 0.000000 0.000000   554: $func .= qq! return "<\U$1\E\$attr>";} !;
        1 0.000005 0.000000   555:    } elsif ($tagname=~/end_(\w+)/i) {
        0 0.000000 0.000000   556: $func .= qq! return "<\U/$1\E>"; } !;
        0 0.000000 0.000000   557:    } else {
        1 0.000023 0.000000   558: $func .= qq#
        0 0.000000 0.000000   559:     my(\$tag,\$untag) =
        0 0.000000 0.000000   560:     return \$tag unless \@_;
            ================ SmallProf version 0.9 ================
                   Profile of /usr/lib/perl5/5.00503/CGI.pm            Page 312
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   561:     my \@result = map { "\$tag\$_\$untag" }
        0 0.000000 0.000000   562:     return "\@result";
        0 0.000000 0.000000   563:            }#;
        0 0.000000 0.000000   564:    }
        1 0.000012 0.000000   565:return $func;
        0 0.000000 0.000000   566:}
        0 0.000000 0.000000   567:
       24 0.000000 0.000000   568:sub AUTOLOAD {
       24 0.000072 0.000000   569:    print STDERR "CGI::AUTOLOAD for
       24 0.001606 0.000000   570:    my $func = &_compile;
       24 0.000461 0.000000   571:    goto &$func;
        0 0.000000 0.000000   572:}
        0 0.000000 0.000000   573:
        0 0.000000 0.000000   574:# PRIVATE SUBROUTINE
        0 0.000000 0.000000   575:# Smart rearrangement of parameters to allow
        0 0.000000 0.000000   576:# calling.  We do the rearangement if:
        0 0.000000 0.000000   577:# 1. The first parameter begins with a -
        0 0.000000 0.000000   578:# 2. The use_named_parameters() method
      193 0.000000 0.000000   579:sub rearrange {
      193 0.001472 0.000000   580:    my($self,$order,@param) = @_;
      193 0.003941 0.020000   581:    return () unless @param;
        0 0.000000 0.000000   582:
        5 0.000031 0.000000   583:    if (ref($param[0]) eq 'HASH') {
        0 0.000000 0.000000   584: @param = %{$param[0]};
        0 0.000000 0.000000   585:    } else {
        0 0.000000 0.000000   586: return @param
        5 0.000049 0.000000   587:     unless (defined($param[0]) &&
        0 0.000000 0.000000   588:  || $self->use_named_parameters;
        0 0.000000 0.000000   589:    }
        0 0.000000 0.000000   590:
        0 0.000000 0.000000   591:    # map parameters into positional indices
        5 0.000037 0.000000   592:    my ($i,%pos);
        5 0.000013 0.000000   593:    $i = 0;
       31 0.000091 0.000000   594:    foreach (@$order) {
      102 0.000544 0.010000   595: foreach (ref($_) eq 'ARRAY' ? @$_ : $_) {
       26 0.000035 0.000000   596: $i++;
        0 0.000000 0.000000   597:    }
        0 0.000000 0.000000   598:
        5 0.000030 0.000000   599:    my (@result,%leftover);
        5 0.000061 0.000000   600:    $#result = $#$order;  # preextend
       18 0.000065 0.000000   601:    while (@param) {
       13 0.000080 0.000000   602: my $key = uc(shift(@param));
       13 0.000093 0.000000   603: $key =~ s/^\-//;
       13 0.000175 0.010000   604: if (exists $pos{$key}) {
       13 0.000106 0.000000   605:     $result[$pos{$key}] = shift(@param);
        0 0.000000 0.000000   606: } else {
        0 0.000000 0.000000   607:     $leftover{$key} = shift(@param);
        0 0.000000 0.000000   608: }
        0 0.000000 0.000000   609:    }
        0 0.000000 0.000000   610:
        5 0.000015 0.000000   611:    push (@result,$self-
        5 0.000204 0.000000   612:    @result;
        0 0.000000 0.000000   613:}
        0 0.000000 0.000000   614:
       24 0.000000 0.000000   615:sub _compile {
       24 0.000096 0.000000   616:    my($func) = $AUTOLOAD;
            ================ SmallProf version 0.9 ================
                   Profile of /usr/lib/perl5/5.00503/CGI.pm            Page 313
       =================================================================
    count wall tm  cpu time line
       24 0.000066 0.000000   617:    my($pack,$func_name);
        0 0.000000 0.000000   618:    {
       48 0.000332 0.010000   619: local($1,$2); # this fixes an obscure
       24 0.000368 0.000000   620: $func=~/(.+)::([^:]+)$/;
       24 0.000220 0.000000   621: ($pack,$func_name) = ($1,$2);
       24 0.000083 0.000000   622: $pack=~s/::SUPER$//; # fix another obscure
       24 0.000213 0.000000   623: $pack = ${"$pack\:\:AutoloadClass"} ||
       24 0.000033 0.000000   624:     unless
        0 0.000000 0.000000   625:
       48 0.000250 0.000000   626:        my($sub) = \%{"$pack\:\:SUBS"};
       24 0.000173 0.000000   627:        unless (%$sub) {
        2 0.000013 0.000000   628:    my($auto) =
        1 0.038611 0.040000   629:    eval "package $pack; $$auto";
        1 0.000006 0.000000   630:    die $@ if $@;
        1 0.000009 0.000000   631:           $$auto = '';  # Free the unneeded
        0 0.000000 0.000000   632:       }
       24 0.000242 0.000000   633:       my($code) = $sub->{$func_name};
        0 0.000000 0.000000   634:
       24 0.000169 0.010000   635:       $code = "sub $AUTOLOAD { }" if (!$code
       24 0.000047 0.000000   636:       if (!$code) {
        1 0.000010 0.000000   637:    (my $base = $func_name) =~
        1 0.000011 0.000000   638:    if ($EXPORT{':any'} ||
        0 0.000000 0.000000   639:        $EXPORT{'-any'} ||
        0 0.000000 0.000000   640:        $EXPORT{$base} ||
        0 0.000000 0.000000   641:        (%EXPORT_OK ||
        0 0.000000 0.000000   642:            && $EXPORT_OK{$base}) {
        1 0.000080 0.000000   643:        $code = $CGI::DefaultClass-
        0 0.000000 0.000000   644:    }
        0 0.000000 0.000000   645:       }
       24 0.000036 0.000000   646:       die "Undefined subroutine $AUTOLOAD\n"
       24 0.020302 0.020000   647:       eval "package $pack; $code";
       24 0.000388 0.000000   648:       if ($@) {
        0 0.000000 0.000000   649:    $@ =~ s/ at .*\n//;
        0 0.000000 0.000000   650:    die $@;
        0 0.000000 0.000000   651:       }
        0 0.000000 0.000000   652:    }
       24 0.000150 0.000000   653:    delete($sub->{$func_name});  #free
       24 0.000309 0.000000   654:    return "$pack\:\:$func_name";
        0 0.000000 0.000000   655:}
        0 0.000000 0.000000   656:
        0 0.000000 0.000000   657:sub _reset_globals { initialize_globals(); }
        0 0.000000 0.000000   658:
        4 0.000000 0.000000   659:sub _setup_symbols {
        0 0.000000 0.000000   660:    my $self = shift;
        0 0.000000 0.000000   661:    my $compile = 0;
        0 0.000000 0.000000   662:    foreach (@_) {
        0 0.000000 0.000000   663: $HEADERS_ONCE++,         next if /^[:-
        0 0.000000 0.000000   664: $NPH++,                  next if /^[:-
        0 0.000000 0.000000   665: $NO_DEBUG++,             next if /^[:-
        0 0.000000 0.000000   666: $USE_PARAM_SEMICOLONS++, next if /^[:-
        0 0.000000 0.000000   667: $PRIVATE_TEMPFILES++,    next if /^[:-
        0 0.000000 0.000000   668: $EXPORT{$_}++,           next if /^[:-
        0 0.000000 0.000000   669: $compile++,              next if /^[:-
        0 0.000000 0.000000   670:
        0 0.000000 0.000000   671: # This is probably extremely evil code -- to
        0 0.000000 0.000000   672: if (/^[-]autoload$/) {
            ================ SmallProf version 0.9 ================
                   Profile of /usr/lib/perl5/5.00503/CGI.pm            Page 314
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   673:     my($pkg) = caller(1);
        0 0.000000 0.000000   674:     *{"${pkg}::AUTOLOAD"} = sub {
        0 0.000000 0.000000   675:  my($routine) = $AUTOLOAD;
        0 0.000000 0.000000   676:  $routine =~ s/^.*::/CGI::/;
        0 0.000000 0.000000   677:  &$routine;
        0 0.000000 0.000000   678:     };
        0 0.000000 0.000000   679:     next;
        0 0.000000 0.000000   680: }
        0 0.000000 0.000000   681:
        0 0.000000 0.000000   682: foreach (&expand_tags($_)) {
        0 0.000000 0.000000   683:     tr/a-zA-Z0-9_//cd;  # don't allow weird
        0 0.000000 0.000000   684:     $EXPORT{$_}++;
        0 0.000000 0.000000   685: }
        0 0.000000 0.000000   686:    }
        0 0.000000 0.000000   687:    _compile_all(keys %EXPORT) if $compile;
        0 0.000000 0.000000   688:}
        0 0.000000 0.000000   689:
        0 0.000000 0.000000   690:#############################################
        0 0.000000 0.000000   691:################# THESE FUNCTIONS ARE
        0 0.000000 0.000000   692:#############################################
        0 0.000000 0.000000   693:$AUTOLOADED_ROUTINES = '';      # get rid of
        0 0.000000 0.000000   694:$AUTOLOADED_ROUTINES=<<'END_OF_AUTOLOAD';
        0 0.000000 0.000000   695:
        0 0.000000 0.000000   696:%SUBS = (
        0 0.000000 0.000000   697:
        0 0.000000 0.000000   698:'URL_ENCODED'=> <<'END_OF_FUNC',
        0 0.000000 0.000000   699:sub URL_ENCODED { 'application/x-www-form-
        0 0.000000 0.000000   700:END_OF_FUNC
        0 0.000000 0.000000   701:
        0 0.000000 0.000000   702:'MULTIPART' => <<'END_OF_FUNC',
        0 0.000000 0.000000   703:sub MULTIPART {  'multipart/form-data'; }
        0 0.000000 0.000000   704:END_OF_FUNC
        0 0.000000 0.000000   705:
        0 0.000000 0.000000   706:'SERVER_PUSH' => <<'END_OF_FUNC',
        0 0.000000 0.000000   707:sub SERVER_PUSH { 'multipart/x-mixed-replace;
        0 0.000000 0.000000   708:END_OF_FUNC
        0 0.000000 0.000000   709:
        0 0.000000 0.000000   710:'use_named_parameters' => <<'END_OF_FUNC',
        0 0.000000 0.000000   711:#### Method: use_named_parameters
        0 0.000000 0.000000   712:# Force CGI.pm to use named parameter-style
        0 0.000000 0.000000   713:# rather than positional parameters.  The
        0 0.000000 0.000000   714:# will happen automatically if the first
        0 0.000000 0.000000   715:# begins with a -.
        0 0.000000 0.000000   716:sub use_named_parameters {
        0 0.000000 0.000000   717:    my($self,$use_named) =
        0 0.000000 0.000000   718:    return $self->{'.named'} unless defined
        0 0.000000 0.000000   719:
        0 0.000000 0.000000   720:    # stupidity to avoid annoying warnings
        0 0.000000 0.000000   721:    return $self->{'.named'}=$use_named;
        0 0.000000 0.000000   722:}
        0 0.000000 0.000000   723:END_OF_FUNC
        0 0.000000 0.000000   724:
        0 0.000000 0.000000   725:'new_MultipartBuffer' => <<'END_OF_FUNC',
        0 0.000000 0.000000   726:# Create a new multipart buffer
        0 0.000000 0.000000   727:sub new_MultipartBuffer {
        0 0.000000 0.000000   728:    my($self,$boundary,$length,$filehandle) =
            ================ SmallProf version 0.9 ================
                   Profile of /usr/lib/perl5/5.00503/CGI.pm            Page 315
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   729:    return MultipartBuffer-
        0 0.000000 0.000000   730:}
        0 0.000000 0.000000   731:END_OF_FUNC
        0 0.000000 0.000000   732:
        0 0.000000 0.000000   733:'read_from_client' => <<'END_OF_FUNC',
        0 0.000000 0.000000   734:# Read data from a file handle
        0 0.000000 0.000000   735:sub read_from_client {
        0 0.000000 0.000000   736:    my($self, $fh, $buff, $len, $offset) =
        0 0.000000 0.000000   737:    local $^W=0;                # prevent a
        0 0.000000 0.000000   738:    return undef unless defined($fh);
        0 0.000000 0.000000   739:    return read($fh, $$buff, $len, $offset);
        0 0.000000 0.000000   740:}
        0 0.000000 0.000000   741:END_OF_FUNC
        0 0.000000 0.000000   742:
        0 0.000000 0.000000   743:'delete' => <<'END_OF_FUNC',
        0 0.000000 0.000000   744:#### Method: delete
        0 0.000000 0.000000   745:# Deletes the named parameter entirely.
        0 0.000000 0.000000   746:####
        0 0.000000 0.000000   747:sub delete {
        0 0.000000 0.000000   748:    my($self,$name) = self_or_default(@_);
        0 0.000000 0.000000   749:    delete $self->{$name};
        0 0.000000 0.000000   750:    delete $self->{'.fieldnames'}->{$name};
        0 0.000000 0.000000   751:    @{$self->{'.parameters'}}=grep($_ ne
        0 0.000000 0.000000   752:    return wantarray ? () : undef;
        0 0.000000 0.000000   753:}
        0 0.000000 0.000000   754:END_OF_FUNC
        0 0.000000 0.000000   755:
        0 0.000000 0.000000   756:#### Method: import_names
        0 0.000000 0.000000   757:# Import all parameters into the given
        0 0.000000 0.000000   758:# Assumes namespace 'Q' if not specified
        0 0.000000 0.000000   759:####
        0 0.000000 0.000000   760:'import_names' => <<'END_OF_FUNC',
        0 0.000000 0.000000   761:sub import_names {
        0 0.000000 0.000000   762:    my($self,$namespace,$delete) =
        0 0.000000 0.000000   763:    $namespace = 'Q' unless
        0 0.000000 0.000000   764:    die "Can't import names into \"main\"\n"
        0 0.000000 0.000000   765:    if ($delete || $MOD_PERL) {
        0 0.000000 0.000000   766: # can anyone find an easier way to do this?
        0 0.000000 0.000000   767: foreach (keys %{"${namespace}::"}) {
        0 0.000000 0.000000   768:     local *symbol = "${namespace}::${_}";
        0 0.000000 0.000000   769:     undef $symbol;
        0 0.000000 0.000000   770:     undef @symbol;
        0 0.000000 0.000000   771:     undef %symbol;
        0 0.000000 0.000000   772: }
        0 0.000000 0.000000   773:    }
        0 0.000000 0.000000   774:    my($param,@value,$var);
        0 0.000000 0.000000   775:    foreach $param ($self->param) {
        0 0.000000 0.000000   776: # protect against silly names
        0 0.000000 0.000000   777: ($var = $param)=~tr/a-zA-Z0-9_/_/c;
        0 0.000000 0.000000   778: $var =~ s/^(?=\d)/_/;
        0 0.000000 0.000000   779: local *symbol = "${namespace}::$var";
        0 0.000000 0.000000   780: @value = $self->param($param);
        0 0.000000 0.000000   781: @symbol = @value;
        0 0.000000 0.000000   782: $symbol = $value[0];
        0 0.000000 0.000000   783:    }
        0 0.000000 0.000000   784:}
            ================ SmallProf version 0.9 ================
                   Profile of /usr/lib/perl5/5.00503/CGI.pm            Page 316
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   785:END_OF_FUNC
        0 0.000000 0.000000   786:
        0 0.000000 0.000000   787:#### Method: keywords
        0 0.000000 0.000000   788:# Keywords acts a bit differently.  Calling
        0 0.000000 0.000000   789:# returns the list of keywords.
        0 0.000000 0.000000   790:# Calling it in a scalar context gives you
        0 0.000000 0.000000   791:####
        0 0.000000 0.000000   792:'keywords' => <<'END_OF_FUNC',
        0 0.000000 0.000000   793:sub keywords {
        0 0.000000 0.000000   794:    my($self,@values) = self_or_default(@_);
        0 0.000000 0.000000   795:    # If values is provided, then we set it.
        0 0.000000 0.000000   796:    $self->{'keywords'}=[@values] if
        0 0.000000 0.000000   797:    my(@result) = defined($self-
        0 0.000000 0.000000   798:    @result;
        0 0.000000 0.000000   799:}
        0 0.000000 0.000000   800:END_OF_FUNC
        0 0.000000 0.000000   801:
        0 0.000000 0.000000   802:# These are some tie() interfaces for
        0 0.000000 0.000000   803:# with Steve Brenner's cgi-lib.pl routines
        0 0.000000 0.000000   804:'ReadParse' => <<'END_OF_FUNC',
        0 0.000000 0.000000   805:sub ReadParse {
        0 0.000000 0.000000   806:    local(*in);
        0 0.000000 0.000000   807:    if (@_) {
        0 0.000000 0.000000   808: *in = $_[0];
        0 0.000000 0.000000   809:    } else {
        0 0.000000 0.000000   810: my $pkg = caller();
        0 0.000000 0.000000   811: *in=*{"${pkg}::in"};
        0 0.000000 0.000000   812:    }
        0 0.000000 0.000000   813:    tie(%in,CGI);
        0 0.000000 0.000000   814:    return scalar(keys %in);
        0 0.000000 0.000000   815:}
        0 0.000000 0.000000   816:END_OF_FUNC
        0 0.000000 0.000000   817:
        0 0.000000 0.000000   818:'PrintHeader' => <<'END_OF_FUNC',
        0 0.000000 0.000000   819:sub PrintHeader {
        0 0.000000 0.000000   820:    my($self) = self_or_default(@_);
        0 0.000000 0.000000   821:    return $self->header();
        0 0.000000 0.000000   822:}
        0 0.000000 0.000000   823:END_OF_FUNC
        0 0.000000 0.000000   824:
        0 0.000000 0.000000   825:'HtmlTop' => <<'END_OF_FUNC',
        0 0.000000 0.000000   826:sub HtmlTop {
        0 0.000000 0.000000   827:    my($self,@p) = self_or_default(@_);
        0 0.000000 0.000000   828:    return $self->start_html(@p);
        0 0.000000 0.000000   829:}
        0 0.000000 0.000000   830:END_OF_FUNC
        0 0.000000 0.000000   831:
        0 0.000000 0.000000   832:'HtmlBot' => <<'END_OF_FUNC',
        0 0.000000 0.000000   833:sub HtmlBot {
        0 0.000000 0.000000   834:    my($self,@p) = self_or_default(@_);
        0 0.000000 0.000000   835:    return $self->end_html(@p);
        0 0.000000 0.000000   836:}
        0 0.000000 0.000000   837:END_OF_FUNC
        0 0.000000 0.000000   838:
        0 0.000000 0.000000   839:'SplitParam' => <<'END_OF_FUNC',
        0 0.000000 0.000000   840:sub SplitParam {
            ================ SmallProf version 0.9 ================
                   Profile of /usr/lib/perl5/5.00503/CGI.pm            Page 317
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   841:    my ($param) = @_;
        0 0.000000 0.000000   842:    my (@params) = split ("\0", $param);
        0 0.000000 0.000000   843:    return (wantarray ? @params :
        0 0.000000 0.000000   844:}
        0 0.000000 0.000000   845:END_OF_FUNC
        0 0.000000 0.000000   846:
        0 0.000000 0.000000   847:'MethGet' => <<'END_OF_FUNC',
        0 0.000000 0.000000   848:sub MethGet {
        0 0.000000 0.000000   849:    return request_method() eq 'GET';
        0 0.000000 0.000000   850:}
        0 0.000000 0.000000   851:END_OF_FUNC
        0 0.000000 0.000000   852:
        0 0.000000 0.000000   853:'MethPost' => <<'END_OF_FUNC',
        0 0.000000 0.000000   854:sub MethPost {
        0 0.000000 0.000000   855:    return request_method() eq 'POST';
        0 0.000000 0.000000   856:}
        0 0.000000 0.000000   857:END_OF_FUNC
        0 0.000000 0.000000   858:
        0 0.000000 0.000000   859:'TIEHASH' => <<'END_OF_FUNC',
        0 0.000000 0.000000   860:sub TIEHASH {
        0 0.000000 0.000000   861:    return $Q || new CGI;
        0 0.000000 0.000000   862:}
        0 0.000000 0.000000   863:END_OF_FUNC
        0 0.000000 0.000000   864:
        0 0.000000 0.000000   865:'STORE' => <<'END_OF_FUNC',
        0 0.000000 0.000000   866:sub STORE {
        0 0.000000 0.000000   867:    $_[0]->param($_[1],split("\0",$_[2]));
        0 0.000000 0.000000   868:}
        0 0.000000 0.000000   869:END_OF_FUNC
        0 0.000000 0.000000   870:
        0 0.000000 0.000000   871:'FETCH' => <<'END_OF_FUNC',
        0 0.000000 0.000000   872:sub FETCH {
        0 0.000000 0.000000   873:    return $_[0] if $_[1] eq 'CGI';
        0 0.000000 0.000000   874:    return undef unless defined $_[0]-
        0 0.000000 0.000000   875:    return join("\0",$_[0]->param($_[1]));
        0 0.000000 0.000000   876:}
        0 0.000000 0.000000   877:END_OF_FUNC
        0 0.000000 0.000000   878:
        0 0.000000 0.000000   879:'FIRSTKEY' => <<'END_OF_FUNC',
        0 0.000000 0.000000   880:sub FIRSTKEY {
        0 0.000000 0.000000   881:    $_[0]->{'.iterator'}=0;
        0 0.000000 0.000000   882:    $_[0]->{'.parameters'}->[$_[0]-
        0 0.000000 0.000000   883:}
        0 0.000000 0.000000   884:END_OF_FUNC
        0 0.000000 0.000000   885:
        0 0.000000 0.000000   886:'NEXTKEY' => <<'END_OF_FUNC',
        0 0.000000 0.000000   887:sub NEXTKEY {
        0 0.000000 0.000000   888:    $_[0]->{'.parameters'}->[$_[0]-
        0 0.000000 0.000000   889:}
        0 0.000000 0.000000   890:END_OF_FUNC
        0 0.000000 0.000000   891:
        0 0.000000 0.000000   892:'EXISTS' => <<'END_OF_FUNC',
        0 0.000000 0.000000   893:sub EXISTS {
        0 0.000000 0.000000   894:    exists $_[0]->{$_[1]};
        0 0.000000 0.000000   895:}
        0 0.000000 0.000000   896:END_OF_FUNC
            ================ SmallProf version 0.9 ================
                   Profile of /usr/lib/perl5/5.00503/CGI.pm            Page 318
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   897:
        0 0.000000 0.000000   898:'DELETE' => <<'END_OF_FUNC',
        0 0.000000 0.000000   899:sub DELETE {
        0 0.000000 0.000000   900:    $_[0]->delete($_[1]);
        0 0.000000 0.000000   901:}
        0 0.000000 0.000000   902:END_OF_FUNC
        0 0.000000 0.000000   903:
        0 0.000000 0.000000   904:'CLEAR' => <<'END_OF_FUNC',
        0 0.000000 0.000000   905:sub CLEAR {
        0 0.000000 0.000000   906:    %{$_[0]}=();
        0 0.000000 0.000000   907:}
        0 0.000000 0.000000   908:####
        0 0.000000 0.000000   909:END_OF_FUNC
        0 0.000000 0.000000   910:
        0 0.000000 0.000000   911:####
        0 0.000000 0.000000   912:# Append a new value to an existing query
        0 0.000000 0.000000   913:####
        0 0.000000 0.000000   914:'append' => <<'EOF',
        0 0.000000 0.000000   915:sub append {
        0 0.000000 0.000000   916:    my($self,@p) = @_;
        0 0.000000 0.000000   917:    my($name,$value) = $self-
        0 0.000000 0.000000   918:    my(@values) = defined($value) ?
        0 0.000000 0.000000   919:    if (@values) {
        0 0.000000 0.000000   920: $self->add_parameter($name);
        0 0.000000 0.000000   921: push(@{$self->{$name}},@values);
        0 0.000000 0.000000   922:    }
        0 0.000000 0.000000   923:    return $self->param($name);
        0 0.000000 0.000000   924:}
        0 0.000000 0.000000   925:EOF
        0 0.000000 0.000000   926:
        0 0.000000 0.000000   927:#### Method: delete_all
        0 0.000000 0.000000   928:# Delete all parameters
        0 0.000000 0.000000   929:####
        0 0.000000 0.000000   930:'delete_all' => <<'EOF',
        0 0.000000 0.000000   931:sub delete_all {
        0 0.000000 0.000000   932:    my($self) = self_or_default(@_);
        0 0.000000 0.000000   933:    undef %{$self};
        0 0.000000 0.000000   934:}
        0 0.000000 0.000000   935:EOF
        0 0.000000 0.000000   936:
        0 0.000000 0.000000   937:'Delete' => <<'EOF',
        0 0.000000 0.000000   938:sub Delete {
        0 0.000000 0.000000   939:    my($self,@p) = self_or_default(@_);
        0 0.000000 0.000000   940:    $self->delete(@p);
        0 0.000000 0.000000   941:}
        0 0.000000 0.000000   942:EOF
        0 0.000000 0.000000   943:
        0 0.000000 0.000000   944:'Delete_all' => <<'EOF',
        0 0.000000 0.000000   945:sub Delete_all {
        0 0.000000 0.000000   946:    my($self,@p) = self_or_default(@_);
        0 0.000000 0.000000   947:    $self->delete_all(@p);
        0 0.000000 0.000000   948:}
        0 0.000000 0.000000   949:EOF
        0 0.000000 0.000000   950:
        0 0.000000 0.000000   951:#### Method: autoescape
        0 0.000000 0.000000   952:# If you want to turn off the autoescaping
            ================ SmallProf version 0.9 ================
                   Profile of /usr/lib/perl5/5.00503/CGI.pm            Page 319
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   953:# call this method with undef as the argument
        0 0.000000 0.000000   954:'autoEscape' => <<'END_OF_FUNC',
        0 0.000000 0.000000   955:sub autoEscape {
        0 0.000000 0.000000   956:    my($self,$escape) = self_or_default(@_);
        0 0.000000 0.000000   957:    $self->{'dontescape'}=!$escape;
        0 0.000000 0.000000   958:}
        0 0.000000 0.000000   959:END_OF_FUNC
        0 0.000000 0.000000   960:
        0 0.000000 0.000000   961:
        0 0.000000 0.000000   962:#### Method: version
        0 0.000000 0.000000   963:# Return the current version
        0 0.000000 0.000000   964:####
        0 0.000000 0.000000   965:'version' => <<'END_OF_FUNC',
        0 0.000000 0.000000   966:sub version {
        0 0.000000 0.000000   967:    return $VERSION;
        0 0.000000 0.000000   968:}
        0 0.000000 0.000000   969:END_OF_FUNC
        0 0.000000 0.000000   970:
        0 0.000000 0.000000   971:'make_attributes' => <<'END_OF_FUNC',
        0 0.000000 0.000000   972:sub make_attributes {
        0 0.000000 0.000000   973:    my($self,$attr) = @_;
        0 0.000000 0.000000   974:    return () unless $attr && ref($attr) &&
        0 0.000000 0.000000   975:    my(@att);
        0 0.000000 0.000000   976:    foreach (keys %{$attr}) {
        0 0.000000 0.000000   977: my($key) = $_;
        0 0.000000 0.000000   978: $key=~s/^\-//;     # get rid of initial - if
        0 0.000000 0.000000   979: $key=~tr/a-z_/A-Z-/; # parameters are upper
        0 0.000000 0.000000   980: push(@att,defined($attr->{$_}) ?
        0 0.000000 0.000000   981:    }
        0 0.000000 0.000000   982:    return @att;
        0 0.000000 0.000000   983:}
        0 0.000000 0.000000   984:END_OF_FUNC
        0 0.000000 0.000000   985:
        0 0.000000 0.000000   986:#### Method: url_param
        0 0.000000 0.000000   987:# Return a parameter in the QUERY_STRING,
        0 0.000000 0.000000   988:# whether this was a POST or a GET
        0 0.000000 0.000000   989:####
        0 0.000000 0.000000   990:'url_param' => <<'END_OF_FUNC',
        0 0.000000 0.000000   991:sub url_param {
        0 0.000000 0.000000   992:    my ($self,@p) = self_or_default(@_);
        0 0.000000 0.000000   993:    my $name = shift(@p);
        0 0.000000 0.000000   994:    return undef unless
        0 0.000000 0.000000   995:    unless (exists($self->{'.url_param'})) {
        0 0.000000 0.000000   996: $self->{'.url_param'}={}; # empty hash
        0 0.000000 0.000000   997: if ($ENV{QUERY_STRING} =~ /=/) {
        0 0.000000 0.000000   998:     my(@pairs) =
        0 0.000000 0.000000   999:     my($param,$value);
        0 0.000000 0.000000  1000:     foreach (@pairs) {
        0 0.000000 0.000000  1001:  ($param,$value) = split('=',$_,2);
        0 0.000000 0.000000  1002:  $param = unescape($param);
        0 0.000000 0.000000  1003:  $value = unescape($value);
        0 0.000000 0.000000  1004:  push(@{$self->{'.url_param'}-
        0 0.000000 0.000000  1005:     }
        0 0.000000 0.000000  1006: } else {
        0 0.000000 0.000000  1007:     $self->{'.url_param'}->{'keywords'} =
        0 0.000000 0.000000  1008: }
            ================ SmallProf version 0.9 ================
                   Profile of /usr/lib/perl5/5.00503/CGI.pm            Page 320
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000  1009:    }
        0 0.000000 0.000000  1010:    return keys %{$self->{'.url_param'}}
        0 0.000000 0.000000  1011:    return () unless $self->{'.url_param'}-
        0 0.000000 0.000000  1012:    return wantarray ? @{$self-
        0 0.000000 0.000000  1013:                     : $self->{'.url_param'}-
        0 0.000000 0.000000  1014:}
        0 0.000000 0.000000  1015:END_OF_FUNC
        0 0.000000 0.000000  1016:
        0 0.000000 0.000000  1017:#### Method: dump
        0 0.000000 0.000000  1018:# Returns a string in which all the known
        0 0.000000 0.000000  1019:# pairs are represented as nested lists,
        0 0.000000 0.000000  1020:# of debugging.
        0 0.000000 0.000000  1021:####
        0 0.000000 0.000000  1022:'dump' => <<'END_OF_FUNC',
        0 0.000000 0.000000  1023:sub dump {
        0 0.000000 0.000000  1024:    my($self) = self_or_default(@_);
        0 0.000000 0.000000  1025:    my($param,$value,@result);
        0 0.000000 0.000000  1026:    return '<UL></UL>' unless $self->param;
        0 0.000000 0.000000  1027:    push(@result,"<UL>");
        0 0.000000 0.000000  1028:    foreach $param ($self->param) {
        0 0.000000 0.000000  1029: my($name)=$self->escapeHTML($param);
        0 0.000000 0.000000  1030: push(@result,"<LI><STRONG>$param</STRONG>");
        0 0.000000 0.000000  1031: push(@result,"<UL>");
        0 0.000000 0.000000  1032: foreach $value ($self->param($param)) {
        0 0.000000 0.000000  1033:     $value = $self->escapeHTML($value);
        0 0.000000 0.000000  1034:     push(@result,"<LI>$value");
        0 0.000000 0.000000  1035: }
        0 0.000000 0.000000  1036: push(@result,"</UL>");
        0 0.000000 0.000000  1037:    }
        0 0.000000 0.000000  1038:    push(@result,"</UL>\n");
        0 0.000000 0.000000  1039:    return join("\n",@result);
        0 0.000000 0.000000  1040:}
        0 0.000000 0.000000  1041:END_OF_FUNC
        0 0.000000 0.000000  1042:
        0 0.000000 0.000000  1043:#### Method as_string
        0 0.000000 0.000000  1044:#
        0 0.000000 0.000000  1045:# synonym for "dump"
        0 0.000000 0.000000  1046:####
        0 0.000000 0.000000  1047:'as_string' => <<'END_OF_FUNC',
        0 0.000000 0.000000  1048:sub as_string {
        0 0.000000 0.000000  1049:    &dump(@_);
        0 0.000000 0.000000  1050:}
        0 0.000000 0.000000  1051:END_OF_FUNC
        0 0.000000 0.000000  1052:
        0 0.000000 0.000000  1053:#### Method: save
        0 0.000000 0.000000  1054:# Write values out to a filehandle in such a
        0 0.000000 0.000000  1055:# be reinitialized by the filehandle form of
        0 0.000000 0.000000  1056:####
        0 0.000000 0.000000  1057:'save' => <<'END_OF_FUNC',
        0 0.000000 0.000000  1058:sub save {
        0 0.000000 0.000000  1059:    my($self,$filehandle) =
        0 0.000000 0.000000  1060:    $filehandle = to_filehandle($filehandle);
        0 0.000000 0.000000  1061:    my($param);
        0 0.000000 0.000000  1062:    local($,) = '';  # set print field
        0 0.000000 0.000000  1063:    local($\) = '';  # set output line
        0 0.000000 0.000000  1064:    foreach $param ($self->param) {
            ================ SmallProf version 0.9 ================
                   Profile of /usr/lib/perl5/5.00503/CGI.pm            Page 321
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000  1065: my($escaped_param) = escape($param);
        0 0.000000 0.000000  1066: my($value);
        0 0.000000 0.000000  1067: foreach $value ($self->param($param)) {
        0 0.000000 0.000000  1068:     print $filehandle
        0 0.000000 0.000000  1069: }
        0 0.000000 0.000000  1070:    }
        0 0.000000 0.000000  1071:    print $filehandle "=\n";    # end of
        0 0.000000 0.000000  1072:}
        0 0.000000 0.000000  1073:END_OF_FUNC
        0 0.000000 0.000000  1074:
        0 0.000000 0.000000  1075:
        0 0.000000 0.000000  1076:#### Method: save_parameters
        0 0.000000 0.000000  1077:# An alias for save() that is a better name
        0 0.000000 0.000000  1078:# Only intended to be used with the function
        0 0.000000 0.000000  1079:####
        0 0.000000 0.000000  1080:'save_parameters' => <<'END_OF_FUNC',
        0 0.000000 0.000000  1081:sub save_parameters {
        0 0.000000 0.000000  1082:    my $fh = shift;
        0 0.000000 0.000000  1083:    return save(to_filehandle($fh));
        0 0.000000 0.000000  1084:}
        0 0.000000 0.000000  1085:END_OF_FUNC
        0 0.000000 0.000000  1086:
        0 0.000000 0.000000  1087:#### Method: restore_parameters
        0 0.000000 0.000000  1088:# A way to restore CGI parameters from an
        0 0.000000 0.000000  1089:# Only intended to be used with the function
        0 0.000000 0.000000  1090:####
        0 0.000000 0.000000  1091:'restore_parameters' => <<'END_OF_FUNC',
        0 0.000000 0.000000  1092:sub restore_parameters {
        0 0.000000 0.000000  1093:    $Q = $CGI::DefaultClass->new(@_);
        0 0.000000 0.000000  1094:}
        0 0.000000 0.000000  1095:END_OF_FUNC
        0 0.000000 0.000000  1096:
        0 0.000000 0.000000  1097:#### Method: multipart_init
        0 0.000000 0.000000  1098:# Return a Content-Type: style header for
        0 0.000000 0.000000  1099:# This has to be NPH, and it is advisable to
        0 0.000000 0.000000  1100:#
        0 0.000000 0.000000  1101:# Many thanks to Ed Jordan <ed@fidalgo.net>
        0 0.000000 0.000000  1102:# contribution
        0 0.000000 0.000000  1103:####
        0 0.000000 0.000000  1104:'multipart_init' => <<'END_OF_FUNC',
        0 0.000000 0.000000  1105:sub multipart_init {
        0 0.000000 0.000000  1106:    my($self,@p) = self_or_default(@_);
        0 0.000000 0.000000  1107:    my($boundary,@other) = $self-
        0 0.000000 0.000000  1108:    $boundary = $boundary || '-------
        0 0.000000 0.000000  1109:    $self->{'separator'} = "\n--$boundary\n";
        0 0.000000 0.000000  1110:    $type = SERVER_PUSH($boundary);
        0 0.000000 0.000000  1111:    return $self->header(
        0 0.000000 0.000000  1112: -nph => 1,
        0 0.000000 0.000000  1113: -type => $type,
        0 0.000000 0.000000  1114: (map { split "=", $_, 2 } @other),
        0 0.000000 0.000000  1115:    ) . $self->multipart_end;
        0 0.000000 0.000000  1116:}
        0 0.000000 0.000000  1117:END_OF_FUNC
        0 0.000000 0.000000  1118:
        0 0.000000 0.000000  1119:
        0 0.000000 0.000000  1120:#### Method: multipart_start
            ================ SmallProf version 0.9 ================
                   Profile of /usr/lib/perl5/5.00503/CGI.pm            Page 322
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000  1121:# Return a Content-Type: style header for
        0 0.000000 0.000000  1122:#
        0 0.000000 0.000000  1123:# Many thanks to Ed Jordan <ed@fidalgo.net>
        0 0.000000 0.000000  1124:# contribution
        0 0.000000 0.000000  1125:####
        0 0.000000 0.000000  1126:'multipart_start' => <<'END_OF_FUNC',
        0 0.000000 0.000000  1127:sub multipart_start {
        0 0.000000 0.000000  1128:    my($self,@p) = self_or_default(@_);
        0 0.000000 0.000000  1129:    my($type,@other) = $self-
        0 0.000000 0.000000  1130:    $type = $type || 'text/html';
        0 0.000000 0.000000  1131:    return $self->header(
        0 0.000000 0.000000  1132: -type => $type,
        0 0.000000 0.000000  1133: (map { split "=", $_, 2 } @other),
        0 0.000000 0.000000  1134:    );
        0 0.000000 0.000000  1135:}
        0 0.000000 0.000000  1136:END_OF_FUNC
        0 0.000000 0.000000  1137:
        0 0.000000 0.000000  1138:
        0 0.000000 0.000000  1139:#### Method: multipart_end
        0 0.000000 0.000000  1140:# Return a Content-Type: style header for
        0 0.000000 0.000000  1141:#
        0 0.000000 0.000000  1142:# Many thanks to Ed Jordan <ed@fidalgo.net>
        0 0.000000 0.000000  1143:# contribution
        0 0.000000 0.000000  1144:####
        0 0.000000 0.000000  1145:'multipart_end' => <<'END_OF_FUNC',
        0 0.000000 0.000000  1146:sub multipart_end {
        0 0.000000 0.000000  1147:    my($self,@p) = self_or_default(@_);
        0 0.000000 0.000000  1148:    return $self->{'separator'};
        0 0.000000 0.000000  1149:}
        0 0.000000 0.000000  1150:END_OF_FUNC
        0 0.000000 0.000000  1151:
        0 0.000000 0.000000  1152:
        0 0.000000 0.000000  1153:#### Method: header
        0 0.000000 0.000000  1154:# Return a Content-Type: style header
        0 0.000000 0.000000  1155:#
        0 0.000000 0.000000  1156:####
        0 0.000000 0.000000  1157:'header' => <<'END_OF_FUNC',
        0 0.000000 0.000000  1158:sub header {
        0 0.000000 0.000000  1159:    my($self,@p) = self_or_default(@_);
        0 0.000000 0.000000  1160:    my(@header);
        0 0.000000 0.000000  1161:
        0 0.000000 0.000000  1162:    return undef if $self-
        0 0.000000 0.000000  1163:
        0 0.000000 0.000000  1164:
        0 0.000000 0.000000  1165: $self-
        0 0.000000 0.000000  1166:
        0 0.000000 0.000000  1167:
        0 0.000000 0.000000  1168:    $nph ||= $NPH;
        0 0.000000 0.000000  1169:    # rearrange() was designed for the HTML
        0 0.000000 0.000000  1170:    # need to fix it up a little.
        0 0.000000 0.000000  1171:    foreach (@other) {
        0 0.000000 0.000000  1172:        next unless my($header,$value) =
        0 0.000000 0.000000  1173: ($_ = $header) =~ s/^(\w)(.*)/$1 . lc ($2) .
        0 0.000000 0.000000  1174:    }
        0 0.000000 0.000000  1175:
        0 0.000000 0.000000  1176:    $type ||= 'text/html' unless
            ================ SmallProf version 0.9 ================
                   Profile of /usr/lib/perl5/5.00503/CGI.pm            Page 323
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000  1177:
        0 0.000000 0.000000  1178:    # Maybe future compatibility.  Maybe not.
        0 0.000000 0.000000  1179:    my $protocol = $ENV{SERVER_PROTOCOL} ||
        0 0.000000 0.000000  1180:    push(@header,$protocol . ' ' . ($status
        0 0.000000 0.000000  1181:
        0 0.000000 0.000000  1182:    push(@header,"Status: $status") if
        0 0.000000 0.000000  1183:    push(@header,"Window-Target: $target") if
        0 0.000000 0.000000  1184:    # push all the cookies -- there may be
        0 0.000000 0.000000  1185:    if ($cookie) {
        0 0.000000 0.000000  1186: my(@cookie) = ref($cookie) && ref($cookie)
        0 0.000000 0.000000  1187: foreach (@cookie) {
        0 0.000000 0.000000  1188:            my $cs =
        0 0.000000 0.000000  1189:     push(@header,"Set-Cookie: $cs") if $cs
        0 0.000000 0.000000  1190: }
        0 0.000000 0.000000  1191:    }
        0 0.000000 0.000000  1192:    # if the user indicates an expiration
        0 0.000000 0.000000  1193:    # both an Expires and a Date header (so
        0 0.000000 0.000000  1194:    # uses OUR clock)
        0 0.000000 0.000000  1195:    push(@header,"Expires: " .
        0 0.000000 0.000000  1196: if $expires;
        0 0.000000 0.000000  1197:    push(@header,"Date: " .
        0 0.000000 0.000000  1198:    push(@header,"Pragma: no-cache") if
        0 0.000000 0.000000  1199:    push(@header,@other);
        0 0.000000 0.000000  1200:    push(@header,"Content-Type: $type") if
        0 0.000000 0.000000  1201:
        0 0.000000 0.000000  1202:    my $header =
        0 0.000000 0.000000  1203:    if ($MOD_PERL and not $nph) {
        0 0.000000 0.000000  1204: my $r = Apache->request;
        0 0.000000 0.000000  1205: $r->send_cgi_header($header);
        0 0.000000 0.000000  1206: return '';
        0 0.000000 0.000000  1207:    }
        0 0.000000 0.000000  1208:    return $header;
        0 0.000000 0.000000  1209:}
        0 0.000000 0.000000  1210:END_OF_FUNC
        0 0.000000 0.000000  1211:
        0 0.000000 0.000000  1212:
        0 0.000000 0.000000  1213:#### Method: cache
        0 0.000000 0.000000  1214:# Control whether header() will produce the
        0 0.000000 0.000000  1215:# Pragma directive.
        0 0.000000 0.000000  1216:####
        0 0.000000 0.000000  1217:'cache' => <<'END_OF_FUNC',
        0 0.000000 0.000000  1218:sub cache {
        0 0.000000 0.000000  1219:    my($self,$new_value) =
        0 0.000000 0.000000  1220:    $new_value = '' unless $new_value;
        0 0.000000 0.000000  1221:    if ($new_value ne '') {
        0 0.000000 0.000000  1222: $self->{'cache'} = $new_value;
        0 0.000000 0.000000  1223:    }
        0 0.000000 0.000000  1224:    return $self->{'cache'};
        0 0.000000 0.000000  1225:}
        0 0.000000 0.000000  1226:END_OF_FUNC
        0 0.000000 0.000000  1227:
        0 0.000000 0.000000  1228:
        0 0.000000 0.000000  1229:#### Method: redirect
        0 0.000000 0.000000  1230:# Return a Location: style header
        0 0.000000 0.000000  1231:#
        0 0.000000 0.000000  1232:####
            ================ SmallProf version 0.9 ================
                   Profile of /usr/lib/perl5/5.00503/CGI.pm            Page 324
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000  1233:'redirect' => <<'END_OF_FUNC',
        0 0.000000 0.000000  1234:sub redirect {
        0 0.000000 0.000000  1235:    my($self,@p) = self_or_default(@_);
        0 0.000000 0.000000  1236:    my($url,$target,$cookie,$nph,@other) =
        0 0.000000 0.000000  1237:    $url = $url || $self->self_url;
        0 0.000000 0.000000  1238:    my(@o);
        0 0.000000 0.000000  1239:    foreach (@other) { tr/\"//d;
        0 0.000000 0.000000  1240:    unshift(@o,
        0 0.000000 0.000000  1241:  '-Status'=>'302 Moved',
        0 0.000000 0.000000  1242:  '-Location'=>$url,
        0 0.000000 0.000000  1243:  '-nph'=>$nph);
        0 0.000000 0.000000  1244:    unshift(@o,'-Target'=>$target) if
        0 0.000000 0.000000  1245:    unshift(@o,'-Cookie'=>$cookie) if
        0 0.000000 0.000000  1246:    unshift(@o,'-Type'=>'');
        0 0.000000 0.000000  1247:    return $self->header(@o);
        0 0.000000 0.000000  1248:}
        0 0.000000 0.000000  1249:END_OF_FUNC
        0 0.000000 0.000000  1250:
        0 0.000000 0.000000  1251:
        0 0.000000 0.000000  1252:#### Method: start_html
        0 0.000000 0.000000  1253:# Canned HTML header
        0 0.000000 0.000000  1254:#
        0 0.000000 0.000000  1255:# Parameters:
        0 0.000000 0.000000  1256:# $title -> (optional) The title for this
        0 0.000000 0.000000  1257:# $author -> (optional) e-mail address of the
        0 0.000000 0.000000  1258:# $base -> (optional) if set to true, will
        0 0.000000 0.000000  1259:#          for resolving relative references
        0 0.000000 0.000000  1260:# $xbase -> (optional) alternative base at
        0 0.000000 0.000000  1261:# $target -> (optional) target window to load
        0 0.000000 0.000000  1262:# $script -> (option) Javascript code (-
        0 0.000000 0.000000  1263:# $no_script -> (option) Javascript
        0 0.000000 0.000000  1264:# $meta -> (optional) Meta information tags
        0 0.000000 0.000000  1265:# $head -> (optional) any other elements
        0 0.000000 0.000000  1266:#           (a scalar or array ref)
        0 0.000000 0.000000  1267:# $style -> (optional) reference to an
        0 0.000000 0.000000  1268:# @other -> (optional) any other named
        0 0.000000 0.000000  1269:#           the <BODY> tag.
        0 0.000000 0.000000  1270:####
        0 0.000000 0.000000  1271:'start_html' => <<'END_OF_FUNC',
        0 0.000000 0.000000  1272:sub start_html {
        0 0.000000 0.000000  1273:    my($self,@p) = &self_or_default(@_);
        0 0.000000 0.000000  1274:
        0 0.000000 0.000000  1275: $self-
        0 0.000000 0.000000  1276:
        0 0.000000 0.000000  1277:    # strangely enough, the title needs to be
        0 0.000000 0.000000  1278:    # while the author needs to be escaped as
        0 0.000000 0.000000  1279:    $title = $self->escapeHTML($title ||
        0 0.000000 0.000000  1280:    $author = $self->escape($author);
        0 0.000000 0.000000  1281:    my(@result);
        0 0.000000 0.000000  1282:    $dtd = $DEFAULT_DTD unless $dtd && $dtd
        0 0.000000 0.000000  1283:    push(@result,qq(<!DOCTYPE HTML PUBLIC
        0 0.000000 0.000000  1284:
        0 0.000000 0.000000  1285:    push(@result,"<LINK REV=MADE
        0 0.000000 0.000000  1286:
        0 0.000000 0.000000  1287:    if ($base || $xbase || $target) {
        0 0.000000 0.000000  1288: my $href = $xbase || $self->url('-path'=>1);
            ================ SmallProf version 0.9 ================
                   Profile of /usr/lib/perl5/5.00503/CGI.pm            Page 325
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000  1289: my $t = $target ? qq/ TARGET="$target"/ :
        0 0.000000 0.000000  1290: push(@result,qq/<BASE HREF="$href"$t>/);
        0 0.000000 0.000000  1291:    }
        0 0.000000 0.000000  1292:
        0 0.000000 0.000000  1293:    if ($meta && ref($meta) && (ref($meta) eq
        0 0.000000 0.000000  1294: foreach (keys %$meta) {
        0 0.000000 0.000000  1295:    }
        0 0.000000 0.000000  1296:
        0 0.000000 0.000000  1297:    push(@result,ref($head) ? @$head : $head)
        0 0.000000 0.000000  1298:
        0 0.000000 0.000000  1299:    # handle the infrequently-used -style and
        0 0.000000 0.000000  1300:    push(@result,$self->_style($style)) if
        0 0.000000 0.000000  1301:    push(@result,$self->_script($script)) if
        0 0.000000 0.000000  1302:
        0 0.000000 0.000000  1303:    # handle -noscript parameter
        0 0.000000 0.000000  1304:    push(@result,<<END) if $noscript;
        0 0.000000 0.000000  1305:<NOSCRIPT>
        0 0.000000 0.000000  1306:$noscript
        0 0.000000 0.000000  1307:</NOSCRIPT>
        0 0.000000 0.000000  1308:END
        0 0.000000 0.000000  1309:    ;
        0 0.000000 0.000000  1310:    my($other) = @other ? " @other" : '';
        0 0.000000 0.000000  1311:    push(@result,"</HEAD><BODY$other>");
        0 0.000000 0.000000  1312:    return join("\n",@result);
        0 0.000000 0.000000  1313:}
        0 0.000000 0.000000  1314:END_OF_FUNC
        0 0.000000 0.000000  1315:
        0 0.000000 0.000000  1316:### Method: _style
        0 0.000000 0.000000  1317:# internal method for generating a CSS style
        0 0.000000 0.000000  1318:####
        0 0.000000 0.000000  1319:'_style' => <<'END_OF_FUNC',
        0 0.000000 0.000000  1320:sub _style {
        0 0.000000 0.000000  1321:    my ($self,$style) = @_;
        0 0.000000 0.000000  1322:    my (@result);
        0 0.000000 0.000000  1323:    my $type = 'text/css';
        0 0.000000 0.000000  1324:    if (ref($style)) {
        0 0.000000 0.000000  1325: my($src,$code,$stype,@other) =
        0 0.000000 0.000000  1326:     $self->rearrange([SRC,CODE,TYPE],
        0 0.000000 0.000000  1327:        '-foo'=>'bar', # a trick to allow the
        0 0.000000 0.000000  1328:        ref($style) eq 'ARRAY' ? @$style :
        0 0.000000 0.000000  1329: $type = $stype if $stype;
        0 0.000000 0.000000  1330: push(@result,qq/<LINK REL="stylesheet"
        0 0.000000 0.000000  1331: push(@result,style({'type'=>$type},"<!--
        0 0.000000 0.000000  1332:    } else {
        0 0.000000 0.000000  1333: push(@result,style({'type'=>$type},"<!--
        0 0.000000 0.000000  1334:    }
        0 0.000000 0.000000  1335:    @result;
        0 0.000000 0.000000  1336:}
        0 0.000000 0.000000  1337:END_OF_FUNC
        0 0.000000 0.000000  1338:
        0 0.000000 0.000000  1339:
        0 0.000000 0.000000  1340:'_script' => <<'END_OF_FUNC',
        0 0.000000 0.000000  1341:sub _script {
        0 0.000000 0.000000  1342:    my ($self,$script) = @_;
        0 0.000000 0.000000  1343:    my (@result);
        0 0.000000 0.000000  1344:    my (@scripts) = ref($script) eq 'ARRAY' ?
            ================ SmallProf version 0.9 ================
                   Profile of /usr/lib/perl5/5.00503/CGI.pm            Page 326
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000  1345:    foreach $script (@scripts) {
        0 0.000000 0.000000  1346: my($src,$code,$language);
        0 0.000000 0.000000  1347: if (ref($script)) { # script is a hash
        0 0.000000 0.000000  1348:     ($src,$code,$language) =
        0 0.000000 0.000000  1349:  $self->rearrange([SRC,CODE,LANGUAGE],
        0 0.000000 0.000000  1350:     '-foo'=>'bar', # a trick to allow the '-
        0 0.000000 0.000000  1351:     ref($style) eq 'ARRAY' ? @$script :
        0 0.000000 0.000000  1352:
        0 0.000000 0.000000  1353: } else {
        0 0.000000 0.000000  1354:     ($src,$code,$language) =
        0 0.000000 0.000000  1355: }
        0 0.000000 0.000000  1356: my(@satts);
        0 0.000000 0.000000  1357: push(@satts,'src'=>$src) if $src;
        0 0.000000 0.000000  1358: push(@satts,'language'=>$language ||
        0 0.000000 0.000000  1359: $code = "<!-- Hide script\n$code\n// End
        0 0.000000 0.000000  1360:     if $code && $language=~/javascript/i;
        0 0.000000 0.000000  1361: $code = "<!-- Hide script\n$code\n\# End
        0 0.000000 0.000000  1362:     if $code && $language=~/perl/i;
        0 0.000000 0.000000  1363: push(@result,script({@satts},$code));
        0 0.000000 0.000000  1364:    }
        0 0.000000 0.000000  1365:    @result;
        0 0.000000 0.000000  1366:}
        0 0.000000 0.000000  1367:END_OF_FUNC
        0 0.000000 0.000000  1368:
        0 0.000000 0.000000  1369:#### Method: end_html
        0 0.000000 0.000000  1370:# End an HTML document.
        0 0.000000 0.000000  1371:# Trivial method for completeness.  Just
        0 0.000000 0.000000  1372:####
        0 0.000000 0.000000  1373:'end_html' => <<'END_OF_FUNC',
        0 0.000000 0.000000  1374:sub end_html {
        0 0.000000 0.000000  1375:    return "</BODY></HTML>";
        0 0.000000 0.000000  1376:}
        0 0.000000 0.000000  1377:END_OF_FUNC
        0 0.000000 0.000000  1378:
        0 0.000000 0.000000  1379:
        0 0.000000 0.000000  1380:################################
        0 0.000000 0.000000  1381:# METHODS USED IN BUILDING FORMS
        0 0.000000 0.000000  1382:################################
        0 0.000000 0.000000  1383:
        0 0.000000 0.000000  1384:#### Method: isindex
        0 0.000000 0.000000  1385:# Just prints out the isindex tag.
        0 0.000000 0.000000  1386:# Parameters:
        0 0.000000 0.000000  1387:#  $action -> optional URL of script to run
        0 0.000000 0.000000  1388:# Returns:
        0 0.000000 0.000000  1389:#   A string containing a <ISINDEX> tag
        0 0.000000 0.000000  1390:'isindex' => <<'END_OF_FUNC',
        0 0.000000 0.000000  1391:sub isindex {
        0 0.000000 0.000000  1392:    my($self,@p) = self_or_default(@_);
        0 0.000000 0.000000  1393:    my($action,@other) = $self-
        0 0.000000 0.000000  1394:    $action = qq/ACTION="$action"/ if
        0 0.000000 0.000000  1395:    my($other) = @other ? " @other" : '';
        0 0.000000 0.000000  1396:    return "<ISINDEX $action$other>";
        0 0.000000 0.000000  1397:}
        0 0.000000 0.000000  1398:END_OF_FUNC
        0 0.000000 0.000000  1399:
        0 0.000000 0.000000  1400:
            ================ SmallProf version 0.9 ================
                   Profile of /usr/lib/perl5/5.00503/CGI.pm            Page 327
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000  1401:#### Method: startform
        0 0.000000 0.000000  1402:# Start a form
        0 0.000000 0.000000  1403:# Parameters:
        0 0.000000 0.000000  1404:#   $method -> optional submission method to
        0 0.000000 0.000000  1405:#   $action -> optional URL of script to run
        0 0.000000 0.000000  1406:#   $enctype ->encoding to use (URL_ENCODED
        0 0.000000 0.000000  1407:'startform' => <<'END_OF_FUNC',
        0 0.000000 0.000000  1408:sub startform {
        0 0.000000 0.000000  1409:    my($self,@p) = self_or_default(@_);
        0 0.000000 0.000000  1410:
        0 0.000000 0.000000  1411:    my($method,$action,$enctype,@other) =
        0 0.000000 0.000000  1412: $self-
        0 0.000000 0.000000  1413:
        0 0.000000 0.000000  1414:    $method = $method || 'POST';
        0 0.000000 0.000000  1415:    $enctype = $enctype || &URL_ENCODED;
        0 0.000000 0.000000  1416:    $action = $action ? qq/ACTION="$action"/
        0 0.000000 0.000000  1417: 'ACTION="'.$self->script_name.'"' : '';
        0 0.000000 0.000000  1418:    my($other) = @other ? " @other" : '';
        0 0.000000 0.000000  1419:    $self->{'.parametersToAdd'}={};
        0 0.000000 0.000000  1420:    return qq/<FORM METHOD="$method" $action
        0 0.000000 0.000000  1421:}
        0 0.000000 0.000000  1422:END_OF_FUNC
        0 0.000000 0.000000  1423:
        0 0.000000 0.000000  1424:
        0 0.000000 0.000000  1425:#### Method: start_form
        0 0.000000 0.000000  1426:# synonym for startform
        0 0.000000 0.000000  1427:'start_form' => <<'END_OF_FUNC',
        0 0.000000 0.000000  1428:sub start_form {
        0 0.000000 0.000000  1429:    &startform;
        0 0.000000 0.000000  1430:}
        0 0.000000 0.000000  1431:END_OF_FUNC
        0 0.000000 0.000000  1432:
        0 0.000000 0.000000  1433:'end_multipart_form' => <<'END_OF_FUNC',
        0 0.000000 0.000000  1434:sub end_multipart_form {
        0 0.000000 0.000000  1435:    &endform;
        0 0.000000 0.000000  1436:}
        0 0.000000 0.000000  1437:END_OF_FUNC
        0 0.000000 0.000000  1438:
        0 0.000000 0.000000  1439:#### Method: start_multipart_form
        0 0.000000 0.000000  1440:# synonym for startform
        0 0.000000 0.000000  1441:'start_multipart_form' => <<'END_OF_FUNC',
        0 0.000000 0.000000  1442:sub start_multipart_form {
        0 0.000000 0.000000  1443:    my($self,@p) = self_or_default(@_);
        0 0.000000 0.000000  1444:    if ($self->use_named_parameters ||
        0 0.000000 0.000000  1445: (defined($param[0]) && substr($param[0],0,1)
        0 0.000000 0.000000  1446: my(%p) = @p;
        0 0.000000 0.000000  1447: $p{'-enctype'}=&MULTIPART;
        0 0.000000 0.000000  1448: return $self->startform(%p);
        0 0.000000 0.000000  1449:    } else {
        0 0.000000 0.000000  1450: my($method,$action,@other) =
        0 0.000000 0.000000  1451:     $self->rearrange([METHOD,ACTION],@p);
        0 0.000000 0.000000  1452: return $self-
        0 0.000000 0.000000  1453:    }
        0 0.000000 0.000000  1454:}
        0 0.000000 0.000000  1455:END_OF_FUNC
        0 0.000000 0.000000  1456:
            ================ SmallProf version 0.9 ================
                   Profile of /usr/lib/perl5/5.00503/CGI.pm            Page 328
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000  1457:
        0 0.000000 0.000000  1458:#### Method: endform
        0 0.000000 0.000000  1459:# End a form
        0 0.000000 0.000000  1460:'endform' => <<'END_OF_FUNC',
        0 0.000000 0.000000  1461:sub endform {
        0 0.000000 0.000000  1462:    my($self,@p) = self_or_default(@_);
        0 0.000000 0.000000  1463:    return ($self->get_fields,"</FORM>");
        0 0.000000 0.000000  1464:}
        0 0.000000 0.000000  1465:END_OF_FUNC
        0 0.000000 0.000000  1466:
        0 0.000000 0.000000  1467:
        0 0.000000 0.000000  1468:#### Method: end_form
        0 0.000000 0.000000  1469:# synonym for endform
        0 0.000000 0.000000  1470:'end_form' => <<'END_OF_FUNC',
        0 0.000000 0.000000  1471:sub end_form {
        0 0.000000 0.000000  1472:    &endform;
        0 0.000000 0.000000  1473:}
        0 0.000000 0.000000  1474:END_OF_FUNC
        0 0.000000 0.000000  1475:
        0 0.000000 0.000000  1476:
        0 0.000000 0.000000  1477:'_textfield' => <<'END_OF_FUNC',
        0 0.000000 0.000000  1478:sub _textfield {
        0 0.000000 0.000000  1479:    my($self,$tag,@p) = self_or_default(@_);
        0 0.000000 0.000000  1480:
        0 0.000000 0.000000  1481: $self-
        0 0.000000 0.000000  1482:
        0 0.000000 0.000000  1483:    my $current = $override ? $default :
        0 0.000000 0.000000  1484: (defined($self->param($name)) ? $self-
        0 0.000000 0.000000  1485:
        0 0.000000 0.000000  1486:    $current = defined($current) ? $self-
        0 0.000000 0.000000  1487:    $name = defined($name) ? $self-
        0 0.000000 0.000000  1488:    my($s) = defined($size) ? qq/ SIZE=$size/
        0 0.000000 0.000000  1489:    my($m) = defined($maxlength) ? qq/
        0 0.000000 0.000000  1490:    my($other) = @other ? " @other" : '';
        0 0.000000 0.000000  1491:    # this entered at cristy's request to fix
        0 0.000000 0.000000  1492:    # and WebTV -- not sure it won't break
        0 0.000000 0.000000  1493:    my($value) = $current ne '' ?
        0 0.000000 0.000000  1494:    return qq/<INPUT TYPE="$tag" NAME="$name"
        0 0.000000 0.000000  1495:}
        0 0.000000 0.000000  1496:END_OF_FUNC
        0 0.000000 0.000000  1497:
        0 0.000000 0.000000  1498:#### Method: textfield
        0 0.000000 0.000000  1499:# Parameters:
        0 0.000000 0.000000  1500:#   $name -> Name of the text field
        0 0.000000 0.000000  1501:#   $default -> Optional default value of the
        0 0.000000 0.000000  1502:#                already defined.
        0 0.000000 0.000000  1503:#   $size ->  Optional width of field in
        0 0.000000 0.000000  1504:#   $maxlength -> Optional maximum number of
        0 0.000000 0.000000  1505:# Returns:
        0 0.000000 0.000000  1506:#   A string containing a <INPUT TYPE="text">
        0 0.000000 0.000000  1507:#
        0 0.000000 0.000000  1508:'textfield' => <<'END_OF_FUNC',
        0 0.000000 0.000000  1509:sub textfield {
        0 0.000000 0.000000  1510:    my($self,@p) = self_or_default(@_);
        0 0.000000 0.000000  1511:    $self->_textfield('text',@p);
        0 0.000000 0.000000  1512:}
            ================ SmallProf version 0.9 ================
                   Profile of /usr/lib/perl5/5.00503/CGI.pm            Page 329
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000  1513:END_OF_FUNC
        0 0.000000 0.000000  1514:
        0 0.000000 0.000000  1515:
        0 0.000000 0.000000  1516:#### Method: filefield
        0 0.000000 0.000000  1517:# Parameters:
        0 0.000000 0.000000  1518:#   $name -> Name of the file upload field
        0 0.000000 0.000000  1519:#   $size ->  Optional width of field in
        0 0.000000 0.000000  1520:#   $maxlength -> Optional maximum number of
        0 0.000000 0.000000  1521:# Returns:
        0 0.000000 0.000000  1522:#   A string containing a <INPUT TYPE="text">
        0 0.000000 0.000000  1523:#
        0 0.000000 0.000000  1524:'filefield' => <<'END_OF_FUNC',
        0 0.000000 0.000000  1525:sub filefield {
        0 0.000000 0.000000  1526:    my($self,@p) = self_or_default(@_);
        0 0.000000 0.000000  1527:    $self->_textfield('file',@p);
        0 0.000000 0.000000  1528:}
        0 0.000000 0.000000  1529:END_OF_FUNC
        0 0.000000 0.000000  1530:
        0 0.000000 0.000000  1531:
        0 0.000000 0.000000  1532:#### Method: password
        0 0.000000 0.000000  1533:# Create a "secret password" entry field
        0 0.000000 0.000000  1534:# Parameters:
        0 0.000000 0.000000  1535:#   $name -> Name of the field
        0 0.000000 0.000000  1536:#   $default -> Optional default value of the
        0 0.000000 0.000000  1537:#                already defined.
        0 0.000000 0.000000  1538:#   $size ->  Optional width of field in
        0 0.000000 0.000000  1539:#   $maxlength -> Optional maximum characters
        0 0.000000 0.000000  1540:# Returns:
        0 0.000000 0.000000  1541:#   A string containing a <INPUT
        0 0.000000 0.000000  1542:#
        0 0.000000 0.000000  1543:'password_field' => <<'END_OF_FUNC',
        0 0.000000 0.000000  1544:sub password_field {
        0 0.000000 0.000000  1545:    my ($self,@p) = self_or_default(@_);
        0 0.000000 0.000000  1546:    $self->_textfield('password',@p);
        0 0.000000 0.000000  1547:}
        0 0.000000 0.000000  1548:END_OF_FUNC
        0 0.000000 0.000000  1549:
        0 0.000000 0.000000  1550:#### Method: textarea
        0 0.000000 0.000000  1551:# Parameters:
        0 0.000000 0.000000  1552:#   $name -> Name of the text field
        0 0.000000 0.000000  1553:#   $default -> Optional default value of the
        0 0.000000 0.000000  1554:#                already defined.
        0 0.000000 0.000000  1555:#   $rows ->  Optional number of rows in text
        0 0.000000 0.000000  1556:#   $columns -> Optional number of columns in
        0 0.000000 0.000000  1557:# Returns:
        0 0.000000 0.000000  1558:#   A string containing a
        0 0.000000 0.000000  1559:#
        0 0.000000 0.000000  1560:'textarea' => <<'END_OF_FUNC',
        0 0.000000 0.000000  1561:sub textarea {
        0 0.000000 0.000000  1562:    my($self,@p) = self_or_default(@_);
        0 0.000000 0.000000  1563:
        0 0.000000 0.000000  1564:
        0 0.000000 0.000000  1565: $self-
        0 0.000000 0.000000  1566:
        0 0.000000 0.000000  1567:    my($current)= $override ? $default :
        0 0.000000 0.000000  1568: (defined($self->param($name)) ? $self-
            ================ SmallProf version 0.9 ================
                   Profile of /usr/lib/perl5/5.00503/CGI.pm            Page 330
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000  1569:
        0 0.000000 0.000000  1570:    $name = defined($name) ? $self-
        0 0.000000 0.000000  1571:    $current = defined($current) ? $self-
        0 0.000000 0.000000  1572:    my($r) = $rows ? " ROWS=$rows" : '';
        0 0.000000 0.000000  1573:    my($c) = $cols ? " COLS=$cols" : '';
        0 0.000000 0.000000  1574:    my($other) = @other ? " @other" : '';
        0 0.000000 0.000000  1575:    return qq{<TEXTAREA
        0 0.000000 0.000000  1576:}
        0 0.000000 0.000000  1577:END_OF_FUNC
        0 0.000000 0.000000  1578:
        0 0.000000 0.000000  1579:
        0 0.000000 0.000000  1580:#### Method: button
        0 0.000000 0.000000  1581:# Create a javascript button.
        0 0.000000 0.000000  1582:# Parameters:
        0 0.000000 0.000000  1583:#   $name ->  (optional) Name for the button.
        0 0.000000 0.000000  1584:#   $value -> (optional) Value of the button
        0 0.000000 0.000000  1585:#   $onclick -> (optional) Text of the
        0 0.000000 0.000000  1586:#                clicked.
        0 0.000000 0.000000  1587:# Returns:
        0 0.000000 0.000000  1588:#   A string containing a <INPUT
        0 0.000000 0.000000  1589:####
        0 0.000000 0.000000  1590:'button' => <<'END_OF_FUNC',
        0 0.000000 0.000000  1591:sub button {
        0 0.000000 0.000000  1592:    my($self,@p) = self_or_default(@_);
        0 0.000000 0.000000  1593:
        0 0.000000 0.000000  1594:    my($label,$value,$script,@other) = $self-
        0 0.000000 0.000000  1595:        [ONCLICK,SCRIPT]],@p);
        0 0.000000 0.000000  1596:
        0 0.000000 0.000000  1597:    $label=$self->escapeHTML($label);
        0 0.000000 0.000000  1598:    $value=$self->escapeHTML($value);
        0 0.000000 0.000000  1599:    $script=$self->escapeHTML($script);
        0 0.000000 0.000000  1600:
        0 0.000000 0.000000  1601:    my($name) = '';
        0 0.000000 0.000000  1602:    $name = qq/ NAME="$label"/ if $label;
        0 0.000000 0.000000  1603:    $value = $value || $label;
        0 0.000000 0.000000  1604:    my($val) = '';
        0 0.000000 0.000000  1605:    $val = qq/ VALUE="$value"/ if $value;
        0 0.000000 0.000000  1606:    $script = qq/ ONCLICK="$script"/ if
        0 0.000000 0.000000  1607:    my($other) = @other ? " @other" : '';
        0 0.000000 0.000000  1608:    return qq/<INPUT
        0 0.000000 0.000000  1609:}
        0 0.000000 0.000000  1610:END_OF_FUNC
        0 0.000000 0.000000  1611:
        0 0.000000 0.000000  1612:
        0 0.000000 0.000000  1613:#### Method: submit
        0 0.000000 0.000000  1614:# Create a "submit query" button.
        0 0.000000 0.000000  1615:# Parameters:
        0 0.000000 0.000000  1616:#   $name ->  (optional) Name for the button.
        0 0.000000 0.000000  1617:#   $value -> (optional) Value of the button
        0 0.000000 0.000000  1618:#   $label -> (optional) Label printed on the
        0 0.000000 0.000000  1619:# Returns:
        0 0.000000 0.000000  1620:#   A string containing a <INPUT
        0 0.000000 0.000000  1621:####
        0 0.000000 0.000000  1622:'submit' => <<'END_OF_FUNC',
        0 0.000000 0.000000  1623:sub submit {
        0 0.000000 0.000000  1624:    my($self,@p) = self_or_default(@_);
            ================ SmallProf version 0.9 ================
                   Profile of /usr/lib/perl5/5.00503/CGI.pm            Page 331
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000  1625:
        0 0.000000 0.000000  1626:    my($label,$value,@other) = $self-
        0 0.000000 0.000000  1627:
        0 0.000000 0.000000  1628:    $label=$self->escapeHTML($label);
        0 0.000000 0.000000  1629:    $value=$self->escapeHTML($value);
        0 0.000000 0.000000  1630:
        0 0.000000 0.000000  1631:    my($name) = ' NAME=".submit"';
        0 0.000000 0.000000  1632:    $name = qq/ NAME="$label"/ if
        0 0.000000 0.000000  1633:    $value = defined($value) ? $value :
        0 0.000000 0.000000  1634:    my($val) = '';
        0 0.000000 0.000000  1635:    $val = qq/ VALUE="$value"/ if
        0 0.000000 0.000000  1636:    my($other) = @other ? " @other" : '';
        0 0.000000 0.000000  1637:    return qq/<INPUT
        0 0.000000 0.000000  1638:}
        0 0.000000 0.000000  1639:END_OF_FUNC
        0 0.000000 0.000000  1640:
        0 0.000000 0.000000  1641:
        0 0.000000 0.000000  1642:#### Method: reset
        0 0.000000 0.000000  1643:# Create a "reset" button.
        0 0.000000 0.000000  1644:# Parameters:
        0 0.000000 0.000000  1645:#   $name -> (optional) Name for the button.
        0 0.000000 0.000000  1646:# Returns:
        0 0.000000 0.000000  1647:#   A string containing a <INPUT
        0 0.000000 0.000000  1648:####
        0 0.000000 0.000000  1649:'reset' => <<'END_OF_FUNC',
        0 0.000000 0.000000  1650:sub reset {
        0 0.000000 0.000000  1651:    my($self,@p) = self_or_default(@_);
        0 0.000000 0.000000  1652:    my($label,@other) = $self-
        0 0.000000 0.000000  1653:    $label=$self->escapeHTML($label);
        0 0.000000 0.000000  1654:    my($value) = defined($label) ? qq/
        0 0.000000 0.000000  1655:    my($other) = @other ? " @other" : '';
        0 0.000000 0.000000  1656:    return qq/<INPUT
        0 0.000000 0.000000  1657:}
        0 0.000000 0.000000  1658:END_OF_FUNC
        0 0.000000 0.000000  1659:
        0 0.000000 0.000000  1660:
        0 0.000000 0.000000  1661:#### Method: defaults
        0 0.000000 0.000000  1662:# Create a "defaults" button.
        0 0.000000 0.000000  1663:# Parameters:
        0 0.000000 0.000000  1664:#   $name -> (optional) Name for the button.
        0 0.000000 0.000000  1665:# Returns:
        0 0.000000 0.000000  1666:#   A string containing a <INPUT
        0 0.000000 0.000000  1667:#
        0 0.000000 0.000000  1668:# Note: this button has a special meaning to
        0 0.000000 0.000000  1669:# and tells it to ERASE the current query
        0 0.000000 0.000000  1670:# are used again!
        0 0.000000 0.000000  1671:####
        0 0.000000 0.000000  1672:'defaults' => <<'END_OF_FUNC',
        0 0.000000 0.000000  1673:sub defaults {
        0 0.000000 0.000000  1674:    my($self,@p) = self_or_default(@_);
        0 0.000000 0.000000  1675:
        0 0.000000 0.000000  1676:    my($label,@other) = $self-
        0 0.000000 0.000000  1677:
        0 0.000000 0.000000  1678:    $label=$self->escapeHTML($label);
        0 0.000000 0.000000  1679:    $label = $label || "Defaults";
        0 0.000000 0.000000  1680:    my($value) = qq/ VALUE="$label"/;
            ================ SmallProf version 0.9 ================
                   Profile of /usr/lib/perl5/5.00503/CGI.pm            Page 332
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000  1681:    my($other) = @other ? " @other" : '';
        0 0.000000 0.000000  1682:    return qq/<INPUT TYPE="submit"
        0 0.000000 0.000000  1683:}
        0 0.000000 0.000000  1684:END_OF_FUNC
        0 0.000000 0.000000  1685:
        0 0.000000 0.000000  1686:
        0 0.000000 0.000000  1687:#### Method: comment
        0 0.000000 0.000000  1688:# Create an HTML <!-- comment -->
        0 0.000000 0.000000  1689:# Parameters: a string
        0 0.000000 0.000000  1690:'comment' => <<'END_OF_FUNC',
        0 0.000000 0.000000  1691:sub comment {
        0 0.000000 0.000000  1692:    my($self,@p) = self_or_CGI(@_);
        0 0.000000 0.000000  1693:    return "<!-- @p -->";
        0 0.000000 0.000000  1694:}
        0 0.000000 0.000000  1695:END_OF_FUNC
        0 0.000000 0.000000  1696:
        0 0.000000 0.000000  1697:#### Method: checkbox
        0 0.000000 0.000000  1698:# Create a checkbox that is not logically
        0 0.000000 0.000000  1699:# The field value is "on" when the button is
        0 0.000000 0.000000  1700:# Parameters:
        0 0.000000 0.000000  1701:#   $name -> Name of the checkbox
        0 0.000000 0.000000  1702:#   $checked -> (optional) turned on by
        0 0.000000 0.000000  1703:#   $value -> (optional) value of the
        0 0.000000 0.000000  1704:#   $label -> (optional) a user-readable
        0 0.000000 0.000000  1705:#             Otherwise the checkbox name is
        0 0.000000 0.000000  1706:# Returns:
        0 0.000000 0.000000  1707:#   A string containing a <INPUT
        0 0.000000 0.000000  1708:####
        0 0.000000 0.000000  1709:'checkbox' => <<'END_OF_FUNC',
        0 0.000000 0.000000  1710:sub checkbox {
        0 0.000000 0.000000  1711:    my($self,@p) = self_or_default(@_);
        0 0.000000 0.000000  1712:
        0 0.000000 0.000000  1713:
        0 0.000000 0.000000  1714: $self-
        0 0.000000 0.000000  1715:
        0 0.000000 0.000000  1716:    $value = defined $value ? $value : 'on';
        0 0.000000 0.000000  1717:
        0 0.000000 0.000000  1718:    if (!$override && ($self-
        0 0.000000 0.000000  1719:         defined $self->param($name))) {
        0 0.000000 0.000000  1720: $checked = grep($_ eq $value,$self-
        0 0.000000 0.000000  1721:    } else {
        0 0.000000 0.000000  1722: $checked = $checked ? ' CHECKED' : '';
        0 0.000000 0.000000  1723:    }
        0 0.000000 0.000000  1724:    my($the_label) = defined $label ? $label
        0 0.000000 0.000000  1725:    $name = $self->escapeHTML($name);
        0 0.000000 0.000000  1726:    $value = $self->escapeHTML($value);
        0 0.000000 0.000000  1727:    $the_label = $self-
        0 0.000000 0.000000  1728:    my($other) = @other ? " @other" : '';
        0 0.000000 0.000000  1729:    $self->register_parameter($name);
        0 0.000000 0.000000  1730:    return <<END;
        0 0.000000 0.000000  1731:<INPUT TYPE="checkbox" NAME="$name"
        0 0.000000 0.000000  1732:END
        0 0.000000 0.000000  1733:}
        0 0.000000 0.000000  1734:END_OF_FUNC
        0 0.000000 0.000000  1735:
        0 0.000000 0.000000  1736:
            ================ SmallProf version 0.9 ================
                   Profile of /usr/lib/perl5/5.00503/CGI.pm            Page 333
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000  1737:#### Method: checkbox_group
        0 0.000000 0.000000  1738:# Create a list of logically-linked
        0 0.000000 0.000000  1739:# Parameters:
        0 0.000000 0.000000  1740:#   $name -> Common name for all the check
        0 0.000000 0.000000  1741:#   $values -> A pointer to a regular array
        0 0.000000 0.000000  1742:#             values for each checkbox in the
        0 0.000000 0.000000  1743:#   $defaults -> (optional)
        0 0.000000 0.000000  1744:#             1. If a pointer to a regular
        0 0.000000 0.000000  1745:#             then this will be used to
        0 0.000000 0.000000  1746:#             checkboxes to turn on by
        0 0.000000 0.000000  1747:#             2. If a scalar, will be assumed
        0 0.000000 0.000000  1748:#             value of a single checkbox in
        0 0.000000 0.000000  1749:#   $linebreak -> (optional) Set to true to
        0 0.000000 0.000000  1750:#             between the buttons.
        0 0.000000 0.000000  1751:#   $labels -> (optional)
        0 0.000000 0.000000  1752:#             A pointer to an associative
        0 0.000000 0.000000  1753:#             in the form
        0 0.000000 0.000000  1754:#             Otherwise the provided values
        0 0.000000 0.000000  1755:# Returns:
        0 0.000000 0.000000  1756:#   An ARRAY containing a series of <INPUT
        0 0.000000 0.000000  1757:####
        0 0.000000 0.000000  1758:'checkbox_group' => <<'END_OF_FUNC',
        0 0.000000 0.000000  1759:sub checkbox_group {
        0 0.000000 0.000000  1760:    my($self,@p) = self_or_default(@_);
        0 0.000000 0.000000  1761:
        0 0.000000 0.000000  1762:
        0 0.000000 0.000000  1763:
        0 0.000000 0.000000  1764: $self-
        0 0.000000 0.000000  1765:     LINEBREAK,LABELS,ROWS,[COLUMNS,COLS],
        0 0.000000 0.000000  1766:     ROWHEADERS,COLHEADERS,
        0 0.000000 0.000000  1767:     [OVERRIDE,FORCE],NOLABELS],@p);
        0 0.000000 0.000000  1768:
        0 0.000000 0.000000  1769:    my($checked,$break,$result,$label);
        0 0.000000 0.000000  1770:
        0 0.000000 0.000000  1771:    my(%checked) = $self-
        0 0.000000 0.000000  1772:
        0 0.000000 0.000000  1773:    $break = $linebreak ? "<BR>" : '';
        0 0.000000 0.000000  1774:    $name=$self->escapeHTML($name);
        0 0.000000 0.000000  1775:
        0 0.000000 0.000000  1776:    # Create the elements
        0 0.000000 0.000000  1777:    my(@elements,@values);
        0 0.000000 0.000000  1778:
        0 0.000000 0.000000  1779:    @values = $self-
        0 0.000000 0.000000  1780:
        0 0.000000 0.000000  1781:    my($other) = @other ? " @other" : '';
        0 0.000000 0.000000  1782:    foreach (@values) {
        0 0.000000 0.000000  1783: $checked = $checked{$_} ? ' CHECKED' : '';
        0 0.000000 0.000000  1784: $label = '';
        0 0.000000 0.000000  1785: unless (defined($nolabels) && $nolabels) {
        0 0.000000 0.000000  1786:     $label = $_;
        0 0.000000 0.000000  1787:     $label = $labels->{$_} if
        0 0.000000 0.000000  1788:     $label = $self->escapeHTML($label);
        0 0.000000 0.000000  1789: }
        0 0.000000 0.000000  1790: $_ = $self->escapeHTML($_);
        0 0.000000 0.000000  1791: push(@elements,qq/<INPUT TYPE="checkbox"
        0 0.000000 0.000000  1792:    }
            ================ SmallProf version 0.9 ================
                   Profile of /usr/lib/perl5/5.00503/CGI.pm            Page 334
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000  1793:    $self->register_parameter($name);
        0 0.000000 0.000000  1794:    return wantarray ? @elements : join('
        0 0.000000 0.000000  1795:        unless defined($columns) ||
        0 0.000000 0.000000  1796:    return
        0 0.000000 0.000000  1797:}
        0 0.000000 0.000000  1798:END_OF_FUNC
        0 0.000000 0.000000  1799:
        0 0.000000 0.000000  1800:# Escape HTML -- used internally
        0 0.000000 0.000000  1801:'escapeHTML' => <<'END_OF_FUNC',
        0 0.000000 0.000000  1802:sub escapeHTML {
        0 0.000000 0.000000  1803:    my($self,$toencode) = @_;
        0 0.000000 0.000000  1804:    $toencode = $self unless ref($self);
        0 0.000000 0.000000  1805:    return undef unless defined($toencode);
        0 0.000000 0.000000  1806:    return $toencode if ref($self) && $self-
        0 0.000000 0.000000  1807:
        0 0.000000 0.000000  1808:    $toencode=~s/&/&amp;/g;
        0 0.000000 0.000000  1809:    $toencode=~s/\"/&quot;/g;
        0 0.000000 0.000000  1810:    $toencode=~s/>/&gt;/g;
        0 0.000000 0.000000  1811:    $toencode=~s/</&lt;/g;
        0 0.000000 0.000000  1812:    return $toencode;
        0 0.000000 0.000000  1813:}
        0 0.000000 0.000000  1814:END_OF_FUNC
        0 0.000000 0.000000  1815:
        0 0.000000 0.000000  1816:# unescape HTML -- used internally
        0 0.000000 0.000000  1817:'unescapeHTML' => <<'END_OF_FUNC',
        0 0.000000 0.000000  1818:sub unescapeHTML {
        0 0.000000 0.000000  1819:    my $string = ref($_[0]) ? $_[1] : $_[0];
        0 0.000000 0.000000  1820:    return undef unless defined($string);
        0 0.000000 0.000000  1821:    # thanks to Randal Schwartz for the
        0 0.000000 0.000000  1822:    $string=~ s[&(.*?);]{
        0 0.000000 0.000000  1823: local $_ = $1;
        0 0.000000 0.000000  1824: /^amp$/i ? "&" :
        0 0.000000 0.000000  1825: /^quot$/i ? '"' :
        0 0.000000 0.000000  1826:        /^gt$/i  ? ">" :
        0 0.000000 0.000000  1827: /^lt$/i  ? "<" :
        0 0.000000 0.000000  1828: /^#(\d+)$/ ? chr($1) :
        0 0.000000 0.000000  1829: /^#x([0-9a-f]+)$/i ? chr(hex($1)) :
        0 0.000000 0.000000  1830: $_
        0 0.000000 0.000000  1831: }gex;
        0 0.000000 0.000000  1832:    return $string;
        0 0.000000 0.000000  1833:}
        0 0.000000 0.000000  1834:END_OF_FUNC
        0 0.000000 0.000000  1835:
        0 0.000000 0.000000  1836:# Internal procedure - don't use
        0 0.000000 0.000000  1837:'_tableize' => <<'END_OF_FUNC',
        0 0.000000 0.000000  1838:sub _tableize {
        0 0.000000 0.000000  1839:
        0 0.000000 0.000000  1840:    my($result);
        0 0.000000 0.000000  1841:
        0 0.000000 0.000000  1842:    if (defined($columns)) {
        0 0.000000 0.000000  1843: $rows = int(0.99 + @elements/$columns)
        0 0.000000 0.000000  1844:    }
        0 0.000000 0.000000  1845:    if (defined($rows)) {
        0 0.000000 0.000000  1846: $columns = int(0.99 + @elements/$rows)
        0 0.000000 0.000000  1847:    }
        0 0.000000 0.000000  1848:
            ================ SmallProf version 0.9 ================
                   Profile of /usr/lib/perl5/5.00503/CGI.pm            Page 335
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000  1849:    # rearrange into a pretty table
        0 0.000000 0.000000  1850:    $result = "<TABLE>";
        0 0.000000 0.000000  1851:    my($row,$column);
        0 0.000000 0.000000  1852:    unshift(@$colheaders,'') if
        0 0.000000 0.000000  1853:    $result .= "<TR>" if
        0 0.000000 0.000000  1854:    foreach (@{$colheaders}) {
        0 0.000000 0.000000  1855: $result .= "<TH>$_</TH>";
        0 0.000000 0.000000  1856:    }
        0 0.000000 0.000000  1857:    for ($row=0;$row<$rows;$row++) {
        0 0.000000 0.000000  1858: $result .= "<TR>";
        0 0.000000 0.000000  1859: $result .= "<TH>$rowheaders->[$row]</TH>" if
        0 0.000000 0.000000  1860: for ($column=0;$column<$columns;$column++) {
        0 0.000000 0.000000  1861:     $result .= "<TD>" .
        0 0.000000 0.000000  1862:  if defined($elements[$column*$rows +
        0 0.000000 0.000000  1863: }
        0 0.000000 0.000000  1864: $result .= "</TR>";
        0 0.000000 0.000000  1865:    }
        0 0.000000 0.000000  1866:    $result .= "</TABLE>";
        0 0.000000 0.000000  1867:    return $result;
        0 0.000000 0.000000  1868:}
        0 0.000000 0.000000  1869:END_OF_FUNC
        0 0.000000 0.000000  1870:
        0 0.000000 0.000000  1871:
        0 0.000000 0.000000  1872:#### Method: radio_group
        0 0.000000 0.000000  1873:# Create a list of logically-linked radio
        0 0.000000 0.000000  1874:# Parameters:
        0 0.000000 0.000000  1875:#   $name -> Common name for all the buttons.
        0 0.000000 0.000000  1876:#   $values -> A pointer to a regular array
        0 0.000000 0.000000  1877:#             values for each button in the
        0 0.000000 0.000000  1878:#   $default -> (optional) Value of the
        0 0.000000 0.000000  1879:#               to turn _nothing_ on.
        0 0.000000 0.000000  1880:#   $linebreak -> (optional) Set to true to
        0 0.000000 0.000000  1881:#             between the buttons.
        0 0.000000 0.000000  1882:#   $labels -> (optional)
        0 0.000000 0.000000  1883:#             A pointer to an associative
        0 0.000000 0.000000  1884:#             in the form
        0 0.000000 0.000000  1885:#             Otherwise the provided values
        0 0.000000 0.000000  1886:# Returns:
        0 0.000000 0.000000  1887:#   An ARRAY containing a series of <INPUT
        0 0.000000 0.000000  1888:####
        0 0.000000 0.000000  1889:'radio_group' => <<'END_OF_FUNC',
        0 0.000000 0.000000  1890:sub radio_group {
        0 0.000000 0.000000  1891:    my($self,@p) = self_or_default(@_);
        0 0.000000 0.000000  1892:
        0 0.000000 0.000000  1893:
        0 0.000000 0.000000  1894:
        0 0.000000 0.000000  1895: $self-
        0 0.000000 0.000000  1896:     ROWS,[COLUMNS,COLS],
        0 0.000000 0.000000  1897:     ROWHEADERS,COLHEADERS,
        0 0.000000 0.000000  1898:     [OVERRIDE,FORCE],NOLABELS],@p);
        0 0.000000 0.000000  1899:    my($result,$checked);
        0 0.000000 0.000000  1900:
        0 0.000000 0.000000  1901:    if (!$override && defined($self-
        0 0.000000 0.000000  1902: $checked = $self->param($name);
        0 0.000000 0.000000  1903:    } else {
        0 0.000000 0.000000  1904: $checked = $default;
            ================ SmallProf version 0.9 ================
                   Profile of /usr/lib/perl5/5.00503/CGI.pm            Page 336
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000  1905:    }
        0 0.000000 0.000000  1906:    my(@elements,@values);
        0 0.000000 0.000000  1907:    @values = $self-
        0 0.000000 0.000000  1908:
        0 0.000000 0.000000  1909:    # If no check array is specified, check
        0 0.000000 0.000000  1910:    $checked = $values[0] unless
        0 0.000000 0.000000  1911:    $name=$self->escapeHTML($name);
        0 0.000000 0.000000  1912:
        0 0.000000 0.000000  1913:    my($other) = @other ? " @other" : '';
        0 0.000000 0.000000  1914:    foreach (@values) {
        0 0.000000 0.000000  1915: my($checkit) = $checked eq $_ ? ' CHECKED' :
        0 0.000000 0.000000  1916: my($break) = $linebreak ? '<BR>' : '';
        0 0.000000 0.000000  1917: my($label)='';
        0 0.000000 0.000000  1918: unless (defined($nolabels) && $nolabels) {
        0 0.000000 0.000000  1919:     $label = $_;
        0 0.000000 0.000000  1920:     $label = $labels->{$_} if
        0 0.000000 0.000000  1921:     $label = $self->escapeHTML($label);
        0 0.000000 0.000000  1922: }
        0 0.000000 0.000000  1923: $_=$self->escapeHTML($_);
        0 0.000000 0.000000  1924: push(@elements,qq/<INPUT TYPE="radio"
        0 0.000000 0.000000  1925:    }
        0 0.000000 0.000000  1926:    $self->register_parameter($name);
        0 0.000000 0.000000  1927:    return wantarray ? @elements : join('
        0 0.000000 0.000000  1928:           unless defined($columns) ||
        0 0.000000 0.000000  1929:    return
        0 0.000000 0.000000  1930:}
        0 0.000000 0.000000  1931:END_OF_FUNC
        0 0.000000 0.000000  1932:
        0 0.000000 0.000000  1933:
        0 0.000000 0.000000  1934:#### Method: popup_menu
        0 0.000000 0.000000  1935:# Create a popup menu.
        0 0.000000 0.000000  1936:# Parameters:
        0 0.000000 0.000000  1937:#   $name -> Name for all the menu
        0 0.000000 0.000000  1938:#   $values -> A pointer to a regular array
        0 0.000000 0.000000  1939:#             text of each menu item.
        0 0.000000 0.000000  1940:#   $default -> (optional) Default item to
        0 0.000000 0.000000  1941:#   $labels -> (optional)
        0 0.000000 0.000000  1942:#             A pointer to an associative
        0 0.000000 0.000000  1943:#             in the form
        0 0.000000 0.000000  1944:#             Otherwise the provided values
        0 0.000000 0.000000  1945:# Returns:
        0 0.000000 0.000000  1946:#   A string containing the definition of a
        0 0.000000 0.000000  1947:####
        0 0.000000 0.000000  1948:'popup_menu' => <<'END_OF_FUNC',
        0 0.000000 0.000000  1949:sub popup_menu {
        0 0.000000 0.000000  1950:    my($self,@p) = self_or_default(@_);
        0 0.000000 0.000000  1951:
        0 0.000000 0.000000  1952:
        0 0.000000 0.000000  1953: $self-
        0 0.000000 0.000000  1954:    my($result,$selected);
        0 0.000000 0.000000  1955:
        0 0.000000 0.000000  1956:    if (!$override && defined($self-
        0 0.000000 0.000000  1957: $selected = $self->param($name);
        0 0.000000 0.000000  1958:    } else {
        0 0.000000 0.000000  1959: $selected = $default;
        0 0.000000 0.000000  1960:    }
            ================ SmallProf version 0.9 ================
                   Profile of /usr/lib/perl5/5.00503/CGI.pm            Page 337
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000  1961:    $name=$self->escapeHTML($name);
        0 0.000000 0.000000  1962:    my($other) = @other ? " @other" : '';
        0 0.000000 0.000000  1963:
        0 0.000000 0.000000  1964:    my(@values);
        0 0.000000 0.000000  1965:    @values = $self-
        0 0.000000 0.000000  1966:
        0 0.000000 0.000000  1967:    $result = qq/<SELECT
        0 0.000000 0.000000  1968:    foreach (@values) {
        0 0.000000 0.000000  1969: my($selectit) = defined($selected) ?
        0 0.000000 0.000000  1970: my($label) = $_;
        0 0.000000 0.000000  1971: $label = $labels->{$_} if defined($labels)
        0 0.000000 0.000000  1972: my($value) = $self->escapeHTML($_);
        0 0.000000 0.000000  1973: $label=$self->escapeHTML($label);
        0 0.000000 0.000000  1974: $result .= "<OPTION $selectit
        0 0.000000 0.000000  1975:    }
        0 0.000000 0.000000  1976:
        0 0.000000 0.000000  1977:    $result .= "</SELECT>\n";
        0 0.000000 0.000000  1978:    return $result;
        0 0.000000 0.000000  1979:}
        0 0.000000 0.000000  1980:END_OF_FUNC
        0 0.000000 0.000000  1981:
        0 0.000000 0.000000  1982:
        0 0.000000 0.000000  1983:#### Method: scrolling_list
        0 0.000000 0.000000  1984:# Create a scrolling list.
        0 0.000000 0.000000  1985:# Parameters:
        0 0.000000 0.000000  1986:#   $name -> name for the list
        0 0.000000 0.000000  1987:#   $values -> A pointer to a regular array
        0 0.000000 0.000000  1988:#             values for each option line in
        0 0.000000 0.000000  1989:#   $defaults -> (optional)
        0 0.000000 0.000000  1990:#             1. If a pointer to a regular
        0 0.000000 0.000000  1991:#             then this will be used to
        0 0.000000 0.000000  1992:#             lines to turn on by default.
        0 0.000000 0.000000  1993:#             2. Otherwise holds the value of
        0 0.000000 0.000000  1994:#   $size -> (optional) Size of the list.
        0 0.000000 0.000000  1995:#   $multiple -> (optional) If set, allow
        0 0.000000 0.000000  1996:#   $labels -> (optional)
        0 0.000000 0.000000  1997:#             A pointer to an associative
        0 0.000000 0.000000  1998:#             in the form
        0 0.000000 0.000000  1999:#             Otherwise the provided values
        0 0.000000 0.000000  2000:# Returns:
        0 0.000000 0.000000  2001:#   A string containing the definition of a
        0 0.000000 0.000000  2002:####
        0 0.000000 0.000000  2003:'scrolling_list' => <<'END_OF_FUNC',
        0 0.000000 0.000000  2004:sub scrolling_list {
        0 0.000000 0.000000  2005:    my($self,@p) = self_or_default(@_);
        0 0.000000 0.000000  2006:
        0 0.000000 0.000000  2007: = $self-
        0 0.000000 0.000000  2008:
        0 0.000000 0.000000  2009:
        0 0.000000 0.000000  2010:    my($result,@values);
        0 0.000000 0.000000  2011:    @values = $self-
        0 0.000000 0.000000  2012:
        0 0.000000 0.000000  2013:    $size = $size || scalar(@values);
        0 0.000000 0.000000  2014:
        0 0.000000 0.000000  2015:    my(%selected) = $self-
        0 0.000000 0.000000  2016:    my($is_multiple) = $multiple ? '
            ================ SmallProf version 0.9 ================
                   Profile of /usr/lib/perl5/5.00503/CGI.pm            Page 338
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000  2017:    my($has_size) = $size ? " SIZE=$size" :
        0 0.000000 0.000000  2018:    my($other) = @other ? " @other" : '';
        0 0.000000 0.000000  2019:
        0 0.000000 0.000000  2020:    $name=$self->escapeHTML($name);
        0 0.000000 0.000000  2021:    $result = qq/<SELECT
        0 0.000000 0.000000  2022:    foreach (@values) {
        0 0.000000 0.000000  2023: my($selectit) = $selected{$_} ? 'SELECTED' :
        0 0.000000 0.000000  2024: my($label) = $_;
        0 0.000000 0.000000  2025: $label = $labels->{$_} if defined($labels)
        0 0.000000 0.000000  2026: $label=$self->escapeHTML($label);
        0 0.000000 0.000000  2027: my($value)=$self->escapeHTML($_);
        0 0.000000 0.000000  2028: $result .= "<OPTION $selectit
        0 0.000000 0.000000  2029:    }
        0 0.000000 0.000000  2030:    $result .= "</SELECT>\n";
        0 0.000000 0.000000  2031:    $self->register_parameter($name);
        0 0.000000 0.000000  2032:    return $result;
        0 0.000000 0.000000  2033:}
        0 0.000000 0.000000  2034:END_OF_FUNC
        0 0.000000 0.000000  2035:
        0 0.000000 0.000000  2036:
        0 0.000000 0.000000  2037:#### Method: hidden
        0 0.000000 0.000000  2038:# Parameters:
        0 0.000000 0.000000  2039:#   $name -> Name of the hidden field
        0 0.000000 0.000000  2040:#   @default -> (optional) Initial values of
        0 0.000000 0.000000  2041:#      or
        0 0.000000 0.000000  2042:#   $default->[initial values of field]
        0 0.000000 0.000000  2043:# Returns:
        0 0.000000 0.000000  2044:#   A string containing a <INPUT
        0 0.000000 0.000000  2045:####
        0 0.000000 0.000000  2046:'hidden' => <<'END_OF_FUNC',
        0 0.000000 0.000000  2047:sub hidden {
        0 0.000000 0.000000  2048:    my($self,@p) = self_or_default(@_);
        0 0.000000 0.000000  2049:
        0 0.000000 0.000000  2050:    # this is the one place where we departed
        0 0.000000 0.000000  2051:    # calling scheme, so we have to special-
        0 0.000000 0.000000  2052:    my(@result,@value);
        0 0.000000 0.000000  2053:    my($name,$default,$override,@other) =
        0 0.000000 0.000000  2054: $self-
        0 0.000000 0.000000  2055:
        0 0.000000 0.000000  2056:    my $do_override = 0;
        0 0.000000 0.000000  2057:    if ( ref($p[0]) || substr($p[0],0,1) eq
        0 0.000000 0.000000  2058: @value = ref($default) ? @{$default} :
        0 0.000000 0.000000  2059: $do_override = $override;
        0 0.000000 0.000000  2060:    } else {
        0 0.000000 0.000000  2061: foreach ($default,$override,@other) {
        0 0.000000 0.000000  2062:     push(@value,$_) if defined($_);
        0 0.000000 0.000000  2063: }
        0 0.000000 0.000000  2064:    }
        0 0.000000 0.000000  2065:
        0 0.000000 0.000000  2066:    # use previous values if override is not
        0 0.000000 0.000000  2067:    my @prev = $self->param($name);
        0 0.000000 0.000000  2068:    @value = @prev if !$do_override && @prev;
        0 0.000000 0.000000  2069:
        0 0.000000 0.000000  2070:    $name=$self->escapeHTML($name);
        0 0.000000 0.000000  2071:    foreach (@value) {
        0 0.000000 0.000000  2072: $_=$self->escapeHTML($_);
            ================ SmallProf version 0.9 ================
                   Profile of /usr/lib/perl5/5.00503/CGI.pm            Page 339
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000  2073: push(@result,qq/<INPUT TYPE="hidden"
        0 0.000000 0.000000  2074:    }
        0 0.000000 0.000000  2075:    return wantarray ? @result :
        0 0.000000 0.000000  2076:}
        0 0.000000 0.000000  2077:END_OF_FUNC
        0 0.000000 0.000000  2078:
        0 0.000000 0.000000  2079:
        0 0.000000 0.000000  2080:#### Method: image_button
        0 0.000000 0.000000  2081:# Parameters:
        0 0.000000 0.000000  2082:#   $name -> Name of the button
        0 0.000000 0.000000  2083:#   $src ->  URL of the image source
        0 0.000000 0.000000  2084:#   $align -> Alignment style (TOP, BOTTOM or
        0 0.000000 0.000000  2085:# Returns:
        0 0.000000 0.000000  2086:#   A string containing a <INPUT TYPE="image"
        0 0.000000 0.000000  2087:####
        0 0.000000 0.000000  2088:'image_button' => <<'END_OF_FUNC',
        0 0.000000 0.000000  2089:sub image_button {
        0 0.000000 0.000000  2090:    my($self,@p) = self_or_default(@_);
        0 0.000000 0.000000  2091:
        0 0.000000 0.000000  2092:    my($name,$src,$alignment,@other) =
        0 0.000000 0.000000  2093: $self->rearrange([NAME,SRC,ALIGN],@p);
        0 0.000000 0.000000  2094:
        0 0.000000 0.000000  2095:    my($align) = $alignment ? "
        0 0.000000 0.000000  2096:    my($other) = @other ? " @other" : '';
        0 0.000000 0.000000  2097:    $name=$self->escapeHTML($name);
        0 0.000000 0.000000  2098:    return qq/<INPUT TYPE="image"
        0 0.000000 0.000000  2099:}
        0 0.000000 0.000000  2100:END_OF_FUNC
        0 0.000000 0.000000  2101:
        0 0.000000 0.000000  2102:
        0 0.000000 0.000000  2103:#### Method: self_url
        0 0.000000 0.000000  2104:# Returns a URL containing the current script
        0 0.000000 0.000000  2105:# param/value pairs arranged as a query.  You
        0 0.000000 0.000000  2106:# to create a link that, when selected, will
        0 0.000000 0.000000  2107:# script with all its state information
        0 0.000000 0.000000  2108:####
        0 0.000000 0.000000  2109:'self_url' => <<'END_OF_FUNC',
        0 0.000000 0.000000  2110:sub self_url {
        0 0.000000 0.000000  2111:    my($self,@p) = self_or_default(@_);
        0 0.000000 0.000000  2112:    return $self->url('-path_info'=>1,'-
        0 0.000000 0.000000  2113:}
        0 0.000000 0.000000  2114:END_OF_FUNC
        0 0.000000 0.000000  2115:
        0 0.000000 0.000000  2116:
        0 0.000000 0.000000  2117:# This is provided as a synonym to self_url()
        0 0.000000 0.000000  2118:# enough to have incorporated it into their
        0 0.000000 0.000000  2119:'state' => <<'END_OF_FUNC',
        0 0.000000 0.000000  2120:sub state {
        0 0.000000 0.000000  2121:    &self_url;
        0 0.000000 0.000000  2122:}
        0 0.000000 0.000000  2123:END_OF_FUNC
        0 0.000000 0.000000  2124:
        0 0.000000 0.000000  2125:
        0 0.000000 0.000000  2126:#### Method: url
        0 0.000000 0.000000  2127:# Like self_url, but doesn't return the query
        0 0.000000 0.000000  2128:# the URL.
            ================ SmallProf version 0.9 ================
                   Profile of /usr/lib/perl5/5.00503/CGI.pm            Page 340
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000  2129:####
        0 0.000000 0.000000  2130:'url' => <<'END_OF_FUNC',
        0 0.000000 0.000000  2131:sub url {
        0 0.000000 0.000000  2132:    my($self,@p) = self_or_default(@_);
        0 0.000000 0.000000  2133:    my
        0 0.000000 0.000000  2134: $self-
        0 0.000000 0.000000  2135:    my $url;
        0 0.000000 0.000000  2136:    $full++ if !($relative || $absolute);
        0 0.000000 0.000000  2137:
        0 0.000000 0.000000  2138:    if ($full) {
        0 0.000000 0.000000  2139: my $protocol = $self->protocol();
        0 0.000000 0.000000  2140: $url = "$protocol://";
        0 0.000000 0.000000  2141: my $vh = http('host');
        0 0.000000 0.000000  2142: if ($vh) {
        0 0.000000 0.000000  2143:     $url .= $vh;
        0 0.000000 0.000000  2144: } else {
        0 0.000000 0.000000  2145:     $url .= server_name();
        0 0.000000 0.000000  2146:     my $port = $self->server_port;
        0 0.000000 0.000000  2147:     $url .= ":" . $port
        0 0.000000 0.000000  2148:  unless (lc($protocol) eq 'http' && $port ==
        0 0.000000 0.000000  2149:      || (lc($protocol) eq 'https' && $port
        0 0.000000 0.000000  2150: }
        0 0.000000 0.000000  2151: $url .= $self->script_name;
        0 0.000000 0.000000  2152:    } elsif ($relative) {
        0 0.000000 0.000000  2153: ($url) = $self->script_name =~ m!([^/]+)$!;
        0 0.000000 0.000000  2154:    } elsif ($absolute) {
        0 0.000000 0.000000  2155: $url = $self->script_name;
        0 0.000000 0.000000  2156:    }
        0 0.000000 0.000000  2157:    $url .= $self->path_info if $path_info
        0 0.000000 0.000000  2158:    $url .= "?" . $self->query_string if
        0 0.000000 0.000000  2159:    return $url;
        0 0.000000 0.000000  2160:}
        0 0.000000 0.000000  2161:
        0 0.000000 0.000000  2162:END_OF_FUNC
        0 0.000000 0.000000  2163:
        0 0.000000 0.000000  2164:#### Method: cookie
        0 0.000000 0.000000  2165:# Set or read a cookie from the specified
        0 0.000000 0.000000  2166:# Cookie can then be passed to header().
        0 0.000000 0.000000  2167:# Usual rules apply to the stickiness of -
        0 0.000000 0.000000  2168:#  Parameters:
        0 0.000000 0.000000  2169:#   -name -> name for this cookie (optional)
        0 0.000000 0.000000  2170:#   -value -> value of this cookie (scalar,
        0 0.000000 0.000000  2171:#   -path -> paths for which this cookie is
        0 0.000000 0.000000  2172:#   -domain -> internet domain in which this
        0 0.000000 0.000000  2173:#   -secure -> if true, cookie only passed
        0 0.000000 0.000000  2174:#   -expires -> expiry date in format Wdy,
        0 0.000000 0.000000  2175:####
        0 0.000000 0.000000  2176:'cookie' => <<'END_OF_FUNC',
        0 0.000000 0.000000  2177:sub cookie {
        0 0.000000 0.000000  2178:    my($self,@p) = self_or_default(@_);
        0 0.000000 0.000000  2179:
        0 0.000000 0.000000  2180: $self-
        0 0.000000 0.000000  2181:
        0 0.000000 0.000000  2182:    require CGI::Cookie;
        0 0.000000 0.000000  2183:
        0 0.000000 0.000000  2184:    # if no value is supplied, then we
            ================ SmallProf version 0.9 ================
                   Profile of /usr/lib/perl5/5.00503/CGI.pm            Page 341
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000  2185:    # value of the cookie, if any.  For
        0 0.000000 0.000000  2186:    # cookies in our state variables.
        0 0.000000 0.000000  2187:    unless ( defined($value) ) {
        0 0.000000 0.000000  2188: $self->{'.cookies'} = CGI::Cookie->fetch
        0 0.000000 0.000000  2189:     unless $self->{'.cookies'};
        0 0.000000 0.000000  2190:
        0 0.000000 0.000000  2191: # If no name is supplied, then retrieve the
        0 0.000000 0.000000  2192: return () unless $self->{'.cookies'};
        0 0.000000 0.000000  2193: return keys %{$self->{'.cookies'}} unless
        0 0.000000 0.000000  2194: return () unless $self->{'.cookies'}-
        0 0.000000 0.000000  2195: return $self->{'.cookies'}->{$name}->value
        0 0.000000 0.000000  2196:    }
        0 0.000000 0.000000  2197:
        0 0.000000 0.000000  2198:    # If we get here, we're creating a new
        0 0.000000 0.000000  2199:    return undef unless $name; # this is an
        0 0.000000 0.000000  2200:
        0 0.000000 0.000000  2201:    my @param;
        0 0.000000 0.000000  2202:    push(@param,'-name'=>$name);
        0 0.000000 0.000000  2203:    push(@param,'-value'=>$value);
        0 0.000000 0.000000  2204:    push(@param,'-domain'=>$domain) if
        0 0.000000 0.000000  2205:    push(@param,'-path'=>$path) if $path;
        0 0.000000 0.000000  2206:    push(@param,'-expires'=>$expires) if
        0 0.000000 0.000000  2207:    push(@param,'-secure'=>$secure) if
        0 0.000000 0.000000  2208:
        0 0.000000 0.000000  2209:    return new CGI::Cookie(@param);
        0 0.000000 0.000000  2210:}
        0 0.000000 0.000000  2211:END_OF_FUNC
        0 0.000000 0.000000  2212:
        0 0.000000 0.000000  2213:# This internal routine creates an expires
        0 0.000000 0.000000  2214:# hours from the current time.  It
        0 0.000000 0.000000  2215:# Mark Fisher.
        0 0.000000 0.000000  2216:'expire_calc' => <<'END_OF_FUNC',
        0 0.000000 0.000000  2217:sub expire_calc {
        0 0.000000 0.000000  2218:    my($time) = @_;
        0 0.000000 0.000000  2219:    my(%mult) = ('s'=>1,
        0 0.000000 0.000000  2220:                 'm'=>60,
        0 0.000000 0.000000  2221:                 'h'=>60*60,
        0 0.000000 0.000000  2222:                 'd'=>60*60*24,
        0 0.000000 0.000000  2223:                 'M'=>60*60*24*30,
        0 0.000000 0.000000  2224:                 'y'=>60*60*24*365);
        0 0.000000 0.000000  2225:    # format for time can be in any of the
        0 0.000000 0.000000  2226:    # "now" -- expire immediately
        0 0.000000 0.000000  2227:    # "+180s" -- in 180 seconds
        0 0.000000 0.000000  2228:    # "+2m" -- in 2 minutes
        0 0.000000 0.000000  2229:    # "+12h" -- in 12 hours
        0 0.000000 0.000000  2230:    # "+1d"  -- in 1 day
        0 0.000000 0.000000  2231:    # "+3M"  -- in 3 months
        0 0.000000 0.000000  2232:    # "+2y"  -- in 2 years
        0 0.000000 0.000000  2233:    # "-3m"  -- 3 minutes ago(!)
        0 0.000000 0.000000  2234:    # If you don't supply one of these forms,
        0 0.000000 0.000000  2235:    # specifying the date yourself
        0 0.000000 0.000000  2236:    my($offset);
        0 0.000000 0.000000  2237:    if (!$time || (lc($time) eq 'now')) {
        0 0.000000 0.000000  2238:        $offset = 0;
        0 0.000000 0.000000  2239:    } elsif ($time=~/^([+-
        0 0.000000 0.000000  2240:        $offset = ($mult{$2} || 1)*$1;
            ================ SmallProf version 0.9 ================
                   Profile of /usr/lib/perl5/5.00503/CGI.pm            Page 342
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000  2241:    } else {
        0 0.000000 0.000000  2242:        return $time;
        0 0.000000 0.000000  2243:    }
        0 0.000000 0.000000  2244:    return (time+$offset);
        0 0.000000 0.000000  2245:}
        0 0.000000 0.000000  2246:END_OF_FUNC
        0 0.000000 0.000000  2247:
        0 0.000000 0.000000  2248:# This internal routine creates date strings
        0 0.000000 0.000000  2249:# cookies and HTTP headers.  (They differ,
        0 0.000000 0.000000  2250:# Thanks to Fisher Mark for this.
        0 0.000000 0.000000  2251:'expires' => <<'END_OF_FUNC',
        0 0.000000 0.000000  2252:sub expires {
        0 0.000000 0.000000  2253:    my($time,$format) = @_;
        0 0.000000 0.000000  2254:    $format ||= 'http';
        0 0.000000 0.000000  2255:
        0 0.000000 0.000000  2256:    my(@MON)=qw/Jan Feb Mar Apr May Jun Jul
        0 0.000000 0.000000  2257:    my(@WDAY) = qw/Sun Mon Tue Wed Thu Fri
        0 0.000000 0.000000  2258:
        0 0.000000 0.000000  2259:    # pass through preformatted dates for the
        0 0.000000 0.000000  2260:    $time = expire_calc($time);
        0 0.000000 0.000000  2261:    return $time unless $time =~ /^\d+$/;
        0 0.000000 0.000000  2262:
        0 0.000000 0.000000  2263:    # make HTTP/cookie date string from
        0 0.000000 0.000000  2264:    # (cookies use '-' as date separator,
        0 0.000000 0.000000  2265:    my($sc) = ' ';
        0 0.000000 0.000000  2266:    $sc = '-' if $format eq "cookie";
        0 0.000000 0.000000  2267:
        0 0.000000 0.000000  2268:    $year += 1900;
        0 0.000000 0.000000  2269:    return sprintf("%s, %02d$sc%s$sc%04d
        0 0.000000 0.000000  2270:
        0 0.000000 0.000000  2271:}
        0 0.000000 0.000000  2272:END_OF_FUNC
        0 0.000000 0.000000  2273:
        0 0.000000 0.000000  2274:'parse_keywordlist' => <<'END_OF_FUNC',
        0 0.000000 0.000000  2275:sub parse_keywordlist {
        0 0.000000 0.000000  2276:    my($self,$tosplit) = @_;
        0 0.000000 0.000000  2277:    $tosplit = unescape($tosplit); # unescape
        0 0.000000 0.000000  2278:    $tosplit=~tr/+/ /;          # pluses to
        0 0.000000 0.000000  2279:    my(@keywords) = split(/\s+/,$tosplit);
        0 0.000000 0.000000  2280:    return @keywords;
        0 0.000000 0.000000  2281:}
        0 0.000000 0.000000  2282:END_OF_FUNC
        0 0.000000 0.000000  2283:
        0 0.000000 0.000000  2284:'param_fetch' => <<'END_OF_FUNC',
        0 0.000000 0.000000  2285:sub param_fetch {
        0 0.000000 0.000000  2286:    my($self,@p) = self_or_default(@_);
        0 0.000000 0.000000  2287:    my($name) = $self->rearrange([NAME],@p);
        0 0.000000 0.000000  2288:    unless (exists($self->{$name})) {
        0 0.000000 0.000000  2289: $self->add_parameter($name);
        0 0.000000 0.000000  2290: $self->{$name} = [];
        0 0.000000 0.000000  2291:    }
        0 0.000000 0.000000  2292:
        0 0.000000 0.000000  2293:    return $self->{$name};
        0 0.000000 0.000000  2294:}
        0 0.000000 0.000000  2295:END_OF_FUNC
        0 0.000000 0.000000  2296:
            ================ SmallProf version 0.9 ================
                   Profile of /usr/lib/perl5/5.00503/CGI.pm            Page 343
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000  2297:#############################################
        0 0.000000 0.000000  2298:# OTHER INFORMATION PROVIDED BY THE
        0 0.000000 0.000000  2299:#############################################
        0 0.000000 0.000000  2300:
        0 0.000000 0.000000  2301:#### Method: path_info
        0 0.000000 0.000000  2302:# Return the extra virtual path information
        0 0.000000 0.000000  2303:# after the URL (if any)
        0 0.000000 0.000000  2304:####
        0 0.000000 0.000000  2305:'path_info' => <<'END_OF_FUNC',
        0 0.000000 0.000000  2306:sub path_info {
        0 0.000000 0.000000  2307:    my ($self,$info) = self_or_default(@_);
        0 0.000000 0.000000  2308:    if (defined($info)) {
        0 0.000000 0.000000  2309: $info = "/$info" if $info ne '' &&
        0 0.000000 0.000000  2310: $self->{'.path_info'} = $info;
        0 0.000000 0.000000  2311:    } elsif (! defined($self->{'.path_info'})
        0 0.000000 0.000000  2312: $self->{'.path_info'} =
        0 0.000000 0.000000  2313:     $ENV{'PATH_INFO'} : '';
        0 0.000000 0.000000  2314:
        0 0.000000 0.000000  2315: # hack to fix broken path info in IIS
        0 0.000000 0.000000  2316: $self->{'.path_info'} =~
        0 0.000000 0.000000  2317:
        0 0.000000 0.000000  2318:    }
        0 0.000000 0.000000  2319:    return $self->{'.path_info'};
        0 0.000000 0.000000  2320:}
        0 0.000000 0.000000  2321:END_OF_FUNC
        0 0.000000 0.000000  2322:
        0 0.000000 0.000000  2323:
        0 0.000000 0.000000  2324:#### Method: request_method
        0 0.000000 0.000000  2325:# Returns 'POST', 'GET', 'PUT' or 'HEAD'
        0 0.000000 0.000000  2326:####
        0 0.000000 0.000000  2327:'request_method' => <<'END_OF_FUNC',
        0 0.000000 0.000000  2328:sub request_method {
        0 0.000000 0.000000  2329:    return $ENV{'REQUEST_METHOD'};
        0 0.000000 0.000000  2330:}
        0 0.000000 0.000000  2331:END_OF_FUNC
        0 0.000000 0.000000  2332:
        0 0.000000 0.000000  2333:#### Method: path_translated
        0 0.000000 0.000000  2334:# Return the physical path information
        0 0.000000 0.000000  2335:# by the URL (if any)
        0 0.000000 0.000000  2336:####
        0 0.000000 0.000000  2337:'path_translated' => <<'END_OF_FUNC',
        0 0.000000 0.000000  2338:sub path_translated {
        0 0.000000 0.000000  2339:    return $ENV{'PATH_TRANSLATED'};
        0 0.000000 0.000000  2340:}
        0 0.000000 0.000000  2341:END_OF_FUNC
        0 0.000000 0.000000  2342:
        0 0.000000 0.000000  2343:
        0 0.000000 0.000000  2344:#### Method: query_string
        0 0.000000 0.000000  2345:# Synthesize a query string from our current
        0 0.000000 0.000000  2346:# parameters
        0 0.000000 0.000000  2347:####
        0 0.000000 0.000000  2348:'query_string' => <<'END_OF_FUNC',
        0 0.000000 0.000000  2349:sub query_string {
        0 0.000000 0.000000  2350:    my($self) = self_or_default(@_);
        0 0.000000 0.000000  2351:    my($param,$value,@pairs);
        0 0.000000 0.000000  2352:    foreach $param ($self->param) {
            ================ SmallProf version 0.9 ================
                   Profile of /usr/lib/perl5/5.00503/CGI.pm            Page 344
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000  2353: my($eparam) = escape($param);
        0 0.000000 0.000000  2354: foreach $value ($self->param($param)) {
        0 0.000000 0.000000  2355:     $value = escape($value);
        0 0.000000 0.000000  2356:     push(@pairs,"$eparam=$value");
        0 0.000000 0.000000  2357: }
        0 0.000000 0.000000  2358:    }
        0 0.000000 0.000000  2359:    return join($USE_PARAM_SEMICOLONS ? ';' :
        0 0.000000 0.000000  2360:}
        0 0.000000 0.000000  2361:END_OF_FUNC
        0 0.000000 0.000000  2362:
        0 0.000000 0.000000  2363:
        0 0.000000 0.000000  2364:#### Method: accept
        0 0.000000 0.000000  2365:# Without parameters, returns an array of the
        0 0.000000 0.000000  2366:# MIME types the browser accepts.
        0 0.000000 0.000000  2367:# With a single parameter equal to a MIME
        0 0.000000 0.000000  2368:# type, will return undef if the browser
        0 0.000000 0.000000  2369:# accept it, 1 if the browser accepts it but
        0 0.000000 0.000000  2370:# doesn't give a preference, or a floating
        0 0.000000 0.000000  2371:# value between 0.0 and 1.0 if the browser
        0 0.000000 0.000000  2372:# declares a quantitative score for it.
        0 0.000000 0.000000  2373:# This handles MIME type globs correctly.
        0 0.000000 0.000000  2374:####
        0 0.000000 0.000000  2375:'Accept' => <<'END_OF_FUNC',
        0 0.000000 0.000000  2376:sub Accept {
        0 0.000000 0.000000  2377:    my($self,$search) = self_or_CGI(@_);
        0 0.000000 0.000000  2378:    my(%prefs,$type,$pref,$pat);
        0 0.000000 0.000000  2379:
        0 0.000000 0.000000  2380:    my(@accept) = split(',',$self-
        0 0.000000 0.000000  2381:
        0 0.000000 0.000000  2382:    foreach (@accept) {
        0 0.000000 0.000000  2383: ($pref) = /q=(\d\.\d+|\d+)/;
        0 0.000000 0.000000  2384: ($type) = m#(\S+/[^;]+)#;
        0 0.000000 0.000000  2385: next unless $type;
        0 0.000000 0.000000  2386: $prefs{$type}=$pref || 1;
        0 0.000000 0.000000  2387:    }
        0 0.000000 0.000000  2388:
        0 0.000000 0.000000  2389:    return keys %prefs unless $search;
        0 0.000000 0.000000  2390:
        0 0.000000 0.000000  2391:    # if a search type is provided, we may
        0 0.000000 0.000000  2392:    # perform a pattern matching operation.
        0 0.000000 0.000000  2393:    # The MIME types use a glob mechanism,
        0 0.000000 0.000000  2394:    # is easily translated into a perl
        0 0.000000 0.000000  2395:
        0 0.000000 0.000000  2396:    # First return the preference for
        0 0.000000 0.000000  2397:    # types:
        0 0.000000 0.000000  2398:    return $prefs{$search} if
        0 0.000000 0.000000  2399:
        0 0.000000 0.000000  2400:    # Didn't get it, so try pattern matching.
        0 0.000000 0.000000  2401:    foreach (keys %prefs) {
        0 0.000000 0.000000  2402: next unless /\*/;       # not a pattern
        0 0.000000 0.000000  2403: ($pat = $_) =~ s/([^\w*])/\\$1/g; # escape
        0 0.000000 0.000000  2404: $pat =~ s/\*/.*/g; # turn it into a pattern
        0 0.000000 0.000000  2405: return $prefs{$_} if $search=~/$pat/;
        0 0.000000 0.000000  2406:    }
        0 0.000000 0.000000  2407:}
        0 0.000000 0.000000  2408:END_OF_FUNC
            ================ SmallProf version 0.9 ================
                   Profile of /usr/lib/perl5/5.00503/CGI.pm            Page 345
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000  2409:
        0 0.000000 0.000000  2410:
        0 0.000000 0.000000  2411:#### Method: user_agent
        0 0.000000 0.000000  2412:# If called with no parameters, returns the
        0 0.000000 0.000000  2413:# If called with one parameter, does a
        0 0.000000 0.000000  2414:# insensitive) on the user agent.
        0 0.000000 0.000000  2415:####
        0 0.000000 0.000000  2416:'user_agent' => <<'END_OF_FUNC',
        0 0.000000 0.000000  2417:sub user_agent {
        0 0.000000 0.000000  2418:    my($self,$match)=self_or_CGI(@_);
        0 0.000000 0.000000  2419:    return $self->http('user_agent') unless
        0 0.000000 0.000000  2420:    return $self->http('user_agent') =~
        0 0.000000 0.000000  2421:}
        0 0.000000 0.000000  2422:END_OF_FUNC
        0 0.000000 0.000000  2423:
        0 0.000000 0.000000  2424:
        0 0.000000 0.000000  2425:#### Method: raw_cookie
        0 0.000000 0.000000  2426:# Returns the magic cookies for the session.
        0 0.000000 0.000000  2427:# The cookies are not parsed or altered in
        0 0.000000 0.000000  2428:# cookies are returned exactly as given in
        0 0.000000 0.000000  2429:# headers.  If a cookie name is given, only
        0 0.000000 0.000000  2430:# value is returned, otherwise the entire raw
        0 0.000000 0.000000  2431:# is returned.
        0 0.000000 0.000000  2432:####
        0 0.000000 0.000000  2433:'raw_cookie' => <<'END_OF_FUNC',
        0 0.000000 0.000000  2434:sub raw_cookie {
        0 0.000000 0.000000  2435:    my($self,$key) = self_or_CGI(@_);
        0 0.000000 0.000000  2436:
        0 0.000000 0.000000  2437:    require CGI::Cookie;
        0 0.000000 0.000000  2438:
        0 0.000000 0.000000  2439:    if (defined($key)) {
        0 0.000000 0.000000  2440: $self->{'.raw_cookies'} = CGI::Cookie-
        0 0.000000 0.000000  2441:     unless $self->{'.raw_cookies'};
        0 0.000000 0.000000  2442:
        0 0.000000 0.000000  2443: return () unless $self->{'.raw_cookies'};
        0 0.000000 0.000000  2444: return () unless $self->{'.raw_cookies'}-
        0 0.000000 0.000000  2445: return $self->{'.raw_cookies'}->{$key};
        0 0.000000 0.000000  2446:    }
        0 0.000000 0.000000  2447:    return $self->http('cookie') ||
        0 0.000000 0.000000  2448:}
        0 0.000000 0.000000  2449:END_OF_FUNC
        0 0.000000 0.000000  2450:
        0 0.000000 0.000000  2451:#### Method: virtual_host
        0 0.000000 0.000000  2452:# Return the name of the virtual_host, which
        0 0.000000 0.000000  2453:# is not always the same as the server
        0 0.000000 0.000000  2454:######
        0 0.000000 0.000000  2455:'virtual_host' => <<'END_OF_FUNC',
        0 0.000000 0.000000  2456:sub virtual_host {
        0 0.000000 0.000000  2457:    my $vh = http('host') || server_name();
        0 0.000000 0.000000  2458:    $vh =~ s/:\d+$//;  # get rid of port
        0 0.000000 0.000000  2459:    return $vh;
        0 0.000000 0.000000  2460:}
        0 0.000000 0.000000  2461:END_OF_FUNC
        0 0.000000 0.000000  2462:
        0 0.000000 0.000000  2463:#### Method: remote_host
        0 0.000000 0.000000  2464:# Return the name of the remote host, or its
            ================ SmallProf version 0.9 ================
                   Profile of /usr/lib/perl5/5.00503/CGI.pm            Page 346
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000  2465:# address if unavailable.  If this variable
        0 0.000000 0.000000  2466:# defined, it returns "localhost" for
        0 0.000000 0.000000  2467:# purposes.
        0 0.000000 0.000000  2468:####
        0 0.000000 0.000000  2469:'remote_host' => <<'END_OF_FUNC',
        0 0.000000 0.000000  2470:sub remote_host {
        0 0.000000 0.000000  2471:    return $ENV{'REMOTE_HOST'} ||
        0 0.000000 0.000000  2472:    || 'localhost';
        0 0.000000 0.000000  2473:}
        0 0.000000 0.000000  2474:END_OF_FUNC
        0 0.000000 0.000000  2475:
        0 0.000000 0.000000  2476:
        0 0.000000 0.000000  2477:#### Method: remote_addr
        0 0.000000 0.000000  2478:# Return the IP addr of the remote host.
        0 0.000000 0.000000  2479:####
        0 0.000000 0.000000  2480:'remote_addr' => <<'END_OF_FUNC',
        0 0.000000 0.000000  2481:sub remote_addr {
        0 0.000000 0.000000  2482:    return $ENV{'REMOTE_ADDR'} ||
        0 0.000000 0.000000  2483:}
        0 0.000000 0.000000  2484:END_OF_FUNC
        0 0.000000 0.000000  2485:
        0 0.000000 0.000000  2486:
        0 0.000000 0.000000  2487:#### Method: script_name
        0 0.000000 0.000000  2488:# Return the partial URL to this script for
        0 0.000000 0.000000  2489:# self-referencing scripts.  Also see
        0 0.000000 0.000000  2490:# self_url(), which returns a URL with all
        0 0.000000 0.000000  2491:# preserved.
        0 0.000000 0.000000  2492:####
        0 0.000000 0.000000  2493:'script_name' => <<'END_OF_FUNC',
        0 0.000000 0.000000  2494:sub script_name {
        0 0.000000 0.000000  2495:    return $ENV{'SCRIPT_NAME'} if
        0 0.000000 0.000000  2496:    # These are for debugging
        0 0.000000 0.000000  2497:    return "/$0" unless $0=~/^\//;
        0 0.000000 0.000000  2498:    return $0;
        0 0.000000 0.000000  2499:}
        0 0.000000 0.000000  2500:END_OF_FUNC
        0 0.000000 0.000000  2501:
        0 0.000000 0.000000  2502:
        0 0.000000 0.000000  2503:#### Method: referer
        0 0.000000 0.000000  2504:# Return the HTTP_REFERER: useful for
        0 0.000000 0.000000  2505:# a GO BACK button.
        0 0.000000 0.000000  2506:####
        0 0.000000 0.000000  2507:'referer' => <<'END_OF_FUNC',
        0 0.000000 0.000000  2508:sub referer {
        0 0.000000 0.000000  2509:    my($self) = self_or_CGI(@_);
        0 0.000000 0.000000  2510:    return $self->http('referer');
        0 0.000000 0.000000  2511:}
        0 0.000000 0.000000  2512:END_OF_FUNC
        0 0.000000 0.000000  2513:
        0 0.000000 0.000000  2514:
        0 0.000000 0.000000  2515:#### Method: server_name
        0 0.000000 0.000000  2516:# Return the name of the server
        0 0.000000 0.000000  2517:####
        0 0.000000 0.000000  2518:'server_name' => <<'END_OF_FUNC',
        0 0.000000 0.000000  2519:sub server_name {
        0 0.000000 0.000000  2520:    return $ENV{'SERVER_NAME'} ||
            ================ SmallProf version 0.9 ================
                   Profile of /usr/lib/perl5/5.00503/CGI.pm            Page 347
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000  2521:}
        0 0.000000 0.000000  2522:END_OF_FUNC
        0 0.000000 0.000000  2523:
        0 0.000000 0.000000  2524:#### Method: server_software
        0 0.000000 0.000000  2525:# Return the name of the server software
        0 0.000000 0.000000  2526:####
        0 0.000000 0.000000  2527:'server_software' => <<'END_OF_FUNC',
        0 0.000000 0.000000  2528:sub server_software {
        0 0.000000 0.000000  2529:    return $ENV{'SERVER_SOFTWARE'} ||
        0 0.000000 0.000000  2530:}
        0 0.000000 0.000000  2531:END_OF_FUNC
        0 0.000000 0.000000  2532:
        0 0.000000 0.000000  2533:#### Method: server_port
        0 0.000000 0.000000  2534:# Return the tcp/ip port the server is
        0 0.000000 0.000000  2535:####
        0 0.000000 0.000000  2536:'server_port' => <<'END_OF_FUNC',
        0 0.000000 0.000000  2537:sub server_port {
        0 0.000000 0.000000  2538:    return $ENV{'SERVER_PORT'} || 80; # for
        0 0.000000 0.000000  2539:}
        0 0.000000 0.000000  2540:END_OF_FUNC
        0 0.000000 0.000000  2541:
        0 0.000000 0.000000  2542:#### Method: server_protocol
        0 0.000000 0.000000  2543:# Return the protocol (usually HTTP/1.0)
        0 0.000000 0.000000  2544:####
        0 0.000000 0.000000  2545:'server_protocol' => <<'END_OF_FUNC',
        0 0.000000 0.000000  2546:sub server_protocol {
        0 0.000000 0.000000  2547:    return $ENV{'SERVER_PROTOCOL'} ||
        0 0.000000 0.000000  2548:}
        0 0.000000 0.000000  2549:END_OF_FUNC
        0 0.000000 0.000000  2550:
        0 0.000000 0.000000  2551:#### Method: http
        0 0.000000 0.000000  2552:# Return the value of an HTTP variable, or
        0 0.000000 0.000000  2553:# the list of variables if none provided
        0 0.000000 0.000000  2554:####
        0 0.000000 0.000000  2555:'http' => <<'END_OF_FUNC',
        0 0.000000 0.000000  2556:sub http {
        0 0.000000 0.000000  2557:    my ($self,$parameter) = self_or_CGI(@_);
        0 0.000000 0.000000  2558:    return $ENV{$parameter} if
        0 0.000000 0.000000  2559:    return $ENV{"HTTP_\U$parameter\E"} if
        0 0.000000 0.000000  2560:    my(@p);
        0 0.000000 0.000000  2561:    foreach (keys %ENV) {
        0 0.000000 0.000000  2562: push(@p,$_) if /^HTTP/;
        0 0.000000 0.000000  2563:    }
        0 0.000000 0.000000  2564:    return @p;
        0 0.000000 0.000000  2565:}
        0 0.000000 0.000000  2566:END_OF_FUNC
        0 0.000000 0.000000  2567:
        0 0.000000 0.000000  2568:#### Method: https
        0 0.000000 0.000000  2569:# Return the value of HTTPS
        0 0.000000 0.000000  2570:####
        0 0.000000 0.000000  2571:'https' => <<'END_OF_FUNC',
        0 0.000000 0.000000  2572:sub https {
        0 0.000000 0.000000  2573:    local($^W)=0;
        0 0.000000 0.000000  2574:    my ($self,$parameter) = self_or_CGI(@_);
        0 0.000000 0.000000  2575:    return $ENV{HTTPS} unless $parameter;
        0 0.000000 0.000000  2576:    return $ENV{$parameter} if
            ================ SmallProf version 0.9 ================
                   Profile of /usr/lib/perl5/5.00503/CGI.pm            Page 348
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000  2577:    return $ENV{"HTTPS_\U$parameter\E"} if
        0 0.000000 0.000000  2578:    my(@p);
        0 0.000000 0.000000  2579:    foreach (keys %ENV) {
        0 0.000000 0.000000  2580: push(@p,$_) if /^HTTPS/;
        0 0.000000 0.000000  2581:    }
        0 0.000000 0.000000  2582:    return @p;
        0 0.000000 0.000000  2583:}
        0 0.000000 0.000000  2584:END_OF_FUNC
        0 0.000000 0.000000  2585:
        0 0.000000 0.000000  2586:#### Method: protocol
        0 0.000000 0.000000  2587:# Return the protocol (http or https
        0 0.000000 0.000000  2588:####
        0 0.000000 0.000000  2589:'protocol' => <<'END_OF_FUNC',
        0 0.000000 0.000000  2590:sub protocol {
        0 0.000000 0.000000  2591:    local($^W)=0;
        0 0.000000 0.000000  2592:    my $self = shift;
        0 0.000000 0.000000  2593:    return 'https' if uc($self->https()) eq
        0 0.000000 0.000000  2594:    return 'https' if $self->server_port ==
        0 0.000000 0.000000  2595:    my $prot = $self->server_protocol;
        0 0.000000 0.000000  2596:    my($protocol,$version) =
        0 0.000000 0.000000  2597:    return "\L$protocol\E";
        0 0.000000 0.000000  2598:}
        0 0.000000 0.000000  2599:END_OF_FUNC
        0 0.000000 0.000000  2600:
        0 0.000000 0.000000  2601:#### Method: remote_ident
        0 0.000000 0.000000  2602:# Return the identity of the remote user
        0 0.000000 0.000000  2603:# (but only if his host is running identd)
        0 0.000000 0.000000  2604:####
        0 0.000000 0.000000  2605:'remote_ident' => <<'END_OF_FUNC',
        0 0.000000 0.000000  2606:sub remote_ident {
        0 0.000000 0.000000  2607:    return $ENV{'REMOTE_IDENT'};
        0 0.000000 0.000000  2608:}
        0 0.000000 0.000000  2609:END_OF_FUNC
        0 0.000000 0.000000  2610:
        0 0.000000 0.000000  2611:
        0 0.000000 0.000000  2612:#### Method: auth_type
        0 0.000000 0.000000  2613:# Return the type of use
        0 0.000000 0.000000  2614:####
        0 0.000000 0.000000  2615:'auth_type' => <<'END_OF_FUNC',
        0 0.000000 0.000000  2616:sub auth_type {
        0 0.000000 0.000000  2617:    return $ENV{'AUTH_TYPE'};
        0 0.000000 0.000000  2618:}
        0 0.000000 0.000000  2619:END_OF_FUNC
        0 0.000000 0.000000  2620:
        0 0.000000 0.000000  2621:
        0 0.000000 0.000000  2622:#### Method: remote_user
        0 0.000000 0.000000  2623:# Return the authorization name used for user
        0 0.000000 0.000000  2624:# verification.
        0 0.000000 0.000000  2625:####
        0 0.000000 0.000000  2626:'remote_user' => <<'END_OF_FUNC',
        0 0.000000 0.000000  2627:sub remote_user {
        0 0.000000 0.000000  2628:    return $ENV{'REMOTE_USER'};
        0 0.000000 0.000000  2629:}
        0 0.000000 0.000000  2630:END_OF_FUNC
        0 0.000000 0.000000  2631:
        0 0.000000 0.000000  2632:
            ================ SmallProf version 0.9 ================
                   Profile of /usr/lib/perl5/5.00503/CGI.pm            Page 349
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000  2633:#### Method: user_name
        0 0.000000 0.000000  2634:# Try to return the remote user's name by
        0 0.000000 0.000000  2635:# crook
        0 0.000000 0.000000  2636:####
        0 0.000000 0.000000  2637:'user_name' => <<'END_OF_FUNC',
        0 0.000000 0.000000  2638:sub user_name {
        0 0.000000 0.000000  2639:    my ($self) = self_or_CGI(@_);
        0 0.000000 0.000000  2640:    return $self->http('from') ||
        0 0.000000 0.000000  2641:}
        0 0.000000 0.000000  2642:END_OF_FUNC
        0 0.000000 0.000000  2643:
        0 0.000000 0.000000  2644:#### Method: nph
        0 0.000000 0.000000  2645:# Set or return the NPH global flag
        0 0.000000 0.000000  2646:####
        0 0.000000 0.000000  2647:'nph' => <<'END_OF_FUNC',
        0 0.000000 0.000000  2648:sub nph {
        0 0.000000 0.000000  2649:    my ($self,$param) = self_or_CGI(@_);
        0 0.000000 0.000000  2650:    $CGI::NPH = $param if defined($param);
        0 0.000000 0.000000  2651:    return $CGI::NPH;
        0 0.000000 0.000000  2652:}
        0 0.000000 0.000000  2653:END_OF_FUNC
        0 0.000000 0.000000  2654:
        0 0.000000 0.000000  2655:#### Method: private_tempfiles
        0 0.000000 0.000000  2656:# Set or return the private_tempfiles global
        0 0.000000 0.000000  2657:####
        0 0.000000 0.000000  2658:'private_tempfiles' => <<'END_OF_FUNC',
        0 0.000000 0.000000  2659:sub private_tempfiles {
        0 0.000000 0.000000  2660:    my ($self,$param) = self_or_CGI(@_);
        0 0.000000 0.000000  2661:    $CGI::PRIVATE_TEMPFILES = $param if
        0 0.000000 0.000000  2662:    return $CGI::PRIVATE_TEMPFILES;
        0 0.000000 0.000000  2663:}
        0 0.000000 0.000000  2664:END_OF_FUNC
        0 0.000000 0.000000  2665:
        0 0.000000 0.000000  2666:#### Method: default_dtd
        0 0.000000 0.000000  2667:# Set or return the default_dtd global
        0 0.000000 0.000000  2668:####
        0 0.000000 0.000000  2669:'default_dtd' => <<'END_OF_FUNC',
        0 0.000000 0.000000  2670:sub default_dtd {
        0 0.000000 0.000000  2671:    my ($self,$param) = self_or_CGI(@_);
        0 0.000000 0.000000  2672:    $CGI::DEFAULT_DTD = $param if
        0 0.000000 0.000000  2673:    return $CGI::DEFAULT_DTD;
        0 0.000000 0.000000  2674:}
        0 0.000000 0.000000  2675:END_OF_FUNC
        0 0.000000 0.000000  2676:
        0 0.000000 0.000000  2677:# -------------- really private subroutines -
        0 0.000000 0.000000  2678:'previous_or_default' => <<'END_OF_FUNC',
        0 0.000000 0.000000  2679:sub previous_or_default {
        0 0.000000 0.000000  2680:    my($self,$name,$defaults,$override) = @_;
        0 0.000000 0.000000  2681:    my(%selected);
        0 0.000000 0.000000  2682:
        0 0.000000 0.000000  2683:    if (!$override && ($self-
        0 0.000000 0.000000  2684:         defined($self->param($name)) ) ) {
        0 0.000000 0.000000  2685: grep($selected{$_}++,$self->param($name));
        0 0.000000 0.000000  2686:    } elsif (defined($defaults) &&
        0 0.000000 0.000000  2687:      (ref($defaults) eq 'ARRAY')) {
        0 0.000000 0.000000  2688: grep($selected{$_}++,@{$defaults});
            ================ SmallProf version 0.9 ================
                   Profile of /usr/lib/perl5/5.00503/CGI.pm            Page 350
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000  2689:    } else {
        0 0.000000 0.000000  2690: $selected{$defaults}++ if
        0 0.000000 0.000000  2691:    }
        0 0.000000 0.000000  2692:
        0 0.000000 0.000000  2693:    return %selected;
        0 0.000000 0.000000  2694:}
        0 0.000000 0.000000  2695:END_OF_FUNC
        0 0.000000 0.000000  2696:
        0 0.000000 0.000000  2697:'register_parameter' => <<'END_OF_FUNC',
        0 0.000000 0.000000  2698:sub register_parameter {
        0 0.000000 0.000000  2699:    my($self,$param) = @_;
        0 0.000000 0.000000  2700:    $self->{'.parametersToAdd'}->{$param}++;
        0 0.000000 0.000000  2701:}
        0 0.000000 0.000000  2702:END_OF_FUNC
        0 0.000000 0.000000  2703:
        0 0.000000 0.000000  2704:'get_fields' => <<'END_OF_FUNC',
        0 0.000000 0.000000  2705:sub get_fields {
        0 0.000000 0.000000  2706:    my($self) = @_;
        0 0.000000 0.000000  2707:    return $self->CGI::hidden('-
        0 0.000000 0.000000  2708:         '-values'=>[keys %{$self-
        0 0.000000 0.000000  2709:         '-override'=>1);
        0 0.000000 0.000000  2710:}
        0 0.000000 0.000000  2711:END_OF_FUNC
        0 0.000000 0.000000  2712:
        0 0.000000 0.000000  2713:'read_from_cmdline' => <<'END_OF_FUNC',
        0 0.000000 0.000000  2714:sub read_from_cmdline {
        0 0.000000 0.000000  2715:    my($input,@words);
        0 0.000000 0.000000  2716:    my($query_string);
        0 0.000000 0.000000  2717:    if (@ARGV) {
        0 0.000000 0.000000  2718: @words = @ARGV;
        0 0.000000 0.000000  2719:    } else {
        0 0.000000 0.000000  2720: require "shellwords.pl";
        0 0.000000 0.000000  2721: print STDERR "(offline mode: enter
        0 0.000000 0.000000  2722: chomp(@lines = <STDIN>); # remove newlines
        0 0.000000 0.000000  2723: $input = join(" ",@lines);
        0 0.000000 0.000000  2724: @words = &shellwords($input);
        0 0.000000 0.000000  2725:    }
        0 0.000000 0.000000  2726:    foreach (@words) {
        0 0.000000 0.000000  2727: s/\\=/%3D/g;
        0 0.000000 0.000000  2728: s/\\&/%26/g;
        0 0.000000 0.000000  2729:    }
        0 0.000000 0.000000  2730:
        0 0.000000 0.000000  2731:    if ("@words"=~/=/) {
        0 0.000000 0.000000  2732: $query_string = join('&',@words);
        0 0.000000 0.000000  2733:    } else {
        0 0.000000 0.000000  2734: $query_string = join('+',@words);
        0 0.000000 0.000000  2735:    }
        0 0.000000 0.000000  2736:    return $query_string;
        0 0.000000 0.000000  2737:}
        0 0.000000 0.000000  2738:END_OF_FUNC
        0 0.000000 0.000000  2739:
        0 0.000000 0.000000  2740:#####
        0 0.000000 0.000000  2741:# subroutine: read_multipart
        0 0.000000 0.000000  2742:#
        0 0.000000 0.000000  2743:# Read multipart data and store it into our
        0 0.000000 0.000000  2744:# An interesting feature is that if any of
            ================ SmallProf version 0.9 ================
                   Profile of /usr/lib/perl5/5.00503/CGI.pm            Page 351
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000  2745:# create a temporary file and open up a
        0 0.000000 0.000000  2746:# caller can read from it if necessary.
        0 0.000000 0.000000  2747:#####
        0 0.000000 0.000000  2748:'read_multipart' => <<'END_OF_FUNC',
        0 0.000000 0.000000  2749:sub read_multipart {
        0 0.000000 0.000000  2750:    my($self,$boundary,$length,$filehandle) =
        0 0.000000 0.000000  2751:    my($buffer) = $self-
        0 0.000000 0.000000  2752:    return unless $buffer;
        0 0.000000 0.000000  2753:    my(%header,$body);
        0 0.000000 0.000000  2754:    my $filenumber = 0;
        0 0.000000 0.000000  2755:    while (!$buffer->eof) {
        0 0.000000 0.000000  2756: %header = $buffer->readHeader;
        0 0.000000 0.000000  2757: die "Malformed multipart POST\n" unless
        0 0.000000 0.000000  2758:
        0 0.000000 0.000000  2759: my($param)= $header{'Content-
        0 0.000000 0.000000  2760:
        0 0.000000 0.000000  2761: # Bug:  Netscape doesn't escape quotation
        0 0.000000 0.000000  2762: my($filename) = $header{'Content-
        0 0.000000 0.000000  2763:
        0 0.000000 0.000000  2764: # add this parameter to our list
        0 0.000000 0.000000  2765: $self->add_parameter($param);
        0 0.000000 0.000000  2766:
        0 0.000000 0.000000  2767: # If no filename specified, then just read
        0 0.000000 0.000000  2768: # to our parameter list.
        0 0.000000 0.000000  2769: unless ($filename) {
        0 0.000000 0.000000  2770:     my($value) = $buffer->readBody;
        0 0.000000 0.000000  2771:     push(@{$self->{$param}},$value);
        0 0.000000 0.000000  2772:     next;
        0 0.000000 0.000000  2773: }
        0 0.000000 0.000000  2774:
        0 0.000000 0.000000  2775: my ($tmpfile,$tmp,$filehandle);
        0 0.000000 0.000000  2776:      UPLOADS: {
        0 0.000000 0.000000  2777:   # If we get here, then we are dealing with
        0 0.000000 0.000000  2778:   # uploaded form.  Save the data to a
        0 0.000000 0.000000  2779:   # the file for reading.
        0 0.000000 0.000000  2780:
        0 0.000000 0.000000  2781:   # skip the file if uploads disabled
        0 0.000000 0.000000  2782:   if ($DISABLE_UPLOADS) {
        0 0.000000 0.000000  2783:       while (defined($data = $buffer->read))
        0 0.000000 0.000000  2784:       last UPLOADS;
        0 0.000000 0.000000  2785:   }
        0 0.000000 0.000000  2786:
        0 0.000000 0.000000  2787:   $tmpfile = new TempFile;
        0 0.000000 0.000000  2788:   $tmp = $tmpfile->as_string;
        0 0.000000 0.000000  2789:
        0 0.000000 0.000000  2790:   $filehandle = Fh-
        0 0.000000 0.000000  2791:
        0 0.000000 0.000000  2792:   $CGI::DefaultClass->binmode($filehandle)
        0 0.000000 0.000000  2793:   chmod 0600,$tmp;    # only the owner can
        0 0.000000 0.000000  2794:
        0 0.000000 0.000000  2795:   my ($data);
        0 0.000000 0.000000  2796:   local($\) = '';
        0 0.000000 0.000000  2797:   while (defined($data = $buffer->read)) {
        0 0.000000 0.000000  2798:       print $filehandle $data;
        0 0.000000 0.000000  2799:   }
        0 0.000000 0.000000  2800:
            ================ SmallProf version 0.9 ================
                   Profile of /usr/lib/perl5/5.00503/CGI.pm            Page 352
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000  2801:   # back up to beginning of file
        0 0.000000 0.000000  2802:   seek($filehandle,0,0);
        0 0.000000 0.000000  2803:   $CGI::DefaultClass->binmode($filehandle)
        0 0.000000 0.000000  2804:
        0 0.000000 0.000000  2805:   # Save some information about the uploaded
        0 0.000000 0.000000  2806:   # at it later.
        0 0.000000 0.000000  2807:   $self->{'.tmpfiles'}->{$filename}= {
        0 0.000000 0.000000  2808:       name => $tmpfile,
        0 0.000000 0.000000  2809:       info => {%header},
        0 0.000000 0.000000  2810:   };
        0 0.000000 0.000000  2811:   push(@{$self->{$param}},$filehandle);
        0 0.000000 0.000000  2812:      }
        0 0.000000 0.000000  2813:    }
        0 0.000000 0.000000  2814:}
        0 0.000000 0.000000  2815:END_OF_FUNC
        0 0.000000 0.000000  2816:
        0 0.000000 0.000000  2817:'tmpFileName' => <<'END_OF_FUNC',
        0 0.000000 0.000000  2818:sub tmpFileName {
        0 0.000000 0.000000  2819:    my($self,$filename) =
        0 0.000000 0.000000  2820:    return $self->{'.tmpfiles'}->{$filename}-
        0 0.000000 0.000000  2821: $self->{'.tmpfiles'}->{$filename}->{name}-
        0 0.000000 0.000000  2822:     : '';
        0 0.000000 0.000000  2823:}
        0 0.000000 0.000000  2824:END_OF_FUNC
        0 0.000000 0.000000  2825:
        0 0.000000 0.000000  2826:'uploadInfo' => <<'END_OF_FUNC',
        0 0.000000 0.000000  2827:sub uploadInfo {
        0 0.000000 0.000000  2828:    my($self,$filename) =
        0 0.000000 0.000000  2829:    return $self->{'.tmpfiles'}->{$filename}-
        0 0.000000 0.000000  2830:}
        0 0.000000 0.000000  2831:END_OF_FUNC
        0 0.000000 0.000000  2832:
        0 0.000000 0.000000  2833:# internal routine, don't use
        0 0.000000 0.000000  2834:'_set_values_and_labels' => <<'END_OF_FUNC',
        0 0.000000 0.000000  2835:sub _set_values_and_labels {
        0 0.000000 0.000000  2836:    my $self = shift;
        0 0.000000 0.000000  2837:    my ($v,$l,$n) = @_;
        0 0.000000 0.000000  2838:    $$l = $v if ref($v) eq 'HASH' &&
        0 0.000000 0.000000  2839:    return $self->param($n) if !defined($v);
        0 0.000000 0.000000  2840:    return $v if !ref($v);
        0 0.000000 0.000000  2841:    return ref($v) eq 'HASH' ? keys %$v :
        0 0.000000 0.000000  2842:}
        0 0.000000 0.000000  2843:END_OF_FUNC
        0 0.000000 0.000000  2844:
        0 0.000000 0.000000  2845:'_compile_all' => <<'END_OF_FUNC',
        0 0.000000 0.000000  2846:sub _compile_all {
        0 0.000000 0.000000  2847:    foreach (@_) {
        0 0.000000 0.000000  2848: next if defined(&$_);
        0 0.000000 0.000000  2849: $AUTOLOAD = "CGI::$_";
        0 0.000000 0.000000  2850: _compile();
        0 0.000000 0.000000  2851:    }
        0 0.000000 0.000000  2852:}
        0 0.000000 0.000000  2853:END_OF_FUNC
        0 0.000000 0.000000  2854:
        0 0.000000 0.000000  2855:);
        0 0.000000 0.000000  2856:END_OF_AUTOLOAD
            ================ SmallProf version 0.9 ================
                   Profile of /usr/lib/perl5/5.00503/CGI.pm            Page 353
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000  2857:;
        0 0.000000 0.000000  2858:
        0 0.000000 0.000000  2859:#############################################
        0 0.000000 0.000000  2860:# Globals and stubs for other packages that
        0 0.000000 0.000000  2861:#############################################
        0 0.000000 0.000000  2862:
        0 0.000000 0.000000  2863:################### Fh -- lightweight
        0 0.000000 0.000000  2864:package Fh;
        0 0.000000 0.000000  2865:use overload
        0 0.000000 0.000000  2866:    '""'  => \&asString,
        0 0.000000 0.000000  2867:    'cmp' => \&compare,
        0 0.000000 0.000000  2868:    'fallback'=>1;
        0 0.000000 0.000000  2869:
        0 0.000000 0.000000  2870:$FH='fh00000';
        0 0.000000 0.000000  2871:
        0 0.000000 0.000000  2872:*Fh::AUTOLOAD = \&CGI::AUTOLOAD;
        0 0.000000 0.000000  2873:
        0 0.000000 0.000000  2874:$AUTOLOADED_ROUTINES = '';      # prevent -w
        0 0.000000 0.000000  2875:$AUTOLOADED_ROUTINES=<<'END_OF_AUTOLOAD';
        0 0.000000 0.000000  2876:%SUBS =  (
        0 0.000000 0.000000  2877:'asString' => <<'END_OF_FUNC',
        0 0.000000 0.000000  2878:sub asString {
        0 0.000000 0.000000  2879:    my $self = shift;
        0 0.000000 0.000000  2880:    # get rid of package name
        0 0.000000 0.000000  2881:    (my $i = $$self) =~ s/^\*(\w+::)+//;
        0 0.000000 0.000000  2882:    $i =~ s/\\(.)/$1/g;
        0 0.000000 0.000000  2883:    return $i;
        0 0.000000 0.000000  2884:# BEGIN DEAD CODE
        0 0.000000 0.000000  2885:# This was an extremely clever patch that
        0 0.000000 0.000000  2886:# Unfortunately it relied on another bug that
        0 0.000000 0.000000  2887:# The underlying bug has been fixed, so this
        0 0.000000 0.000000  2888:# "strict refs" still works for some reason.
        0 0.000000 0.000000  2889:#    my $self = shift;
        0 0.000000 0.000000  2890:#    return ${*{$self}{SCALAR}};
        0 0.000000 0.000000  2891:# END DEAD CODE
        0 0.000000 0.000000  2892:}
        0 0.000000 0.000000  2893:END_OF_FUNC
        0 0.000000 0.000000  2894:
        0 0.000000 0.000000  2895:'compare' => <<'END_OF_FUNC',
        0 0.000000 0.000000  2896:sub compare {
        0 0.000000 0.000000  2897:    my $self = shift;
        0 0.000000 0.000000  2898:    my $value = shift;
        0 0.000000 0.000000  2899:    return "$self" cmp $value;
        0 0.000000 0.000000  2900:}
        0 0.000000 0.000000  2901:END_OF_FUNC
        0 0.000000 0.000000  2902:
        0 0.000000 0.000000  2903:'new'  => <<'END_OF_FUNC',
        0 0.000000 0.000000  2904:sub new {
        0 0.000000 0.000000  2905:    my($pack,$name,$file,$delete) = @_;
        0 0.000000 0.000000  2906:    require Fcntl unless defined
        0 0.000000 0.000000  2907:    ++$FH;
        0 0.000000 0.000000  2908:    my $ref = \*{'Fh::' . quotemeta($name)};
        0 0.000000 0.000000  2909:
        0 0.000000 0.000000  2910: || die "CGI open of $file: $!\n";
        0 0.000000 0.000000  2911:    unlink($file) if $delete;
        0 0.000000 0.000000  2912:    delete $Fh::{$FH};
            ================ SmallProf version 0.9 ================
                   Profile of /usr/lib/perl5/5.00503/CGI.pm            Page 354
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000  2913:    return bless $ref,$pack;
        0 0.000000 0.000000  2914:}
        0 0.000000 0.000000  2915:END_OF_FUNC
        0 0.000000 0.000000  2916:
        0 0.000000 0.000000  2917:'DESTROY'  => <<'END_OF_FUNC',
        0 0.000000 0.000000  2918:sub DESTROY {
        0 0.000000 0.000000  2919:    my $self = shift;
        0 0.000000 0.000000  2920:    close $self;
        0 0.000000 0.000000  2921:}
        0 0.000000 0.000000  2922:END_OF_FUNC
        0 0.000000 0.000000  2923:
        0 0.000000 0.000000  2924:);
        0 0.000000 0.000000  2925:END_OF_AUTOLOAD
        0 0.000000 0.000000  2926:
        0 0.000000 0.000000  2927:######################## MultipartBuffer
        0 0.000000 0.000000  2928:package MultipartBuffer;
        0 0.000000 0.000000  2929:
        0 0.000000 0.000000  2930:# how many bytes to read at a time.  We use
        0 0.000000 0.000000  2931:# a 4K buffer by default.
        0 0.000000 0.000000  2932:$INITIAL_FILLUNIT = 1024 * 4;
        0 0.000000 0.000000  2933:$TIMEOUT = 240*60;       # 4 hour timeout for
        0 0.000000 0.000000  2934:$SPIN_LOOP_MAX = 2000;  # bug fix for some
        0 0.000000 0.000000  2935:$CRLF=$CGI::CRLF;
        0 0.000000 0.000000  2936:
        0 0.000000 0.000000  2937:#reuse the autoload function
        0 0.000000 0.000000  2938:*MultipartBuffer::AUTOLOAD = \&CGI::AUTOLOAD;
        0 0.000000 0.000000  2939:
        0 0.000000 0.000000  2940:# avoid autoloader warnings
        0 0.000000 0.000000  2941:sub DESTROY {}
        0 0.000000 0.000000  2942:
        0 0.000000 0.000000  2943:#############################################
        0 0.000000 0.000000  2944:################# THESE FUNCTIONS ARE
        0 0.000000 0.000000  2945:#############################################
        0 0.000000 0.000000  2946:$AUTOLOADED_ROUTINES = '';      # prevent -w
        0 0.000000 0.000000  2947:$AUTOLOADED_ROUTINES=<<'END_OF_AUTOLOAD';
        0 0.000000 0.000000  2948:%SUBS =  (
        0 0.000000 0.000000  2949:
        0 0.000000 0.000000  2950:'new' => <<'END_OF_FUNC',
        0 0.000000 0.000000  2951:sub new {
        0 0.000000 0.000000  2952:
        0 0.000000 0.000000  2953:    $FILLUNIT = $INITIAL_FILLUNIT;
        0 0.000000 0.000000  2954:    my $IN;
        0 0.000000 0.000000  2955:    if ($filehandle) {
        0 0.000000 0.000000  2956: my($package) = caller;
        0 0.000000 0.000000  2957: # force into caller's package if necessary
        0 0.000000 0.000000  2958: $IN = $filehandle=~/[':]/ ? $filehandle :
        0 0.000000 0.000000  2959:    }
        0 0.000000 0.000000  2960:    $IN = "main::STDIN" unless $IN;
        0 0.000000 0.000000  2961:
        0 0.000000 0.000000  2962:    $CGI::DefaultClass->binmode($IN) if
        0 0.000000 0.000000  2963:
        0 0.000000 0.000000  2964:    # If the user types garbage into the file
        0 0.000000 0.000000  2965:    # then Netscape passes NOTHING to the
        0 0.000000 0.000000  2966:    # We may hang on this read in that case.
        0 0.000000 0.000000  2967:    # a read timeout.  If nothing is ready to
        0 0.000000 0.000000  2968:    # by then, we return.
            ================ SmallProf version 0.9 ================
                   Profile of /usr/lib/perl5/5.00503/CGI.pm            Page 355
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000  2969:
        0 0.000000 0.000000  2970:    # Netscape seems to be a little bit
        0 0.000000 0.000000  2971:    # about providing boundary strings.
        0 0.000000 0.000000  2972:    if ($boundary) {
        0 0.000000 0.000000  2973:
        0 0.000000 0.000000  2974: # Under the MIME spec, the boundary consists
        0 0.000000 0.000000  2975: # characters "--" PLUS the Boundary string
        0 0.000000 0.000000  2976:
        0 0.000000 0.000000  2977: # BUG: IE 3.01 on the Macintosh uses just
        0 0.000000 0.000000  2978: # the two extra hyphens.  We do a special
        0 0.000000 0.000000  2979: $boundary = "--$boundary" unless
        0 0.000000 0.000000  2980:
        0 0.000000 0.000000  2981:    } else { # otherwise we find it ourselves
        0 0.000000 0.000000  2982: my($old);
        0 0.000000 0.000000  2983: ($old,$/) = ($/,$CRLF); # read a CRLF-
        0 0.000000 0.000000  2984: $boundary = <$IN>;      # BUG: This won't
        0 0.000000 0.000000  2985: $length -= length($boundary);
        0 0.000000 0.000000  2986: chomp($boundary);               # remove the
        0 0.000000 0.000000  2987: $/ = $old;                      # restore
        0 0.000000 0.000000  2988:    }
        0 0.000000 0.000000  2989:
        0 0.000000 0.000000  2990:    my $self = {LENGTH=>$length,
        0 0.000000 0.000000  2991:  BOUNDARY=>$boundary,
        0 0.000000 0.000000  2992:  IN=>$IN,
        0 0.000000 0.000000  2993:  INTERFACE=>$interface,
        0 0.000000 0.000000  2994:  BUFFER=>'',
        0 0.000000 0.000000  2995:     };
        0 0.000000 0.000000  2996:
        0 0.000000 0.000000  2997:    $FILLUNIT = length($boundary)
        0 0.000000 0.000000  2998: if length($boundary) > $FILLUNIT;
        0 0.000000 0.000000  2999:
        0 0.000000 0.000000  3000:    my $retval = bless $self,ref $package ||
        0 0.000000 0.000000  3001:
        0 0.000000 0.000000  3002:    # Read the preamble and the topmost
        0 0.000000 0.000000  3003:    while ($self->read(0)) { }
        0 0.000000 0.000000  3004:    die "Malformed multipart POST\n" if
        0 0.000000 0.000000  3005:
        0 0.000000 0.000000  3006:    return $retval;
        0 0.000000 0.000000  3007:}
        0 0.000000 0.000000  3008:END_OF_FUNC
        0 0.000000 0.000000  3009:
        0 0.000000 0.000000  3010:'readHeader' => <<'END_OF_FUNC',
        0 0.000000 0.000000  3011:sub readHeader {
        0 0.000000 0.000000  3012:    my($self) = @_;
        0 0.000000 0.000000  3013:    my($end);
        0 0.000000 0.000000  3014:    my($ok) = 0;
        0 0.000000 0.000000  3015:    my($bad) = 0;
        0 0.000000 0.000000  3016:
        0 0.000000 0.000000  3017:    if ($CGI::OS eq 'VMS') {  # tssk, tssk:
        0 0.000000 0.000000  3018: local($CRLF) = "\015\012";
        0 0.000000 0.000000  3019:    }
        0 0.000000 0.000000  3020:
        0 0.000000 0.000000  3021:    do {
        0 0.000000 0.000000  3022: $self->fillBuffer($FILLUNIT);
        0 0.000000 0.000000  3023: $ok++ if ($end = index($self-
        0 0.000000 0.000000  3024: $ok++ if $self->{BUFFER} eq '';
            ================ SmallProf version 0.9 ================
                   Profile of /usr/lib/perl5/5.00503/CGI.pm            Page 356
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000  3025: $bad++ if !$ok && $self->{LENGTH} <= 0;
        0 0.000000 0.000000  3026: # this was a bad idea
        0 0.000000 0.000000  3027: # $FILLUNIT *= 2 if length($self->{BUFFER})
        0 0.000000 0.000000  3028:    } until $ok || $bad;
        0 0.000000 0.000000  3029:    return () if $bad;
        0 0.000000 0.000000  3030:
        0 0.000000 0.000000  3031:    my($header) = substr($self-
        0 0.000000 0.000000  3032:    substr($self->{BUFFER},0,$end+4) = '';
        0 0.000000 0.000000  3033:    my %return;
        0 0.000000 0.000000  3034:
        0 0.000000 0.000000  3035:
        0 0.000000 0.000000  3036:    # See RFC 2045 Appendix A and RFC 822
        0 0.000000 0.000000  3037:    #   (Folding Long Header Fields), 3.4.3
        0 0.000000 0.000000  3038:    #   and 3.4.5 (Quoted-Strings).
        0 0.000000 0.000000  3039:
        0 0.000000 0.000000  3040:    my $token = '[-\w!\#$%&\'*+.^_\`|{}~]';
        0 0.000000 0.000000  3041:    $header=~s/$CRLF\s+/ /og;  # merge
        0 0.000000 0.000000  3042:    while
        0 0.000000 0.000000  3043: my ($field_name,$field_value) = ($1,$2); #
        0 0.000000 0.000000  3044: $field_name =~ s/\b(\w)/uc($1)/eg;
        0 0.000000 0.000000  3045: $return{$field_name}=$field_value;
        0 0.000000 0.000000  3046:    }
        0 0.000000 0.000000  3047:    return %return;
        0 0.000000 0.000000  3048:}
        0 0.000000 0.000000  3049:END_OF_FUNC
        0 0.000000 0.000000  3050:
        0 0.000000 0.000000  3051:# This reads and returns the body as a single
        0 0.000000 0.000000  3052:'readBody' => <<'END_OF_FUNC',
        0 0.000000 0.000000  3053:sub readBody {
        0 0.000000 0.000000  3054:    my($self) = @_;
        0 0.000000 0.000000  3055:    my($data);
        0 0.000000 0.000000  3056:    my($returnval)='';
        0 0.000000 0.000000  3057:    while (defined($data = $self->read)) {
        0 0.000000 0.000000  3058: $returnval .= $data;
        0 0.000000 0.000000  3059:    }
        0 0.000000 0.000000  3060:    return $returnval;
        0 0.000000 0.000000  3061:}
        0 0.000000 0.000000  3062:END_OF_FUNC
        0 0.000000 0.000000  3063:
        0 0.000000 0.000000  3064:# This will read $bytes or until the boundary
        0 0.000000 0.000000  3065:# first.  After the boundary is hit, we
        0 0.000000 0.000000  3066:# skip over the boundary and begin reading
        0 0.000000 0.000000  3067:'read' => <<'END_OF_FUNC',
        0 0.000000 0.000000  3068:sub read {
        0 0.000000 0.000000  3069:    my($self,$bytes) = @_;
        0 0.000000 0.000000  3070:
        0 0.000000 0.000000  3071:    # default number of bytes to read
        0 0.000000 0.000000  3072:    $bytes = $bytes || $FILLUNIT;
        0 0.000000 0.000000  3073:
        0 0.000000 0.000000  3074:    # Fill up our internal buffer in such a
        0 0.000000 0.000000  3075:    # is never split between reads.
        0 0.000000 0.000000  3076:    $self->fillBuffer($bytes);
        0 0.000000 0.000000  3077:
        0 0.000000 0.000000  3078:    # Find the boundary in the buffer (it may
        0 0.000000 0.000000  3079:    my $start = index($self->{BUFFER},$self-
        0 0.000000 0.000000  3080:    # protect against malformed multipart
            ================ SmallProf version 0.9 ================
                   Profile of /usr/lib/perl5/5.00503/CGI.pm            Page 357
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000  3081:    die "Malformed multipart POST\n" unless
        0 0.000000 0.000000  3082:
        0 0.000000 0.000000  3083:    # If the boundary begins the data, then
        0 0.000000 0.000000  3084:    # and return undef.  The +2 here is a
        0 0.000000 0.000000  3085:    # remove the CR/LF pair at the end of the
        0 0.000000 0.000000  3086:    if ($start == 0) {
        0 0.000000 0.000000  3087:
        0 0.000000 0.000000  3088: # clear us out completely if we've hit the
        0 0.000000 0.000000  3089: if (index($self->{BUFFER},"$self-
        0 0.000000 0.000000  3090:     $self->{BUFFER}='';
        0 0.000000 0.000000  3091:     $self->{LENGTH}=0;
        0 0.000000 0.000000  3092:     return undef;
        0 0.000000 0.000000  3093: }
        0 0.000000 0.000000  3094:
        0 0.000000 0.000000  3095: # just remove the boundary.
        0 0.000000 0.000000  3096: substr($self->{BUFFER},0,length($self-
        0 0.000000 0.000000  3097: return undef;
        0 0.000000 0.000000  3098:    }
        0 0.000000 0.000000  3099:
        0 0.000000 0.000000  3100:    my $bytesToReturn;
        0 0.000000 0.000000  3101:    if ($start > 0) {           # read up to
        0 0.000000 0.000000  3102: $bytesToReturn = $start > $bytes ? $bytes :
        0 0.000000 0.000000  3103:    } else {    # read the requested number
        0 0.000000 0.000000  3104: # leave enough bytes in the buffer to allow
        0 0.000000 0.000000  3105: # the boundary.  Thanks to Kevin Hendrick
        0 0.000000 0.000000  3106: # this one.
        0 0.000000 0.000000  3107: $bytesToReturn = $bytes - (length($self-
        0 0.000000 0.000000  3108:    }
        0 0.000000 0.000000  3109:
        0 0.000000 0.000000  3110:    my $returnval=substr($self-
        0 0.000000 0.000000  3111:    substr($self-
        0 0.000000 0.000000  3112:
        0 0.000000 0.000000  3113:    # If we hit the boundary, remove the CRLF
        0 0.000000 0.000000  3114:    return ($start > 0) ?
        0 0.000000 0.000000  3115:}
        0 0.000000 0.000000  3116:END_OF_FUNC
        0 0.000000 0.000000  3117:
        0 0.000000 0.000000  3118:
        0 0.000000 0.000000  3119:# This fills up our internal buffer in such a
        0 0.000000 0.000000  3120:# boundary is never split between reads
        0 0.000000 0.000000  3121:'fillBuffer' => <<'END_OF_FUNC',
        0 0.000000 0.000000  3122:sub fillBuffer {
        0 0.000000 0.000000  3123:    my($self,$bytes) = @_;
        0 0.000000 0.000000  3124:    return unless $self->{LENGTH};
        0 0.000000 0.000000  3125:
        0 0.000000 0.000000  3126:    my($boundaryLength) = length($self-
        0 0.000000 0.000000  3127:    my($bufferLength) = length($self-
        0 0.000000 0.000000  3128:    my($bytesToRead) = $bytes - $bufferLength
        0 0.000000 0.000000  3129:    $bytesToRead = $self->{LENGTH} if $self-
        0 0.000000 0.000000  3130:
        0 0.000000 0.000000  3131:    # Try to read some data.  We may hang
        0 0.000000 0.000000  3132:    my $bytesRead = $self->{INTERFACE}-
        0 0.000000 0.000000  3133:        \$self->{BUFFER},
        0 0.000000 0.000000  3134:        $bytesToRead,
        0 0.000000 0.000000  3135:        $bufferLength);
        0 0.000000 0.000000  3136:    $self->{BUFFER} = '' unless defined
            ================ SmallProf version 0.9 ================
                   Profile of /usr/lib/perl5/5.00503/CGI.pm            Page 358
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000  3137:
        0 0.000000 0.000000  3138:    # An apparent bug in the Apache server
        0 0.000000 0.000000  3139:    # to return zero bytes repeatedly without
        0 0.000000 0.000000  3140:    # remote user aborts during a file
        0 0.000000 0.000000  3141:    # they manage this, but the workaround is
        0 0.000000 0.000000  3142:    # more than SPIN_LOOP_MAX consecutive
        0 0.000000 0.000000  3143:    if ($bytesRead == 0) {
        0 0.000000 0.000000  3144: die  "CGI.pm: Server closed socket during
        0 0.000000 0.000000  3145:     if ($self->{ZERO_LOOP_COUNTER}++ >=
        0 0.000000 0.000000  3146:    } else {
        0 0.000000 0.000000  3147: $self->{ZERO_LOOP_COUNTER}=0;
        0 0.000000 0.000000  3148:    }
        0 0.000000 0.000000  3149:
        0 0.000000 0.000000  3150:    $self->{LENGTH} -= $bytesRead;
        0 0.000000 0.000000  3151:}
        0 0.000000 0.000000  3152:END_OF_FUNC
        0 0.000000 0.000000  3153:
        0 0.000000 0.000000  3154:
        0 0.000000 0.000000  3155:# Return true when we've finished reading
        0 0.000000 0.000000  3156:'eof' => <<'END_OF_FUNC'
        0 0.000000 0.000000  3157:sub eof {
        0 0.000000 0.000000  3158:    my($self) = @_;
        0 0.000000 0.000000  3159:    return 1 if (length($self->{BUFFER}) ==
        0 0.000000 0.000000  3160:   && ($self->{LENGTH} <= 0);
        0 0.000000 0.000000  3161:    undef;
        0 0.000000 0.000000  3162:}
        0 0.000000 0.000000  3163:END_OF_FUNC
        0 0.000000 0.000000  3164:
        0 0.000000 0.000000  3165:);
        0 0.000000 0.000000  3166:END_OF_AUTOLOAD
        0 0.000000 0.000000  3167:
        0 0.000000 0.000000  3168:#############################################
        0 0.000000 0.000000  3169:################################## TEMPORARY
        0 0.000000 0.000000  3170:#############################################
        0 0.000000 0.000000  3171:package TempFile;
        0 0.000000 0.000000  3172:
        0 0.000000 0.000000  3173:$SL = $CGI::SL;
        0 0.000000 0.000000  3174:$MAC = $CGI::OS eq 'MACINTOSH';
        0 0.000000 0.000000  3175:my ($vol) = $MAC ? MacPerl::Volumes() =~
        0 0.000000 0.000000  3176:unless ($TMPDIRECTORY) {
        0 0.000000 0.000000  3177:
        0 0.000000 0.000000  3178:
        0 0.000000 0.000000  3179:    "${SL}WWW_ROOT");
        0 0.000000 0.000000  3180:    foreach (@TEMP) {
        0 0.000000 0.000000  3181: do {$TMPDIRECTORY = $_; last} if -d $_ && -w
        0 0.000000 0.000000  3182:    }
        0 0.000000 0.000000  3183:}
        0 0.000000 0.000000  3184:
        0 0.000000 0.000000  3185:$TMPDIRECTORY  = $MAC ? "" : "." unless
        0 0.000000 0.000000  3186:$SEQUENCE=0;
        0 0.000000 0.000000  3187:$MAXTRIES = 5000;
        0 0.000000 0.000000  3188:
        0 0.000000 0.000000  3189:# cute feature, but overload implementation
        0 0.000000 0.000000  3190:# %OVERLOAD = ('""'=>'as_string');
        0 0.000000 0.000000  3191:*TempFile::AUTOLOAD = \&CGI::AUTOLOAD;
        0 0.000000 0.000000  3192:
            ================ SmallProf version 0.9 ================
                   Profile of /usr/lib/perl5/5.00503/CGI.pm            Page 359
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000  3193:#############################################
        0 0.000000 0.000000  3194:################# THESE FUNCTIONS ARE
        0 0.000000 0.000000  3195:#############################################
        0 0.000000 0.000000  3196:$AUTOLOADED_ROUTINES = '';      # prevent -w
        0 0.000000 0.000000  3197:$AUTOLOADED_ROUTINES=<<'END_OF_AUTOLOAD';
        0 0.000000 0.000000  3198:%SUBS = (
        0 0.000000 0.000000  3199:
        0 0.000000 0.000000  3200:'new' => <<'END_OF_FUNC',
        0 0.000000 0.000000  3201:sub new {
        0 0.000000 0.000000  3202:    my($package) = @_;
        0 0.000000 0.000000  3203:    my $directory;
        0 0.000000 0.000000  3204:    my $i;
        0 0.000000 0.000000  3205:    for ($i = 0; $i < $MAXTRIES; $i++) {
        0 0.000000 0.000000  3206: $directory =
        0 0.000000 0.000000  3207: last if ! -f $directory;
        0 0.000000 0.000000  3208:    }
        0 0.000000 0.000000  3209:    return bless \$directory;
        0 0.000000 0.000000  3210:}
        0 0.000000 0.000000  3211:END_OF_FUNC
        0 0.000000 0.000000  3212:
        0 0.000000 0.000000  3213:'DESTROY' => <<'END_OF_FUNC',
        0 0.000000 0.000000  3214:sub DESTROY {
        0 0.000000 0.000000  3215:    my($self) = @_;
        0 0.000000 0.000000  3216:    unlink $$self;              # get rid of
        0 0.000000 0.000000  3217:}
        0 0.000000 0.000000  3218:END_OF_FUNC
        0 0.000000 0.000000  3219:
        0 0.000000 0.000000  3220:'as_string' => <<'END_OF_FUNC'
        0 0.000000 0.000000  3221:sub as_string {
        0 0.000000 0.000000  3222:    my($self) = @_;
        0 0.000000 0.000000  3223:    return $$self;
        0 0.000000 0.000000  3224:}
        0 0.000000 0.000000  3225:END_OF_FUNC
        0 0.000000 0.000000  3226:
        0 0.000000 0.000000  3227:);
        0 0.000000 0.000000  3228:END_OF_AUTOLOAD
        0 0.000000 0.000000  3229:
        0 0.000000 0.000000  3230:package CGI;
        0 0.000000 0.000000  3231:
        0 0.000000 0.000000  3232:# We get a whole bunch of warnings about
        0 0.000000 0.000000  3233:# when running with the -w switch.  Touch
        0 0.000000 0.000000  3234:# warnings.  This is ugly and I hate it.
        0 0.000000 0.000000  3235:if ($^W) {
        0 0.000000 0.000000  3236:    $CGI::CGI = '';
        0 0.000000 0.000000  3237:    $CGI::CGI=<<EOF;
        0 0.000000 0.000000  3238:    $CGI::VERSION;
        0 0.000000 0.000000  3239:    $MultipartBuffer::SPIN_LOOP_MAX;
        0 0.000000 0.000000  3240:    $MultipartBuffer::CRLF;
        0 0.000000 0.000000  3241:    $MultipartBuffer::TIMEOUT;
        0 0.000000 0.000000  3242:    $MultipartBuffer::INITIAL_FILLUNIT;
        0 0.000000 0.000000  3243:    $TempFile::SEQUENCE;
        0 0.000000 0.000000  3244:EOF
        0 0.000000 0.000000  3245:    ;
        0 0.000000 0.000000  3246:}
        0 0.000000 0.000000  3247:
        0 0.000000 0.000000  3248:1;
            ================ SmallProf version 0.9 ================
                   Profile of /usr/lib/perl5/5.00503/CGI.pm            Page 360
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000  3249:
        0 0.000000 0.000000  3250:__END__
            ================ SmallProf version 0.9 ================
                 Profile of /usr/lib/perl5/5.00503/CGI/Carp.pm         Page 361
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000     1:package CGI::Carp;
        0 0.000000 0.000000     2:
        0 0.000000 0.000000     3:=head1 NAME
        0 0.000000 0.000000     4:
        0 0.000000 0.000000     5:
        0 0.000000 0.000000     6:
        0 0.000000 0.000000     7:
        0 0.000000 0.000000     8:
        0 0.000000 0.000000     9:
        0 0.000000 0.000000    10:
        0 0.000000 0.000000    11:
        0 0.000000 0.000000    12:
        0 0.000000 0.000000    13:
        0 0.000000 0.000000    14:
        0 0.000000 0.000000    15:
        0 0.000000 0.000000    16:
        0 0.000000 0.000000    17:
        0 0.000000 0.000000    18:
        0 0.000000 0.000000    19:
        0 0.000000 0.000000    20:
        0 0.000000 0.000000    21:
        0 0.000000 0.000000    22:
        0 0.000000 0.000000    23:
        0 0.000000 0.000000    24:
        0 0.000000 0.000000    25:
        0 0.000000 0.000000    26:
        0 0.000000 0.000000    27:
        0 0.000000 0.000000    28:
        0 0.000000 0.000000    29:
        0 0.000000 0.000000    30:
        0 0.000000 0.000000    31:
        0 0.000000 0.000000    32:
        0 0.000000 0.000000    33:
        0 0.000000 0.000000    34:
        0 0.000000 0.000000    35:
        0 0.000000 0.000000    36:
        0 0.000000 0.000000    37:
        0 0.000000 0.000000    38:
        0 0.000000 0.000000    39:
        0 0.000000 0.000000    40:
        0 0.000000 0.000000    41:
        0 0.000000 0.000000    42:
        0 0.000000 0.000000    43:
        0 0.000000 0.000000    44:
        0 0.000000 0.000000    45:
        0 0.000000 0.000000    46:
        0 0.000000 0.000000    47:
        0 0.000000 0.000000    48:
        0 0.000000 0.000000    49:
        0 0.000000 0.000000    50:
        0 0.000000 0.000000    51:
        0 0.000000 0.000000    52:
        0 0.000000 0.000000    53:
        0 0.000000 0.000000    54:
        0 0.000000 0.000000    55:
        0 0.000000 0.000000    56:
            ================ SmallProf version 0.9 ================
                 Profile of /usr/lib/perl5/5.00503/CGI/Carp.pm         Page 362
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000    57:
        0 0.000000 0.000000    58:
        0 0.000000 0.000000    59:
        0 0.000000 0.000000    60:
        0 0.000000 0.000000    61:
        0 0.000000 0.000000    62:
        0 0.000000 0.000000    63:
        0 0.000000 0.000000    64:
        0 0.000000 0.000000    65:
        0 0.000000 0.000000    66:
        0 0.000000 0.000000    67:
        0 0.000000 0.000000    68:
        0 0.000000 0.000000    69:
        0 0.000000 0.000000    70:
        0 0.000000 0.000000    71:
        0 0.000000 0.000000    72:
        0 0.000000 0.000000    73:
        0 0.000000 0.000000    74:
        0 0.000000 0.000000    75:
        0 0.000000 0.000000    76:
        0 0.000000 0.000000    77:
        0 0.000000 0.000000    78:
        0 0.000000 0.000000    79:
        0 0.000000 0.000000    80:
        0 0.000000 0.000000    81:
        0 0.000000 0.000000    82:
        0 0.000000 0.000000    83:
        0 0.000000 0.000000    84:
        0 0.000000 0.000000    85:
        0 0.000000 0.000000    86:
        0 0.000000 0.000000    87:
        0 0.000000 0.000000    88:
        0 0.000000 0.000000    89:
        0 0.000000 0.000000    90:
        0 0.000000 0.000000    91:
        0 0.000000 0.000000    92:
        0 0.000000 0.000000    93:
        0 0.000000 0.000000    94:
        0 0.000000 0.000000    95:
        0 0.000000 0.000000    96:
        0 0.000000 0.000000    97:
        0 0.000000 0.000000    98:
        0 0.000000 0.000000    99:
        0 0.000000 0.000000   100:
        0 0.000000 0.000000   101:
        0 0.000000 0.000000   102:
        0 0.000000 0.000000   103:
        0 0.000000 0.000000   104:
        0 0.000000 0.000000   105:
        0 0.000000 0.000000   106:
        0 0.000000 0.000000   107:
        0 0.000000 0.000000   108:
        0 0.000000 0.000000   109:
        0 0.000000 0.000000   110:
        0 0.000000 0.000000   111:
        0 0.000000 0.000000   112:
            ================ SmallProf version 0.9 ================
                 Profile of /usr/lib/perl5/5.00503/CGI/Carp.pm         Page 363
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   113:
        0 0.000000 0.000000   114:
        0 0.000000 0.000000   115:
        0 0.000000 0.000000   116:
        0 0.000000 0.000000   117:
        0 0.000000 0.000000   118:
        0 0.000000 0.000000   119:
        0 0.000000 0.000000   120:
        0 0.000000 0.000000   121:
        0 0.000000 0.000000   122:
        0 0.000000 0.000000   123:
        0 0.000000 0.000000   124:
        0 0.000000 0.000000   125:
        0 0.000000 0.000000   126:
        0 0.000000 0.000000   127:
        0 0.000000 0.000000   128:
        0 0.000000 0.000000   129:
        0 0.000000 0.000000   130:
        0 0.000000 0.000000   131:
        0 0.000000 0.000000   132:
        0 0.000000 0.000000   133:
        0 0.000000 0.000000   134:
        0 0.000000 0.000000   135:
        0 0.000000 0.000000   136:
        0 0.000000 0.000000   137:
        0 0.000000 0.000000   138:
        0 0.000000 0.000000   139:
        0 0.000000 0.000000   140:
        0 0.000000 0.000000   141:
        0 0.000000 0.000000   142:
        0 0.000000 0.000000   143:
        0 0.000000 0.000000   144:
        0 0.000000 0.000000   145:
        0 0.000000 0.000000   146:
        0 0.000000 0.000000   147:
        0 0.000000 0.000000   148:
        0 0.000000 0.000000   149:
        0 0.000000 0.000000   150:
        0 0.000000 0.000000   151:
        0 0.000000 0.000000   152:
        0 0.000000 0.000000   153:
        0 0.000000 0.000000   154:
        0 0.000000 0.000000   155:
        0 0.000000 0.000000   156:
        0 0.000000 0.000000   157:
        0 0.000000 0.000000   158:
        0 0.000000 0.000000   159:
        0 0.000000 0.000000   160:
        0 0.000000 0.000000   161:
        0 0.000000 0.000000   162:
        0 0.000000 0.000000   163:
        0 0.000000 0.000000   164:
        0 0.000000 0.000000   165:
        0 0.000000 0.000000   166:
        0 0.000000 0.000000   167:
        0 0.000000 0.000000   168:
            ================ SmallProf version 0.9 ================
                 Profile of /usr/lib/perl5/5.00503/CGI/Carp.pm         Page 364
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   169:
        0 0.000000 0.000000   170:
        0 0.000000 0.000000   171:
        0 0.000000 0.000000   172:
        0 0.000000 0.000000   173:
        0 0.000000 0.000000   174:
        0 0.000000 0.000000   175:
        0 0.000000 0.000000   176:
        0 0.000000 0.000000   177:
        0 0.000000 0.000000   178:
        0 0.000000 0.000000   179:
        0 0.000000 0.000000   180:
        0 0.000000 0.000000   181:
        0 0.000000 0.000000   182:
        0 0.000000 0.000000   183:
        0 0.000000 0.000000   184:
        0 0.000000 0.000000   185:
        0 0.000000 0.000000   186:
        0 0.000000 0.000000   187:require 5.000;
        0 0.000000 0.000000   188:use Exporter;
        0 0.000000 0.000000   189:use Carp;
        0 0.000000 0.000000   190:
        0 0.000000 0.000000   191:@ISA = qw(Exporter);
        0 0.000000 0.000000   192:@EXPORT = qw(confess croak carp);
        0 0.000000 0.000000   193:@EXPORT_OK = qw(carpout fatalsToBrowser wrap
        0 0.000000 0.000000   194:
        0 0.000000 0.000000   195:$main::SIG{__WARN__}=\&CGI::Carp::warn;
        0 0.000000 0.000000   196:$main::SIG{__DIE__}=\&CGI::Carp::die;
        0 0.000000 0.000000   197:$CGI::Carp::VERSION = '1.13';
        0 0.000000 0.000000   198:$CGI::Carp::CUSTOM_MSG = undef;
        0 0.000000 0.000000   199:
        0 0.000000 0.000000   200:# fancy import routine detects and handles
        1 0.000000 0.000000   201:sub import {
        0 0.000000 0.000000   202:    my $pkg = shift;
        0 0.000000 0.000000   203:    my(%routines);
        0 0.000000 0.000000   204:    grep($routines{$_}++,@_,@EXPORT);
        0 0.000000 0.000000   205:    $WRAP++ if $routines{'fatalsToBrowser'}
        0 0.000000 0.000000   206:    my($oldlevel) = $Exporter::ExportLevel;
        0 0.000000 0.000000   207:    $Exporter::ExportLevel = 1;
        0 0.000000 0.000000   208:    Exporter::import($pkg,keys %routines);
        0 0.000000 0.000000   209:    $Exporter::ExportLevel = $oldlevel;
        0 0.000000 0.000000   210:}
        0 0.000000 0.000000   211:
        0 0.000000 0.000000   212:# These are the originals
      220 0.047774 0.030000   213:sub realwarn { CORE::warn(@_); }
        0 0.000000 0.000000   214:sub realdie { CORE::die(@_); }
        0 0.000000 0.000000   215:
      110 0.000000 0.000000   216:sub id {
      110 0.000495 0.000000   217:    my $level = shift;
      110 0.004728 0.010000   218:    my($pack,$file,$line,$sub) =
      110 0.001969 0.010000   219:    my($id) = $file=~m|([^/]+)$|;
      110 0.001557 0.000000   220:    return ($file,$line,$id);
        0 0.000000 0.000000   221:}
        0 0.000000 0.000000   222:
      110 0.000000 0.000000   223:sub stamp {
      110 0.004908 0.000000   224:    my $time = scalar(localtime);
            ================ SmallProf version 0.9 ================
                 Profile of /usr/lib/perl5/5.00503/CGI/Carp.pm         Page 365
       =================================================================
    count wall tm  cpu time line
      110 0.002029 0.010000   225:    my $frame = 0;
      110 0.000422 0.000000   226:    my ($id,$pack,$file);
      110 0.000292 0.000000   227:    do {
     1079 0.003730 0.020000   228: $id = $file;
     1079 0.023886 0.060000   229: ($pack,$file) = caller($frame++);
        0 0.000000 0.000000   230:    } until !$file;
      110 0.001598 0.000000   231:    ($id) = $id=~m|([^/]+)$|;
      110 0.001495 0.000000   232:    return "[$time] $id: ";
        0 0.000000 0.000000   233:}
        0 0.000000 0.000000   234:
      110 0.000000 0.000000   235:sub warn {
      110 0.000747 0.000000   236:    my $message = shift;
      110 0.007640 0.010000   237:    my($file,$line,$id) = id(1);
      110 0.000768 0.010000   238:    $message .= " at $file line $line.\n"
      110 0.007665 0.020000   239:    my $stamp = stamp;
      110 0.001784 0.010000   240:    $message=~s/^/$stamp/gm;
      110 0.008397 0.000000   241:    realwarn $message;
        0 0.000000 0.000000   242:}
        0 0.000000 0.000000   243:
        0 0.000000 0.000000   244:# The mod_perl package Apache::Registry loads
        0 0.000000 0.000000   245:# eval.  These evals don't count when looking
        0 0.000000 0.000000   246:sub _longmess {
        0 0.000000 0.000000   247:    my $message = Carp::longmess();
        0 0.000000 0.000000   248:    my $mod_perl = exists $ENV{MOD_PERL};
        0 0.000000 0.000000   249:    $message =~
        0 0.000000 0.000000   250:    return( $message );
        0 0.000000 0.000000   251:}
        0 0.000000 0.000000   252:
        0 0.000000 0.000000   253:sub die {
        0 0.000000 0.000000   254:    my $message = shift;
        0 0.000000 0.000000   255:    my $time = scalar(localtime);
        0 0.000000 0.000000   256:    my($file,$line,$id) = id(1);
        0 0.000000 0.000000   257:    $message .= " at $file line $line."
        0 0.000000 0.000000   258:    &fatalsToBrowser($message) if $WRAP &&
        0 0.000000 0.000000   259:    my $stamp = stamp;
        0 0.000000 0.000000   260:    $message=~s/^/$stamp/gm;
        0 0.000000 0.000000   261:    realdie $message;
        0 0.000000 0.000000   262:}
        0 0.000000 0.000000   263:
        0 0.000000 0.000000   264:sub set_message {
        0 0.000000 0.000000   265:    $CGI::Carp::CUSTOM_MSG = shift;
        0 0.000000 0.000000   266:    return $CGI::Carp::CUSTOM_MSG;
        0 0.000000 0.000000   267:}
        0 0.000000 0.000000   268:
        0 0.000000 0.000000   269:# Avoid generating "subroutine redefined"
        0 0.000000 0.000000   270:# hack:
        0 0.000000 0.000000   271:{
        0 0.000000 0.000000   272:    local $^W=0;
        0 0.000000 0.000000   273:    eval <<EOF;
        0 0.000000 0.000000   274:sub confess { CGI::Carp::die Carp::longmess
        0 0.000000 0.000000   275:sub croak   { CGI::Carp::die Carp::shortmess
        0 0.000000 0.000000   276:sub carp    { CGI::Carp::warn Carp::shortmess
        0 0.000000 0.000000   277:sub cluck   { CGI::Carp::warn Carp::longmess
        0 0.000000 0.000000   278:EOF
        0 0.000000 0.000000   279:    ;
        0 0.000000 0.000000   280:}
            ================ SmallProf version 0.9 ================
                 Profile of /usr/lib/perl5/5.00503/CGI/Carp.pm         Page 366
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   281:
        0 0.000000 0.000000   282:# We have to be ready to accept a filehandle
        0 0.000000 0.000000   283:# or a string.
        0 0.000000 0.000000   284:sub carpout {
        0 0.000000 0.000000   285:    my($in) = @_;
        0 0.000000 0.000000   286:    my($no) = fileno(to_filehandle($in));
        0 0.000000 0.000000   287:    realdie("Invalid filehandle $in\n")
        0 0.000000 0.000000   288:
        0 0.000000 0.000000   289:    open(SAVEERR, ">&STDERR");
        0 0.000000 0.000000   290:    open(STDERR, ">&$no") or
        0 0.000000 0.000000   291: ( print SAVEERR "Unable to redirect STDERR:
        0 0.000000 0.000000   292:}
        0 0.000000 0.000000   293:
        0 0.000000 0.000000   294:# headers
        0 0.000000 0.000000   295:sub fatalsToBrowser {
        0 0.000000 0.000000   296:    my($msg) = @_;
        0 0.000000 0.000000   297:    $msg=~s/&/&amp;/g;
        0 0.000000 0.000000   298:    $msg=~s/>/&gt;/g;
        0 0.000000 0.000000   299:    $msg=~s/</&lt;/g;
        0 0.000000 0.000000   300:    $msg=~s/\"/&quot;/g;
        0 0.000000 0.000000   301:    my($wm) = $ENV{SERVER_ADMIN} ?
        0 0.000000 0.000000   302: qq[the webmaster (<a
        0 0.000000 0.000000   303: "this site's webmaster";
        0 0.000000 0.000000   304:    my ($outer_message) = <<END;
        0 0.000000 0.000000   305:For help, please send mail to $wm, giving
        0 0.000000 0.000000   306:and the time and date of the error.
        0 0.000000 0.000000   307:END
        0 0.000000 0.000000   308:    ;
        0 0.000000 0.000000   309:    my $mod_perl = exists $ENV{MOD_PERL};
        0 0.000000 0.000000   310:    print STDOUT "Content-type:
        0 0.000000 0.000000   311: unless $mod_perl;
        0 0.000000 0.000000   312:
        0 0.000000 0.000000   313:    if ($CUSTOM_MSG) {
        0 0.000000 0.000000   314: if (ref($CUSTOM_MSG) eq 'CODE') {
        0 0.000000 0.000000   315:     &$CUSTOM_MSG($msg); # nicer to perl
        0 0.000000 0.000000   316:     return;
        0 0.000000 0.000000   317: } else {
        0 0.000000 0.000000   318:     $outer_message = $CUSTOM_MSG;
        0 0.000000 0.000000   319: }
        0 0.000000 0.000000   320:    }
        0 0.000000 0.000000   321:
        0 0.000000 0.000000   322:    my $mess = <<END;
        0 0.000000 0.000000   323:<H1>Software error:</H1>
        0 0.000000 0.000000   324:<CODE>$msg</CODE>
        0 0.000000 0.000000   325:<P>
        0 0.000000 0.000000   326:$outer_message
        0 0.000000 0.000000   327:END
        0 0.000000 0.000000   328:    ;
        0 0.000000 0.000000   329:
        0 0.000000 0.000000   330:    if ($mod_perl) {
        0 0.000000 0.000000   331: my $r = Apache->request;
        0 0.000000 0.000000   332: # If bytes have already been sent, then
        0 0.000000 0.000000   333: # we print the message out directly.
        0 0.000000 0.000000   334: # Otherwise we make a custom error
        0 0.000000 0.000000   335: # handler to produce the doc for us.
        0 0.000000 0.000000   336: if ($r->bytes_sent) {
            ================ SmallProf version 0.9 ================
                 Profile of /usr/lib/perl5/5.00503/CGI/Carp.pm         Page 367
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   337:     $r->print($mess);
        0 0.000000 0.000000   338:     $r->exit;
        0 0.000000 0.000000   339: } else {
        0 0.000000 0.000000   340:     $r->status(500);
        0 0.000000 0.000000   341:     $r->custom_response(500,$mess);
        0 0.000000 0.000000   342: }
        0 0.000000 0.000000   343:    } else {
        0 0.000000 0.000000   344: print STDOUT $mess;
        0 0.000000 0.000000   345:    }
        0 0.000000 0.000000   346:}
        0 0.000000 0.000000   347:
        0 0.000000 0.000000   348:# Cut and paste from CGI.pm so that we don't
        0 0.000000 0.000000   349:# always loading the entire CGI module.
        0 0.000000 0.000000   350:sub to_filehandle {
        0 0.000000 0.000000   351:    my $thingy = shift;
        0 0.000000 0.000000   352:    return undef unless $thingy;
        0 0.000000 0.000000   353:    return $thingy if
        0 0.000000 0.000000   354:    return $thingy if
        0 0.000000 0.000000   355:    if (!ref($thingy)) {
        0 0.000000 0.000000   356: my $caller = 1;
        0 0.000000 0.000000   357: while (my $package = caller($caller++)) {
        0 0.000000 0.000000   358:     my($tmp) = $thingy=~/[\':]/ ? $thingy :
        0 0.000000 0.000000   359:     return $tmp if defined(fileno($tmp));
        0 0.000000 0.000000   360: }
        0 0.000000 0.000000   361:    }
        0 0.000000 0.000000   362:    return undef;
        0 0.000000 0.000000   363:}
        0 0.000000 0.000000   364:
        0 0.000000 0.000000   365:1;
            ================ SmallProf version 0.9 ================
                   Profile of /usr/lib/perl5/5.00503/Cwd.pm            Page 368
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000     1:package Cwd;
        0 0.000000 0.000000     2:require 5.000;
        0 0.000000 0.000000     3:
        0 0.000000 0.000000     4:=head1 NAME
        0 0.000000 0.000000     5:
        0 0.000000 0.000000     6:
        0 0.000000 0.000000     7:
        0 0.000000 0.000000     8:
        0 0.000000 0.000000     9:
        0 0.000000 0.000000    10:
        0 0.000000 0.000000    11:
        0 0.000000 0.000000    12:
        0 0.000000 0.000000    13:
        0 0.000000 0.000000    14:
        0 0.000000 0.000000    15:
        0 0.000000 0.000000    16:
        0 0.000000 0.000000    17:
        0 0.000000 0.000000    18:
        0 0.000000 0.000000    19:
        0 0.000000 0.000000    20:
        0 0.000000 0.000000    21:
        0 0.000000 0.000000    22:
        0 0.000000 0.000000    23:
        0 0.000000 0.000000    24:
        0 0.000000 0.000000    25:
        0 0.000000 0.000000    26:
        0 0.000000 0.000000    27:
        0 0.000000 0.000000    28:
        0 0.000000 0.000000    29:
        0 0.000000 0.000000    30:
        0 0.000000 0.000000    31:
        0 0.000000 0.000000    32:
        0 0.000000 0.000000    33:
        0 0.000000 0.000000    34:
        0 0.000000 0.000000    35:
        0 0.000000 0.000000    36:
        0 0.000000 0.000000    37:
        0 0.000000 0.000000    38:
        0 0.000000 0.000000    39:
        0 0.000000 0.000000    40:
        0 0.000000 0.000000    41:
        0 0.000000 0.000000    42:
        0 0.000000 0.000000    43:
        0 0.000000 0.000000    44:
        0 0.000000 0.000000    45:
        0 0.000000 0.000000    46:
        0 0.000000 0.000000    47:
        0 0.000000 0.000000    48:
        0 0.000000 0.000000    49:
        0 0.000000 0.000000    50:
        0 0.000000 0.000000    51:
        0 0.000000 0.000000    52:
        0 0.000000 0.000000    53:
        0 0.000000 0.000000    54:
        0 0.000000 0.000000    55:
        0 0.000000 0.000000    56:
            ================ SmallProf version 0.9 ================
                   Profile of /usr/lib/perl5/5.00503/Cwd.pm            Page 369
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000    57:
        0 0.000000 0.000000    58:
        0 0.000000 0.000000    59:
        0 0.000000 0.000000    60:
        0 0.000000 0.000000    61:
        0 0.000000 0.000000    62:
        0 0.000000 0.000000    63:
        0 0.000000 0.000000    64:
        0 0.000000 0.000000    65:
        0 0.000000 0.000000    66:## use strict;
        0 0.000000 0.000000    67:
        0 0.000000 0.000000    68:use Carp;
        0 0.000000 0.000000    69:
        0 0.000000 0.000000    70:$VERSION = '2.01';
        0 0.000000 0.000000    71:
        0 0.000000 0.000000    72:require Exporter;
        0 0.000000 0.000000    73:@ISA = qw(Exporter);
        0 0.000000 0.000000    74:@EXPORT = qw(cwd getcwd fastcwd fastgetcwd);
        0 0.000000 0.000000    75:@EXPORT_OK = qw(chdir abs_path
        0 0.000000 0.000000    76:
        0 0.000000 0.000000    77:
        0 0.000000 0.000000    78:# The 'natural and safe form' for UNIX (pwd
        0 0.000000 0.000000    79:
        0 0.000000 0.000000    80:sub _backtick_pwd {
        0 0.000000 0.000000    81:    my $cwd;
        0 0.000000 0.000000    82:    chop($cwd = `pwd`);
        0 0.000000 0.000000    83:    $cwd;
        0 0.000000 0.000000    84:}
        0 0.000000 0.000000    85:
        0 0.000000 0.000000    86:# Since some ports may predefine cwd
        0 0.000000 0.000000    87:# we take care not to override an existing
        0 0.000000 0.000000    88:
        0 0.000000 0.000000    89:*cwd = \&_backtick_pwd unless defined &cwd;
        0 0.000000 0.000000    90:
        0 0.000000 0.000000    91:
        0 0.000000 0.000000    92:# By Brandon S. Allbery
        0 0.000000 0.000000    93:#
        0 0.000000 0.000000    94:# Usage: $cwd = getcwd();
        0 0.000000 0.000000    95:
        1 0.000000 0.000000    96:sub getcwd
        0 0.000000 0.000000    97:{
        0 0.000000 0.000000    98:    abs_path('.');
        0 0.000000 0.000000    99:}
        0 0.000000 0.000000   100:
        0 0.000000 0.000000   101:# By John Bazik
        0 0.000000 0.000000   102:#
        0 0.000000 0.000000   103:# Usage: $cwd = &fastcwd;
        0 0.000000 0.000000   104:#
        0 0.000000 0.000000   105:# This is a faster version of getcwd.  It's
        0 0.000000 0.000000   106:# you might chdir out of a directory that you
        0 0.000000 0.000000   107:
        0 0.000000 0.000000   108:# List of metachars taken from do_exec() in
        0 0.000000 0.000000   109:my $quoted_shell_meta =
        0 0.000000 0.000000   110:
        0 0.000000 0.000000   111:sub fastcwd {
        0 0.000000 0.000000   112:    my($odev, $oino, $cdev, $cino, $tdev,
            ================ SmallProf version 0.9 ================
                   Profile of /usr/lib/perl5/5.00503/Cwd.pm            Page 370
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   113:    my(@path, $path);
        0 0.000000 0.000000   114:    local(*DIR);
        0 0.000000 0.000000   115:
        0 0.000000 0.000000   116:    my($orig_cdev, $orig_cino) = stat('.');
        0 0.000000 0.000000   117:    ($cdev, $cino) = ($orig_cdev,
        0 0.000000 0.000000   118:    for (;;) {
        0 0.000000 0.000000   119: my $direntry;
        0 0.000000 0.000000   120: ($odev, $oino) = ($cdev, $cino);
        0 0.000000 0.000000   121: CORE::chdir('..') || return undef;
        0 0.000000 0.000000   122: ($cdev, $cino) = stat('.');
        0 0.000000 0.000000   123: last if $odev == $cdev && $oino == $cino;
        0 0.000000 0.000000   124: opendir(DIR, '.') || return undef;
        0 0.000000 0.000000   125: for (;;) {
        0 0.000000 0.000000   126:     $direntry = readdir(DIR);
        0 0.000000 0.000000   127:     last unless defined $direntry;
        0 0.000000 0.000000   128:     next if $direntry eq '.';
        0 0.000000 0.000000   129:     next if $direntry eq '..';
        0 0.000000 0.000000   130:
        0 0.000000 0.000000   131:     ($tdev, $tino) = lstat($direntry);
        0 0.000000 0.000000   132:     last unless $tdev != $odev || $tino !=
        0 0.000000 0.000000   133: }
        0 0.000000 0.000000   134: closedir(DIR);
        0 0.000000 0.000000   135: return undef unless defined $direntry; #
        0 0.000000 0.000000   136: unshift(@path, $direntry);
        0 0.000000 0.000000   137:    }
        0 0.000000 0.000000   138:    $path = '/' . join('/', @path);
        0 0.000000 0.000000   139:    # At this point $path may be tainted (if
        0 0.000000 0.000000   140:    # To be more useful we untaint it then
        0 0.000000 0.000000   141:    $path = $1 if $path =~ /^(.*)$/; #
        0 0.000000 0.000000   142:    CORE::chdir($path) || return undef;
        0 0.000000 0.000000   143:    ($cdev, $cino) = stat('.');
        0 0.000000 0.000000   144:    die "Unstable directory path, current
        0 0.000000 0.000000   145: if $cdev != $orig_cdev || $cino !=
        0 0.000000 0.000000   146:    $path;
        0 0.000000 0.000000   147:}
        0 0.000000 0.000000   148:
        0 0.000000 0.000000   149:
        0 0.000000 0.000000   150:# Keeps track of current working directory in
        0 0.000000 0.000000   151:# Usage:
        0 0.000000 0.000000   152:# use Cwd 'chdir';
        0 0.000000 0.000000   153:# chdir $newdir;
        0 0.000000 0.000000   154:
        0 0.000000 0.000000   155:my $chdir_init = 0;
        0 0.000000 0.000000   156:
        0 0.000000 0.000000   157:sub chdir_init {
        0 0.000000 0.000000   158:    if ($ENV{'PWD'} and $^O ne 'os2' and $^O
        0 0.000000 0.000000   159: my($dd,$di) = stat('.');
        0 0.000000 0.000000   160: my($pd,$pi) = stat($ENV{'PWD'});
        0 0.000000 0.000000   161: if (!defined $dd or !defined $pd or $di !=
        0 0.000000 0.000000   162:     $ENV{'PWD'} = cwd();
        0 0.000000 0.000000   163: }
        0 0.000000 0.000000   164:    }
        0 0.000000 0.000000   165:    else {
        0 0.000000 0.000000   166: $ENV{'PWD'} = cwd();
        0 0.000000 0.000000   167:    }
        0 0.000000 0.000000   168:    # Strip an automounter prefix (where
            ================ SmallProf version 0.9 ================
                   Profile of /usr/lib/perl5/5.00503/Cwd.pm            Page 371
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   169:    if ($ENV{'PWD'} =~
        0 0.000000 0.000000   170: my($pd,$pi) = stat($2);
        0 0.000000 0.000000   171: my($dd,$di) = stat($1);
        0 0.000000 0.000000   172: if (defined $pd and defined $dd and $di ==
        0 0.000000 0.000000   173:     $ENV{'PWD'}="$2$3";
        0 0.000000 0.000000   174: }
        0 0.000000 0.000000   175:    }
        0 0.000000 0.000000   176:    $chdir_init = 1;
        0 0.000000 0.000000   177:}
        0 0.000000 0.000000   178:
        0 0.000000 0.000000   179:sub chdir {
        0 0.000000 0.000000   180:    my $newdir = shift || ''; # allow for no
        0 0.000000 0.000000   181:    $newdir =~ s|///*|/|g;
        0 0.000000 0.000000   182:    chdir_init() unless $chdir_init;
        0 0.000000 0.000000   183:    return 0 unless CORE::chdir $newdir;
        0 0.000000 0.000000   184:    if ($^O eq 'VMS') { return $ENV{'PWD'} =
        0 0.000000 0.000000   185:
        0 0.000000 0.000000   186:    if ($newdir =~ m#^/#) {
        0 0.000000 0.000000   187: $ENV{'PWD'} = $newdir;
        0 0.000000 0.000000   188:    } else {
        0 0.000000 0.000000   189: my @curdir = split(m#/#,$ENV{'PWD'});
        0 0.000000 0.000000   190: @curdir = ('') unless @curdir;
        0 0.000000 0.000000   191: my $component;
        0 0.000000 0.000000   192: foreach $component (split(m#/#, $newdir)) {
        0 0.000000 0.000000   193:     next if $component eq '.';
        0 0.000000 0.000000   194:     pop(@curdir),next if $component eq '..';
        0 0.000000 0.000000   195:     push(@curdir,$component);
        0 0.000000 0.000000   196: }
        0 0.000000 0.000000   197: $ENV{'PWD'} = join('/',@curdir) || '/';
        0 0.000000 0.000000   198:    }
        0 0.000000 0.000000   199:    1;
        0 0.000000 0.000000   200:}
        0 0.000000 0.000000   201:
        0 0.000000 0.000000   202:# Taken from Cwd.pm It is really getcwd with
        0 0.000000 0.000000   203:# parameter instead of '.'
        0 0.000000 0.000000   204:#
        0 0.000000 0.000000   205:
        3 0.000000 0.000000   206:sub abs_path
        0 0.000000 0.000000   207:{
        0 0.000000 0.000000   208:    my $start = @_ ? shift : '.';
        0 0.000000 0.000000   209:    my($dotdots, $cwd, @pst, @cst, $dir,
        0 0.000000 0.000000   210:
        0 0.000000 0.000000   211:    unless (@cst = stat( $start ))
        0 0.000000 0.000000   212:    {
        0 0.000000 0.000000   213: carp "stat($start): $!";
        0 0.000000 0.000000   214: return '';
        0 0.000000 0.000000   215:    }
        0 0.000000 0.000000   216:    $cwd = '';
        0 0.000000 0.000000   217:    $dotdots = $start;
        0 0.000000 0.000000   218:    do
        0 0.000000 0.000000   219:    {
        0 0.000000 0.000000   220: $dotdots .= '/..';
        0 0.000000 0.000000   221: @pst = @cst;
        0 0.000000 0.000000   222: unless (opendir(PARENT, $dotdots))
        0 0.000000 0.000000   223: {
        0 0.000000 0.000000   224:     carp "opendir($dotdots): $!";
            ================ SmallProf version 0.9 ================
                   Profile of /usr/lib/perl5/5.00503/Cwd.pm            Page 372
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   225:     return '';
        0 0.000000 0.000000   226: }
        0 0.000000 0.000000   227: unless (@cst = stat($dotdots))
        0 0.000000 0.000000   228: {
        0 0.000000 0.000000   229:     carp "stat($dotdots): $!";
        0 0.000000 0.000000   230:     closedir(PARENT);
        0 0.000000 0.000000   231:     return '';
        0 0.000000 0.000000   232: }
        0 0.000000 0.000000   233: if ($pst[0] == $cst[0] && $pst[1] ==
        0 0.000000 0.000000   234: {
        0 0.000000 0.000000   235:     $dir = undef;
        0 0.000000 0.000000   236: }
        0 0.000000 0.000000   237: else
        0 0.000000 0.000000   238: {
        0 0.000000 0.000000   239:     do
        0 0.000000 0.000000   240:     {
        0 0.000000 0.000000   241:  unless (defined ($dir = readdir(PARENT)))
        0 0.000000 0.000000   242:         {
        0 0.000000 0.000000   243:      carp "readdir($dotdots): $!";
        0 0.000000 0.000000   244:      closedir(PARENT);
        0 0.000000 0.000000   245:      return '';
        0 0.000000 0.000000   246:  }
        0 0.000000 0.000000   247:  $tst[0] = $pst[0]+1 unless (@tst =
        0 0.000000 0.000000   248:     }
        0 0.000000 0.000000   249:     while ($dir eq '.' || $dir eq '..' ||
        0 0.000000 0.000000   250:     $tst[1] != $pst[1]);
        0 0.000000 0.000000   251: }
        0 0.000000 0.000000   252: $cwd = (defined $dir ? "$dir" : "" ) .
        0 0.000000 0.000000   253: closedir(PARENT);
        0 0.000000 0.000000   254:    } while (defined $dir);
        0 0.000000 0.000000   255:    chop($cwd) unless $cwd eq '/'; # drop the
        0 0.000000 0.000000   256:    $cwd;
        0 0.000000 0.000000   257:}
        0 0.000000 0.000000   258:
        0 0.000000 0.000000   259:sub fast_abs_path {
        0 0.000000 0.000000   260:    my $cwd = getcwd();
        0 0.000000 0.000000   261:    my $path = shift || '.';
        0 0.000000 0.000000   262:    CORE::chdir($path) || croak "Cannot chdir
        0 0.000000 0.000000   263:    my $realpath = getcwd();
        0 0.000000 0.000000   264:    CORE::chdir($cwd)  || croak "Cannot chdir
        0 0.000000 0.000000   265:    $realpath;
        0 0.000000 0.000000   266:}
        0 0.000000 0.000000   267:
        0 0.000000 0.000000   268:
        0 0.000000 0.000000   269:# --- PORTING SECTION ---
        0 0.000000 0.000000   270:
        0 0.000000 0.000000   271:# VMS: $ENV{'DEFAULT'} points to default
        0 0.000000 0.000000   272:# 06-Mar-1996  Charles Bailey
        0 0.000000 0.000000   273:# Note: Use of Cwd::chdir() causes the
        0 0.000000 0.000000   274:#   in the process logical name table as the
        0 0.000000 0.000000   275:#   seen by Perl. This may not be the same as
        0 0.000000 0.000000   276:#   and directory seen by DCL after Perl
        0 0.000000 0.000000   277:#   the CRTL chdir() function persist only
        0 0.000000 0.000000   278:
        0 0.000000 0.000000   279:sub _vms_cwd {
        0 0.000000 0.000000   280:    return $ENV{'DEFAULT'};
            ================ SmallProf version 0.9 ================
                   Profile of /usr/lib/perl5/5.00503/Cwd.pm            Page 373
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   281:}
        0 0.000000 0.000000   282:
        0 0.000000 0.000000   283:sub _vms_abs_path {
        0 0.000000 0.000000   284:    return $ENV{'DEFAULT'} unless @_;
        0 0.000000 0.000000   285:    my $path = VMS::Filespec::pathify($_[0]);
        0 0.000000 0.000000   286:    croak("Invalid path name $_[0]") unless
        0 0.000000 0.000000   287:    return VMS::Filespec::rmsexpand($path);
        0 0.000000 0.000000   288:}
        0 0.000000 0.000000   289:
        0 0.000000 0.000000   290:sub _os2_cwd {
        0 0.000000 0.000000   291:    $ENV{'PWD'} = `cmd /c cd`;
        0 0.000000 0.000000   292:    chop $ENV{'PWD'};
        0 0.000000 0.000000   293:    $ENV{'PWD'} =~ s:\\:/:g ;
        0 0.000000 0.000000   294:    return $ENV{'PWD'};
        0 0.000000 0.000000   295:}
        0 0.000000 0.000000   296:
        0 0.000000 0.000000   297:sub _win32_cwd {
        0 0.000000 0.000000   298:    $ENV{'PWD'} = Win32::GetCwd();
        0 0.000000 0.000000   299:    $ENV{'PWD'} =~ s:\\:/:g ;
        0 0.000000 0.000000   300:    return $ENV{'PWD'};
        0 0.000000 0.000000   301:}
        0 0.000000 0.000000   302:
        0 0.000000 0.000000   303:*_NT_cwd = \&_win32_cwd if (!defined &_NT_cwd
        0 0.000000 0.000000   304:                            defined
        0 0.000000 0.000000   305:
        0 0.000000 0.000000   306:*_NT_cwd = \&_os2_cwd unless defined
        0 0.000000 0.000000   307:
        0 0.000000 0.000000   308:sub _dos_cwd {
        0 0.000000 0.000000   309:    if (!defined &Dos::GetCwd) {
        0 0.000000 0.000000   310:        $ENV{'PWD'} = `command /c cd`;
        0 0.000000 0.000000   311:        chop $ENV{'PWD'};
        0 0.000000 0.000000   312:        $ENV{'PWD'} =~ s:\\:/:g ;
        0 0.000000 0.000000   313:    } else {
        0 0.000000 0.000000   314:        $ENV{'PWD'} = Dos::GetCwd();
        0 0.000000 0.000000   315:    }
        0 0.000000 0.000000   316:    return $ENV{'PWD'};
        0 0.000000 0.000000   317:}
        0 0.000000 0.000000   318:
        0 0.000000 0.000000   319:sub _qnx_cwd {
        0 0.000000 0.000000   320:    $ENV{'PWD'} = `/usr/bin/fullpath -t`;
        0 0.000000 0.000000   321:    chop $ENV{'PWD'};
        0 0.000000 0.000000   322:    return $ENV{'PWD'};
        0 0.000000 0.000000   323:}
        0 0.000000 0.000000   324:
        0 0.000000 0.000000   325:sub _qnx_abs_path {
        0 0.000000 0.000000   326:    my $path = shift || '.';
        0 0.000000 0.000000   327:    my $realpath=`/usr/bin/fullpath -t
        0 0.000000 0.000000   328:    chop $realpath;
        0 0.000000 0.000000   329:    return $realpath;
        0 0.000000 0.000000   330:}
        0 0.000000 0.000000   331:
        0 0.000000 0.000000   332:{
        0 0.000000 0.000000   333:    local $^W = 0; # assignments trigger
        0 0.000000 0.000000   334:
        0 0.000000 0.000000   335:    if ($^O eq 'VMS') {
        0 0.000000 0.000000   336:        *cwd  = \&_vms_cwd;
            ================ SmallProf version 0.9 ================
                   Profile of /usr/lib/perl5/5.00503/Cwd.pm            Page 374
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   337:        *getcwd  = \&_vms_cwd;
        0 0.000000 0.000000   338:        *fastcwd = \&_vms_cwd;
        0 0.000000 0.000000   339:        *fastgetcwd = \&_vms_cwd;
        0 0.000000 0.000000   340:        *abs_path = \&_vms_abs_path;
        0 0.000000 0.000000   341:        *fast_abs_path = \&_vms_abs_path;
        0 0.000000 0.000000   342:    }
        0 0.000000 0.000000   343:    elsif ($^O eq 'NT' or $^O eq 'MSWin32') {
        0 0.000000 0.000000   344:        # We assume that &_NT_cwd is defined
        0 0.000000 0.000000   345:        *cwd  = \&_NT_cwd;
        0 0.000000 0.000000   346:        *getcwd  = \&_NT_cwd;
        0 0.000000 0.000000   347:        *fastcwd = \&_NT_cwd;
        0 0.000000 0.000000   348:        *fastgetcwd = \&_NT_cwd;
        0 0.000000 0.000000   349:        *abs_path = \&fast_abs_path;
        0 0.000000 0.000000   350:    }
        0 0.000000 0.000000   351:    elsif ($^O eq 'os2') {
        0 0.000000 0.000000   352:        # sys_cwd may keep the builtin
        0 0.000000 0.000000   353:        *cwd  = defined &sys_cwd ? \&sys_cwd
        0 0.000000 0.000000   354:        *getcwd  = \&cwd;
        0 0.000000 0.000000   355:        *fastgetcwd = \&cwd;
        0 0.000000 0.000000   356:        *fastcwd = \&cwd;
        0 0.000000 0.000000   357:        *abs_path = \&fast_abs_path;
        0 0.000000 0.000000   358:    }
        0 0.000000 0.000000   359:    elsif ($^O eq 'dos') {
        0 0.000000 0.000000   360:        *cwd  = \&_dos_cwd;
        0 0.000000 0.000000   361:        *getcwd  = \&_dos_cwd;
        0 0.000000 0.000000   362:        *fastgetcwd = \&_dos_cwd;
        0 0.000000 0.000000   363:        *fastcwd = \&_dos_cwd;
        0 0.000000 0.000000   364:        *abs_path = \&fast_abs_path;
        0 0.000000 0.000000   365:    }
        0 0.000000 0.000000   366:    elsif ($^O eq 'qnx') {
        0 0.000000 0.000000   367:        *cwd  = \&_qnx_cwd;
        0 0.000000 0.000000   368:        *getcwd  = \&_qnx_cwd;
        0 0.000000 0.000000   369:        *fastgetcwd = \&_qnx_cwd;
        0 0.000000 0.000000   370:        *fastcwd = \&_qnx_cwd;
        0 0.000000 0.000000   371:        *abs_path = \&_qnx_abs_path;
        0 0.000000 0.000000   372:        *fast_abs_path = \&_qnx_abs_path;
        0 0.000000 0.000000   373:    }
        0 0.000000 0.000000   374:}
        0 0.000000 0.000000   375:
        0 0.000000 0.000000   376:# package main; eval join('',<DATA>) || die
        0 0.000000 0.000000   377:
        0 0.000000 0.000000   378:1;
        0 0.000000 0.000000   379:
        0 0.000000 0.000000   380:__END__
            ================ SmallProf version 0.9 ================
                 Profile of /usr/lib/perl5/5.00503/Exporter.pm         Page 375
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000     1:package Exporter;
        0 0.000000 0.000000     2:
        0 0.000000 0.000000     3:require 5.001;
        0 0.000000 0.000000     4:
        0 0.000000 0.000000     5:#
        0 0.000000 0.000000     6:# We go to a lot of trouble not to 'require
        0 0.000000 0.000000     7:#  because Carp requires Exporter, and
        0 0.000000 0.000000     8:#
        0 0.000000 0.000000     9:
        0 0.000000 0.000000    10:$ExportLevel = 0;
        0 0.000000 0.000000    11:$Verbose = 0 unless $Verbose;
        0 0.000000 0.000000    12:
       92 0.000000 0.000000    13:sub export {
        0 0.000000 0.000000    14:
        0 0.000000 0.000000    15:    # First make import warnings look like
        0 0.000000 0.000000    16:    local $SIG{__WARN__} = sub {
        0 0.000000 0.000000    17: my $text = shift;
        0 0.000000 0.000000    18: if ($text =~ s/ at \S*Exporter.pm line
        0 0.000000 0.000000    19:     require Carp;
        0 0.000000 0.000000    20:     local $Carp::CarpLevel = 1; # ignore
        0 0.000000 0.000000    21:     Carp::carp($text);
        0 0.000000 0.000000    22: }
        0 0.000000 0.000000    23: else {
        0 0.000000 0.000000    24:     warn $text;
        0 0.000000 0.000000    25: }
       22 0.000600 0.000000    26:    };
        0 0.000000 0.000000    27:    local $SIG{__DIE__} = sub {
        0 0.000000 0.000000    28: require Carp;
        0 0.000000 0.000000    29: local $Carp::CarpLevel = 1; # ignore package
        0 0.000000 0.000000    30: Carp::croak("$_[0]Illegal null symbol in
        0 0.000000 0.000000    31:     if $_[0] =~ /^Unable to create sub named
       22 0.000351 0.000000    32:    };
        0 0.000000 0.000000    33:
       22 0.000161 0.000000    34:    my($pkg, $callpkg, @imports) = @_;
       22 0.000095 0.000000    35:    my($type, $sym, $oops);
       44 0.000366 0.000000    36:    *exports = *{"${pkg}::EXPORT"};
        0 0.000000 0.000000    37:
       22 0.000118 0.000000    38:    if (@imports) {
        0 0.000000 0.000000    39: if (!%exports) {
        0 0.000000 0.000000    40:     grep(s/^&//, @exports);
        0 0.000000 0.000000    41:     @exports{@exports} = (1) x @exports;
        0 0.000000 0.000000    42:     my $ok = \@{"${pkg}::EXPORT_OK"};
        0 0.000000 0.000000    43:     if (@$ok) {
        0 0.000000 0.000000    44:  grep(s/^&//, @$ok);
        0 0.000000 0.000000    45:  @exports{@$ok} = (1) x @$ok;
        0 0.000000 0.000000    46:     }
        0 0.000000 0.000000    47: }
        0 0.000000 0.000000    48:
        0 0.000000 0.000000    49: if ($imports[0] =~ m#^[/!:]#){
        0 0.000000 0.000000    50:     my $tagsref = \%{"${pkg}::EXPORT_TAGS"};
        0 0.000000 0.000000    51:     my $tagdata;
        0 0.000000 0.000000    52:     my %imports;
        0 0.000000 0.000000    53:     my($remove, $spec, @names, @allexports);
        0 0.000000 0.000000    54:     # negated first item implies starting
        0 0.000000 0.000000    55:     unshift @imports, ':DEFAULT' if
        0 0.000000 0.000000    56:     foreach $spec (@imports){
            ================ SmallProf version 0.9 ================
                 Profile of /usr/lib/perl5/5.00503/Exporter.pm         Page 376
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000    57:  $remove = $spec =~ s/^!//;
        0 0.000000 0.000000    58:
        0 0.000000 0.000000    59:  if ($spec =~ s/^://){
        0 0.000000 0.000000    60:      if ($spec eq 'DEFAULT'){
        0 0.000000 0.000000    61:   @names = @exports;
        0 0.000000 0.000000    62:      }
        0 0.000000 0.000000    63:      elsif ($tagdata = $tagsref->{$spec}) {
        0 0.000000 0.000000    64:   @names = @$tagdata;
        0 0.000000 0.000000    65:      }
        0 0.000000 0.000000    66:      else {
        0 0.000000 0.000000    67:   warn qq["$spec" is not defined in
        0 0.000000 0.000000    68:   ++$oops;
        0 0.000000 0.000000    69:   next;
        0 0.000000 0.000000    70:      }
        0 0.000000 0.000000    71:  }
        0 0.000000 0.000000    72:  elsif ($spec =~ m:^/(.*)/$:){
        0 0.000000 0.000000    73:      my $patn = $1;
        0 0.000000 0.000000    74:      @allexports = keys %exports unless
        0 0.000000 0.000000    75:      @names = grep(/$patn/, @allexports); #
        0 0.000000 0.000000    76:  }
        0 0.000000 0.000000    77:  else {
        0 0.000000 0.000000    78:      @names = ($spec); # is a normal symbol
        0 0.000000 0.000000    79:  }
        0 0.000000 0.000000    80:
        0 0.000000 0.000000    81:  warn "Import ".($remove ? "del":"add").":
        0 0.000000 0.000000    82:      if $Verbose;
        0 0.000000 0.000000    83:
        0 0.000000 0.000000    84:  if ($remove) {
        0 0.000000 0.000000    85:     foreach $sym (@names) { delete
        0 0.000000 0.000000    86:  }
        0 0.000000 0.000000    87:  else {
        0 0.000000 0.000000    88:      @imports{@names} = (1) x @names;
        0 0.000000 0.000000    89:  }
        0 0.000000 0.000000    90:     }
        0 0.000000 0.000000    91:     @imports = keys %imports;
        0 0.000000 0.000000    92: }
        0 0.000000 0.000000    93:
        0 0.000000 0.000000    94: foreach $sym (@imports) {
        0 0.000000 0.000000    95:     if (!$exports{$sym}) {
        0 0.000000 0.000000    96:  if ($sym =~ m/^\d/) {
        0 0.000000 0.000000    97:      $pkg->require_version($sym);
        0 0.000000 0.000000    98:      # If the version number was the only
        0 0.000000 0.000000    99:      # then we should act as if nothing was
        0 0.000000 0.000000   100:      if (@imports == 1) {
        0 0.000000 0.000000   101:   @imports = @exports;
        0 0.000000 0.000000   102:   last;
        0 0.000000 0.000000   103:      }
        0 0.000000 0.000000   104:      # We need a way to emulate 'use Foo ()'
        0 0.000000 0.000000   105:      # allow an easy version check: "use Foo
        0 0.000000 0.000000   106:      if (@imports == 2 and !$imports[1]) {
        0 0.000000 0.000000   107:   @imports = ();
        0 0.000000 0.000000   108:   last;
        0 0.000000 0.000000   109:      }
        0 0.000000 0.000000   110:  } elsif ($sym !~ s/^&// || !$exports{$sym})
        0 0.000000 0.000000   111:                    require Carp;
        0 0.000000 0.000000   112:      Carp::carp(qq["$sym" is not exported by
            ================ SmallProf version 0.9 ================
                 Profile of /usr/lib/perl5/5.00503/Exporter.pm         Page 377
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   113:      $oops++;
        0 0.000000 0.000000   114:  }
        0 0.000000 0.000000   115:     }
        0 0.000000 0.000000   116: }
        0 0.000000 0.000000   117: if ($oops) {
        0 0.000000 0.000000   118:     require Carp;
        0 0.000000 0.000000   119:     Carp::croak("Can't continue after import
        0 0.000000 0.000000   120: }
        0 0.000000 0.000000   121:    }
        0 0.000000 0.000000   122:    else {
       22 0.001508 0.010000   123: @imports = @exports;
        0 0.000000 0.000000   124:    }
        0 0.000000 0.000000   125:
       44 0.000327 0.000000   126:    *fail = *{"${pkg}::EXPORT_FAIL"};
       22 0.000116 0.010000   127:    if (@fail) {
        0 0.000000 0.000000   128: if (!%fail) {
        0 0.000000 0.000000   129:     # Build cache of symbols. Optimise the
        0 0.000000 0.000000   130:     # barewords twice... both with and
        0 0.000000 0.000000   131:     # (Technique could be applied to
        0 0.000000 0.000000   132:     my @expanded = map { /^\w/ ? ($_,
        0 0.000000 0.000000   133:     warn "${pkg}::EXPORT_FAIL cached:
        0 0.000000 0.000000   134:     @fail{@expanded} = (1) x @expanded;
        0 0.000000 0.000000   135: }
        0 0.000000 0.000000   136: my @failed;
        0 0.000000 0.000000   137: foreach $sym (@imports) { push(@failed,
        0 0.000000 0.000000   138: if (@failed) {
        0 0.000000 0.000000   139:     @failed = $pkg->export_fail(@failed);
        0 0.000000 0.000000   140:     foreach $sym (@failed) {
        0 0.000000 0.000000   141:                require Carp;
        0 0.000000 0.000000   142:  Carp::carp(qq["$sym" is not implemented by
        0 0.000000 0.000000   143:   "on this architecture");
        0 0.000000 0.000000   144:     }
        0 0.000000 0.000000   145:     if (@failed) {
        0 0.000000 0.000000   146:  require Carp;
        0 0.000000 0.000000   147:  Carp::croak("Can't continue after import
        0 0.000000 0.000000   148:     }
        0 0.000000 0.000000   149: }
        0 0.000000 0.000000   150:    }
        0 0.000000 0.000000   151:
       22 0.000050 0.000000   152:    warn "Importing into $callpkg from $pkg:
        0 0.000000 0.000000   153:  join(", ",sort @imports) if $Verbose;
        0 0.000000 0.000000   154:
       22 0.000131 0.010000   155:    foreach $sym (@imports) {
        0 0.000000 0.000000   156: # shortcut for the common case of no type
       84 0.004954 0.000000   157: (*{"${callpkg}::$sym"} = \&{"${pkg}::$sym"},
        0 0.000000 0.000000   158:     unless $sym =~ s/^(\W)//;
        0 0.000000 0.000000   159: $type = $1;
        0 0.000000 0.000000   160: *{"${callpkg}::$sym"} =
        0 0.000000 0.000000   161:     $type eq '&' ? \&{"${pkg}::$sym"} :
        0 0.000000 0.000000   162:     $type eq '$' ? \${"${pkg}::$sym"} :
        0 0.000000 0.000000   163:     $type eq '@' ? \@{"${pkg}::$sym"} :
        0 0.000000 0.000000   164:     $type eq '%' ? \%{"${pkg}::$sym"} :
        0 0.000000 0.000000   165:     $type eq '*' ?  *{"${pkg}::$sym"} :
        0 0.000000 0.000000   166:     do { require Carp; Carp::croak("Can't
        0 0.000000 0.000000   167:    }
        0 0.000000 0.000000   168:}
            ================ SmallProf version 0.9 ================
                 Profile of /usr/lib/perl5/5.00503/Exporter.pm         Page 378
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   169:
        0 0.000000 0.000000   170:sub export_to_level
        0 0.000000 0.000000   171:{
        0 0.000000 0.000000   172:      my $pkg = shift;
        0 0.000000 0.000000   173:      my ($level, $junk) = (shift, shift);  #
        0 0.000000 0.000000   174:                                            #
        0 0.000000 0.000000   175:      my $callpkg = caller($level);
        0 0.000000 0.000000   176:      $pkg->export($callpkg, @_);
        0 0.000000 0.000000   177:}
        0 0.000000 0.000000   178:
       87 0.000000 0.000000   179:sub import {
       22 0.000136 0.000000   180:    my $pkg = shift;
       22 0.000145 0.000000   181:    my $callpkg = caller($ExportLevel);
       22 0.001551 0.000000   182:    export $pkg, $callpkg, @_;
        0 0.000000 0.000000   183:}
        0 0.000000 0.000000   184:
        0 0.000000 0.000000   185:
        0 0.000000 0.000000   186:
        0 0.000000 0.000000   187:# Utility functions
        0 0.000000 0.000000   188:
        1 0.000000 0.000000   189:sub _push_tags {
        0 0.000000 0.000000   190:    my($pkg, $var, $syms) = @_;
        0 0.000000 0.000000   191:    my $nontag;
        0 0.000000 0.000000   192:    *export_tags = \%{"${pkg}::EXPORT_TAGS"};
        0 0.000000 0.000000   193:    push(@{"${pkg}::$var"},
        0 0.000000 0.000000   194: map { $export_tags{$_} ? @{$export_tags{$_}}
        0 0.000000 0.000000   195:  (@$syms) ? @$syms : keys %export_tags);
        0 0.000000 0.000000   196:    if ($nontag and $^W) {
        0 0.000000 0.000000   197: # This may change to a die one day
        0 0.000000 0.000000   198: require Carp;
        0 0.000000 0.000000   199: Carp::carp("Some names are not tags");
        0 0.000000 0.000000   200:    }
        0 0.000000 0.000000   201:}
        0 0.000000 0.000000   202:
        0 0.000000 0.000000   203:sub export_tags    { _push_tags((caller)[0],
        1 0.000000 0.000000   204:sub export_ok_tags { _push_tags((caller)[0],
        0 0.000000 0.000000   205:
        0 0.000000 0.000000   206:
        0 0.000000 0.000000   207:# Default methods
        0 0.000000 0.000000   208:
        0 0.000000 0.000000   209:sub export_fail {
        0 0.000000 0.000000   210:    my $self = shift;
        0 0.000000 0.000000   211:    @_;
        0 0.000000 0.000000   212:}
        0 0.000000 0.000000   213:
        0 0.000000 0.000000   214:sub require_version {
        0 0.000000 0.000000   215:    my($self, $wanted) = @_;
        0 0.000000 0.000000   216:    my $pkg = ref $self || $self;
        0 0.000000 0.000000   217:    my $version = ${"${pkg}::VERSION"};
        0 0.000000 0.000000   218:    if (!$version or $version < $wanted) {
        0 0.000000 0.000000   219: $version ||= "(undef)";
        0 0.000000 0.000000   220: my $file = $INC{"$pkg.pm"};
        0 0.000000 0.000000   221: $file &&= " ($file)";
        0 0.000000 0.000000   222: require Carp;
        0 0.000000 0.000000   223: Carp::croak("$pkg $wanted required--this is
        0 0.000000 0.000000   224:    }
            ================ SmallProf version 0.9 ================
                 Profile of /usr/lib/perl5/5.00503/Exporter.pm         Page 379
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   225:    $version;
        0 0.000000 0.000000   226:}
        0 0.000000 0.000000   227:
        0 0.000000 0.000000   228:1;
        0 0.000000 0.000000   229:
        0 0.000000 0.000000   230:# A simple self test harness. Change 'require
        0 0.000000 0.000000   231:# package main; eval(join('',<DATA>)) or die
        0 0.000000 0.000000   232:__END__
            ================ SmallProf version 0.9 ================
              Profile of /usr/lib/perl5/5.00503/File/Basename.pm       Page 380
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000     1:package File::Basename;
        0 0.000000 0.000000     2:
        0 0.000000 0.000000     3:=head1 NAME
        0 0.000000 0.000000     4:
        0 0.000000 0.000000     5:
        0 0.000000 0.000000     6:
        0 0.000000 0.000000     7:
        0 0.000000 0.000000     8:
        0 0.000000 0.000000     9:
        0 0.000000 0.000000    10:
        0 0.000000 0.000000    11:
        0 0.000000 0.000000    12:
        0 0.000000 0.000000    13:
        0 0.000000 0.000000    14:
        0 0.000000 0.000000    15:
        0 0.000000 0.000000    16:
        0 0.000000 0.000000    17:
        0 0.000000 0.000000    18:
        0 0.000000 0.000000    19:
        0 0.000000 0.000000    20:
        0 0.000000 0.000000    21:
        0 0.000000 0.000000    22:
        0 0.000000 0.000000    23:
        0 0.000000 0.000000    24:
        0 0.000000 0.000000    25:
        0 0.000000 0.000000    26:
        0 0.000000 0.000000    27:
        0 0.000000 0.000000    28:
        0 0.000000 0.000000    29:
        0 0.000000 0.000000    30:
        0 0.000000 0.000000    31:
        0 0.000000 0.000000    32:
        0 0.000000 0.000000    33:
        0 0.000000 0.000000    34:
        0 0.000000 0.000000    35:
        0 0.000000 0.000000    36:
        0 0.000000 0.000000    37:
        0 0.000000 0.000000    38:
        0 0.000000 0.000000    39:
        0 0.000000 0.000000    40:
        0 0.000000 0.000000    41:
        0 0.000000 0.000000    42:
        0 0.000000 0.000000    43:
        0 0.000000 0.000000    44:
        0 0.000000 0.000000    45:
        0 0.000000 0.000000    46:
        0 0.000000 0.000000    47:
        0 0.000000 0.000000    48:
        0 0.000000 0.000000    49:
        0 0.000000 0.000000    50:
        0 0.000000 0.000000    51:
        0 0.000000 0.000000    52:
        0 0.000000 0.000000    53:
        0 0.000000 0.000000    54:
        0 0.000000 0.000000    55:
        0 0.000000 0.000000    56:
            ================ SmallProf version 0.9 ================
              Profile of /usr/lib/perl5/5.00503/File/Basename.pm       Page 381
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000    57:
        0 0.000000 0.000000    58:
        0 0.000000 0.000000    59:
        0 0.000000 0.000000    60:
        0 0.000000 0.000000    61:
        0 0.000000 0.000000    62:
        0 0.000000 0.000000    63:
        0 0.000000 0.000000    64:
        0 0.000000 0.000000    65:
        0 0.000000 0.000000    66:
        0 0.000000 0.000000    67:
        0 0.000000 0.000000    68:
        0 0.000000 0.000000    69:
        0 0.000000 0.000000    70:
        0 0.000000 0.000000    71:
        0 0.000000 0.000000    72:
        0 0.000000 0.000000    73:
        0 0.000000 0.000000    74:
        0 0.000000 0.000000    75:
        0 0.000000 0.000000    76:
        0 0.000000 0.000000    77:
        0 0.000000 0.000000    78:
        0 0.000000 0.000000    79:
        0 0.000000 0.000000    80:
        0 0.000000 0.000000    81:
        0 0.000000 0.000000    82:
        0 0.000000 0.000000    83:
        0 0.000000 0.000000    84:
        0 0.000000 0.000000    85:
        0 0.000000 0.000000    86:
        0 0.000000 0.000000    87:
        0 0.000000 0.000000    88:
        0 0.000000 0.000000    89:
        0 0.000000 0.000000    90:
        0 0.000000 0.000000    91:
        0 0.000000 0.000000    92:
        0 0.000000 0.000000    93:
        0 0.000000 0.000000    94:
        0 0.000000 0.000000    95:
        0 0.000000 0.000000    96:
        0 0.000000 0.000000    97:
        0 0.000000 0.000000    98:
        0 0.000000 0.000000    99:
        0 0.000000 0.000000   100:
        0 0.000000 0.000000   101:
        0 0.000000 0.000000   102:
        0 0.000000 0.000000   103:
        0 0.000000 0.000000   104:
        0 0.000000 0.000000   105:
        0 0.000000 0.000000   106:
        0 0.000000 0.000000   107:
        0 0.000000 0.000000   108:
        0 0.000000 0.000000   109:
        0 0.000000 0.000000   110:
        0 0.000000 0.000000   111:
        0 0.000000 0.000000   112:
            ================ SmallProf version 0.9 ================
              Profile of /usr/lib/perl5/5.00503/File/Basename.pm       Page 382
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   113:
        0 0.000000 0.000000   114:
        0 0.000000 0.000000   115:
        0 0.000000 0.000000   116:
        0 0.000000 0.000000   117:
        0 0.000000 0.000000   118:
        0 0.000000 0.000000   119:
        0 0.000000 0.000000   120:
        0 0.000000 0.000000   121:
        0 0.000000 0.000000   122:
        0 0.000000 0.000000   123:
        0 0.000000 0.000000   124:
        0 0.000000 0.000000   125:
        0 0.000000 0.000000   126:## use strict;
        0 0.000000 0.000000   127:use re 'taint';
        0 0.000000 0.000000   128:
        0 0.000000 0.000000   129:require Exporter;
        0 0.000000 0.000000   130:@ISA = qw(Exporter);
        0 0.000000 0.000000   131:@EXPORT = qw(fileparse fileparse_set_fstype
        0 0.000000 0.000000   132:use vars qw($VERSION $Fileparse_fstype
        0 0.000000 0.000000   133:$VERSION = "2.6";
        0 0.000000 0.000000   134:
        0 0.000000 0.000000   135:
        0 0.000000 0.000000   136:#   fileparse_set_fstype() - specify OS-based
        0 0.000000 0.000000   137:#                            calls to
        0 0.000000 0.000000   138:#
        0 0.000000 0.000000   139:#   Currently recognized values: VMS, MSDOS,
        0 0.000000 0.000000   140:#       Any other name uses Unix-style rules
        0 0.000000 0.000000   141:
        1 0.000000 0.000000   142:sub fileparse_set_fstype {
        0 0.000000 0.000000   143:  my @old = ($Fileparse_fstype,
        0 0.000000 0.000000   144:  if (@_) {
        0 0.000000 0.000000   145:    $Fileparse_fstype = $_[0];
        0 0.000000 0.000000   146:    $Fileparse_igncase = ($_[0] =~
        0 0.000000 0.000000   147:  }
        0 0.000000 0.000000   148:  wantarray ? @old : $old[0];
        0 0.000000 0.000000   149:}
        0 0.000000 0.000000   150:
        0 0.000000 0.000000   151:#   fileparse() - parse file specification
        0 0.000000 0.000000   152:#
        0 0.000000 0.000000   153:#   Version 2.4  27-Sep-1996  Charles Bailey
        0 0.000000 0.000000   154:
        0 0.000000 0.000000   155:
        2 0.000000 0.000000   156:sub fileparse {
        0 0.000000 0.000000   157:  my($fullname,@suffices) = @_;
        0 0.000000 0.000000   158:  my($fstype,$igncase) = ($Fileparse_fstype,
        0 0.000000 0.000000   159:  my($dirpath,$tail,$suffix,$basename);
        0 0.000000 0.000000   160:  my($taint) = substr($fullname,0,0);  # Is
        0 0.000000 0.000000   161:
        0 0.000000 0.000000   162:  if ($fstype =~ /^VMS/i) {
        0 0.000000 0.000000   163:    if ($fullname =~ m#/#) { $fstype = '' }
        0 0.000000 0.000000   164:    else {
        0 0.000000 0.000000   165:      ($dirpath,$basename) = ($fullname =~
        0 0.000000 0.000000   166:      $dirpath ||= '';  # should always be
        0 0.000000 0.000000   167:    }
        0 0.000000 0.000000   168:  }
            ================ SmallProf version 0.9 ================
              Profile of /usr/lib/perl5/5.00503/File/Basename.pm       Page 383
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   169:  if ($fstype =~ /^MS(DOS|Win32)/i) {
        0 0.000000 0.000000   170:    ($dirpath,$basename) = ($fullname =~
        0 0.000000 0.000000   171:    $dirpath .= '.\\' unless $dirpath =~
        0 0.000000 0.000000   172:  }
        0 0.000000 0.000000   173:  elsif ($fstype =~ /^MacOS/i) {
        0 0.000000 0.000000   174:    ($dirpath,$basename) = ($fullname =~
        0 0.000000 0.000000   175:  }
        0 0.000000 0.000000   176:  elsif ($fstype =~ /^AmigaOS/i) {
        0 0.000000 0.000000   177:    ($dirpath,$basename) = ($fullname =~
        0 0.000000 0.000000   178:    $dirpath = './' unless $dirpath;
        0 0.000000 0.000000   179:  }
        0 0.000000 0.000000   180:  elsif ($fstype !~ /^VMS/i) {  # default to
        0 0.000000 0.000000   181:    ($dirpath,$basename) = ($fullname =~
        0 0.000000 0.000000   182:    if ($^O eq 'VMS' and $fullname =~
        0 0.000000 0.000000   183:      # dev:[000000] is top of VMS tree,
        0 0.000000 0.000000   184:      ($basename,$dirpath) = ('',$fullname);
        0 0.000000 0.000000   185:    }
        0 0.000000 0.000000   186:    $dirpath = './' unless $dirpath;
        0 0.000000 0.000000   187:  }
        0 0.000000 0.000000   188:
        0 0.000000 0.000000   189:  if (@suffices) {
        0 0.000000 0.000000   190:    $tail = '';
        0 0.000000 0.000000   191:    foreach $suffix (@suffices) {
        0 0.000000 0.000000   192:      my $pat = ($igncase ? '(?i)' : '') .
        0 0.000000 0.000000   193:      if ($basename =~ s/$pat//) {
        0 0.000000 0.000000   194:        $taint .= substr($suffix,0,0);
        0 0.000000 0.000000   195:        $tail = $1 . $tail;
        0 0.000000 0.000000   196:      }
        0 0.000000 0.000000   197:    }
        0 0.000000 0.000000   198:  }
        0 0.000000 0.000000   199:
        0 0.000000 0.000000   200:  $tail .= $taint if defined $tail; # avoid
        0 0.000000 0.000000   201:  wantarray ? ($basename . $taint, $dirpath .
        0 0.000000 0.000000   202:            : $basename . $taint;
        0 0.000000 0.000000   203:}
        0 0.000000 0.000000   204:
        0 0.000000 0.000000   205:
        0 0.000000 0.000000   206:#   basename() - returns first element of
        0 0.000000 0.000000   207:
        0 0.000000 0.000000   208:sub basename {
        0 0.000000 0.000000   209:  my($name) = shift;
        0 0.000000 0.000000   210:  (fileparse($name, map("\Q$_\E",@_)))[0];
        0 0.000000 0.000000   211:}
        0 0.000000 0.000000   212:
        0 0.000000 0.000000   213:
        0 0.000000 0.000000   214:#    dirname() - returns device and directory
        0 0.000000 0.000000   215:#        Behavior matches that of Unix
        0 0.000000 0.000000   216:#        filespecs except for names ending
        0 0.000000 0.000000   217:#        This differs from the second element
        0 0.000000 0.000000   218:#        by fileparse() in that the trailing
        0 0.000000 0.000000   219:#        the last directory name if the
        0 0.000000 0.000000   220:
        0 0.000000 0.000000   221:sub dirname {
        0 0.000000 0.000000   222:    my($basename,$dirname) =
        0 0.000000 0.000000   223:    my($fstype) = $Fileparse_fstype;
        0 0.000000 0.000000   224:
            ================ SmallProf version 0.9 ================
              Profile of /usr/lib/perl5/5.00503/File/Basename.pm       Page 384
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   225:    if ($fstype =~ /VMS/i) {
        0 0.000000 0.000000   226:        if ($_[0] =~ m#/#) { $fstype = '' }
        0 0.000000 0.000000   227:        else { return $dirname ||
        0 0.000000 0.000000   228:    }
        0 0.000000 0.000000   229:    if ($fstype =~ /MacOS/i) { return
        0 0.000000 0.000000   230:    elsif ($fstype =~ /MSDOS/i) {
        0 0.000000 0.000000   231:        $dirname =~ s/([^:])[\\\/]*$/$1/;
        0 0.000000 0.000000   232:        unless( length($basename) ) {
        0 0.000000 0.000000   233:     ($basename,$dirname) = fileparse
        0 0.000000 0.000000   234:     $dirname =~ s/([^:])[\\\/]*$/$1/;
        0 0.000000 0.000000   235: }
        0 0.000000 0.000000   236:    }
        0 0.000000 0.000000   237:    elsif ($fstype =~ /MSWin32/i) {
        0 0.000000 0.000000   238:        $dirname =~ s/([^:])[\\\/]*$/$1/;
        0 0.000000 0.000000   239:        unless( length($basename) ) {
        0 0.000000 0.000000   240:     ($basename,$dirname) = fileparse
        0 0.000000 0.000000   241:     $dirname =~ s/([^:])[\\\/]*$/$1/;
        0 0.000000 0.000000   242: }
        0 0.000000 0.000000   243:    }
        0 0.000000 0.000000   244:    elsif ($fstype =~ /AmigaOS/i) {
        0 0.000000 0.000000   245:        if ( $dirname =~ /:$/) { return
        0 0.000000 0.000000   246:        chop $dirname;
        0 0.000000 0.000000   247:        $dirname =~ s#[^:/]+$## unless
        0 0.000000 0.000000   248:    }
        0 0.000000 0.000000   249:    else {
        0 0.000000 0.000000   250:        $dirname =~ s:(.)/*$:$1:;
        0 0.000000 0.000000   251:        unless( length($basename) ) {
        0 0.000000 0.000000   252:     local($File::Basename::Fileparse_fstype)
        0 0.000000 0.000000   253:     ($basename,$dirname) = fileparse
        0 0.000000 0.000000   254:     $dirname =~ s:(.)/*$:$1:;
        0 0.000000 0.000000   255: }
        0 0.000000 0.000000   256:    }
        0 0.000000 0.000000   257:
        0 0.000000 0.000000   258:    $dirname;
        0 0.000000 0.000000   259:}
        0 0.000000 0.000000   260:
        0 0.000000 0.000000   261:fileparse_set_fstype $^O;
        0 0.000000 0.000000   262:
        0 0.000000 0.000000   263:1;
            ================ SmallProf version 0.9 ================
                Profile of /usr/lib/perl5/5.00503/File/Spec.pm         Page 385
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000     1:package File::Spec;
        0 0.000000 0.000000     2:
        0 0.000000 0.000000     3:require Exporter;
        0 0.000000 0.000000     4:
        0 0.000000 0.000000     5:@ISA = qw(Exporter);
        0 0.000000 0.000000     6:# Items to export into callers namespace by
        0 0.000000 0.000000     7:# names by default without a very good
        0 0.000000 0.000000     8:# Do not simply export all your public
        0 0.000000 0.000000     9:@EXPORT = qw(
        0 0.000000 0.000000    10:
        0 0.000000 0.000000    11:);
        0 0.000000 0.000000    12:@EXPORT_OK = qw($Verbose);
        0 0.000000 0.000000    13:
        0 0.000000 0.000000    14:use strict;
        0 0.000000 0.000000    15:use vars qw(@ISA $VERSION $Verbose);
        0 0.000000 0.000000    16:
        0 0.000000 0.000000    17:$VERSION = '0.6';
        0 0.000000 0.000000    18:
        0 0.000000 0.000000    19:$Verbose = 0;
        0 0.000000 0.000000    20:
        0 0.000000 0.000000    21:require File::Spec::Unix;
        0 0.000000 0.000000    22:
        0 0.000000 0.000000    23:
        1 0.000000 0.000000    24:sub load {
        0 0.000000 0.000000    25: my($class,$OS) = @_;
        0 0.000000 0.000000    26: if ($OS eq 'VMS') {
        0 0.000000 0.000000    27:  require File::Spec::VMS;
        0 0.000000 0.000000    28:  require VMS::Filespec;
        0 0.000000 0.000000    29:  'File::Spec::VMS'
        0 0.000000 0.000000    30: } elsif ($OS eq 'os2') {
        0 0.000000 0.000000    31:  require File::Spec::OS2;
        0 0.000000 0.000000    32:  'File::Spec::OS2'
        0 0.000000 0.000000    33: } elsif ($OS eq 'MacOS') {
        0 0.000000 0.000000    34:  require File::Spec::Mac;
        0 0.000000 0.000000    35:  'File::Spec::Mac'
        0 0.000000 0.000000    36: } elsif ($OS eq 'MSWin32') {
        0 0.000000 0.000000    37:  require File::Spec::Win32;
        0 0.000000 0.000000    38:  'File::Spec::Win32'
        0 0.000000 0.000000    39: } else {
        0 0.000000 0.000000    40:  'File::Spec::Unix'
        0 0.000000 0.000000    41: }
        0 0.000000 0.000000    42:}
        0 0.000000 0.000000    43:
        0 0.000000 0.000000    44:@ISA = load('File::Spec', $^O);
        0 0.000000 0.000000    45:
        0 0.000000 0.000000    46:1;
        0 0.000000 0.000000    47:__END__
            ================ SmallProf version 0.9 ================
              Profile of /usr/lib/perl5/5.00503/File/Spec/Unix.pm      Page 386
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000     1:package File::Spec::Unix;
        0 0.000000 0.000000     2:
        0 0.000000 0.000000     3:use Exporter ();
        0 0.000000 0.000000     4:use Config;
        0 0.000000 0.000000     5:use File::Basename qw(basename dirname
        0 0.000000 0.000000     6:use DirHandle;
        0 0.000000 0.000000     7:use strict;
        0 0.000000 0.000000     8:use vars qw(@ISA $Is_Mac $Is_OS2 $Is_VMS
        0 0.000000 0.000000     9:use File::Spec;
        0 0.000000 0.000000    10:
        0 0.000000 0.000000    11:Exporter::import('File::Spec', '$Verbose');
        0 0.000000 0.000000    12:
        0 0.000000 0.000000    13:$Is_OS2 = $^O eq 'os2';
        0 0.000000 0.000000    14:$Is_Mac = $^O eq 'MacOS';
        0 0.000000 0.000000    15:$Is_Win32 = $^O eq 'MSWin32';
        0 0.000000 0.000000    16:
        0 0.000000 0.000000    17:if ($Is_VMS = $^O eq 'VMS') {
        0 0.000000 0.000000    18:    require VMS::Filespec;
        0 0.000000 0.000000    19:    import VMS::Filespec qw( &vmsify );
        0 0.000000 0.000000    20:}
        0 0.000000 0.000000    21:
        0 0.000000 0.000000    22:=head1 NAME
        0 0.000000 0.000000    23:
        0 0.000000 0.000000    24:
        0 0.000000 0.000000    25:
        0 0.000000 0.000000    26:
        0 0.000000 0.000000    27:
        0 0.000000 0.000000    28:
        0 0.000000 0.000000    29:
        0 0.000000 0.000000    30:
        0 0.000000 0.000000    31:
        0 0.000000 0.000000    32:
        0 0.000000 0.000000    33:
        0 0.000000 0.000000    34:
        0 0.000000 0.000000    35:
        0 0.000000 0.000000    36:
        0 0.000000 0.000000    37:
        0 0.000000 0.000000    38:
        0 0.000000 0.000000    39:
        0 0.000000 0.000000    40:
        0 0.000000 0.000000    41:
        0 0.000000 0.000000    42:
        0 0.000000 0.000000    43:
        0 0.000000 0.000000    44:
        0 0.000000 0.000000    45:sub canonpath {
        0 0.000000 0.000000    46:    my($self,$path) = @_;
        0 0.000000 0.000000    47:    $path =~ s|/+|/|g ;
        0 0.000000 0.000000    48:    $path =~ s|(/\.)+/|/|g ;
        0 0.000000 0.000000    49:    $path =~ s|^(\./)+|| unless $path eq
        0 0.000000 0.000000    50:    $path =~ s|/$|| unless $path eq "/";
        0 0.000000 0.000000    51:    $path;
        0 0.000000 0.000000    52:}
        0 0.000000 0.000000    53:
        0 0.000000 0.000000    54:=item catdir
        0 0.000000 0.000000    55:
        0 0.000000 0.000000    56:
            ================ SmallProf version 0.9 ================
              Profile of /usr/lib/perl5/5.00503/File/Spec/Unix.pm      Page 387
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000    57:
        0 0.000000 0.000000    58:
        0 0.000000 0.000000    59:
        0 0.000000 0.000000    60:
        0 0.000000 0.000000    61:
        0 0.000000 0.000000    62:
        0 0.000000 0.000000    63:
        0 0.000000 0.000000    64:# ';
        0 0.000000 0.000000    65:
       12 0.000000 0.000000    66:sub catdir {
        0 0.000000 0.000000    67:    shift;
        0 0.000000 0.000000    68:    my @args = @_;
        0 0.000000 0.000000    69:    for (@args) {
        0 0.000000 0.000000    70: # append a slash to each argument unless it
        0 0.000000 0.000000    71: $_ .= "/" if $_ eq '' or substr($_,-1) ne
        0 0.000000 0.000000    72:    }
        0 0.000000 0.000000    73:    my $result = join('', @args);
        0 0.000000 0.000000    74:    # remove a trailing slash unless we are
        0 0.000000 0.000000    75:    substr($result,-1) = ""
        0 0.000000 0.000000    76: if length($result) > 1 && substr($result,-1)
        0 0.000000 0.000000    77:    $result;
        0 0.000000 0.000000    78:}
        0 0.000000 0.000000    79:
        0 0.000000 0.000000    80:=item catfile
        0 0.000000 0.000000    81:
        0 0.000000 0.000000    82:
        0 0.000000 0.000000    83:
        0 0.000000 0.000000    84:
        0 0.000000 0.000000    85:
        0 0.000000 0.000000    86:
       12 0.000000 0.000000    87:sub catfile {
        0 0.000000 0.000000    88:    my $self = shift @_;
        0 0.000000 0.000000    89:    my $file = pop @_;
        0 0.000000 0.000000    90:    return $file unless @_;
        0 0.000000 0.000000    91:    my $dir = $self->catdir(@_);
        0 0.000000 0.000000    92:    for ($dir) {
        0 0.000000 0.000000    93: $_ .= "/" unless substr($_,length($_)-1,1)
        0 0.000000 0.000000    94:    }
        0 0.000000 0.000000    95:    return $dir.$file;
        0 0.000000 0.000000    96:}
        0 0.000000 0.000000    97:
        0 0.000000 0.000000    98:=item curdir
        0 0.000000 0.000000    99:
        0 0.000000 0.000000   100:
        0 0.000000 0.000000   101:
        0 0.000000 0.000000   102:
        0 0.000000 0.000000   103:
        0 0.000000 0.000000   104:sub curdir {
        0 0.000000 0.000000   105:    return "." ;
        0 0.000000 0.000000   106:}
        0 0.000000 0.000000   107:
        0 0.000000 0.000000   108:=item rootdir
        0 0.000000 0.000000   109:
        0 0.000000 0.000000   110:
        0 0.000000 0.000000   111:
        0 0.000000 0.000000   112:
            ================ SmallProf version 0.9 ================
              Profile of /usr/lib/perl5/5.00503/File/Spec/Unix.pm      Page 388
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   113:
        0 0.000000 0.000000   114:sub rootdir {
        0 0.000000 0.000000   115:    return "/";
        0 0.000000 0.000000   116:}
        0 0.000000 0.000000   117:
        0 0.000000 0.000000   118:=item updir
        0 0.000000 0.000000   119:
        0 0.000000 0.000000   120:
        0 0.000000 0.000000   121:
        0 0.000000 0.000000   122:
        0 0.000000 0.000000   123:
        1 0.000000 0.000000   124:sub updir {
        0 0.000000 0.000000   125:    return "..";
        0 0.000000 0.000000   126:}
        0 0.000000 0.000000   127:
        0 0.000000 0.000000   128:=item no_upwards
        0 0.000000 0.000000   129:
        0 0.000000 0.000000   130:
        0 0.000000 0.000000   131:
        0 0.000000 0.000000   132:
        0 0.000000 0.000000   133:
        0 0.000000 0.000000   134:
        0 0.000000 0.000000   135:sub no_upwards {
        0 0.000000 0.000000   136:    my($self) = shift;
        0 0.000000 0.000000   137:    return grep(!/^\.{1,2}$/, @_);
        0 0.000000 0.000000   138:}
        0 0.000000 0.000000   139:
        0 0.000000 0.000000   140:=item file_name_is_absolute
        0 0.000000 0.000000   141:
        0 0.000000 0.000000   142:
        0 0.000000 0.000000   143:
        0 0.000000 0.000000   144:
        0 0.000000 0.000000   145:
        1 0.000000 0.000000   146:sub file_name_is_absolute {
        0 0.000000 0.000000   147:    my($self,$file) = @_;
        0 0.000000 0.000000   148:    $file =~ m:^/: ;
        0 0.000000 0.000000   149:}
        0 0.000000 0.000000   150:
        0 0.000000 0.000000   151:=item path
        0 0.000000 0.000000   152:
        0 0.000000 0.000000   153:
        0 0.000000 0.000000   154:
        0 0.000000 0.000000   155:
        0 0.000000 0.000000   156:
        1 0.000000 0.000000   157:sub path {
        0 0.000000 0.000000   158:    my($self) = @_;
        0 0.000000 0.000000   159:    my $path_sep = ":";
        0 0.000000 0.000000   160:    my $path = $ENV{PATH};
        0 0.000000 0.000000   161:    my @path = split $path_sep, $path;
        0 0.000000 0.000000   162:    foreach(@path) { $_ = '.' if $_ eq '' }
        0 0.000000 0.000000   163:    @path;
        0 0.000000 0.000000   164:}
        0 0.000000 0.000000   165:
        0 0.000000 0.000000   166:=item join
        0 0.000000 0.000000   167:
        0 0.000000 0.000000   168:
            ================ SmallProf version 0.9 ================
              Profile of /usr/lib/perl5/5.00503/File/Spec/Unix.pm      Page 389
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   169:
        0 0.000000 0.000000   170:
        0 0.000000 0.000000   171:
        0 0.000000 0.000000   172:sub join {
        0 0.000000 0.000000   173: my($self) = shift @_;
        0 0.000000 0.000000   174: $self->catfile(@_);
        0 0.000000 0.000000   175:}
        0 0.000000 0.000000   176:
        0 0.000000 0.000000   177:=item nativename
        0 0.000000 0.000000   178:
        0 0.000000 0.000000   179:
        0 0.000000 0.000000   180:
        0 0.000000 0.000000   181:
        0 0.000000 0.000000   182:
        0 0.000000 0.000000   183:sub nativename {
        0 0.000000 0.000000   184: my($self,$name) = shift @_;
        0 0.000000 0.000000   185: $name;
        0 0.000000 0.000000   186:}
        0 0.000000 0.000000   187:
        0 0.000000 0.000000   188:=back
        0 0.000000 0.000000   189:
        0 0.000000 0.000000   190:
        0 0.000000 0.000000   191:
        0 0.000000 0.000000   192:
        0 0.000000 0.000000   193:
        0 0.000000 0.000000   194:
        0 0.000000 0.000000   195:
        0 0.000000 0.000000   196:1;
        0 0.000000 0.000000   197:__END__
            ================ SmallProf version 0.9 ================
                Profile of /usr/lib/perl5/5.00503/FileHandle.pm        Page 390
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000     1:package FileHandle;
        0 0.000000 0.000000     2:
        0 0.000000 0.000000     3:use 5.003_11;
        0 0.000000 0.000000     4:use strict;
        0 0.000000 0.000000     5:use vars qw($VERSION @ISA @EXPORT
        0 0.000000 0.000000     6:
        0 0.000000 0.000000     7:$VERSION = "2.00";
        0 0.000000 0.000000     8:
        0 0.000000 0.000000     9:require IO::File;
        0 0.000000 0.000000    10:@ISA = qw(IO::File);
        0 0.000000 0.000000    11:
        0 0.000000 0.000000    12:@EXPORT = qw(_IOFBF _IOLBF _IONBF);
        0 0.000000 0.000000    13:
        0 0.000000 0.000000    14:@EXPORT_OK = qw(
        0 0.000000 0.000000    15:    pipe
        0 0.000000 0.000000    16:
        0 0.000000 0.000000    17:    autoflush
        0 0.000000 0.000000    18:    output_field_separator
        0 0.000000 0.000000    19:    output_record_separator
        0 0.000000 0.000000    20:    input_record_separator
        0 0.000000 0.000000    21:    input_line_number
        0 0.000000 0.000000    22:    format_page_number
        0 0.000000 0.000000    23:    format_lines_per_page
        0 0.000000 0.000000    24:    format_lines_left
        0 0.000000 0.000000    25:    format_name
        0 0.000000 0.000000    26:    format_top_name
        0 0.000000 0.000000    27:    format_line_break_characters
        0 0.000000 0.000000    28:    format_formfeed
        0 0.000000 0.000000    29:
        0 0.000000 0.000000    30:    print
        0 0.000000 0.000000    31:    printf
        0 0.000000 0.000000    32:    getline
        0 0.000000 0.000000    33:    getlines
        0 0.000000 0.000000    34:);
        0 0.000000 0.000000    35:
        0 0.000000 0.000000    36:#
        0 0.000000 0.000000    37:# Everything we're willing to export, we must
        0 0.000000 0.000000    38:#
        0 0.000000 0.000000    39:import IO::Handle grep { !defined(&$_) }
        0 0.000000 0.000000    40:
        0 0.000000 0.000000    41:#
        0 0.000000 0.000000    42:# Some people call "FileHandle::function", so
        0 0.000000 0.000000    43:# that were in the old FileHandle class must
        0 0.000000 0.000000    44:#
        0 0.000000 0.000000    45:{
        0 0.000000 0.000000    46:    no strict 'refs';
        0 0.000000 0.000000    47:
        0 0.000000 0.000000    48:    my %import = (
        0 0.000000 0.000000    49: 'IO::Handle' =>
        0 0.000000 0.000000    50:     [qw(DESTROY new_from_fd fdopen close
        0 0.000000 0.000000    51:  eof flush error clearerr setbuf setvbuf
        0 0.000000 0.000000    52: 'IO::Seekable' =>
        0 0.000000 0.000000    53:     [qw(seek tell getpos setpos)],
        0 0.000000 0.000000    54: 'IO::File' =>
        0 0.000000 0.000000    55:     [qw(new new_tmpfile open)]
        0 0.000000 0.000000    56:    );
            ================ SmallProf version 0.9 ================
                Profile of /usr/lib/perl5/5.00503/FileHandle.pm        Page 391
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000    57:    for my $pkg (keys %import) {
        0 0.000000 0.000000    58: for my $func (@{$import{$pkg}}) {
        0 0.000000 0.000000    59:     my $c = *{"${pkg}::$func"}{CODE}
        0 0.000000 0.000000    60:  or die "${pkg}::$func missing";
        0 0.000000 0.000000    61:     *$func = $c;
        0 0.000000 0.000000    62: }
        0 0.000000 0.000000    63:    }
        0 0.000000 0.000000    64:}
        0 0.000000 0.000000    65:
        0 0.000000 0.000000    66:#
        0 0.000000 0.000000    67:# Specialized importer for Fcntl magic.
        0 0.000000 0.000000    68:#
        2 0.000000 0.000000    69:sub import {
        0 0.000000 0.000000    70:    my $pkg = shift;
        0 0.000000 0.000000    71:    my $callpkg = caller;
        0 0.000000 0.000000    72:    require Exporter;
        0 0.000000 0.000000    73:    Exporter::export($pkg, $callpkg, @_);
        0 0.000000 0.000000    74:
        0 0.000000 0.000000    75:    #
        0 0.000000 0.000000    76:    # If the Fcntl extension is available,
        0 0.000000 0.000000    77:    #  export its constants.
        0 0.000000 0.000000    78:    #
        0 0.000000 0.000000    79:    eval {
        0 0.000000 0.000000    80: require Fcntl;
        0 0.000000 0.000000    81: Exporter::export('Fcntl', $callpkg);
        0 0.000000 0.000000    82:    };
        0 0.000000 0.000000    83:}
        0 0.000000 0.000000    84:
        0 0.000000 0.000000    85:#############################################
        0 0.000000 0.000000    86:# This is the only exported function we
        0 0.000000 0.000000    87:# the rest come from other classes.
        0 0.000000 0.000000    88:#
        0 0.000000 0.000000    89:
        0 0.000000 0.000000    90:sub pipe {
        0 0.000000 0.000000    91:    my $r = new IO::Handle;
        0 0.000000 0.000000    92:    my $w = new IO::Handle;
        0 0.000000 0.000000    93:    CORE::pipe($r, $w) or return undef;
        0 0.000000 0.000000    94:    ($r, $w);
        0 0.000000 0.000000    95:}
        0 0.000000 0.000000    96:
        0 0.000000 0.000000    97:# Rebless standard file handles
        0 0.000000 0.000000    98:bless *STDIN{IO},  "FileHandle" if ref
        0 0.000000 0.000000    99:bless *STDOUT{IO}, "FileHandle" if ref
        0 0.000000 0.000000   100:bless *STDERR{IO}, "FileHandle" if ref
        0 0.000000 0.000000   101:
        0 0.000000 0.000000   102:1;
        0 0.000000 0.000000   103:
        0 0.000000 0.000000   104:__END__
            ================ SmallProf version 0.9 ================
                  Profile of /usr/lib/perl5/5.00503/Shell.pm           Page 392
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000     1:package Shell;
        0 0.000000 0.000000     2:
        0 0.000000 0.000000     3:use Config;
        0 0.000000 0.000000     4:
        1 0.000000 0.000000     5:sub import {
        0 0.000000 0.000000     6:    my $self = shift;
        0 0.000000 0.000000     7:    my ($callpack, $callfile, $callline) =
        0 0.000000 0.000000     8:    my @EXPORT;
        0 0.000000 0.000000     9:    if (@_) {
        0 0.000000 0.000000    10: @EXPORT = @_;
        0 0.000000 0.000000    11:    }
        0 0.000000 0.000000    12:    else {
        0 0.000000 0.000000    13: @EXPORT = 'AUTOLOAD';
        0 0.000000 0.000000    14:    }
        0 0.000000 0.000000    15:    foreach $sym (@EXPORT) {
        0 0.000000 0.000000    16:        *{"${callpack}::$sym"} =
        0 0.000000 0.000000    17:    }
        0 0.000000 0.000000    18:};
        0 0.000000 0.000000    19:
        0 0.000000 0.000000    20:AUTOLOAD {
        0 0.000000 0.000000    21:    my $cmd = $AUTOLOAD;
        0 0.000000 0.000000    22:    $cmd =~ s/^.*:://;
        0 0.000000 0.000000    23:    eval qq {
        0 0.000000 0.000000    24: *$AUTOLOAD = sub {
        0 0.000000 0.000000    25:     if (\@_ < 1) {
        0 0.000000 0.000000    26:  `$cmd`;
        0 0.000000 0.000000    27:     }
        0 0.000000 0.000000    28:     elsif (\$Config{'archname'} eq 'os2') {
        0 0.000000 0.000000    29:  local(\*SAVEOUT, \*READ, \*WRITE);
        0 0.000000 0.000000    30:
        0 0.000000 0.000000    31:  open SAVEOUT, '>&STDOUT' or die;
        0 0.000000 0.000000    32:  pipe READ, WRITE or die;
        0 0.000000 0.000000    33:  open STDOUT, '>&WRITE' or die;
        0 0.000000 0.000000    34:  close WRITE;
        0 0.000000 0.000000    35:
        0 0.000000 0.000000    36:  my \$pid = system(1, \$cmd, \@_);
        0 0.000000 0.000000    37:  die "Can't execute $cmd: \$!\n" if \$pid <
        0 0.000000 0.000000    38:
        0 0.000000 0.000000    39:  open STDOUT, '>&SAVEOUT' or die;
        0 0.000000 0.000000    40:  close SAVEOUT;
        0 0.000000 0.000000    41:
        0 0.000000 0.000000    42:  if (wantarray) {
        0 0.000000 0.000000    43:      my \@ret = <READ>;
        0 0.000000 0.000000    44:      close READ;
        0 0.000000 0.000000    45:      waitpid \$pid, 0;
        0 0.000000 0.000000    46:      \@ret;
        0 0.000000 0.000000    47:  }
        0 0.000000 0.000000    48:  else {
        0 0.000000 0.000000    49:      local(\$/) = undef;
        0 0.000000 0.000000    50:      my \$ret = <READ>;
        0 0.000000 0.000000    51:      close READ;
        0 0.000000 0.000000    52:      waitpid \$pid, 0;
        0 0.000000 0.000000    53:      \$ret;
        0 0.000000 0.000000    54:  }
        0 0.000000 0.000000    55:     }
        0 0.000000 0.000000    56:     else {
            ================ SmallProf version 0.9 ================
                  Profile of /usr/lib/perl5/5.00503/Shell.pm           Page 393
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000    57:  open(SUBPROC, "-|")
        0 0.000000 0.000000    58:   or exec '$cmd', \@_
        0 0.000000 0.000000    59:   or die "Can't exec $cmd: \$!\n";
        0 0.000000 0.000000    60:  if (wantarray) {
        0 0.000000 0.000000    61:      my \@ret = <SUBPROC>;
        0 0.000000 0.000000    62:      close SUBPROC; # XXX Oughta use a
        0 0.000000 0.000000    63:      \@ret;
        0 0.000000 0.000000    64:  }
        0 0.000000 0.000000    65:  else {
        0 0.000000 0.000000    66:      local(\$/) = undef;
        0 0.000000 0.000000    67:      my \$ret = <SUBPROC>;
        0 0.000000 0.000000    68:      close SUBPROC;
        0 0.000000 0.000000    69:      \$ret;
        0 0.000000 0.000000    70:  }
        0 0.000000 0.000000    71:     }
        0 0.000000 0.000000    72: }
        0 0.000000 0.000000    73:    };
        0 0.000000 0.000000    74:    goto &$AUTOLOAD;
        0 0.000000 0.000000    75:}
        0 0.000000 0.000000    76:
        0 0.000000 0.000000    77:1;
        0 0.000000 0.000000    78:__END__
            ================ SmallProf version 0.9 ================
                  Profile of /usr/lib/perl5/5.00503/Symbol.pm          Page 394
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000     1:package Symbol;
        0 0.000000 0.000000     2:
        0 0.000000 0.000000     3:=head1 NAME
        0 0.000000 0.000000     4:
        0 0.000000 0.000000     5:
        0 0.000000 0.000000     6:
        0 0.000000 0.000000     7:
        0 0.000000 0.000000     8:
        0 0.000000 0.000000     9:
        0 0.000000 0.000000    10:
        0 0.000000 0.000000    11:
        0 0.000000 0.000000    12:
        0 0.000000 0.000000    13:
        0 0.000000 0.000000    14:
        0 0.000000 0.000000    15:
        0 0.000000 0.000000    16:
        0 0.000000 0.000000    17:
        0 0.000000 0.000000    18:
        0 0.000000 0.000000    19:
        0 0.000000 0.000000    20:
        0 0.000000 0.000000    21:
        0 0.000000 0.000000    22:
        0 0.000000 0.000000    23:
        0 0.000000 0.000000    24:
        0 0.000000 0.000000    25:
        0 0.000000 0.000000    26:
        0 0.000000 0.000000    27:
        0 0.000000 0.000000    28:
        0 0.000000 0.000000    29:
        0 0.000000 0.000000    30:
        0 0.000000 0.000000    31:
        0 0.000000 0.000000    32:
        0 0.000000 0.000000    33:
        0 0.000000 0.000000    34:
        0 0.000000 0.000000    35:
        0 0.000000 0.000000    36:
        0 0.000000 0.000000    37:
        0 0.000000 0.000000    38:
        0 0.000000 0.000000    39:
        0 0.000000 0.000000    40:
        0 0.000000 0.000000    41:
        0 0.000000 0.000000    42:
        0 0.000000 0.000000    43:
        0 0.000000 0.000000    44:
        0 0.000000 0.000000    45:
        0 0.000000 0.000000    46:
        0 0.000000 0.000000    47:
        0 0.000000 0.000000    48:
        0 0.000000 0.000000    49:
        0 0.000000 0.000000    50:
        0 0.000000 0.000000    51:
        0 0.000000 0.000000    52:
        0 0.000000 0.000000    53:
        0 0.000000 0.000000    54:
        0 0.000000 0.000000    55:
        0 0.000000 0.000000    56:
            ================ SmallProf version 0.9 ================
                  Profile of /usr/lib/perl5/5.00503/Symbol.pm          Page 395
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000    57:
        0 0.000000 0.000000    58:
        0 0.000000 0.000000    59:
        0 0.000000 0.000000    60:
        0 0.000000 0.000000    61:
        0 0.000000 0.000000    62:
        0 0.000000 0.000000    63:
        0 0.000000 0.000000    64:
        0 0.000000 0.000000    65:
        0 0.000000 0.000000    66:BEGIN { require 5.002; }
        0 0.000000 0.000000    67:
        0 0.000000 0.000000    68:require Exporter;
        0 0.000000 0.000000    69:@ISA = qw(Exporter);
        0 0.000000 0.000000    70:@EXPORT = qw(gensym ungensym qualify
        0 0.000000 0.000000    71:@EXPORT_OK = qw(delete_package);
        0 0.000000 0.000000    72:
        0 0.000000 0.000000    73:$VERSION = 1.02;
        0 0.000000 0.000000    74:
        0 0.000000 0.000000    75:my $genpkg = "Symbol::";
        0 0.000000 0.000000    76:my $genseq = 0;
        0 0.000000 0.000000    77:
        0 0.000000 0.000000    78:my %global = map {$_ => 1} qw(ARGV ARGVOUT
        0 0.000000 0.000000    79:
        0 0.000000 0.000000    80:#
        0 0.000000 0.000000    81:# Note that we never _copy_ the glob; we just
        0 0.000000 0.000000    82:# If we did copy it, then SVf_FAKE would be
        0 0.000000 0.000000    83:# glob-specific behaviors (e.g. C<*$ref =
        0 0.000000 0.000000    84:#
        1 0.000000 0.000000    85:sub gensym () {
        1 0.000016 0.000000    86:    my $name = "GEN" . $genseq++;
        2 0.000021 0.000000    87:    my $ref = \*{$genpkg . $name};
        1 0.000009 0.000000    88:    delete $$genpkg{$name};
        1 0.000007 0.000000    89:    $ref;
        0 0.000000 0.000000    90:}
        0 0.000000 0.000000    91:
        0 0.000000 0.000000    92:sub ungensym ($) {}
        0 0.000000 0.000000    93:
        0 0.000000 0.000000    94:sub qualify ($;$) {
        0 0.000000 0.000000    95:    my ($name) = @_;
        0 0.000000 0.000000    96:    if (!ref($name) && index($name, '::') ==
        0 0.000000 0.000000    97: my $pkg;
        0 0.000000 0.000000    98: # Global names: special character, "^x", or
        0 0.000000 0.000000    99: if ($name =~ /^([^a-z])|(\^[a-z])$/i ||
        0 0.000000 0.000000   100:     $pkg = "main";
        0 0.000000 0.000000   101: }
        0 0.000000 0.000000   102: else {
        0 0.000000 0.000000   103:     $pkg = (@_ > 1) ? $_[1] : caller;
        0 0.000000 0.000000   104: }
        0 0.000000 0.000000   105: $name = $pkg . "::" . $name;
        0 0.000000 0.000000   106:    }
        0 0.000000 0.000000   107:    $name;
        0 0.000000 0.000000   108:}
        0 0.000000 0.000000   109:
        0 0.000000 0.000000   110:sub qualify_to_ref ($;$) {
        0 0.000000 0.000000   111:    return \*{ qualify $_[0], @_ > 1 ? $_[1]
        0 0.000000 0.000000   112:}
            ================ SmallProf version 0.9 ================
                  Profile of /usr/lib/perl5/5.00503/Symbol.pm          Page 396
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   113:
        0 0.000000 0.000000   114:#
        0 0.000000 0.000000   115:# of Safe.pm lineage
        0 0.000000 0.000000   116:#
        0 0.000000 0.000000   117:sub delete_package ($) {
        0 0.000000 0.000000   118:    my $pkg = shift;
        0 0.000000 0.000000   119:
        0 0.000000 0.000000   120:    # expand to full symbol table name if
        0 0.000000 0.000000   121:
        0 0.000000 0.000000   122:    unless ($pkg =~ /^main::.*::$/) {
        0 0.000000 0.000000   123:        $pkg = "main$pkg" if $pkg =~ /^::/;
        0 0.000000 0.000000   124:        $pkg = "main::$pkg" unless $pkg =~
        0 0.000000 0.000000   125:        $pkg .= '::'  unless $pkg =~ /::$/;
        0 0.000000 0.000000   126:    }
        0 0.000000 0.000000   127:
        0 0.000000 0.000000   128:    my($stem, $leaf) = $pkg =~
        0 0.000000 0.000000   129:    my $stem_symtab = *{$stem}{HASH};
        0 0.000000 0.000000   130:    return unless defined $stem_symtab and
        0 0.000000 0.000000   131:
        0 0.000000 0.000000   132:    my $leaf_glob   = $stem_symtab->{$leaf};
        0 0.000000 0.000000   133:    my $leaf_symtab = *{$leaf_glob}{HASH};
        0 0.000000 0.000000   134:
        0 0.000000 0.000000   135:    %$leaf_symtab = ();
        0 0.000000 0.000000   136:    delete $stem_symtab->{$leaf};
        0 0.000000 0.000000   137:}
        0 0.000000 0.000000   138:
        0 0.000000 0.000000   139:1;
            ================ SmallProf version 0.9 ================
            Profile of /usr/lib/perl5/5.00503/i686-linux/Config.pm     Page 397
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000     1:package Config;
        0 0.000000 0.000000     2:use Exporter ();
        0 0.000000 0.000000     3:@ISA = (Exporter);
        0 0.000000 0.000000     4:@EXPORT = qw(%Config);
        0 0.000000 0.000000     5:@EXPORT_OK = qw(myconfig config_sh
        0 0.000000 0.000000     6:
        0 0.000000 0.000000     7:$] == 5.00503
        0 0.000000 0.000000     8:  or die "Perl lib version (5.00503) doesn't
        0 0.000000 0.000000     9:
        0 0.000000 0.000000    10:# This file was created by configpm when Perl
        0 0.000000 0.000000    11:# made to this file will be lost the next
        0 0.000000 0.000000    12:
        0 0.000000 0.000000    13:##
        0 0.000000 0.000000    14:## This file was produced by running the
        0 0.000000 0.000000    15:## definitions figured out by Configure.
        0 0.000000 0.000000    16:## do not forget to propagate your changes by
        0 0.000000 0.000000    17:## instead choose to run each of the .SH
        0 0.000000 0.000000    18:##
        0 0.000000 0.000000    19:#
        0 0.000000 0.000000    20:## Package name      : perl5
        0 0.000000 0.000000    21:## Source directory  :
        0 0.000000 0.000000    22:## Configuration time: Tue May 15 16:29:38
        0 0.000000 0.000000    23:## Configured by     : root
        0 0.000000 0.000000    24:## Target system     : linux blue 2.2.16 #1
        0 0.000000 0.000000    25:#
        0 0.000000 0.000000    26:## Configure command line arguments.
        0 0.000000 0.000000    27:
        0 0.000000 0.000000    28:my $config_sh = <<'!END!';
        0 0.000000 0.000000    29:archlibexp='/usr/lib/perl5/5.00503/i686-
        0 0.000000 0.000000    30:archname='i686-linux'
        0 0.000000 0.000000    31:cc='cc'
        0 0.000000 0.000000    32:ccflags='-Dbool=char -DHAS_BOOL -
        0 0.000000 0.000000    33:cppflags='-Dbool=char -DHAS_BOOL -
        0 0.000000 0.000000    34:dlsrc='dl_dlopen.xs'
        0 0.000000 0.000000    35:dynamic_ext='B DB_File Data/Dumper Fcntl
        0 0.000000 0.000000    36:extensions='B DB_File Data/Dumper Fcntl
        0 0.000000 0.000000    37:installarchlib='/usr/lib/perl5/5.00503/i686-
        0 0.000000 0.000000    38:installprivlib='/usr/lib/perl5/5.00503'
        0 0.000000 0.000000    39:libpth='/usr/local/lib /lib /usr/lib'
        0 0.000000 0.000000    40:libs='-lnsl -lndbm -lgdbm -ldbm -ldb -ldl -lm
        0 0.000000 0.000000    41:osname='linux'
        0 0.000000 0.000000    42:osvers='2.2.16'
        0 0.000000 0.000000    43:prefix='/usr'
        0 0.000000 0.000000    44:privlibexp='/usr/lib/perl5/5.00503'
        0 0.000000 0.000000    45:sharpbang='#!'
        0 0.000000 0.000000    46:shsharp='true'
        0 0.000000 0.000000    47:sig_name='ZERO HUP INT QUIT ILL TRAP ABRT BUS
        0 0.000000 0.000000    48:sig_num='0 1 2 3 4 5 6 7 8 9 10 11 12 13 14
        0 0.000000 0.000000    49:so='so'
        0 0.000000 0.000000    50:startsh='#!/bin/sh'
        0 0.000000 0.000000    51:static_ext=' '
        0 0.000000 0.000000    52:Author=''
        0 0.000000 0.000000    53:CONFIG='true'
        0 0.000000 0.000000    54:Date='$Date'
        0 0.000000 0.000000    55:Header=''
        0 0.000000 0.000000    56:Id='$Id'
            ================ SmallProf version 0.9 ================
            Profile of /usr/lib/perl5/5.00503/i686-linux/Config.pm     Page 398
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000    57:Locker=''
        0 0.000000 0.000000    58:Log='$Log'
        0 0.000000 0.000000    59:Mcc='Mcc'
        0 0.000000 0.000000    60:PATCHLEVEL='5'
        0 0.000000 0.000000    61:RCSfile='$RCSfile'
        0 0.000000 0.000000    62:Revision='$Revision'
        0 0.000000 0.000000    63:SUBVERSION='3'
        0 0.000000 0.000000    64:Source=''
        0 0.000000 0.000000    65:State=''
        0 0.000000 0.000000    66:_a='.a'
        0 0.000000 0.000000    67:_exe=''
        0 0.000000 0.000000    68:_o='.o'
        0 0.000000 0.000000    69:afs='false'
        0 0.000000 0.000000    70:alignbytes='4'
        0 0.000000 0.000000    71:ansi2knr=''
        0 0.000000 0.000000    72:aphostname=''
        0 0.000000 0.000000    73:apiversion='5.005'
        0 0.000000 0.000000    74:ar='ar'
        0 0.000000 0.000000    75:archlib='/usr/lib/perl5/5.00503/i686-linux'
        0 0.000000 0.000000    76:archobjs=''
        0 0.000000 0.000000    77:awk='awk'
        0 0.000000 0.000000    78:baserev='5.0'
        0 0.000000 0.000000    79:bash=''
        0 0.000000 0.000000    80:bin='/usr/bin'
        0 0.000000 0.000000    81:binexp='/usr/bin'
        0 0.000000 0.000000    82:bison=''
        0 0.000000 0.000000    83:byacc='byacc'
        0 0.000000 0.000000    84:byteorder='1234'
        0 0.000000 0.000000    85:c=''
        0 0.000000 0.000000    86:castflags='0'
        0 0.000000 0.000000    87:cat='cat'
        0 0.000000 0.000000    88:cccdlflags='-fpic'
        0 0.000000 0.000000    89:ccdlflags='-rdynamic'
        0 0.000000 0.000000    90:ccsymbols='__ELF__=1 __GNUC_MINOR__=95
        0 0.000000 0.000000    91:cf_by='root'
        0 0.000000 0.000000    92:cf_email='root@blue.rfi.net'
        0 0.000000 0.000000    93:cf_time='Tue May 15 16:29:38 CEST 2001'
        0 0.000000 0.000000    94:chgrp=''
        0 0.000000 0.000000    95:chmod=''
        0 0.000000 0.000000    96:chown=''
        0 0.000000 0.000000    97:clocktype='clock_t'
        0 0.000000 0.000000    98:comm='comm'
        0 0.000000 0.000000    99:compress=''
        0 0.000000 0.000000   100:config_arg0='/root/.cpan/build/perl5.005_03/C
        0 0.000000 0.000000   101:config_argc='0'
        0 0.000000 0.000000   102:config_args=''
        0 0.000000 0.000000   103:contains='grep'
        0 0.000000 0.000000   104:cp='cp'
        0 0.000000 0.000000   105:cpio=''
        0 0.000000 0.000000   106:cpp='cpp'
        0 0.000000 0.000000   107:cpp_stuff='42'
        0 0.000000 0.000000   108:cppccsymbols='__i386=1 __i386__=1 __i486=1
        0 0.000000 0.000000   109:cpplast='-'
        0 0.000000 0.000000   110:cppminus='-'
        0 0.000000 0.000000   111:cpprun='cc -E'
        0 0.000000 0.000000   112:cppstdin='cc -E'
            ================ SmallProf version 0.9 ================
            Profile of /usr/lib/perl5/5.00503/i686-linux/Config.pm     Page 399
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   113:cppsymbols='__STDC__=1'
        0 0.000000 0.000000   114:cryptlib=''
        0 0.000000 0.000000   115:csh='csh'
        0 0.000000 0.000000   116:d_Gconvert='gcvt((x),(n),(b))'
        0 0.000000 0.000000   117:d_access='define'
        0 0.000000 0.000000   118:d_alarm='define'
        0 0.000000 0.000000   119:d_archlib='define'
        0 0.000000 0.000000   120:d_attribut='define'
        0 0.000000 0.000000   121:d_bcmp='define'
        0 0.000000 0.000000   122:d_bcopy='define'
        0 0.000000 0.000000   123:d_bsd='undef'
        0 0.000000 0.000000   124:d_bsdgetpgrp='undef'
        0 0.000000 0.000000   125:d_bsdsetpgrp='undef'
        0 0.000000 0.000000   126:d_bzero='define'
        0 0.000000 0.000000   127:d_casti32='undef'
        0 0.000000 0.000000   128:d_castneg='define'
        0 0.000000 0.000000   129:d_charvspr='undef'
        0 0.000000 0.000000   130:d_chown='define'
        0 0.000000 0.000000   131:d_chroot='define'
        0 0.000000 0.000000   132:d_chsize='undef'
        0 0.000000 0.000000   133:d_closedir='define'
        0 0.000000 0.000000   134:d_const='define'
        0 0.000000 0.000000   135:d_crypt='define'
        0 0.000000 0.000000   136:d_csh='define'
        0 0.000000 0.000000   137:d_cuserid='define'
        0 0.000000 0.000000   138:d_dbl_dig='define'
        0 0.000000 0.000000   139:d_difftime='define'
        0 0.000000 0.000000   140:d_dirnamlen='undef'
        0 0.000000 0.000000   141:d_dlerror='define'
        0 0.000000 0.000000   142:d_dlopen='define'
        0 0.000000 0.000000   143:d_dlsymun='undef'
        0 0.000000 0.000000   144:d_dosuid='undef'
        0 0.000000 0.000000   145:d_dup2='define'
        0 0.000000 0.000000   146:d_endgrent='define'
        0 0.000000 0.000000   147:d_endhent='define'
        0 0.000000 0.000000   148:d_endnent='define'
        0 0.000000 0.000000   149:d_endpent='define'
        0 0.000000 0.000000   150:d_endpwent='define'
        0 0.000000 0.000000   151:d_endsent='define'
        0 0.000000 0.000000   152:d_eofnblk='define'
        0 0.000000 0.000000   153:d_eunice='undef'
        0 0.000000 0.000000   154:d_fchmod='define'
        0 0.000000 0.000000   155:d_fchown='define'
        0 0.000000 0.000000   156:d_fcntl='define'
        0 0.000000 0.000000   157:d_fd_macros='define'
        0 0.000000 0.000000   158:d_fd_set='define'
        0 0.000000 0.000000   159:d_fds_bits='undef'
        0 0.000000 0.000000   160:d_fgetpos='define'
        0 0.000000 0.000000   161:d_flexfnam='define'
        0 0.000000 0.000000   162:d_flock='define'
        0 0.000000 0.000000   163:d_fork='define'
        0 0.000000 0.000000   164:d_fpathconf='define'
        0 0.000000 0.000000   165:d_fsetpos='define'
        0 0.000000 0.000000   166:d_fstatfs='define'
        0 0.000000 0.000000   167:d_fstatvfs='define'
        0 0.000000 0.000000   168:d_ftime='undef'
            ================ SmallProf version 0.9 ================
            Profile of /usr/lib/perl5/5.00503/i686-linux/Config.pm     Page 400
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   169:d_getgrent='define'
        0 0.000000 0.000000   170:d_getgrps='define'
        0 0.000000 0.000000   171:d_gethbyaddr='define'
        0 0.000000 0.000000   172:d_gethbyname='define'
        0 0.000000 0.000000   173:d_gethent='define'
        0 0.000000 0.000000   174:d_gethname='undef'
        0 0.000000 0.000000   175:d_gethostprotos='define'
        0 0.000000 0.000000   176:d_getlogin='define'
        0 0.000000 0.000000   177:d_getmntent='define'
        0 0.000000 0.000000   178:d_getnbyaddr='define'
        0 0.000000 0.000000   179:d_getnbyname='define'
        0 0.000000 0.000000   180:d_getnent='define'
        0 0.000000 0.000000   181:d_getnetprotos='define'
        0 0.000000 0.000000   182:d_getpbyname='define'
        0 0.000000 0.000000   183:d_getpbynumber='define'
        0 0.000000 0.000000   184:d_getpent='define'
        0 0.000000 0.000000   185:d_getpgid='define'
        0 0.000000 0.000000   186:d_getpgrp2='undef'
        0 0.000000 0.000000   187:d_getpgrp='define'
        0 0.000000 0.000000   188:d_getppid='define'
        0 0.000000 0.000000   189:d_getprior='define'
        0 0.000000 0.000000   190:d_getprotoprotos='define'
        0 0.000000 0.000000   191:d_getpwent='define'
        0 0.000000 0.000000   192:d_getsbyname='define'
        0 0.000000 0.000000   193:d_getsbyport='define'
        0 0.000000 0.000000   194:d_getsent='define'
        0 0.000000 0.000000   195:d_getservprotos='define'
        0 0.000000 0.000000   196:d_gettimeod='define'
        0 0.000000 0.000000   197:d_gnulibc='define'
        0 0.000000 0.000000   198:d_grpasswd='define'
        0 0.000000 0.000000   199:d_hasmntopt='define'
        0 0.000000 0.000000   200:d_htonl='define'
        0 0.000000 0.000000   201:d_index='undef'
        0 0.000000 0.000000   202:d_inetaton='define'
        0 0.000000 0.000000   203:d_isascii='define'
        0 0.000000 0.000000   204:d_killpg='define'
        0 0.000000 0.000000   205:d_lchown='define'
        0 0.000000 0.000000   206:d_link='define'
        0 0.000000 0.000000   207:d_locconv='define'
        0 0.000000 0.000000   208:d_lockf='define'
        0 0.000000 0.000000   209:d_longdbl='define'
        0 0.000000 0.000000   210:d_longlong='define'
        0 0.000000 0.000000   211:d_lstat='define'
        0 0.000000 0.000000   212:d_mblen='define'
        0 0.000000 0.000000   213:d_mbstowcs='define'
        0 0.000000 0.000000   214:d_mbtowc='define'
        0 0.000000 0.000000   215:d_memcmp='define'
        0 0.000000 0.000000   216:d_memcpy='define'
        0 0.000000 0.000000   217:d_memmove='define'
        0 0.000000 0.000000   218:d_memset='define'
        0 0.000000 0.000000   219:d_mkdir='define'
        0 0.000000 0.000000   220:d_mkfifo='define'
        0 0.000000 0.000000   221:d_mktime='define'
        0 0.000000 0.000000   222:d_msg='define'
        0 0.000000 0.000000   223:d_msgctl='define'
        0 0.000000 0.000000   224:d_msgget='define'
            ================ SmallProf version 0.9 ================
            Profile of /usr/lib/perl5/5.00503/i686-linux/Config.pm     Page 401
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   225:d_msgrcv='define'
        0 0.000000 0.000000   226:d_msgsnd='define'
        0 0.000000 0.000000   227:d_mymalloc='undef'
        0 0.000000 0.000000   228:d_nice='define'
        0 0.000000 0.000000   229:d_oldpthreads='undef'
        0 0.000000 0.000000   230:d_oldsock='undef'
        0 0.000000 0.000000   231:d_open3='define'
        0 0.000000 0.000000   232:d_pathconf='define'
        0 0.000000 0.000000   233:d_pause='define'
        0 0.000000 0.000000   234:d_phostname='undef'
        0 0.000000 0.000000   235:d_pipe='define'
        0 0.000000 0.000000   236:d_poll='define'
        0 0.000000 0.000000   237:d_portable='define'
        0 0.000000 0.000000   238:d_pthread_yield='undef'
        0 0.000000 0.000000   239:d_pthreads_created_joinable='undef'
        0 0.000000 0.000000   240:d_pwage='undef'
        0 0.000000 0.000000   241:d_pwchange='undef'
        0 0.000000 0.000000   242:d_pwclass='undef'
        0 0.000000 0.000000   243:d_pwcomment='undef'
        0 0.000000 0.000000   244:d_pwexpire='undef'
        0 0.000000 0.000000   245:d_pwgecos='define'
        0 0.000000 0.000000   246:d_pwpasswd='define'
        0 0.000000 0.000000   247:d_pwquota='undef'
        0 0.000000 0.000000   248:d_readdir='define'
        0 0.000000 0.000000   249:d_readlink='define'
        0 0.000000 0.000000   250:d_rename='define'
        0 0.000000 0.000000   251:d_rewinddir='define'
        0 0.000000 0.000000   252:d_rmdir='define'
        0 0.000000 0.000000   253:d_safebcpy='define'
        0 0.000000 0.000000   254:d_safemcpy='undef'
        0 0.000000 0.000000   255:d_sanemcmp='define'
        0 0.000000 0.000000   256:d_sched_yield='define'
        0 0.000000 0.000000   257:d_seekdir='define'
        0 0.000000 0.000000   258:d_select='define'
        0 0.000000 0.000000   259:d_sem='define'
        0 0.000000 0.000000   260:d_semctl='define'
        0 0.000000 0.000000   261:d_semctl_semid_ds='define'
        0 0.000000 0.000000   262:d_semctl_semun='define'
        0 0.000000 0.000000   263:d_semget='define'
        0 0.000000 0.000000   264:d_semop='define'
        0 0.000000 0.000000   265:d_setegid='define'
        0 0.000000 0.000000   266:d_seteuid='define'
        0 0.000000 0.000000   267:d_setgrent='define'
        0 0.000000 0.000000   268:d_setgrps='define'
        0 0.000000 0.000000   269:d_sethent='define'
        0 0.000000 0.000000   270:d_setlinebuf='define'
        0 0.000000 0.000000   271:d_setlocale='define'
        0 0.000000 0.000000   272:d_setnent='define'
        0 0.000000 0.000000   273:d_setpent='define'
        0 0.000000 0.000000   274:d_setpgid='define'
        0 0.000000 0.000000   275:d_setpgrp2='undef'
        0 0.000000 0.000000   276:d_setpgrp='define'
        0 0.000000 0.000000   277:d_setprior='define'
        0 0.000000 0.000000   278:d_setpwent='define'
        0 0.000000 0.000000   279:d_setregid='define'
        0 0.000000 0.000000   280:d_setresgid='define'
            ================ SmallProf version 0.9 ================
            Profile of /usr/lib/perl5/5.00503/i686-linux/Config.pm     Page 402
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   281:d_setresuid='define'
        0 0.000000 0.000000   282:d_setreuid='define'
        0 0.000000 0.000000   283:d_setrgid='undef'
        0 0.000000 0.000000   284:d_setruid='undef'
        0 0.000000 0.000000   285:d_setsent='define'
        0 0.000000 0.000000   286:d_setsid='define'
        0 0.000000 0.000000   287:d_setvbuf='define'
        0 0.000000 0.000000   288:d_sfio='undef'
        0 0.000000 0.000000   289:d_shm='define'
        0 0.000000 0.000000   290:d_shmat='define'
        0 0.000000 0.000000   291:d_shmatprototype='define'
        0 0.000000 0.000000   292:d_shmctl='define'
        0 0.000000 0.000000   293:d_shmdt='define'
        0 0.000000 0.000000   294:d_shmget='define'
        0 0.000000 0.000000   295:d_sigaction='define'
        0 0.000000 0.000000   296:d_sigsetjmp='define'
        0 0.000000 0.000000   297:d_socket='define'
        0 0.000000 0.000000   298:d_sockpair='define'
        0 0.000000 0.000000   299:d_statblks='define'
        0 0.000000 0.000000   300:d_statfsflags='undef'
        0 0.000000 0.000000   301:d_stdio_cnt_lval='undef'
        0 0.000000 0.000000   302:d_stdio_ptr_lval='undef'
        0 0.000000 0.000000   303:d_stdiobase='undef'
        0 0.000000 0.000000   304:d_stdstdio='undef'
        0 0.000000 0.000000   305:d_strchr='define'
        0 0.000000 0.000000   306:d_strcoll='define'
        0 0.000000 0.000000   307:d_strctcpy='define'
        0 0.000000 0.000000   308:d_strerrm='strerror(e)'
        0 0.000000 0.000000   309:d_strerror='define'
        0 0.000000 0.000000   310:d_strtod='define'
        0 0.000000 0.000000   311:d_strtol='define'
        0 0.000000 0.000000   312:d_strtoul='define'
        0 0.000000 0.000000   313:d_strxfrm='define'
        0 0.000000 0.000000   314:d_suidsafe='undef'
        0 0.000000 0.000000   315:d_symlink='define'
        0 0.000000 0.000000   316:d_syscall='define'
        0 0.000000 0.000000   317:d_sysconf='define'
        0 0.000000 0.000000   318:d_sysernlst=''
        0 0.000000 0.000000   319:d_syserrlst='define'
        0 0.000000 0.000000   320:d_system='define'
        0 0.000000 0.000000   321:d_tcgetpgrp='define'
        0 0.000000 0.000000   322:d_tcsetpgrp='define'
        0 0.000000 0.000000   323:d_telldir='define'
        0 0.000000 0.000000   324:d_time='define'
        0 0.000000 0.000000   325:d_times='define'
        0 0.000000 0.000000   326:d_truncate='define'
        0 0.000000 0.000000   327:d_tzname='define'
        0 0.000000 0.000000   328:d_umask='define'
        0 0.000000 0.000000   329:d_uname='define'
        0 0.000000 0.000000   330:d_union_semun='undef'
        0 0.000000 0.000000   331:d_vfork='undef'
        0 0.000000 0.000000   332:d_void_closedir='undef'
        0 0.000000 0.000000   333:d_voidsig='define'
        0 0.000000 0.000000   334:d_voidtty=''
        0 0.000000 0.000000   335:d_volatile='define'
        0 0.000000 0.000000   336:d_vprintf='define'
            ================ SmallProf version 0.9 ================
            Profile of /usr/lib/perl5/5.00503/i686-linux/Config.pm     Page 403
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   337:d_wait4='define'
        0 0.000000 0.000000   338:d_waitpid='define'
        0 0.000000 0.000000   339:d_wcstombs='define'
        0 0.000000 0.000000   340:d_wctomb='define'
        0 0.000000 0.000000   341:d_xenix='undef'
        0 0.000000 0.000000   342:date='date'
        0 0.000000 0.000000   343:db_hashtype='u_int32_t'
        0 0.000000 0.000000   344:db_prefixtype='size_t'
        0 0.000000 0.000000   345:defvoidused='15'
        0 0.000000 0.000000   346:direntrytype='struct dirent'
        0 0.000000 0.000000   347:dlext='so'
        0 0.000000 0.000000   348:doublesize='8'
        0 0.000000 0.000000   349:eagain='EAGAIN'
        0 0.000000 0.000000   350:ebcdic='undef'
        0 0.000000 0.000000   351:echo='echo'
        0 0.000000 0.000000   352:egrep='egrep'
        0 0.000000 0.000000   353:emacs=''
        0 0.000000 0.000000   354:eunicefix=':'
        0 0.000000 0.000000   355:exe_ext=''
        0 0.000000 0.000000   356:expr='expr'
        0 0.000000 0.000000   357:find='find'
        0 0.000000 0.000000   358:firstmakefile='makefile'
        0 0.000000 0.000000   359:flex=''
        0 0.000000 0.000000   360:fpostype='fpos_t'
        0 0.000000 0.000000   361:freetype='void'
        0 0.000000 0.000000   362:full_ar='/usr/bin/ar'
        0 0.000000 0.000000   363:full_csh='/bin/csh'
        0 0.000000 0.000000   364:full_sed='/bin/sed'
        0 0.000000 0.000000   365:gccversion='2.95.2 19991024 (release)'
        0 0.000000 0.000000   366:gidtype='gid_t'
        0 0.000000 0.000000   367:glibpth='/usr/shlib  /shlib /lib/pa1.1
        0 0.000000 0.000000   368:grep='grep'
        0 0.000000 0.000000   369:groupcat='cat /etc/group'
        0 0.000000 0.000000   370:groupstype='gid_t'
        0 0.000000 0.000000   371:gzip='gzip'
        0 0.000000 0.000000   372:h_fcntl='false'
        0 0.000000 0.000000   373:h_sysfile='true'
        0 0.000000 0.000000   374:hint='recommended'
        0 0.000000 0.000000   375:hostcat='cat /etc/hosts'
        0 0.000000 0.000000   376:huge=''
        0 0.000000 0.000000   377:i_arpainet='define'
        0 0.000000 0.000000   378:i_bsdioctl=''
        0 0.000000 0.000000   379:i_db='define'
        0 0.000000 0.000000   380:i_dbm='define'
        0 0.000000 0.000000   381:i_dirent='define'
        0 0.000000 0.000000   382:i_dld='undef'
        0 0.000000 0.000000   383:i_dlfcn='define'
        0 0.000000 0.000000   384:i_fcntl='undef'
        0 0.000000 0.000000   385:i_float='define'
        0 0.000000 0.000000   386:i_gdbm='define'
        0 0.000000 0.000000   387:i_grp='define'
        0 0.000000 0.000000   388:i_limits='define'
        0 0.000000 0.000000   389:i_locale='define'
        0 0.000000 0.000000   390:i_machcthreads='undef'
        0 0.000000 0.000000   391:i_malloc='define'
        0 0.000000 0.000000   392:i_math='define'
            ================ SmallProf version 0.9 ================
            Profile of /usr/lib/perl5/5.00503/i686-linux/Config.pm     Page 404
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   393:i_memory='undef'
        0 0.000000 0.000000   394:i_mntent='define'
        0 0.000000 0.000000   395:i_ndbm='define'
        0 0.000000 0.000000   396:i_netdb='define'
        0 0.000000 0.000000   397:i_neterrno='undef'
        0 0.000000 0.000000   398:i_niin='define'
        0 0.000000 0.000000   399:i_pthread='define'
        0 0.000000 0.000000   400:i_pwd='define'
        0 0.000000 0.000000   401:i_rpcsvcdbm='undef'
        0 0.000000 0.000000   402:i_sfio='undef'
        0 0.000000 0.000000   403:i_sgtty='undef'
        0 0.000000 0.000000   404:i_stdarg='define'
        0 0.000000 0.000000   405:i_stddef='define'
        0 0.000000 0.000000   406:i_stdlib='define'
        0 0.000000 0.000000   407:i_string='define'
        0 0.000000 0.000000   408:i_sysdir='define'
        0 0.000000 0.000000   409:i_sysfile='define'
        0 0.000000 0.000000   410:i_sysfilio='undef'
        0 0.000000 0.000000   411:i_sysin='undef'
        0 0.000000 0.000000   412:i_sysioctl='define'
        0 0.000000 0.000000   413:i_sysmount='define'
        0 0.000000 0.000000   414:i_sysndir='undef'
        0 0.000000 0.000000   415:i_sysparam='define'
        0 0.000000 0.000000   416:i_sysresrc='define'
        0 0.000000 0.000000   417:i_sysselct='define'
        0 0.000000 0.000000   418:i_syssockio=''
        0 0.000000 0.000000   419:i_sysstat='define'
        0 0.000000 0.000000   420:i_sysstatvfs='define'
        0 0.000000 0.000000   421:i_systime='define'
        0 0.000000 0.000000   422:i_systimek='undef'
        0 0.000000 0.000000   423:i_systimes='define'
        0 0.000000 0.000000   424:i_systypes='define'
        0 0.000000 0.000000   425:i_sysun='define'
        0 0.000000 0.000000   426:i_syswait='define'
        0 0.000000 0.000000   427:i_termio='undef'
        0 0.000000 0.000000   428:i_termios='define'
        0 0.000000 0.000000   429:i_time='undef'
        0 0.000000 0.000000   430:i_unistd='define'
        0 0.000000 0.000000   431:i_utime='define'
        0 0.000000 0.000000   432:i_values='define'
        0 0.000000 0.000000   433:i_varargs='undef'
        0 0.000000 0.000000   434:i_varhdr='stdarg.h'
        0 0.000000 0.000000   435:i_vfork='undef'
        0 0.000000 0.000000   436:ignore_versioned_solibs='y'
        0 0.000000 0.000000   437:incpath=''
        0 0.000000 0.000000   438:inews=''
        0 0.000000 0.000000   439:installbin='/usr/bin'
        0 0.000000 0.000000   440:installman1dir='/usr/man/man1'
        0 0.000000 0.000000   441:installman3dir='/usr/lib/perl5/5.00503/man/ma
        0 0.000000 0.000000   442:installscript='/usr/bin'
        0 0.000000 0.000000   443:installsitearch='/usr/lib/perl5/site_perl/5.0
        0 0.000000 0.000000   444:installsitelib='/usr/lib/perl5/site_perl/5.00
        0 0.000000 0.000000   445:installusrbinperl='undef'
        0 0.000000 0.000000   446:intsize='4'
        0 0.000000 0.000000   447:known_extensions='B DB_File Data/Dumper Fcntl
        0 0.000000 0.000000   448:ksh=''
            ================ SmallProf version 0.9 ================
            Profile of /usr/lib/perl5/5.00503/i686-linux/Config.pm     Page 405
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   449:large=''
        0 0.000000 0.000000   450:ld='cc'
        0 0.000000 0.000000   451:lddlflags='-shared -L/usr/local/lib'
        0 0.000000 0.000000   452:ldflags=' -L/usr/local/lib'
        0 0.000000 0.000000   453:less='less'
        0 0.000000 0.000000   454:lib_ext='.a'
        0 0.000000 0.000000   455:libc=''
        0 0.000000 0.000000   456:libperl='libperl.a'
        0 0.000000 0.000000   457:libswanted='sfio socket inet nsl nm ndbm gdbm
        0 0.000000 0.000000   458:line='line'
        0 0.000000 0.000000   459:lint=''
        0 0.000000 0.000000   460:lkflags=''
        0 0.000000 0.000000   461:ln='ln'
        0 0.000000 0.000000   462:lns='/bin/ln -s'
        0 0.000000 0.000000   463:locincpth='/usr/local/include
        0 0.000000 0.000000   464:loclibpth='/usr/local/lib /opt/local/lib
        0 0.000000 0.000000   465:longdblsize='12'
        0 0.000000 0.000000   466:longlongsize='8'
        0 0.000000 0.000000   467:longsize='4'
        0 0.000000 0.000000   468:lp=''
        0 0.000000 0.000000   469:lpr=''
        0 0.000000 0.000000   470:ls='ls'
        0 0.000000 0.000000   471:lseektype='off_t'
        0 0.000000 0.000000   472:mail=''
        0 0.000000 0.000000   473:mailx=''
        0 0.000000 0.000000   474:make='make'
        0 0.000000 0.000000   475:make_set_make='#'
        0 0.000000 0.000000   476:mallocobj=''
        0 0.000000 0.000000   477:mallocsrc=''
        0 0.000000 0.000000   478:malloctype='void *'
        0 0.000000 0.000000   479:man1dir='/usr/man/man1'
        0 0.000000 0.000000   480:man1direxp='/usr/man/man1'
        0 0.000000 0.000000   481:man1ext='1'
        0 0.000000 0.000000   482:man3dir='/usr/lib/perl5/5.00503/man/man3'
        0 0.000000 0.000000   483:man3direxp='/usr/lib/perl5/5.00503/man/man3'
        0 0.000000 0.000000   484:man3ext='3'
        0 0.000000 0.000000   485:medium=''
        0 0.000000 0.000000   486:mips=''
        0 0.000000 0.000000   487:mips_type=''
        0 0.000000 0.000000   488:mkdir='mkdir'
        0 0.000000 0.000000   489:models='none'
        0 0.000000 0.000000   490:modetype='mode_t'
        0 0.000000 0.000000   491:more='more'
        0 0.000000 0.000000   492:mv=''
        0 0.000000 0.000000   493:myarchname='i686-linux'
        0 0.000000 0.000000   494:mydomain='.rfi.net'
        0 0.000000 0.000000   495:myhostname='blue'
        0 0.000000 0.000000   496:myuname='linux blue 2.2.16 #1 wed aug 2
        0 0.000000 0.000000   497:n='-n'
        0 0.000000 0.000000   498:netdb_hlen_type='size_t'
        0 0.000000 0.000000   499:netdb_host_type='const char *'
        0 0.000000 0.000000   500:netdb_name_type='const char *'
        0 0.000000 0.000000   501:netdb_net_type='unsigned long'
        0 0.000000 0.000000   502:nm='nm'
        0 0.000000 0.000000   503:nm_opt=''
        0 0.000000 0.000000   504:nm_so_opt='--dynamic'
            ================ SmallProf version 0.9 ================
            Profile of /usr/lib/perl5/5.00503/i686-linux/Config.pm     Page 406
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   505:nonxs_ext='Errno'
        0 0.000000 0.000000   506:nroff='nroff'
        0 0.000000 0.000000   507:o_nonblock='O_NONBLOCK'
        0 0.000000 0.000000   508:obj_ext='.o'
        0 0.000000 0.000000   509:optimize='-O2'
        0 0.000000 0.000000   510:orderlib='false'
        0 0.000000 0.000000   511:package='perl5'
        0 0.000000 0.000000   512:pager='/usr/bin/less'
        0 0.000000 0.000000   513:passcat='cat /etc/passwd'
        0 0.000000 0.000000   514:patchlevel='5'
        0 0.000000 0.000000   515:path_sep=':'
        0 0.000000 0.000000   516:perl='perl'
        0 0.000000 0.000000   517:perladmin='root@blue.rfi.net'
        0 0.000000 0.000000   518:perlpath='/usr/bin/perl'
        0 0.000000 0.000000   519:pg='pg'
        0 0.000000 0.000000   520:phostname='hostname'
        0 0.000000 0.000000   521:pidtype='pid_t'
        0 0.000000 0.000000   522:plibpth=''
        0 0.000000 0.000000   523:pmake=''
        0 0.000000 0.000000   524:pr=''
        0 0.000000 0.000000   525:prefixexp='/usr'
        0 0.000000 0.000000   526:privlib='/usr/lib/perl5/5.00503'
        0 0.000000 0.000000   527:prototype='define'
        0 0.000000 0.000000   528:ptrsize='4'
        0 0.000000 0.000000   529:randbits='31'
        0 0.000000 0.000000   530:ranlib=':'
        0 0.000000 0.000000   531:rd_nodata='-1'
        0 0.000000 0.000000   532:rm='rm'
        0 0.000000 0.000000   533:rmail=''
        0 0.000000 0.000000   534:runnm='false'
        0 0.000000 0.000000   535:scriptdir='/usr/bin'
        0 0.000000 0.000000   536:scriptdirexp='/usr/bin'
        0 0.000000 0.000000   537:sed='sed'
        0 0.000000 0.000000   538:selectminbits='32'
        0 0.000000 0.000000   539:selecttype='fd_set *'
        0 0.000000 0.000000   540:sendmail='sendmail'
        0 0.000000 0.000000   541:sh='/bin/sh'
        0 0.000000 0.000000   542:shar=''
        0 0.000000 0.000000   543:shmattype='void *'
        0 0.000000 0.000000   544:shortsize='2'
        0 0.000000 0.000000   545:shrpenv=''
        0 0.000000 0.000000   546:sig_name_init='"ZERO", "HUP", "INT", "QUIT",
        0 0.000000 0.000000   547:sig_num_init='0, 1, 2, 3, 4, 5, 6, 7, 8, 9,
        0 0.000000 0.000000   548:signal_t='void'
        0 0.000000 0.000000   549:sitearch='/usr/lib/perl5/site_perl/5.005/i686
        0 0.000000 0.000000   550:sitearchexp='/usr/lib/perl5/site_perl/5.005/i
        0 0.000000 0.000000   551:sitelib='/usr/lib/perl5/site_perl/5.005'
        0 0.000000 0.000000   552:sitelibexp='/usr/lib/perl5/site_perl/5.005'
        0 0.000000 0.000000   553:sizetype='size_t'
        0 0.000000 0.000000   554:sleep=''
        0 0.000000 0.000000   555:smail=''
        0 0.000000 0.000000   556:small=''
        0 0.000000 0.000000   557:sockethdr=''
        0 0.000000 0.000000   558:socketlib=''
        0 0.000000 0.000000   559:sort='sort'
        0 0.000000 0.000000   560:spackage='Perl5'
            ================ SmallProf version 0.9 ================
            Profile of /usr/lib/perl5/5.00503/i686-linux/Config.pm     Page 407
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   561:spitshell='cat'
        0 0.000000 0.000000   562:split=''
        0 0.000000 0.000000   563:src='/root/.cpan/build/perl5.005_03'
        0 0.000000 0.000000   564:ssizetype='ssize_t'
        0 0.000000 0.000000   565:startperl='#!/usr/bin/perl'
        0 0.000000 0.000000   566:stdchar='char'
        0 0.000000 0.000000   567:stdio_base='((fp)->_base)'
        0 0.000000 0.000000   568:stdio_bufsiz='((fp)->_cnt + (fp)->_ptr -
        0 0.000000 0.000000   569:stdio_cnt='((fp)->_cnt)'
        0 0.000000 0.000000   570:stdio_filbuf=''
        0 0.000000 0.000000   571:stdio_ptr='((fp)->_ptr)'
        0 0.000000 0.000000   572:strings='/usr/include/string.h'
        0 0.000000 0.000000   573:submit=''
        0 0.000000 0.000000   574:subversion='3'
        0 0.000000 0.000000   575:sysman='/usr/man/man1'
        0 0.000000 0.000000   576:tail=''
        0 0.000000 0.000000   577:tar=''
        0 0.000000 0.000000   578:tbl=''
        0 0.000000 0.000000   579:tee='tee'
        0 0.000000 0.000000   580:test='test'
        0 0.000000 0.000000   581:timeincl='/usr/include/sys/time.h '
        0 0.000000 0.000000   582:timetype='time_t'
        0 0.000000 0.000000   583:touch='touch'
        0 0.000000 0.000000   584:tr='tr'
        0 0.000000 0.000000   585:trnl='\n'
        0 0.000000 0.000000   586:troff=''
        0 0.000000 0.000000   587:uidtype='uid_t'
        0 0.000000 0.000000   588:uname='uname'
        0 0.000000 0.000000   589:uniq='uniq'
        0 0.000000 0.000000   590:usedl='define'
        0 0.000000 0.000000   591:usemymalloc='n'
        0 0.000000 0.000000   592:usenm='false'
        0 0.000000 0.000000   593:useopcode='true'
        0 0.000000 0.000000   594:useperlio='undef'
        0 0.000000 0.000000   595:useposix='true'
        0 0.000000 0.000000   596:usesfio='false'
        0 0.000000 0.000000   597:useshrplib='false'
        0 0.000000 0.000000   598:usethreads='undef'
        0 0.000000 0.000000   599:usevfork='false'
        0 0.000000 0.000000   600:usrinc='/usr/include'
        0 0.000000 0.000000   601:uuname=''
        0 0.000000 0.000000   602:version='5.00503'
        0 0.000000 0.000000   603:vi=''
        0 0.000000 0.000000   604:voidflags='15'
        0 0.000000 0.000000   605:xlibpth='/usr/lib/386 /lib/386'
        0 0.000000 0.000000   606:zcat=''
        0 0.000000 0.000000   607:zip='zip'
        0 0.000000 0.000000   608:!END!
        0 0.000000 0.000000   609:
        0 0.000000 0.000000   610:my $summary = <<'!END!';
        0 0.000000 0.000000   611:Summary of my $package ($baserev patchlevel
        0 0.000000 0.000000   612:  Platform:
        0 0.000000 0.000000   613:    osname=$osname, osvers=$osvers,
        0 0.000000 0.000000   614:    uname='$myuname'
        0 0.000000 0.000000   615:    hint=$hint, useposix=$useposix,
        0 0.000000 0.000000   616:    usethreads=$usethreads
            ================ SmallProf version 0.9 ================
            Profile of /usr/lib/perl5/5.00503/i686-linux/Config.pm     Page 408
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   617:  Compiler:
        0 0.000000 0.000000   618:    cc='$cc', optimize='$optimize',
        0 0.000000 0.000000   619:    cppflags='$cppflags'
        0 0.000000 0.000000   620:    ccflags ='$ccflags'
        0 0.000000 0.000000   621:    stdchar='$stdchar',
        0 0.000000 0.000000   622:    intsize=$intsize, longsize=$longsize,
        0 0.000000 0.000000   623:    d_longlong=$d_longlong,
        0 0.000000 0.000000   624:    alignbytes=$alignbytes,
        0 0.000000 0.000000   625:  Linker and Libraries:
        0 0.000000 0.000000   626:    ld='$ld', ldflags ='$ldflags'
        0 0.000000 0.000000   627:    libpth=$libpth
        0 0.000000 0.000000   628:    libs=$libs
        0 0.000000 0.000000   629:    libc=$libc, so=$so,
        0 0.000000 0.000000   630:  Dynamic Linking:
        0 0.000000 0.000000   631:    dlsrc=$dlsrc, dlext=$dlext,
        0 0.000000 0.000000   632:    cccdlflags='$cccdlflags',
        0 0.000000 0.000000   633:
        0 0.000000 0.000000   634:!END!
        0 0.000000 0.000000   635:my $summary_expanded = 0;
        0 0.000000 0.000000   636:
        0 0.000000 0.000000   637:sub myconfig {
        0 0.000000 0.000000   638: return $summary if $summary_expanded;
        0 0.000000 0.000000   639: $summary =~ s{\$(\w+)}
        0 0.000000 0.000000   640:       { my $c = $Config{$1}; defined($c) ?
        0 0.000000 0.000000   641: $summary_expanded = 1;
        0 0.000000 0.000000   642: $summary;
        0 0.000000 0.000000   643:}
        0 0.000000 0.000000   644:
        2 0.000000 0.000000   645:sub FETCH {
        0 0.000000 0.000000   646:    # check for cached value (which may be
        0 0.000000 0.000000   647:    return $_[0]->{$_[1]} if (exists $_[0]-
        0 0.000000 0.000000   648:
        0 0.000000 0.000000   649:    # Search for it in the big string
        0 0.000000 0.000000   650:    my($value, $start, $marker, $quote_type);
        0 0.000000 0.000000   651:    $marker = "$_[1]=";
        0 0.000000 0.000000   652:    $quote_type = "'";
        0 0.000000 0.000000   653:    # return undef unless (($value) =
        0 0.000000 0.000000   654:    # Check for the common case, ' delimeted
        0 0.000000 0.000000   655:    $start = index($config_sh,
        0 0.000000 0.000000   656:    # If that failed, check for " delimited
        0 0.000000 0.000000   657:    if ($start == -1) {
        0 0.000000 0.000000   658:      $quote_type = '"';
        0 0.000000 0.000000   659:      $start = index($config_sh,
        0 0.000000 0.000000   660:    }
        0 0.000000 0.000000   661:    return undef if ( ($start == -1) &&  # in
        0 0.000000 0.000000   662:        (substr($config_sh, 0,
        0 0.000000 0.000000   663:    if ($start == -1) {
        0 0.000000 0.000000   664:      # It's the very first thing we found.
        0 0.000000 0.000000   665:      # and figure out the quote mark after
        0 0.000000 0.000000   666:      $start = length($marker) + 1;
        0 0.000000 0.000000   667:      $quote_type = substr($config_sh, $start
        0 0.000000 0.000000   668:    }
        0 0.000000 0.000000   669:    else {
        0 0.000000 0.000000   670:      $start += length($marker) + 2;
        0 0.000000 0.000000   671:    }
        0 0.000000 0.000000   672:    $value = substr($config_sh, $start,
            ================ SmallProf version 0.9 ================
            Profile of /usr/lib/perl5/5.00503/i686-linux/Config.pm     Page 409
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   673:        index($config_sh, "$quote_type\n",
        0 0.000000 0.000000   674:
        0 0.000000 0.000000   675:    # If we had a double-quote, we'd better
        0 0.000000 0.000000   676:    # sequences and such can be interpolated.
        0 0.000000 0.000000   677:    # value is supposed to follow shell rules
        0 0.000000 0.000000   678:    # we escape any perl variable markers
        0 0.000000 0.000000   679:    if ($quote_type eq '"') {
        0 0.000000 0.000000   680:      $value =~ s/\$/\\\$/g;
        0 0.000000 0.000000   681:      $value =~ s/\@/\\\@/g;
        0 0.000000 0.000000   682:      eval "\$value = \"$value\"";
        0 0.000000 0.000000   683:    }
        0 0.000000 0.000000   684:    #$value = sprintf($value) if $quote_type
        0 0.000000 0.000000   685:    $value = undef if $value eq 'undef'; # So
        0 0.000000 0.000000   686:    $_[0]->{$_[1]} = $value; # cache it
        0 0.000000 0.000000   687:    return $value;
        0 0.000000 0.000000   688:}
        0 0.000000 0.000000   689:
        0 0.000000 0.000000   690:my $prevpos = 0;
        0 0.000000 0.000000   691:
        0 0.000000 0.000000   692:sub FIRSTKEY {
        0 0.000000 0.000000   693:    $prevpos = 0;
        0 0.000000 0.000000   694:    # my($key) = $config_sh =~ m/^(.*?)=/;
        0 0.000000 0.000000   695:    substr($config_sh, 0, index($config_sh,
        0 0.000000 0.000000   696:    # $key;
        0 0.000000 0.000000   697:}
        0 0.000000 0.000000   698:
        0 0.000000 0.000000   699:sub NEXTKEY {
        0 0.000000 0.000000   700:    # Find out how the current key's quoted
        0 0.000000 0.000000   701:    my $quote = substr($config_sh,
        0 0.000000 0.000000   702:    my $pos = index($config_sh, qq($quote\n),
        0 0.000000 0.000000   703:    my $len = index($config_sh, "=", $pos) -
        0 0.000000 0.000000   704:    $prevpos = $pos;
        0 0.000000 0.000000   705:    $len > 0 ? substr($config_sh, $pos, $len)
        0 0.000000 0.000000   706:}
        0 0.000000 0.000000   707:
        0 0.000000 0.000000   708:sub EXISTS {
        0 0.000000 0.000000   709:    # exists($_[0]->{$_[1]})  or  $config_sh
        0 0.000000 0.000000   710:    exists($_[0]->{$_[1]}) or
        0 0.000000 0.000000   711:    index($config_sh, "\n$_[1]='") != -1 or
        0 0.000000 0.000000   712:    substr($config_sh, 0, length($_[1])+2) eq
        0 0.000000 0.000000   713:    index($config_sh, "\n$_[1]=\"") != -1 or
        0 0.000000 0.000000   714:    substr($config_sh, 0, length($_[1])+2) eq
        0 0.000000 0.000000   715:}
        0 0.000000 0.000000   716:
        0 0.000000 0.000000   717:sub STORE  { die "\%Config::Config is read-
        0 0.000000 0.000000   718:sub DELETE { &STORE }
        0 0.000000 0.000000   719:sub CLEAR  { &STORE }
        0 0.000000 0.000000   720:
        0 0.000000 0.000000   721:
        0 0.000000 0.000000   722:sub config_sh {
        0 0.000000 0.000000   723:    $config_sh
        0 0.000000 0.000000   724:}
        0 0.000000 0.000000   725:
        0 0.000000 0.000000   726:sub config_re {
        0 0.000000 0.000000   727:    my $re = shift;
        0 0.000000 0.000000   728:    my @matches = ($config_sh =~
            ================ SmallProf version 0.9 ================
            Profile of /usr/lib/perl5/5.00503/i686-linux/Config.pm     Page 410
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   729:    @matches ? (print @matches) : print "$re:
        0 0.000000 0.000000   730:}
        0 0.000000 0.000000   731:
        0 0.000000 0.000000   732:sub config_vars {
        0 0.000000 0.000000   733:    foreach(@_){
        0 0.000000 0.000000   734: config_re($_), next if /\W/;
        0 0.000000 0.000000   735: my $v=(exists $Config{$_}) ? $Config{$_} :
        0 0.000000 0.000000   736: $v='undef' unless defined $v;
        0 0.000000 0.000000   737: print "$_='$v';\n";
        0 0.000000 0.000000   738:    }
        0 0.000000 0.000000   739:}
        0 0.000000 0.000000   740:
        1 0.000000 0.000000   741:sub TIEHASH { bless {} }
        0 0.000000 0.000000   742:
        0 0.000000 0.000000   743:# avoid Config..Exporter..UNIVERSAL search
        0 0.000000 0.000000   744:sub DESTROY { }
        0 0.000000 0.000000   745:
        0 0.000000 0.000000   746:tie %Config, 'Config';
        0 0.000000 0.000000   747:
        0 0.000000 0.000000   748:1;
        0 0.000000 0.000000   749:__END__
            ================ SmallProf version 0.9 ================
          Profile of /usr/lib/perl5/5.00503/i686-linux/DynaLoader.pm   Page 411
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000     1:
        0 0.000000 0.000000     2:# Generated from DynaLoader.pm.PL (resolved
        0 0.000000 0.000000     3:
        0 0.000000 0.000000     4:package DynaLoader;
        0 0.000000 0.000000     5:
        0 0.000000 0.000000     6:#   And Gandalf said: 'Many folk like to know
        0 0.000000 0.000000     7:#   be set on the table; but those who have
        0 0.000000 0.000000     8:#   feast like to keep their secret; for
        0 0.000000 0.000000     9:#   praise louder.'
        0 0.000000 0.000000    10:
        0 0.000000 0.000000    11:#   (Quote from Tolkien sugested by Anno
        0 0.000000 0.000000    12:#
        0 0.000000 0.000000    13:# See pod text at end of file for
        0 0.000000 0.000000    14:# See also ext/DynaLoader/README in source
        0 0.000000 0.000000    15:#
        0 0.000000 0.000000    16:# Tim.Bunce@ig.co.uk, August 1994
        0 0.000000 0.000000    17:
        0 0.000000 0.000000    18:$VERSION = $VERSION = "1.03"; # avoid typo
        0 0.000000 0.000000    19:
        0 0.000000 0.000000    20:require AutoLoader;
        0 0.000000 0.000000    21:*AUTOLOAD = \&AutoLoader::AUTOLOAD;
        0 0.000000 0.000000    22:
        0 0.000000 0.000000    23:# The following require can't be removed
        0 0.000000 0.000000    24:# releases, sadly, because of the risk of
        0 0.000000 0.000000    25:# require Carp; Carp::croak "..."; without
        0 0.000000 0.000000    26:# if Carp hasn't been loaded in earlier
        0 0.000000 0.000000    27:# We'll let those bugs get found on the
        0 0.000000 0.000000    28:require Carp if $] < 5.00450;
        0 0.000000 0.000000    29:
        0 0.000000 0.000000    30:
        0 0.000000 0.000000    31:# enable debug/trace messages from DynaLoader
        0 0.000000 0.000000    32:$dl_debug = $ENV{PERL_DL_DEBUG} || 0 unless
        0 0.000000 0.000000    33:
        0 0.000000 0.000000    34:#
        0 0.000000 0.000000    35:# Flags to alter dl_load_file behaviour.
        0 0.000000 0.000000    36:#   0x01  make symbols available for linking
        0 0.000000 0.000000    37:#         (only known to work on Solaris 2
        0 0.000000 0.000000    38:#         (ignored under VMS; effect is
        0 0.000000 0.000000    39:#
        0 0.000000 0.000000    40:# This is called as a class method $module-
        0 0.000000 0.000000    41:# definition here will be inherited and
        0 0.000000 0.000000    42:# behaviour unless a sub-class of DynaLoader
        0 0.000000 0.000000    43:#
        0 0.000000 0.000000    44:
        6 0.000000 0.000000    45:sub dl_load_flags { 0x00 }
        0 0.000000 0.000000    46:
        0 0.000000 0.000000    47:# ($dl_dlext, $dlsrc)
        0 0.000000 0.000000    48:#         = @Config::Config{'dlext',
        0 0.000000 0.000000    49:  ($dl_dlext, $dlsrc) = ('so','dl_dlopen.xs')
        0 0.000000 0.000000    50:;
        0 0.000000 0.000000    51:# Some systems need special handling to
        0 0.000000 0.000000    52:# (VMS support by Charles Bailey
        0 0.000000 0.000000    53:# See dl_expandspec() for more details.
        0 0.000000 0.000000    54:# inefficient to define on systems that don't
        0 0.000000 0.000000    55:$do_expand = $Is_VMS = $^O eq 'VMS';
        0 0.000000 0.000000    56:
            ================ SmallProf version 0.9 ================
          Profile of /usr/lib/perl5/5.00503/i686-linux/DynaLoader.pm   Page 412
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000    57:@dl_require_symbols = ();       # names of
        0 0.000000 0.000000    58:@dl_resolve_using   = ();       # names of
        0 0.000000 0.000000    59:@dl_library_path    = ();       # path to
        0 0.000000 0.000000    60:@dl_librefs         = ();       # things we
        0 0.000000 0.000000    61:@dl_modules         = ();       # Modules we
        0 0.000000 0.000000    62:
        0 0.000000 0.000000    63:# This is a fix to support DLD's unfortunate
        0 0.000000 0.000000    64:@dl_resolve_using = dl_findfile('-lc') if
        0 0.000000 0.000000    65:
        0 0.000000 0.000000    66:# Initialise @dl_library_path with the
        0 0.000000 0.000000    67:# for this platform as determined by
        0 0.000000 0.000000    68:
        0 0.000000 0.000000    69:# push(@dl_library_path, split(' ',
        0 0.000000 0.000000    70:push(@dl_library_path, split(' ',
        0 0.000000 0.000000    71:
        0 0.000000 0.000000    72:# Add to @dl_library_path any extra
        0 0.000000 0.000000    73:# environment variables. So far
        0 0.000000 0.000000    74:# variable used for this purpose. Others may
        0 0.000000 0.000000    75:push(@dl_library_path, split(/:/,
        0 0.000000 0.000000    76:    if $ENV{LD_LIBRARY_PATH};
        0 0.000000 0.000000    77:
        0 0.000000 0.000000    78:
        0 0.000000 0.000000    79:# No prizes for guessing why we don't say
        0 0.000000 0.000000    80:boot_DynaLoader('DynaLoader') if
        0 0.000000 0.000000    81:
        0 0.000000 0.000000    82:
        0 0.000000 0.000000    83:
        0 0.000000 0.000000    84:if ($dl_debug) {
        0 0.000000 0.000000    85:    print STDERR "DynaLoader.pm loaded (@INC,
        0 0.000000 0.000000    86:    print STDERR "DynaLoader not linked into
        0 0.000000 0.000000    87:     unless defined(&boot_DynaLoader);
        0 0.000000 0.000000    88:}
        0 0.000000 0.000000    89:
        0 0.000000 0.000000    90:1; # End of main code
        0 0.000000 0.000000    91:
        0 0.000000 0.000000    92:
        0 0.000000 0.000000    93:sub croak   { require Carp; Carp::croak(@_)
        0 0.000000 0.000000    94:
        0 0.000000 0.000000    95:# The bootstrap function cannot be autoloaded
        0 0.000000 0.000000    96:# so we define it here:
        0 0.000000 0.000000    97:
        6 0.000000 0.000000    98:sub bootstrap {
        0 0.000000 0.000000    99:    # use local vars to enable $module.bs
        0 0.000000 0.000000   100:    local(@args) = @_;
        0 0.000000 0.000000   101:    local($module) = $args[0];
        0 0.000000 0.000000   102:    local(@dirs, $file);
        0 0.000000 0.000000   103:
        0 0.000000 0.000000   104:    unless ($module) {
        0 0.000000 0.000000   105: require Carp;
        0 0.000000 0.000000   106: Carp::confess("Usage:
        0 0.000000 0.000000   107:    }
        0 0.000000 0.000000   108:
        0 0.000000 0.000000   109:    # A common error on platforms which don't
        0 0.000000 0.000000   110:    # Since it's fatal and potentially
        0 0.000000 0.000000   111:    croak("Can't load module $module, dynamic
        0 0.000000 0.000000   112: "  (You may need to build a new perl
            ================ SmallProf version 0.9 ================
          Profile of /usr/lib/perl5/5.00503/i686-linux/DynaLoader.pm   Page 413
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   113: "  dynamic loading or has the $module module
        0 0.000000 0.000000   114: unless defined(&dl_load_file);
        0 0.000000 0.000000   115:
        0 0.000000 0.000000   116:    my @modparts = split(/::/,$module);
        0 0.000000 0.000000   117:    my $modfname = $modparts[-1];
        0 0.000000 0.000000   118:
        0 0.000000 0.000000   119:    # Some systems have restrictions on files
        0 0.000000 0.000000   120:    # mod2fname returns appropriate file base
        0 0.000000 0.000000   121:    # It may also edit @modparts if required.
        0 0.000000 0.000000   122:    $modfname = &mod2fname(\@modparts) if
        0 0.000000 0.000000   123:
        0 0.000000 0.000000   124:    my $modpname = join('/',@modparts);
        0 0.000000 0.000000   125:
        0 0.000000 0.000000   126:    print STDERR "DynaLoader::bootstrap for
        0 0.000000 0.000000   127:  "(auto/$modpname/$modfname.$dl_dlext)\n" if
        0 0.000000 0.000000   128:
        0 0.000000 0.000000   129:    foreach (@INC) {
        0 0.000000 0.000000   130: chop($_ = VMS::Filespec::unixpath($_)) if
        0 0.000000 0.000000   131: my $dir = "$_/auto/$modpname";
        0 0.000000 0.000000   132: next unless -d $dir; # skip over
        0 0.000000 0.000000   133:
        0 0.000000 0.000000   134: # check for common cases to avoid autoload
        0 0.000000 0.000000   135: my $try = "$dir/$modfname.$dl_dlext";
        0 0.000000 0.000000   136: last if $file = ($do_expand) ?
        0 0.000000 0.000000   137:
        0 0.000000 0.000000   138: # no luck here, save dir for possible later
        0 0.000000 0.000000   139: push @dirs, $dir;
        0 0.000000 0.000000   140:    }
        0 0.000000 0.000000   141:    # last resort, let dl_findfile have a go
        0 0.000000 0.000000   142:    $file = dl_findfile(map("-
        0 0.000000 0.000000   143:
        0 0.000000 0.000000   144:    croak("Can't locate loadable object for
        0 0.000000 0.000000   145: unless $file; # wording similar to error
        0 0.000000 0.000000   146:
        0 0.000000 0.000000   147:    my $bootname = "boot_$module";
        0 0.000000 0.000000   148:    $bootname =~ s/\W/_/g;
        0 0.000000 0.000000   149:    @dl_require_symbols = ($bootname);
        0 0.000000 0.000000   150:
        0 0.000000 0.000000   151:    # Execute optional '.bootstrap' perl
        0 0.000000 0.000000   152:    # The .bs file can be used to configure
        0 0.000000 0.000000   153:    # match the needs of the individual
        0 0.000000 0.000000   154:    my $bs = $file;
        0 0.000000 0.000000   155:    $bs =~ s/(\.\w+)?$/\.bs/; # look for .bs
        0 0.000000 0.000000   156:    if (-s $bs) { # only read file if it's
        0 0.000000 0.000000   157:        print STDERR "BS: $bs ($^O,
        0 0.000000 0.000000   158:        eval { do $bs; };
        0 0.000000 0.000000   159:        warn "$bs: $@\n" if $@;
        0 0.000000 0.000000   160:    }
        0 0.000000 0.000000   161:
        0 0.000000 0.000000   162:    # Many dynamic extension loading problems
        0 0.000000 0.000000   163:    # this section of code: XYZ failed at
        0 0.000000 0.000000   164:    # Often these errors are actually
        0 0.000000 0.000000   165:    # C code of the extension XS file. Perl
        0 0.000000 0.000000   166:    # in this perl code simply because this
        0 0.000000 0.000000   167:    # it executed.
        0 0.000000 0.000000   168:
            ================ SmallProf version 0.9 ================
          Profile of /usr/lib/perl5/5.00503/i686-linux/DynaLoader.pm   Page 414
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   169:    my $libref = dl_load_file($file, $module-
        0 0.000000 0.000000   170: croak("Can't load '$file' for module
        0 0.000000 0.000000   171:
        0 0.000000 0.000000   172:    push(@dl_librefs,$libref);  # record
        0 0.000000 0.000000   173:
        0 0.000000 0.000000   174:    my @unresolved = dl_undef_symbols();
        0 0.000000 0.000000   175:    if (@unresolved) {
        0 0.000000 0.000000   176: require Carp;
        0 0.000000 0.000000   177: Carp::carp("Undefined symbols present after
        0 0.000000 0.000000   178:    }
        0 0.000000 0.000000   179:
        0 0.000000 0.000000   180:    my $boot_symbol_ref =
        0 0.000000 0.000000   181:         croak("Can't find '$bootname' symbol
        0 0.000000 0.000000   182:
        0 0.000000 0.000000   183:    my $xs =
        0 0.000000 0.000000   184:
        0 0.000000 0.000000   185:    push(@dl_modules, $module); # record
        0 0.000000 0.000000   186:
        0 0.000000 0.000000   187:    # See comment block above
        0 0.000000 0.000000   188:    &$xs(@args);
        0 0.000000 0.000000   189:}
        0 0.000000 0.000000   190:
        0 0.000000 0.000000   191:
        0 0.000000 0.000000   192:#sub _check_file {   # private utility to
        0 0.000000 0.000000   193:#    my($file) = @_;
        0 0.000000 0.000000   194:#    return $file if (!$do_expand && -f
        0 0.000000 0.000000   195:#    return $file if ( $do_expand &&
        0 0.000000 0.000000   196:#    return undef;
        0 0.000000 0.000000   197:#}
        0 0.000000 0.000000   198:
        0 0.000000 0.000000   199:
        0 0.000000 0.000000   200:# Let autosplit and the autoloader deal with
        0 0.000000 0.000000   201:__END__
            ================ SmallProf version 0.9 ================
            Profile of /usr/lib/perl5/5.00503/i686-linux/IO/File.pm    Page 415
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000     1:#
        0 0.000000 0.000000     2:
        0 0.000000 0.000000     3:package IO::File;
        0 0.000000 0.000000     4:
        0 0.000000 0.000000     5:=head1 NAME
        0 0.000000 0.000000     6:
        0 0.000000 0.000000     7:
        0 0.000000 0.000000     8:
        0 0.000000 0.000000     9:
        0 0.000000 0.000000    10:
        0 0.000000 0.000000    11:
        0 0.000000 0.000000    12:
        0 0.000000 0.000000    13:
        0 0.000000 0.000000    14:
        0 0.000000 0.000000    15:
        0 0.000000 0.000000    16:
        0 0.000000 0.000000    17:
        0 0.000000 0.000000    18:
        0 0.000000 0.000000    19:
        0 0.000000 0.000000    20:
        0 0.000000 0.000000    21:
        0 0.000000 0.000000    22:
        0 0.000000 0.000000    23:
        0 0.000000 0.000000    24:
        0 0.000000 0.000000    25:
        0 0.000000 0.000000    26:
        0 0.000000 0.000000    27:
        0 0.000000 0.000000    28:
        0 0.000000 0.000000    29:
        0 0.000000 0.000000    30:
        0 0.000000 0.000000    31:
        0 0.000000 0.000000    32:
        0 0.000000 0.000000    33:
        0 0.000000 0.000000    34:
        0 0.000000 0.000000    35:
        0 0.000000 0.000000    36:
        0 0.000000 0.000000    37:
        0 0.000000 0.000000    38:
        0 0.000000 0.000000    39:
        0 0.000000 0.000000    40:
        0 0.000000 0.000000    41:
        0 0.000000 0.000000    42:
        0 0.000000 0.000000    43:
        0 0.000000 0.000000    44:
        0 0.000000 0.000000    45:
        0 0.000000 0.000000    46:
        0 0.000000 0.000000    47:
        0 0.000000 0.000000    48:
        0 0.000000 0.000000    49:
        0 0.000000 0.000000    50:
        0 0.000000 0.000000    51:
        0 0.000000 0.000000    52:
        0 0.000000 0.000000    53:
        0 0.000000 0.000000    54:
        0 0.000000 0.000000    55:
        0 0.000000 0.000000    56:
            ================ SmallProf version 0.9 ================
            Profile of /usr/lib/perl5/5.00503/i686-linux/IO/File.pm    Page 416
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000    57:
        0 0.000000 0.000000    58:
        0 0.000000 0.000000    59:
        0 0.000000 0.000000    60:
        0 0.000000 0.000000    61:
        0 0.000000 0.000000    62:
        0 0.000000 0.000000    63:
        0 0.000000 0.000000    64:
        0 0.000000 0.000000    65:
        0 0.000000 0.000000    66:
        0 0.000000 0.000000    67:
        0 0.000000 0.000000    68:
        0 0.000000 0.000000    69:
        0 0.000000 0.000000    70:
        0 0.000000 0.000000    71:
        0 0.000000 0.000000    72:
        0 0.000000 0.000000    73:
        0 0.000000 0.000000    74:
        0 0.000000 0.000000    75:
        0 0.000000 0.000000    76:
        0 0.000000 0.000000    77:
        0 0.000000 0.000000    78:
        0 0.000000 0.000000    79:
        0 0.000000 0.000000    80:
        0 0.000000 0.000000    81:
        0 0.000000 0.000000    82:
        0 0.000000 0.000000    83:
        0 0.000000 0.000000    84:
        0 0.000000 0.000000    85:
        0 0.000000 0.000000    86:
        0 0.000000 0.000000    87:
        0 0.000000 0.000000    88:
        0 0.000000 0.000000    89:
        0 0.000000 0.000000    90:
        0 0.000000 0.000000    91:
        0 0.000000 0.000000    92:
        0 0.000000 0.000000    93:
        0 0.000000 0.000000    94:
        0 0.000000 0.000000    95:
        0 0.000000 0.000000    96:
        0 0.000000 0.000000    97:
        0 0.000000 0.000000    98:
        0 0.000000 0.000000    99:
        0 0.000000 0.000000   100:
        0 0.000000 0.000000   101:
        0 0.000000 0.000000   102:
        0 0.000000 0.000000   103:
        0 0.000000 0.000000   104:
        0 0.000000 0.000000   105:require 5.000;
        0 0.000000 0.000000   106:use strict;
        0 0.000000 0.000000   107:use vars qw($VERSION @EXPORT @EXPORT_OK
        0 0.000000 0.000000   108:use Carp;
        0 0.000000 0.000000   109:use Symbol;
        0 0.000000 0.000000   110:use SelectSaver;
        0 0.000000 0.000000   111:use IO::Seekable;
        0 0.000000 0.000000   112:
            ================ SmallProf version 0.9 ================
            Profile of /usr/lib/perl5/5.00503/i686-linux/IO/File.pm    Page 417
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   113:require Exporter;
        0 0.000000 0.000000   114:require DynaLoader;
        0 0.000000 0.000000   115:
        0 0.000000 0.000000   116:@ISA = qw(IO::Handle IO::Seekable Exporter
        0 0.000000 0.000000   117:
        0 0.000000 0.000000   118:$VERSION = "1.06021";
        0 0.000000 0.000000   119:
        0 0.000000 0.000000   120:@EXPORT = @IO::Seekable::EXPORT;
        0 0.000000 0.000000   121:
        0 0.000000 0.000000   122:eval {
        0 0.000000 0.000000   123:    # Make all Fcntl O_XXX constants
        0 0.000000 0.000000   124:    require Fcntl;
        0 0.000000 0.000000   125:    my @O = grep /^O_/, @Fcntl::EXPORT;
        0 0.000000 0.000000   126:    Fcntl->import(@O);  # first we import
        0 0.000000 0.000000   127:    push(@EXPORT, @O);
        0 0.000000 0.000000   128:};
        0 0.000000 0.000000   129:
        0 0.000000 0.000000   130:
        0 0.000000 0.000000   131:#############################################
        0 0.000000 0.000000   132:## Constructor
        0 0.000000 0.000000   133:##
        0 0.000000 0.000000   134:
        1 0.000000 0.000000   135:sub new {
        1 0.000005 0.000000   136:    my $type = shift;
        1 0.000006 0.000000   137:    my $class = ref($type) || $type ||
        1 0.000014 0.000000   138:    @_ >= 0 && @_ <= 3
        0 0.000000 0.000000   139: or croak "usage: new $class [FILENAME [,MODE
        1 0.000137 0.000000   140:    my $fh = $class->SUPER::new();
        1 0.000003 0.000000   141:    if (@_) {
        1 0.000087 0.000000   142: $fh->open(@_)
        0 0.000000 0.000000   143:     or return undef;
        0 0.000000 0.000000   144:    }
        1 0.000011 0.000000   145:    $fh;
        0 0.000000 0.000000   146:}
        0 0.000000 0.000000   147:
        0 0.000000 0.000000   148:#############################################
        0 0.000000 0.000000   149:## Open
        0 0.000000 0.000000   150:##
        0 0.000000 0.000000   151:
        1 0.000000 0.000000   152:sub open {
        1 0.000009 0.000000   153:    @_ >= 2 && @_ <= 4 or croak 'usage: $fh-
        1 0.000006 0.000000   154:    my ($fh, $file) = @_;
        1 0.000005 0.000000   155:    if (@_ > 2) {
        1 0.000010 0.000000   156: my ($mode, $perms) = @_[2, 3];
        1 0.000009 0.000000   157: if ($mode =~ /^\d+$/) {
        0 0.000000 0.000000   158:     defined $perms or $perms = 0666;
        0 0.000000 0.000000   159:     return sysopen($fh, $file, $mode,
        0 0.000000 0.000000   160: }
        1 0.000007 0.000000   161: $file = './' . $file if $file =~
        1 0.000077 0.000000   162: $file = IO::Handle::_open_mode_string($mode)
        0 0.000000 0.000000   163:    }
        1 0.000121 0.000000   164:    open($fh, $file);
        0 0.000000 0.000000   165:}
        0 0.000000 0.000000   166:
        0 0.000000 0.000000   167:1;
            ================ SmallProf version 0.9 ================
           Profile of /usr/lib/perl5/5.00503/i686-linux/IO/Handle.pm   Page 418
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000     1:
        0 0.000000 0.000000     2:package IO::Handle;
        0 0.000000 0.000000     3:
        0 0.000000 0.000000     4:=head1 NAME
        0 0.000000 0.000000     5:
        0 0.000000 0.000000     6:
        0 0.000000 0.000000     7:
        0 0.000000 0.000000     8:
        0 0.000000 0.000000     9:
        0 0.000000 0.000000    10:
        0 0.000000 0.000000    11:
        0 0.000000 0.000000    12:
        0 0.000000 0.000000    13:
        0 0.000000 0.000000    14:
        0 0.000000 0.000000    15:
        0 0.000000 0.000000    16:
        0 0.000000 0.000000    17:
        0 0.000000 0.000000    18:
        0 0.000000 0.000000    19:
        0 0.000000 0.000000    20:
        0 0.000000 0.000000    21:
        0 0.000000 0.000000    22:
        0 0.000000 0.000000    23:
        0 0.000000 0.000000    24:
        0 0.000000 0.000000    25:
        0 0.000000 0.000000    26:
        0 0.000000 0.000000    27:
        0 0.000000 0.000000    28:
        0 0.000000 0.000000    29:
        0 0.000000 0.000000    30:
        0 0.000000 0.000000    31:
        0 0.000000 0.000000    32:
        0 0.000000 0.000000    33:
        0 0.000000 0.000000    34:
        0 0.000000 0.000000    35:
        0 0.000000 0.000000    36:
        0 0.000000 0.000000    37:
        0 0.000000 0.000000    38:
        0 0.000000 0.000000    39:
        0 0.000000 0.000000    40:
        0 0.000000 0.000000    41:
        0 0.000000 0.000000    42:
        0 0.000000 0.000000    43:
        0 0.000000 0.000000    44:
        0 0.000000 0.000000    45:
        0 0.000000 0.000000    46:
        0 0.000000 0.000000    47:
        0 0.000000 0.000000    48:
        0 0.000000 0.000000    49:
        0 0.000000 0.000000    50:
        0 0.000000 0.000000    51:
        0 0.000000 0.000000    52:
        0 0.000000 0.000000    53:
        0 0.000000 0.000000    54:
        0 0.000000 0.000000    55:
        0 0.000000 0.000000    56:
            ================ SmallProf version 0.9 ================
           Profile of /usr/lib/perl5/5.00503/i686-linux/IO/Handle.pm   Page 419
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000    57:
        0 0.000000 0.000000    58:
        0 0.000000 0.000000    59:
        0 0.000000 0.000000    60:
        0 0.000000 0.000000    61:
        0 0.000000 0.000000    62:
        0 0.000000 0.000000    63:
        0 0.000000 0.000000    64:
        0 0.000000 0.000000    65:
        0 0.000000 0.000000    66:
        0 0.000000 0.000000    67:
        0 0.000000 0.000000    68:
        0 0.000000 0.000000    69:
        0 0.000000 0.000000    70:
        0 0.000000 0.000000    71:
        0 0.000000 0.000000    72:
        0 0.000000 0.000000    73:
        0 0.000000 0.000000    74:
        0 0.000000 0.000000    75:
        0 0.000000 0.000000    76:
        0 0.000000 0.000000    77:
        0 0.000000 0.000000    78:
        0 0.000000 0.000000    79:
        0 0.000000 0.000000    80:
        0 0.000000 0.000000    81:
        0 0.000000 0.000000    82:
        0 0.000000 0.000000    83:
        0 0.000000 0.000000    84:
        0 0.000000 0.000000    85:
        0 0.000000 0.000000    86:
        0 0.000000 0.000000    87:
        0 0.000000 0.000000    88:
        0 0.000000 0.000000    89:
        0 0.000000 0.000000    90:
        0 0.000000 0.000000    91:
        0 0.000000 0.000000    92:
        0 0.000000 0.000000    93:
        0 0.000000 0.000000    94:
        0 0.000000 0.000000    95:
        0 0.000000 0.000000    96:
        0 0.000000 0.000000    97:
        0 0.000000 0.000000    98:
        0 0.000000 0.000000    99:
        0 0.000000 0.000000   100:
        0 0.000000 0.000000   101:
        0 0.000000 0.000000   102:
        0 0.000000 0.000000   103:
        0 0.000000 0.000000   104:
        0 0.000000 0.000000   105:
        0 0.000000 0.000000   106:
        0 0.000000 0.000000   107:
        0 0.000000 0.000000   108:
        0 0.000000 0.000000   109:
        0 0.000000 0.000000   110:
        0 0.000000 0.000000   111:
        0 0.000000 0.000000   112:
            ================ SmallProf version 0.9 ================
           Profile of /usr/lib/perl5/5.00503/i686-linux/IO/Handle.pm   Page 420
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   113:
        0 0.000000 0.000000   114:
        0 0.000000 0.000000   115:
        0 0.000000 0.000000   116:
        0 0.000000 0.000000   117:
        0 0.000000 0.000000   118:
        0 0.000000 0.000000   119:
        0 0.000000 0.000000   120:
        0 0.000000 0.000000   121:
        0 0.000000 0.000000   122:
        0 0.000000 0.000000   123:
        0 0.000000 0.000000   124:
        0 0.000000 0.000000   125:
        0 0.000000 0.000000   126:
        0 0.000000 0.000000   127:
        0 0.000000 0.000000   128:
        0 0.000000 0.000000   129:
        0 0.000000 0.000000   130:
        0 0.000000 0.000000   131:
        0 0.000000 0.000000   132:
        0 0.000000 0.000000   133:
        0 0.000000 0.000000   134:
        0 0.000000 0.000000   135:
        0 0.000000 0.000000   136:
        0 0.000000 0.000000   137:
        0 0.000000 0.000000   138:
        0 0.000000 0.000000   139:
        0 0.000000 0.000000   140:
        0 0.000000 0.000000   141:
        0 0.000000 0.000000   142:
        0 0.000000 0.000000   143:
        0 0.000000 0.000000   144:
        0 0.000000 0.000000   145:
        0 0.000000 0.000000   146:
        0 0.000000 0.000000   147:
        0 0.000000 0.000000   148:
        0 0.000000 0.000000   149:
        0 0.000000 0.000000   150:
        0 0.000000 0.000000   151:
        0 0.000000 0.000000   152:
        0 0.000000 0.000000   153:
        0 0.000000 0.000000   154:
        0 0.000000 0.000000   155:
        0 0.000000 0.000000   156:
        0 0.000000 0.000000   157:
        0 0.000000 0.000000   158:
        0 0.000000 0.000000   159:
        0 0.000000 0.000000   160:
        0 0.000000 0.000000   161:
        0 0.000000 0.000000   162:
        0 0.000000 0.000000   163:
        0 0.000000 0.000000   164:
        0 0.000000 0.000000   165:
        0 0.000000 0.000000   166:
        0 0.000000 0.000000   167:
        0 0.000000 0.000000   168:
            ================ SmallProf version 0.9 ================
           Profile of /usr/lib/perl5/5.00503/i686-linux/IO/Handle.pm   Page 421
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   169:
        0 0.000000 0.000000   170:
        0 0.000000 0.000000   171:
        0 0.000000 0.000000   172:
        0 0.000000 0.000000   173:
        0 0.000000 0.000000   174:
        0 0.000000 0.000000   175:
        0 0.000000 0.000000   176:
        0 0.000000 0.000000   177:
        0 0.000000 0.000000   178:
        0 0.000000 0.000000   179:
        0 0.000000 0.000000   180:
        0 0.000000 0.000000   181:
        0 0.000000 0.000000   182:
        0 0.000000 0.000000   183:
        0 0.000000 0.000000   184:
        0 0.000000 0.000000   185:
        0 0.000000 0.000000   186:
        0 0.000000 0.000000   187:
        0 0.000000 0.000000   188:
        0 0.000000 0.000000   189:
        0 0.000000 0.000000   190:
        0 0.000000 0.000000   191:
        0 0.000000 0.000000   192:
        0 0.000000 0.000000   193:
        0 0.000000 0.000000   194:
        0 0.000000 0.000000   195:
        0 0.000000 0.000000   196:
        0 0.000000 0.000000   197:
        0 0.000000 0.000000   198:
        0 0.000000 0.000000   199:
        0 0.000000 0.000000   200:require 5.000;
        0 0.000000 0.000000   201:use strict;
        0 0.000000 0.000000   202:use vars qw($VERSION $XS_VERSION @EXPORT_OK
        0 0.000000 0.000000   203:use Carp;
        0 0.000000 0.000000   204:use Symbol;
        0 0.000000 0.000000   205:use SelectSaver;
        0 0.000000 0.000000   206:
        0 0.000000 0.000000   207:require Exporter;
        0 0.000000 0.000000   208:@ISA = qw(Exporter);
        0 0.000000 0.000000   209:
        0 0.000000 0.000000   210:$VERSION = "1.1505";
        0 0.000000 0.000000   211:$XS_VERSION = "1.15";
        0 0.000000 0.000000   212:
        0 0.000000 0.000000   213:@EXPORT_OK = qw(
        0 0.000000 0.000000   214:    autoflush
        0 0.000000 0.000000   215:    output_field_separator
        0 0.000000 0.000000   216:    output_record_separator
        0 0.000000 0.000000   217:    input_record_separator
        0 0.000000 0.000000   218:    input_line_number
        0 0.000000 0.000000   219:    format_page_number
        0 0.000000 0.000000   220:    format_lines_per_page
        0 0.000000 0.000000   221:    format_lines_left
        0 0.000000 0.000000   222:    format_name
        0 0.000000 0.000000   223:    format_top_name
        0 0.000000 0.000000   224:    format_line_break_characters
            ================ SmallProf version 0.9 ================
           Profile of /usr/lib/perl5/5.00503/i686-linux/IO/Handle.pm   Page 422
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   225:    format_formfeed
        0 0.000000 0.000000   226:    format_write
        0 0.000000 0.000000   227:
        0 0.000000 0.000000   228:    print
        0 0.000000 0.000000   229:    printf
        0 0.000000 0.000000   230:    getline
        0 0.000000 0.000000   231:    getlines
        0 0.000000 0.000000   232:
        0 0.000000 0.000000   233:    SEEK_SET
        0 0.000000 0.000000   234:    SEEK_CUR
        0 0.000000 0.000000   235:    SEEK_END
        0 0.000000 0.000000   236:    _IOFBF
        0 0.000000 0.000000   237:    _IOLBF
        0 0.000000 0.000000   238:    _IONBF
        0 0.000000 0.000000   239:);
        0 0.000000 0.000000   240:
        0 0.000000 0.000000   241:
        0 0.000000 0.000000   242:#############################################
        0 0.000000 0.000000   243:## Interaction with the XS.
        0 0.000000 0.000000   244:##
        0 0.000000 0.000000   245:
        0 0.000000 0.000000   246:require DynaLoader;
        0 0.000000 0.000000   247:@IO::ISA = qw(DynaLoader);
        0 0.000000 0.000000   248:bootstrap IO $XS_VERSION;
        0 0.000000 0.000000   249:
        0 0.000000 0.000000   250:sub AUTOLOAD {
        0 0.000000 0.000000   251:    if ($AUTOLOAD =~ /::(_?[a-z])/) {
        0 0.000000 0.000000   252: $AutoLoader::AUTOLOAD = $AUTOLOAD;
        0 0.000000 0.000000   253: goto &AutoLoader::AUTOLOAD
        0 0.000000 0.000000   254:    }
        0 0.000000 0.000000   255:    my $constname = $AUTOLOAD;
        0 0.000000 0.000000   256:    $constname =~ s/.*:://;
        0 0.000000 0.000000   257:    my $val = constant($constname);
        0 0.000000 0.000000   258:    defined $val or croak "$constname is not
        0 0.000000 0.000000   259:    no strict 'refs';
        0 0.000000 0.000000   260:    *$AUTOLOAD = sub { $val };
        0 0.000000 0.000000   261:    goto &$AUTOLOAD;
        0 0.000000 0.000000   262:}
        0 0.000000 0.000000   263:
        0 0.000000 0.000000   264:
        0 0.000000 0.000000   265:#############################################
        0 0.000000 0.000000   266:## Constructors, destructors.
        0 0.000000 0.000000   267:##
        0 0.000000 0.000000   268:
        1 0.000000 0.000000   269:sub new {
        1 0.000009 0.000000   270:    my $class = ref($_[0]) || $_[0] ||
        1 0.000007 0.000000   271:    @_ == 1 or croak "usage: new $class";
        1 0.000083 0.000000   272:    my $fh = gensym;
        1 0.000057 0.000000   273:    bless $fh, $class;
        0 0.000000 0.000000   274:}
        0 0.000000 0.000000   275:
        0 0.000000 0.000000   276:sub new_from_fd {
        0 0.000000 0.000000   277:    my $class = ref($_[0]) || $_[0] ||
        0 0.000000 0.000000   278:    @_ == 3 or croak "usage: new_from_fd
        0 0.000000 0.000000   279:    my $fh = gensym;
        0 0.000000 0.000000   280:    shift;
            ================ SmallProf version 0.9 ================
           Profile of /usr/lib/perl5/5.00503/i686-linux/IO/Handle.pm   Page 423
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   281:    IO::Handle::fdopen($fh, @_)
        0 0.000000 0.000000   282: or return undef;
        0 0.000000 0.000000   283:    bless $fh, $class;
        0 0.000000 0.000000   284:}
        0 0.000000 0.000000   285:
        0 0.000000 0.000000   286:#
        0 0.000000 0.000000   287:# There is no need for DESTROY to do
        0 0.000000 0.000000   288:# last reference to an IO object is gone,
        0 0.000000 0.000000   289:# closes its associated files (if any).
        0 0.000000 0.000000   290:# attempts to autoload DESTROY, we here
        0 0.000000 0.000000   291:#
        0 0.000000 0.000000   292:sub DESTROY {}
        0 0.000000 0.000000   293:
        0 0.000000 0.000000   294:
        0 0.000000 0.000000   295:#############################################
        0 0.000000 0.000000   296:## Open and close.
        0 0.000000 0.000000   297:##
        0 0.000000 0.000000   298:
        1 0.000000 0.000000   299:sub _open_mode_string {
        1 0.000007 0.000000   300:    my ($mode) = @_;
        1 0.000013 0.000000   301:    $mode =~ /^\+?(<|>>?)$/
        0 0.000000 0.000000   302:      or $mode =~ s/^r(\+?)$/$1</
        0 0.000000 0.000000   303:      or $mode =~ s/^w(\+?)$/$1>/
        0 0.000000 0.000000   304:      or $mode =~ s/^a(\+?)$/$1>>/
        0 0.000000 0.000000   305:      or croak "IO::Handle: bad open mode:
        1 0.000020 0.000000   306:    $mode;
        0 0.000000 0.000000   307:}
        0 0.000000 0.000000   308:
        0 0.000000 0.000000   309:sub fdopen {
        0 0.000000 0.000000   310:    @_ == 3 or croak 'usage: $fh->fdopen(FD,
        0 0.000000 0.000000   311:    my ($fh, $fd, $mode) = @_;
        0 0.000000 0.000000   312:    local(*GLOB);
        0 0.000000 0.000000   313:
        0 0.000000 0.000000   314:    if (ref($fd) && "".$fd =~ /GLOB\(/o) {
        0 0.000000 0.000000   315: # It's a glob reference; Alias it as we
        0 0.000000 0.000000   316: my $n = qualify(*GLOB);
        0 0.000000 0.000000   317: *GLOB = *{*$fd};
        0 0.000000 0.000000   318: $fd =  $n;
        0 0.000000 0.000000   319:    } elsif ($fd =~ m#^\d+$#) {
        0 0.000000 0.000000   320: # It's an FD number; prefix with "=".
        0 0.000000 0.000000   321: $fd = "=$fd";
        0 0.000000 0.000000   322:    }
        0 0.000000 0.000000   323:
        0 0.000000 0.000000   324:    open($fh, _open_mode_string($mode) . '&'
        0 0.000000 0.000000   325: ? $fh : undef;
        0 0.000000 0.000000   326:}
        0 0.000000 0.000000   327:
        0 0.000000 0.000000   328:sub close {
        0 0.000000 0.000000   329:    @_ == 1 or croak 'usage: $fh->close()';
        0 0.000000 0.000000   330:    my($fh) = @_;
        0 0.000000 0.000000   331:
        0 0.000000 0.000000   332:    close($fh);
        0 0.000000 0.000000   333:}
        0 0.000000 0.000000   334:
        0 0.000000 0.000000   335:#############################################
        0 0.000000 0.000000   336:## Normal I/O functions.
            ================ SmallProf version 0.9 ================
           Profile of /usr/lib/perl5/5.00503/i686-linux/IO/Handle.pm   Page 424
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   337:##
        0 0.000000 0.000000   338:
        0 0.000000 0.000000   339:# flock
        0 0.000000 0.000000   340:# select
        0 0.000000 0.000000   341:
        0 0.000000 0.000000   342:sub opened {
        0 0.000000 0.000000   343:    @_ == 1 or croak 'usage: $fh->opened()';
        0 0.000000 0.000000   344:    defined fileno($_[0]);
        0 0.000000 0.000000   345:}
        0 0.000000 0.000000   346:
        0 0.000000 0.000000   347:sub fileno {
        0 0.000000 0.000000   348:    @_ == 1 or croak 'usage: $fh->fileno()';
        0 0.000000 0.000000   349:    fileno($_[0]);
        0 0.000000 0.000000   350:}
        0 0.000000 0.000000   351:
        0 0.000000 0.000000   352:sub getc {
        0 0.000000 0.000000   353:    @_ == 1 or croak 'usage: $fh->getc()';
        0 0.000000 0.000000   354:    getc($_[0]);
        0 0.000000 0.000000   355:}
        0 0.000000 0.000000   356:
        0 0.000000 0.000000   357:sub eof {
        0 0.000000 0.000000   358:    @_ == 1 or croak 'usage: $fh->eof()';
        0 0.000000 0.000000   359:    eof($_[0]);
        0 0.000000 0.000000   360:}
        0 0.000000 0.000000   361:
        0 0.000000 0.000000   362:sub print {
        0 0.000000 0.000000   363:    @_ or croak 'usage: $fh->print([ARGS])';
        0 0.000000 0.000000   364:    my $this = shift;
        0 0.000000 0.000000   365:    print $this @_;
        0 0.000000 0.000000   366:}
        0 0.000000 0.000000   367:
        0 0.000000 0.000000   368:sub printf {
        0 0.000000 0.000000   369:    @_ >= 2 or croak 'usage: $fh-
        0 0.000000 0.000000   370:    my $this = shift;
        0 0.000000 0.000000   371:    printf $this @_;
        0 0.000000 0.000000   372:}
        0 0.000000 0.000000   373:
        0 0.000000 0.000000   374:sub getline {
        0 0.000000 0.000000   375:    @_ == 1 or croak 'usage: $fh->getline';
        0 0.000000 0.000000   376:    my $this = shift;
        0 0.000000 0.000000   377:    return scalar <$this>;
        0 0.000000 0.000000   378:}
        0 0.000000 0.000000   379:
        0 0.000000 0.000000   380:*gets = \&getline;  # deprecated
        0 0.000000 0.000000   381:
        0 0.000000 0.000000   382:sub getlines {
        0 0.000000 0.000000   383:    @_ == 1 or croak 'usage: $fh->getline()';
        0 0.000000 0.000000   384:    wantarray or
        0 0.000000 0.000000   385: croak 'Can\'t call $fh->getlines in a scalar
        0 0.000000 0.000000   386:    my $this = shift;
        0 0.000000 0.000000   387:    return <$this>;
        0 0.000000 0.000000   388:}
        0 0.000000 0.000000   389:
        0 0.000000 0.000000   390:sub truncate {
        0 0.000000 0.000000   391:    @_ == 2 or croak 'usage: $fh-
        0 0.000000 0.000000   392:    truncate($_[0], $_[1]);
            ================ SmallProf version 0.9 ================
           Profile of /usr/lib/perl5/5.00503/i686-linux/IO/Handle.pm   Page 425
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   393:}
        0 0.000000 0.000000   394:
        0 0.000000 0.000000   395:sub read {
        0 0.000000 0.000000   396:    @_ == 3 || @_ == 4 or croak '$fh-
        0 0.000000 0.000000   397:    read($_[0], $_[1], $_[2], $_[3] || 0);
        0 0.000000 0.000000   398:}
        0 0.000000 0.000000   399:
        0 0.000000 0.000000   400:sub sysread {
        0 0.000000 0.000000   401:    @_ == 3 || @_ == 4 or croak '$fh-
        0 0.000000 0.000000   402:    sysread($_[0], $_[1], $_[2], $_[3] || 0);
        0 0.000000 0.000000   403:}
        0 0.000000 0.000000   404:
        0 0.000000 0.000000   405:sub write {
        0 0.000000 0.000000   406:    @_ == 3 || @_ == 4 or croak '$fh-
        0 0.000000 0.000000   407:    local($\) = "";
        0 0.000000 0.000000   408:    print { $_[0] } substr($_[1], $_[3] || 0,
        0 0.000000 0.000000   409:}
        0 0.000000 0.000000   410:
        0 0.000000 0.000000   411:sub syswrite {
        0 0.000000 0.000000   412:    @_ == 3 || @_ == 4 or croak '$fh-
        0 0.000000 0.000000   413:    syswrite($_[0], $_[1], $_[2], $_[3] ||
        0 0.000000 0.000000   414:}
        0 0.000000 0.000000   415:
        0 0.000000 0.000000   416:sub stat {
        0 0.000000 0.000000   417:    @_ == 1 or croak 'usage: $fh->stat()';
        0 0.000000 0.000000   418:    stat($_[0]);
        0 0.000000 0.000000   419:}
        0 0.000000 0.000000   420:
        0 0.000000 0.000000   421:#############################################
        0 0.000000 0.000000   422:## State modification functions.
        0 0.000000 0.000000   423:##
        0 0.000000 0.000000   424:
        0 0.000000 0.000000   425:sub autoflush {
        0 0.000000 0.000000   426:    my $old = new SelectSaver qualify($_[0],
        0 0.000000 0.000000   427:    my $prev = $|;
        0 0.000000 0.000000   428:    $| = @_ > 1 ? $_[1] : 1;
        0 0.000000 0.000000   429:    $prev;
        0 0.000000 0.000000   430:}
        0 0.000000 0.000000   431:
        0 0.000000 0.000000   432:sub output_field_separator {
        0 0.000000 0.000000   433:    my $prev = $,;
        0 0.000000 0.000000   434:    $, = $_[1] if @_ > 1;
        0 0.000000 0.000000   435:    $prev;
        0 0.000000 0.000000   436:}
        0 0.000000 0.000000   437:
        0 0.000000 0.000000   438:sub output_record_separator {
        0 0.000000 0.000000   439:    my $prev = $\;
        0 0.000000 0.000000   440:    $\ = $_[1] if @_ > 1;
        0 0.000000 0.000000   441:    $prev;
        0 0.000000 0.000000   442:}
        0 0.000000 0.000000   443:
        0 0.000000 0.000000   444:sub input_record_separator {
        0 0.000000 0.000000   445:    my $prev = $/;
        0 0.000000 0.000000   446:    $/ = $_[1] if @_ > 1;
        0 0.000000 0.000000   447:    $prev;
        0 0.000000 0.000000   448:}
            ================ SmallProf version 0.9 ================
           Profile of /usr/lib/perl5/5.00503/i686-linux/IO/Handle.pm   Page 426
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   449:
        0 0.000000 0.000000   450:sub input_line_number {
        0 0.000000 0.000000   451:    # localizing $. doesn't work as
        0 0.000000 0.000000   452:    my $prev = $.;
        0 0.000000 0.000000   453:    $. = $_[1] if @_ > 1;
        0 0.000000 0.000000   454:    $prev;
        0 0.000000 0.000000   455:}
        0 0.000000 0.000000   456:
        0 0.000000 0.000000   457:sub format_page_number {
        0 0.000000 0.000000   458:    my $old = new SelectSaver qualify($_[0],
        0 0.000000 0.000000   459:    my $prev = $%;
        0 0.000000 0.000000   460:    $% = $_[1] if @_ > 1;
        0 0.000000 0.000000   461:    $prev;
        0 0.000000 0.000000   462:}
        0 0.000000 0.000000   463:
        0 0.000000 0.000000   464:sub format_lines_per_page {
        0 0.000000 0.000000   465:    my $old = new SelectSaver qualify($_[0],
        0 0.000000 0.000000   466:    my $prev = $=;
        0 0.000000 0.000000   467:    $= = $_[1] if @_ > 1;
        0 0.000000 0.000000   468:    $prev;
        0 0.000000 0.000000   469:}
        0 0.000000 0.000000   470:
        0 0.000000 0.000000   471:sub format_lines_left {
        0 0.000000 0.000000   472:    my $old = new SelectSaver qualify($_[0],
        0 0.000000 0.000000   473:    my $prev = $-;
        0 0.000000 0.000000   474:    $- = $_[1] if @_ > 1;
        0 0.000000 0.000000   475:    $prev;
        0 0.000000 0.000000   476:}
        0 0.000000 0.000000   477:
        0 0.000000 0.000000   478:sub format_name {
        0 0.000000 0.000000   479:    my $old = new SelectSaver qualify($_[0],
        0 0.000000 0.000000   480:    my $prev = $~;
        0 0.000000 0.000000   481:    $~ = qualify($_[1], caller) if @_ > 1;
        0 0.000000 0.000000   482:    $prev;
        0 0.000000 0.000000   483:}
        0 0.000000 0.000000   484:
        0 0.000000 0.000000   485:sub format_top_name {
        0 0.000000 0.000000   486:    my $old = new SelectSaver qualify($_[0],
        0 0.000000 0.000000   487:    my $prev = $^;
        0 0.000000 0.000000   488:    $^ = qualify($_[1], caller) if @_ > 1;
        0 0.000000 0.000000   489:    $prev;
        0 0.000000 0.000000   490:}
        0 0.000000 0.000000   491:
        0 0.000000 0.000000   492:sub format_line_break_characters {
        0 0.000000 0.000000   493:    my $prev = $:;
        0 0.000000 0.000000   494:    $: = $_[1] if @_ > 1;
        0 0.000000 0.000000   495:    $prev;
        0 0.000000 0.000000   496:}
        0 0.000000 0.000000   497:
        0 0.000000 0.000000   498:sub format_formfeed {
        0 0.000000 0.000000   499:    my $prev = $^L;
        0 0.000000 0.000000   500:    $^L = $_[1] if @_ > 1;
        0 0.000000 0.000000   501:    $prev;
        0 0.000000 0.000000   502:}
        0 0.000000 0.000000   503:
        0 0.000000 0.000000   504:sub formline {
            ================ SmallProf version 0.9 ================
           Profile of /usr/lib/perl5/5.00503/i686-linux/IO/Handle.pm   Page 427
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   505:    my $fh = shift;
        0 0.000000 0.000000   506:    my $picture = shift;
        0 0.000000 0.000000   507:    local($^A) = $^A;
        0 0.000000 0.000000   508:    local($\) = "";
        0 0.000000 0.000000   509:    formline($picture, @_);
        0 0.000000 0.000000   510:    print $fh $^A;
        0 0.000000 0.000000   511:}
        0 0.000000 0.000000   512:
        0 0.000000 0.000000   513:sub format_write {
        0 0.000000 0.000000   514:    @_ < 3 || croak 'usage: $fh->write(
        0 0.000000 0.000000   515:    if (@_ == 2) {
        0 0.000000 0.000000   516: my ($fh, $fmt) = @_;
        0 0.000000 0.000000   517: my $oldfmt = $fh->format_name($fmt);
        0 0.000000 0.000000   518: CORE::write($fh);
        0 0.000000 0.000000   519: $fh->format_name($oldfmt);
        0 0.000000 0.000000   520:    } else {
        0 0.000000 0.000000   521: CORE::write($_[0]);
        0 0.000000 0.000000   522:    }
        0 0.000000 0.000000   523:}
        0 0.000000 0.000000   524:
        0 0.000000 0.000000   525:sub fcntl {
        0 0.000000 0.000000   526:    @_ == 3 || croak 'usage: $fh->fcntl( OP,
        0 0.000000 0.000000   527:    my ($fh, $op, $val) = @_;
        0 0.000000 0.000000   528:    my $r = fcntl($fh, $op, $val);
        0 0.000000 0.000000   529:    defined $r && $r eq "0 but true" ? 0 :
        0 0.000000 0.000000   530:}
        0 0.000000 0.000000   531:
        0 0.000000 0.000000   532:sub ioctl {
        0 0.000000 0.000000   533:    @_ == 3 || croak 'usage: $fh->ioctl( OP,
        0 0.000000 0.000000   534:    my ($fh, $op, $val) = @_;
        0 0.000000 0.000000   535:    my $r = ioctl($fh, $op, $val);
        0 0.000000 0.000000   536:    defined $r && $r eq "0 but true" ? 0 :
        0 0.000000 0.000000   537:}
        0 0.000000 0.000000   538:
        0 0.000000 0.000000   539:1;
            ================ SmallProf version 0.9 ================
              Profile of /usr/lib/perl5/5.00503/i686-linux/re.pm       Page 428
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000     1:package re;
        0 0.000000 0.000000     2:
        0 0.000000 0.000000     3:$VERSION = 0.02;
        0 0.000000 0.000000     4:
        0 0.000000 0.000000     5:=head1 NAME
        0 0.000000 0.000000     6:
        0 0.000000 0.000000     7:
        0 0.000000 0.000000     8:
        0 0.000000 0.000000     9:
        0 0.000000 0.000000    10:
        0 0.000000 0.000000    11:
        0 0.000000 0.000000    12:
        0 0.000000 0.000000    13:
        0 0.000000 0.000000    14:
        0 0.000000 0.000000    15:
        0 0.000000 0.000000    16:
        0 0.000000 0.000000    17:
        0 0.000000 0.000000    18:
        0 0.000000 0.000000    19:
        0 0.000000 0.000000    20:
        0 0.000000 0.000000    21:
        0 0.000000 0.000000    22:
        0 0.000000 0.000000    23:
        0 0.000000 0.000000    24:
        0 0.000000 0.000000    25:
        0 0.000000 0.000000    26:
        0 0.000000 0.000000    27:
        0 0.000000 0.000000    28:
        0 0.000000 0.000000    29:
        0 0.000000 0.000000    30:
        0 0.000000 0.000000    31:
        0 0.000000 0.000000    32:
        0 0.000000 0.000000    33:
        0 0.000000 0.000000    34:
        0 0.000000 0.000000    35:
        0 0.000000 0.000000    36:
        0 0.000000 0.000000    37:
        0 0.000000 0.000000    38:
        0 0.000000 0.000000    39:
        0 0.000000 0.000000    40:
        0 0.000000 0.000000    41:
        0 0.000000 0.000000    42:
        0 0.000000 0.000000    43:
        0 0.000000 0.000000    44:
        0 0.000000 0.000000    45:
        0 0.000000 0.000000    46:
        0 0.000000 0.000000    47:
        0 0.000000 0.000000    48:
        0 0.000000 0.000000    49:
        0 0.000000 0.000000    50:
        0 0.000000 0.000000    51:
        0 0.000000 0.000000    52:
        0 0.000000 0.000000    53:
        0 0.000000 0.000000    54:
        0 0.000000 0.000000    55:
        0 0.000000 0.000000    56:
            ================ SmallProf version 0.9 ================
              Profile of /usr/lib/perl5/5.00503/i686-linux/re.pm       Page 429
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000    57:
        0 0.000000 0.000000    58:
        0 0.000000 0.000000    59:
        0 0.000000 0.000000    60:
        0 0.000000 0.000000    61:
        0 0.000000 0.000000    62:
        0 0.000000 0.000000    63:
        0 0.000000 0.000000    64:
        0 0.000000 0.000000    65:
        0 0.000000 0.000000    66:
        0 0.000000 0.000000    67:
        0 0.000000 0.000000    68:
        0 0.000000 0.000000    69:
        0 0.000000 0.000000    70:
        0 0.000000 0.000000    71:
        0 0.000000 0.000000    72:
        0 0.000000 0.000000    73:
        0 0.000000 0.000000    74:
        0 0.000000 0.000000    75:
        0 0.000000 0.000000    76:
        0 0.000000 0.000000    77:my %bitmask = (
        0 0.000000 0.000000    78:taint => 0x00100000,
        0 0.000000 0.000000    79:eval => 0x00200000,
        0 0.000000 0.000000    80:);
        0 0.000000 0.000000    81:
        0 0.000000 0.000000    82:sub setcolor {
        0 0.000000 0.000000    83: eval {    # Ignore errors
        0 0.000000 0.000000    84:  require Term::Cap;
        0 0.000000 0.000000    85:
        0 0.000000 0.000000    86:  my $terminal = Tgetent Term::Cap ({OSPEED
        0 0.000000 0.000000    87:  my $props = $ENV{PERL_RE_TC} ||
        0 0.000000 0.000000    88:  my @props = split /,/, $props;
        0 0.000000 0.000000    89:
        0 0.000000 0.000000    90:
        0 0.000000 0.000000    91:  $ENV{TERMCAP_COLORS} = join "\t", map
        0 0.000000 0.000000    92: };
        0 0.000000 0.000000    93:
        0 0.000000 0.000000    94: not defined $ENV{TERMCAP_COLORS} or
        0 0.000000 0.000000    95:    or not defined $ENV{PERL_RE_TC}
        0 0.000000 0.000000    96:    or die "Not enough fields in
        0 0.000000 0.000000    97:}
        0 0.000000 0.000000    98:
        1 0.000000 0.000000    99:sub bits {
        0 0.000000 0.000000   100:    my $on = shift;
        0 0.000000 0.000000   101:    my $bits = 0;
        0 0.000000 0.000000   102:    unless(@_) {
        0 0.000000 0.000000   103: require Carp;
        0 0.000000 0.000000   104: Carp::carp("Useless use of \"re\" pragma");
        0 0.000000 0.000000   105:    }
        0 0.000000 0.000000   106:    foreach my $s (@_){
        0 0.000000 0.000000   107:      if ($s eq 'debug' or $s eq
        0 0.000000 0.000000   108:    setcolor() if $s eq 'debugcolor';
        0 0.000000 0.000000   109:   require DynaLoader;
        0 0.000000 0.000000   110:   @ISA = ('DynaLoader');
        0 0.000000 0.000000   111:   bootstrap re;
        0 0.000000 0.000000   112:   install() if $on;
            ================ SmallProf version 0.9 ================
              Profile of /usr/lib/perl5/5.00503/i686-linux/re.pm       Page 430
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   113:   uninstall() unless $on;
        0 0.000000 0.000000   114:   next;
        0 0.000000 0.000000   115:      }
        0 0.000000 0.000000   116:      $bits |= $bitmask{$s} || 0;
        0 0.000000 0.000000   117:    }
        0 0.000000 0.000000   118:    $bits;
        0 0.000000 0.000000   119:}
        0 0.000000 0.000000   120:
        1 0.000000 0.000000   121:sub import {
        0 0.000000 0.000000   122:    shift;
        0 0.000000 0.000000   123:    $^H |= bits(1,@_);
        0 0.000000 0.000000   124:}
        0 0.000000 0.000000   125:
        0 0.000000 0.000000   126:sub unimport {
        0 0.000000 0.000000   127:    shift;
        0 0.000000 0.000000   128:    $^H &= ~ bits(0,@_);
        0 0.000000 0.000000   129:}
        0 0.000000 0.000000   130:
        0 0.000000 0.000000   131:1;
            ================ SmallProf version 0.9 ================
                   Profile of /usr/lib/perl5/5.00503/lib.pm            Page 431
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000     1:package lib;
        0 0.000000 0.000000     2:
        0 0.000000 0.000000     3:use vars qw(@ORIG_INC);
        0 0.000000 0.000000     4:use Config;
        0 0.000000 0.000000     5:
        0 0.000000 0.000000     6:my $archname = $Config{'archname'};
        0 0.000000 0.000000     7:
        0 0.000000 0.000000     8:@ORIG_INC = @INC; # take a handy copy of
        0 0.000000 0.000000     9:
        0 0.000000 0.000000    10:
        3 0.000000 0.000000    11:sub import {
        0 0.000000 0.000000    12:    shift;
        0 0.000000 0.000000    13:    foreach (reverse @_) {
        0 0.000000 0.000000    14: ## Ignore this if not defined.
        0 0.000000 0.000000    15: next unless defined($_);
        0 0.000000 0.000000    16: if ($_ eq '') {
        0 0.000000 0.000000    17:     require Carp;
        0 0.000000 0.000000    18:     Carp::carp("Empty compile time value
        0 0.000000 0.000000    19:       # at foo.pl line ...
        0 0.000000 0.000000    20: }
        0 0.000000 0.000000    21: if (-e && ! -d _) {
        0 0.000000 0.000000    22:     require Carp;
        0 0.000000 0.000000    23:     Carp::carp("Parameter to use lib must be
        0 0.000000 0.000000    24: }
        0 0.000000 0.000000    25: unshift(@INC, $_);
        0 0.000000 0.000000    26: # Put a corresponding archlib directory
        0 0.000000 0.000000    27: # looks like $_ has an archlib directory
        0 0.000000 0.000000    28: if (-d "$_/$archname") {
        0 0.000000 0.000000    29:     unshift(@INC, "$_/$archname")    if -d
        0 0.000000 0.000000    30:     unshift(@INC, "$_/$archname/$]") if -d
        0 0.000000 0.000000    31: }
        0 0.000000 0.000000    32:    }
        0 0.000000 0.000000    33:}
        0 0.000000 0.000000    34:
        0 0.000000 0.000000    35:
        0 0.000000 0.000000    36:sub unimport {
        0 0.000000 0.000000    37:    shift;
        0 0.000000 0.000000    38:    my $mode = shift if $_[0] =~ m/^:[A-Z]+/;
        0 0.000000 0.000000    39:
        0 0.000000 0.000000    40:    my %names;
        0 0.000000 0.000000    41:    foreach(@_) {
        0 0.000000 0.000000    42: ++$names{$_};
        0 0.000000 0.000000    43: ++$names{"$_/$archname"} if -d
        0 0.000000 0.000000    44:    }
        0 0.000000 0.000000    45:
        0 0.000000 0.000000    46:    if ($mode and $mode eq ':ALL') {
        0 0.000000 0.000000    47: # Remove ALL instances of each named
        0 0.000000 0.000000    48: @INC = grep { !exists $names{$_} } @INC;
        0 0.000000 0.000000    49:    } else {
        0 0.000000 0.000000    50: # Remove INITIAL instance(s) of each named
        0 0.000000 0.000000    51: @INC = grep { --$names{$_} < 0   } @INC;
        0 0.000000 0.000000    52:    }
        0 0.000000 0.000000    53:}
        0 0.000000 0.000000    54:
        0 0.000000 0.000000    55:1;
        0 0.000000 0.000000    56:__END__
            ================ SmallProf version 0.9 ================
                  Profile of /usr/lib/perl5/5.00503/locale.pm          Page 432
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000     1:package locale;
        0 0.000000 0.000000     2:
        0 0.000000 0.000000     3:=head1 NAME
        0 0.000000 0.000000     4:
        0 0.000000 0.000000     5:
        0 0.000000 0.000000     6:
        0 0.000000 0.000000     7:
        0 0.000000 0.000000     8:
        0 0.000000 0.000000     9:
        0 0.000000 0.000000    10:
        0 0.000000 0.000000    11:
        0 0.000000 0.000000    12:
        0 0.000000 0.000000    13:
        0 0.000000 0.000000    14:
        0 0.000000 0.000000    15:
        0 0.000000 0.000000    16:
        0 0.000000 0.000000    17:
        0 0.000000 0.000000    18:
        0 0.000000 0.000000    19:
        0 0.000000 0.000000    20:
        0 0.000000 0.000000    21:
        0 0.000000 0.000000    22:
        0 0.000000 0.000000    23:
        0 0.000000 0.000000    24:
        1 0.000000 0.000000    25:sub import {
        0 0.000000 0.000000    26:    $^H |= 0x800;
        0 0.000000 0.000000    27:}
        0 0.000000 0.000000    28:
        0 0.000000 0.000000    29:sub unimport {
        0 0.000000 0.000000    30:    $^H &= ~0x800;
        0 0.000000 0.000000    31:}
        0 0.000000 0.000000    32:
        0 0.000000 0.000000    33:1;
            ================ SmallProf version 0.9 ================
                 Profile of /usr/lib/perl5/5.00503/overload.pm         Page 433
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000     1:package overload;
        0 0.000000 0.000000     2:
        0 0.000000 0.000000     3:sub nil {}
        0 0.000000 0.000000     4:
        1 0.000000 0.000000     5:sub OVERLOAD {
        0 0.000000 0.000000     6:  $package = shift;
        0 0.000000 0.000000     7:  my %arg = @_;
        0 0.000000 0.000000     8:  my ($sub, $fb);
        0 0.000000 0.000000     9:  $ {$package . "::OVERLOAD"}{dummy}++; #
        0 0.000000 0.000000    10:  *{$package . "::()"} = \&nil; # Make it
        0 0.000000 0.000000    11:  for (keys %arg) {
        0 0.000000 0.000000    12:    if ($_ eq 'fallback') {
        0 0.000000 0.000000    13:      $fb = $arg{$_};
        0 0.000000 0.000000    14:    } else {
        0 0.000000 0.000000    15:      $sub = $arg{$_};
        0 0.000000 0.000000    16:      if (not ref $sub and $sub !~ /::/) {
        0 0.000000 0.000000    17: $ {$package . "::(" . $_} = $sub;
        0 0.000000 0.000000    18: $sub = \&nil;
        0 0.000000 0.000000    19:      }
        0 0.000000 0.000000    20:      #print STDERR "Setting `$
        0 0.000000 0.000000    21:      *{$package . "::(" . $_} = \&{ $sub };
        0 0.000000 0.000000    22:    }
        0 0.000000 0.000000    23:  }
        0 0.000000 0.000000    24:  ${$package . "::()"} = $fb; # Make it
        0 0.000000 0.000000    25:}
        0 0.000000 0.000000    26:
        1 0.000000 0.000000    27:sub import {
        0 0.000000 0.000000    28:  $package = (caller())[0];
        0 0.000000 0.000000    29:  # *{$package . "::OVERLOAD"} = \&OVERLOAD;
        0 0.000000 0.000000    30:  shift;
        0 0.000000 0.000000    31:  $package->overload::OVERLOAD(@_);
        0 0.000000 0.000000    32:}
        0 0.000000 0.000000    33:
        0 0.000000 0.000000    34:sub unimport {
        0 0.000000 0.000000    35:  $package = (caller())[0];
        0 0.000000 0.000000    36:  ${$package . "::OVERLOAD"}{dummy}++; #
        0 0.000000 0.000000    37:  shift;
        0 0.000000 0.000000    38:  for (@_) {
        0 0.000000 0.000000    39:    if ($_ eq 'fallback') {
        0 0.000000 0.000000    40:      undef $ {$package . "::()"};
        0 0.000000 0.000000    41:    } else {
        0 0.000000 0.000000    42:      delete $ {$package . "::"}{"(" . $_};
        0 0.000000 0.000000    43:    }
        0 0.000000 0.000000    44:  }
        0 0.000000 0.000000    45:}
        0 0.000000 0.000000    46:
        0 0.000000 0.000000    47:sub Overloaded {
        0 0.000000 0.000000    48:  my $package = shift;
        0 0.000000 0.000000    49:  $package = ref $package if ref $package;
        0 0.000000 0.000000    50:  $package->can('()');
        0 0.000000 0.000000    51:}
        0 0.000000 0.000000    52:
        0 0.000000 0.000000    53:sub ov_method {
        0 0.000000 0.000000    54:  my $globref = shift;
        0 0.000000 0.000000    55:  return undef unless $globref;
        0 0.000000 0.000000    56:  my $sub = \&{*$globref};
            ================ SmallProf version 0.9 ================
                 Profile of /usr/lib/perl5/5.00503/overload.pm         Page 434
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000    57:  return $sub if $sub ne \&nil;
        0 0.000000 0.000000    58:  return shift->can($ {*$globref});
        0 0.000000 0.000000    59:}
        0 0.000000 0.000000    60:
        0 0.000000 0.000000    61:sub OverloadedStringify {
        0 0.000000 0.000000    62:  my $package = shift;
        0 0.000000 0.000000    63:  $package = ref $package if ref $package;
        0 0.000000 0.000000    64:  #$package->can('(""')
        0 0.000000 0.000000    65:  ov_method mycan($package, '(""'), $package
        0 0.000000 0.000000    66:    or ov_method mycan($package, '(0+'),
        0 0.000000 0.000000    67:    or ov_method mycan($package, '(bool'),
        0 0.000000 0.000000    68:    or ov_method mycan($package,
        0 0.000000 0.000000    69:}
        0 0.000000 0.000000    70:
        0 0.000000 0.000000    71:sub Method {
        0 0.000000 0.000000    72:  my $package = shift;
        0 0.000000 0.000000    73:  $package = ref $package if ref $package;
        0 0.000000 0.000000    74:  #my $meth = $package->can('(' . shift);
        0 0.000000 0.000000    75:  ov_method mycan($package, '(' . shift),
        0 0.000000 0.000000    76:  #return $meth if $meth ne \&nil;
        0 0.000000 0.000000    77:  #return $ {*{$meth}};
        0 0.000000 0.000000    78:}
        0 0.000000 0.000000    79:
        0 0.000000 0.000000    80:sub AddrRef {
        0 0.000000 0.000000    81:  my $package = ref $_[0];
        0 0.000000 0.000000    82:  return "$_[0]" unless $package;
        0 0.000000 0.000000    83:  bless $_[0], overload::Fake; # Non-
        0 0.000000 0.000000    84:  my $str = "$_[0]";
        0 0.000000 0.000000    85:  bless $_[0], $package; # Back
        0 0.000000 0.000000    86:  $package . substr $str, index $str, '=';
        0 0.000000 0.000000    87:}
        0 0.000000 0.000000    88:
        0 0.000000 0.000000    89:sub StrVal {
        0 0.000000 0.000000    90:  (OverloadedStringify($_[0])) ?
        0 0.000000 0.000000    91:    (AddrRef(shift)) :
        0 0.000000 0.000000    92:    "$_[0]";
        0 0.000000 0.000000    93:}
        0 0.000000 0.000000    94:
        0 0.000000 0.000000    95:sub mycan {    # Real can would leave stubs.
        0 0.000000 0.000000    96:  my ($package, $meth) = @_;
        0 0.000000 0.000000    97:  return \*{$package . "::$meth"} if defined
        0 0.000000 0.000000    98:  my $p;
        0 0.000000 0.000000    99:  foreach $p (@{$package . "::ISA"}) {
        0 0.000000 0.000000   100:    my $out = mycan($p, $meth);
        0 0.000000 0.000000   101:    return $out if $out;
        0 0.000000 0.000000   102:  }
        0 0.000000 0.000000   103:  return undef;
        0 0.000000 0.000000   104:}
        0 0.000000 0.000000   105:
        0 0.000000 0.000000   106:%constants = (
        0 0.000000 0.000000   107:       'integer'   =>  0x1000,
        0 0.000000 0.000000   108:       'float'   =>  0x2000,
        0 0.000000 0.000000   109:       'binary'   =>  0x4000,
        0 0.000000 0.000000   110:       'q'   =>  0x8000,
        0 0.000000 0.000000   111:       'qr'   => 0x10000,
        0 0.000000 0.000000   112:      );
            ================ SmallProf version 0.9 ================
                 Profile of /usr/lib/perl5/5.00503/overload.pm         Page 435
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   113:
        0 0.000000 0.000000   114:%ops = ( with_assign   => "+ - * / % ** << >>
        0 0.000000 0.000000   115:  assign    => "+= -= *= /= %= **= <<= >>= x=
        0 0.000000 0.000000   116:  str_comparison   => "< <= >  >= == !=",
        0 0.000000 0.000000   117:  '3way_comparison'=> "<=> cmp",
        0 0.000000 0.000000   118:  num_comparison   => "lt le gt ge eq ne",
        0 0.000000 0.000000   119:  binary    => "& | ^",
        0 0.000000 0.000000   120:  unary    => "neg ! ~",
        0 0.000000 0.000000   121:  mutators   => '++ --',
        0 0.000000 0.000000   122:  func    => "atan2 cos sin exp abs log
        0 0.000000 0.000000   123:  conversion   => 'bool "" 0+',
        0 0.000000 0.000000   124:  special   => 'nomethod fallback =');
        0 0.000000 0.000000   125:
        0 0.000000 0.000000   126:sub constant {
        0 0.000000 0.000000   127:  # Arguments: what, sub
        0 0.000000 0.000000   128:  while (@_) {
        0 0.000000 0.000000   129:    $^H{$_[0]} = $_[1];
        0 0.000000 0.000000   130:    $^H |= $constants{$_[0]} | 0x20000;
        0 0.000000 0.000000   131:    shift, shift;
        0 0.000000 0.000000   132:  }
        0 0.000000 0.000000   133:}
        0 0.000000 0.000000   134:
        0 0.000000 0.000000   135:sub remove_constant {
        0 0.000000 0.000000   136:  # Arguments: what, sub
        0 0.000000 0.000000   137:  while (@_) {
        0 0.000000 0.000000   138:    delete $^H{$_[0]};
        0 0.000000 0.000000   139:    $^H &= ~ $constants{$_[0]};
        0 0.000000 0.000000   140:    shift, shift;
        0 0.000000 0.000000   141:  }
        0 0.000000 0.000000   142:}
        0 0.000000 0.000000   143:
        0 0.000000 0.000000   144:1;
        0 0.000000 0.000000   145:
        0 0.000000 0.000000   146:__END__
            ================ SmallProf version 0.9 ================
                Profile of /usr/lib/perl5/5.00503/shellwords.pl        Page 436
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000     1:;# shellwords.pl
        0 0.000000 0.000000     2:;#
        0 0.000000 0.000000     3:;# Usage:
        0 0.000000 0.000000     4:;# require 'shellwords.pl';
        0 0.000000 0.000000     5:;# @words = &shellwords($line);
        0 0.000000 0.000000     6:;# or
        0 0.000000 0.000000     7:;# @words = &shellwords(@lines);
        0 0.000000 0.000000     8:;# or
        0 0.000000 0.000000     9:;# @words = &shellwords;  # defaults to $_
        0 0.000000 0.000000    10:
        1 0.000000 0.000000    11:sub shellwords {
        0 0.000000 0.000000    12:    package shellwords;
        1 0.000009 0.000000    13:    local($_) = join('', @_) if @_;
        1 0.000006 0.000000    14:    local(@words,$snippet,$field);
        0 0.000000 0.000000    15:
        1 0.000009 0.000000    16:    s/^\s+//;
        6 0.000015 0.000000    17:    while ($_ ne '') {
        5 0.000011 0.000000    18: $field = '';
       10 0.000006 0.000000    19: for (;;) {
       10 0.000025 0.000000    20:     if (s/^"(([^"\\]|\\.)*)"//) {
        0 0.000000 0.000000    21:  ($snippet = $1) =~ s#\\(.)#$1#g;
        0 0.000000 0.000000    22:     }
       10 0.000016 0.000000    23:     elsif (/^"/) {
        0 0.000000 0.000000    24:  die "Unmatched double quote: $_\n";
        0 0.000000 0.000000    25:     }
       10 0.000018 0.000000    26:     elsif (s/^'(([^'\\]|\\.)*)'//) {
        0 0.000000 0.000000    27:  ($snippet = $1) =~ s#\\(.)#$1#g;
        0 0.000000 0.000000    28:     }
       10 0.000016 0.000000    29:     elsif (/^'/) {
        0 0.000000 0.000000    30:  die "Unmatched single quote: $_\n";
        0 0.000000 0.000000    31:     }
       10 0.000017 0.000000    32:     elsif (s/^\\(.)//) {
        0 0.000000 0.000000    33:  $snippet = $1;
        0 0.000000 0.000000    34:     }
       10 0.000060 0.000000    35:     elsif (s/^([^\s\\'"]+)//) {
        5 0.000041 0.000000    36:  $snippet = $1;
        0 0.000000 0.000000    37:     }
        0 0.000000 0.000000    38:     else {
        5 0.000021 0.000000    39:  s/^\s+//;
        5 0.000015 0.000000    40:  last;
        0 0.000000 0.000000    41:     }
        5 0.000018 0.000000    42:     $field .= $snippet;
        0 0.000000 0.000000    43: }
        5 0.000022 0.000000    44: push(@words, $field);
        0 0.000000 0.000000    45:    }
        1 0.000032 0.000000    46:    @words;
        0 0.000000 0.000000    47:}
        1 0.000028 0.000000    48:1;
            ================ SmallProf version 0.9 ================
                  Profile of /usr/lib/perl5/5.00503/strict.pm          Page 437
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000     1:package strict;
        0 0.000000 0.000000     2:
        0 0.000000 0.000000     3:=head1 NAME
        0 0.000000 0.000000     4:
        0 0.000000 0.000000     5:
        0 0.000000 0.000000     6:
        0 0.000000 0.000000     7:
        0 0.000000 0.000000     8:
        0 0.000000 0.000000     9:
        0 0.000000 0.000000    10:
        0 0.000000 0.000000    11:
        0 0.000000 0.000000    12:
        0 0.000000 0.000000    13:
        0 0.000000 0.000000    14:
        0 0.000000 0.000000    15:
        0 0.000000 0.000000    16:
        0 0.000000 0.000000    17:
        0 0.000000 0.000000    18:
        0 0.000000 0.000000    19:
        0 0.000000 0.000000    20:
        0 0.000000 0.000000    21:
        0 0.000000 0.000000    22:
        0 0.000000 0.000000    23:
        0 0.000000 0.000000    24:
        0 0.000000 0.000000    25:
        0 0.000000 0.000000    26:
        0 0.000000 0.000000    27:
        0 0.000000 0.000000    28:
        0 0.000000 0.000000    29:
        0 0.000000 0.000000    30:
        0 0.000000 0.000000    31:
        0 0.000000 0.000000    32:
        0 0.000000 0.000000    33:
        0 0.000000 0.000000    34:
        0 0.000000 0.000000    35:
        0 0.000000 0.000000    36:
        0 0.000000 0.000000    37:
        0 0.000000 0.000000    38:
        0 0.000000 0.000000    39:
        0 0.000000 0.000000    40:
        0 0.000000 0.000000    41:
        0 0.000000 0.000000    42:
        0 0.000000 0.000000    43:
        0 0.000000 0.000000    44:
        0 0.000000 0.000000    45:
        0 0.000000 0.000000    46:
        0 0.000000 0.000000    47:
        0 0.000000 0.000000    48:
        0 0.000000 0.000000    49:
        0 0.000000 0.000000    50:
        0 0.000000 0.000000    51:
        0 0.000000 0.000000    52:
        0 0.000000 0.000000    53:
        0 0.000000 0.000000    54:
        0 0.000000 0.000000    55:
        0 0.000000 0.000000    56:
            ================ SmallProf version 0.9 ================
                  Profile of /usr/lib/perl5/5.00503/strict.pm          Page 438
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000    57:
        0 0.000000 0.000000    58:
        0 0.000000 0.000000    59:
        0 0.000000 0.000000    60:
        0 0.000000 0.000000    61:
        0 0.000000 0.000000    62:
        0 0.000000 0.000000    63:
        0 0.000000 0.000000    64:
        0 0.000000 0.000000    65:
        0 0.000000 0.000000    66:
        0 0.000000 0.000000    67:
        0 0.000000 0.000000    68:
        0 0.000000 0.000000    69:
        0 0.000000 0.000000    70:
        0 0.000000 0.000000    71:
        0 0.000000 0.000000    72:
        0 0.000000 0.000000    73:
        0 0.000000 0.000000    74:
        0 0.000000 0.000000    75:
        0 0.000000 0.000000    76:
        0 0.000000 0.000000    77:
        0 0.000000 0.000000    78:
        0 0.000000 0.000000    79:
        0 0.000000 0.000000    80:$strict::VERSION = "1.01";
        0 0.000000 0.000000    81:
        0 0.000000 0.000000    82:my %bitmask = (
        0 0.000000 0.000000    83:refs => 0x00000002,
        0 0.000000 0.000000    84:subs => 0x00000200,
        0 0.000000 0.000000    85:vars => 0x00000400
        0 0.000000 0.000000    86:);
        0 0.000000 0.000000    87:
       69 0.000000 0.000000    88:sub bits {
       19 0.000092 0.000000    89:    my $bits = 0;
      133 0.000573 0.000000    90:    foreach my $s (@_){ $bits |= $bitmask{$s}
       19 0.006134 0.010000    91:    $bits;
        0 0.000000 0.000000    92:}
        0 0.000000 0.000000    93:
       59 0.000000 0.000000    94:sub import {
       19 0.000085 0.000000    95:    shift;
       19 0.001476 0.000000    96:    $^H |= bits(@_ ? @_ : qw(refs subs
        0 0.000000 0.000000    97:}
        0 0.000000 0.000000    98:
       10 0.000000 0.000000    99:sub unimport {
        0 0.000000 0.000000   100:    shift;
        0 0.000000 0.000000   101:    $^H &= ~ bits(@_ ? @_ : qw(refs subs
        0 0.000000 0.000000   102:}
        0 0.000000 0.000000   103:
        0 0.000000 0.000000   104:1;
            ================ SmallProf version 0.9 ================
                   Profile of /usr/lib/perl5/5.00503/vars.pm           Page 439
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000     1:package vars;
        0 0.000000 0.000000     2:
        0 0.000000 0.000000     3:require 5.002;
        0 0.000000 0.000000     4:
        0 0.000000 0.000000     5:# The following require can't be removed
        0 0.000000 0.000000     6:# releases, sadly, because of the risk of
        0 0.000000 0.000000     7:# require Carp; Carp::croak "..."; without
        0 0.000000 0.000000     8:# if Carp hasn't been loaded in earlier
        0 0.000000 0.000000     9:# We'll let those bugs get found on the
        0 0.000000 0.000000    10:require Carp if $] < 5.00450;
        0 0.000000 0.000000    11:
       55 0.000000 0.000000    12:sub import {
       19 0.000125 0.000000    13:    my $callpack = caller;
       19 0.000261 0.000000    14:    my ($pack, @imports, $sym, $ch) = @_;
       57 0.015778 0.020000    15:    foreach $sym (@imports) {
       38 0.000520 0.000000    16:        ($ch, $sym) = unpack('a1a*', $sym);
       38 0.000175 0.000000    17: if ($sym =~ tr/A-Za-Z_0-9//c) {
        0 0.000000 0.000000    18:     # time for a more-detailed check-up
        0 0.000000 0.000000    19:     if ($sym =~ /::/) {
        0 0.000000 0.000000    20:  require Carp;
        0 0.000000 0.000000    21:  Carp::croak("Can't declare another
        0 0.000000 0.000000    22:     } elsif ($sym =~ /^\w+[[{].*[]}]$/) {
        0 0.000000 0.000000    23:  require Carp;
        0 0.000000 0.000000    24:  Carp::croak("Can't declare individual
        0 0.000000 0.000000    25:     } elsif ($^W and length($sym) == 1 and
        0 0.000000 0.000000    26:  require Carp;
        0 0.000000 0.000000    27:  Carp::carp("No need to declare built-in
        0 0.000000 0.000000    28:     }
        0 0.000000 0.000000    29: }
       57 0.000922 0.000000    30:        *{"${callpack}::$sym"} =
       19 0.000329 0.000000    31:          (  $ch eq "\$" ? \$
        0 0.000000 0.000000    32:           : $ch eq "\@" ? \@
        0 0.000000 0.000000    33:           : $ch eq "\%" ? \%
        0 0.000000 0.000000    34:           : $ch eq "\*" ? \*
        0 0.000000 0.000000    35:           : $ch eq "\&" ? \&
       38 0.000190 0.000000    36:           : do {
        0 0.000000 0.000000    37:  require Carp;
        0 0.000000 0.000000    38:  Carp::croak("'$ch$sym' is not a valid
        0 0.000000 0.000000    39:      });
        0 0.000000 0.000000    40:    }
        0 0.000000 0.000000    41:};
        0 0.000000 0.000000    42:
        0 0.000000 0.000000    43:1;
        0 0.000000 0.000000    44:__END__
            ================ SmallProf version 0.9 ================
           Profile of /usr/lib/perl5/site_perl/5.005/Mail/Address.pm   Page 440
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000     1:# Mail::Address.pm
        0 0.000000 0.000000     2:#
        0 0.000000 0.000000     3:# Copyright (c) 1995-8 Graham Barr
        0 0.000000 0.000000     4:# This program is free software; you can
        0 0.000000 0.000000     5:# modify it under the same terms as Perl
        0 0.000000 0.000000     6:
        0 0.000000 0.000000     7:package Mail::Address;
        0 0.000000 0.000000     8:use strict;
        0 0.000000 0.000000     9:
        0 0.000000 0.000000    10:use Carp;
        0 0.000000 0.000000    11:use vars qw($VERSION);
        0 0.000000 0.000000    12:use locale;
        0 0.000000 0.000000    13:
        0 0.000000 0.000000    14:$VERSION = "1.17";
        0 0.000000 0.000000    15:sub Version { $VERSION }
        0 0.000000 0.000000    16:
        0 0.000000 0.000000    17:#
        0 0.000000 0.000000    18:# given a comment, attempt to extract a
        0 0.000000 0.000000    19:#
        0 0.000000 0.000000    20:
        0 0.000000 0.000000    21:sub _extract_name
        0 0.000000 0.000000    22:{
        0 0.000000 0.000000    23:    local $_ = shift || '';
        0 0.000000 0.000000    24:
        0 0.000000 0.000000    25:    # trim whitespace
        0 0.000000 0.000000    26:    s/^\s+//;
        0 0.000000 0.000000    27:    s/\s+$//;
        0 0.000000 0.000000    28:    s/\s+/ /;
        0 0.000000 0.000000    29:
        0 0.000000 0.000000    30:    # Disregard numeric names (e.g.
        0 0.000000 0.000000    31:    return "" if /^[\d ]+$/;
        0 0.000000 0.000000    32:
        0 0.000000 0.000000    33:    # remove outermost parenthesis
        0 0.000000 0.000000    34:    s/^\(|\)$//g;
        0 0.000000 0.000000    35:
        0 0.000000 0.000000    36:    # remove outer quotation marks
        0 0.000000 0.000000    37:    s/^"|"$//g;
        0 0.000000 0.000000    38:
        0 0.000000 0.000000    39:    # remove embedded comments
        0 0.000000 0.000000    40:    s/\(.*\)//g;
        0 0.000000 0.000000    41:
        0 0.000000 0.000000    42:    # reverse "Last, First M." if applicable
        0 0.000000 0.000000    43:    s/^([^\s]+) ?, ?(.*)$/$2 $1/;
        0 0.000000 0.000000    44:    s/,.*//;
        0 0.000000 0.000000    45:
        0 0.000000 0.000000    46:    # Set the case of the name to first char
        0 0.000000 0.000000    47:    # Upcase first letter on name
        0 0.000000 0.000000    48:    s/\b(\w+)/\L\u$1/igo;
        0 0.000000 0.000000    49:
        0 0.000000 0.000000    50:    # Scottish names such as 'McLeod'
        0 0.000000 0.000000    51:    s/\bMc(\w)/Mc\u$1/igo;
        0 0.000000 0.000000    52:
        0 0.000000 0.000000    53:    # Irish names such as 'O'Malley,
        0 0.000000 0.000000    54:    s/\bo'(\w)/O'\u$1/igo;
        0 0.000000 0.000000    55:
        0 0.000000 0.000000    56:    # Roman numerals, eg 'Level III Support'
            ================ SmallProf version 0.9 ================
           Profile of /usr/lib/perl5/site_perl/5.005/Mail/Address.pm   Page 441
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000    57:    s/\b(x*(ix)?v*(iv)?i*)\b/\U$1/igo;
        0 0.000000 0.000000    58:
        0 0.000000 0.000000    59:    # some cleanup
        0 0.000000 0.000000    60:    s/\[[^\]]*\]//g;
        0 0.000000 0.000000    61:    s/(^[\s'"]+|[\s'"]+$)//g;
        0 0.000000 0.000000    62:    s/\s{2,}/ /g;
        0 0.000000 0.000000    63:
        0 0.000000 0.000000    64:    return $_;
        0 0.000000 0.000000    65:}
        0 0.000000 0.000000    66:
       10 0.000000 0.000000    67:sub _tokenise {
       10 0.000098 0.000000    68: local($_) = join(',', @_);
       10 0.000206 0.000000    69: my(@words,$snippet,$field);
        0 0.000000 0.000000    70:
       10 0.000134 0.010000    71: s/\A\s+//;
       10 0.000068 0.000000    72: s/[\r\n]+/ /g;
        0 0.000000 0.000000    73:
       10 0.000055 0.000000    74: while ($_ ne '')
        0 0.000000 0.000000    75:  {
       65 0.000156 0.000000    76:   $field = '';
       65 0.000208 0.000000    77:   if( s/^\s*\(/(/ )    # (...)
        0 0.000000 0.000000    78:    {
        1 0.000002 0.000000    79:     my $depth = 0;
        0 0.000000 0.000000    80:
        1 0.000035 0.000000    81:     PAREN: while(s/^(\(([^\(\)\\]|\\.)*)//)
        0 0.000000 0.000000    82:      {
        1 0.000012 0.000000    83:       $field .= $1;
        1 0.000004 0.000000    84:       $depth++;
        1 0.000014 0.000000    85:       while(s/^(([^\(\)\\]|\\.)*\)\s*)//)
        0 0.000000 0.000000    86:        {
        1 0.000008 0.000000    87:         $field .= $1;
        1 0.000010 0.000000    88:         last PAREN unless --$depth;
        0 0.000000 0.000000    89:  $field .= $1 if s/^(([^\(\)\\]|\\.)+)//;
        0 0.000000 0.000000    90:        }
        0 0.000000 0.000000    91:      }
        0 0.000000 0.000000    92:
        1 0.000003 0.000000    93:     carp "Unmatched () '$field' '$_'"
        0 0.000000 0.000000    94:        if $depth;
        0 0.000000 0.000000    95:
        1 0.000009 0.000000    96:     $field =~ s/\s+\Z//;
        1 0.000005 0.000000    97:     push(@words, $field);
        0 0.000000 0.000000    98:
        1 0.000005 0.000000    99:     next;
        0 0.000000 0.000000   100:    }
        0 0.000000 0.000000   101:
        0 0.000000 0.000000   102:      s/^("([^"\\]|\\.)*")\s*//       # "..."
        0 0.000000 0.000000   103:   || s/^(\[([^\]\\]|\\.)*\])\s*//    # [...]
        0 0.000000 0.000000   104:   || s/^([^\s\Q()<>\@,;:\\".[]\E]+)\s*//
        0 0.000000 0.000000   105:   || s/^([\Q()<>\@,;:\\".[]\E])\s*//
      192 0.001720 0.010000   106:     and do { push(@words, $1); next; };
        0 0.000000 0.000000   107:
        0 0.000000 0.000000   108:   croak "Unrecognised line: $_";
        0 0.000000 0.000000   109:  }
        0 0.000000 0.000000   110:
       10 0.000055 0.000000   111: push(@words, ",");
        0 0.000000 0.000000   112:
            ================ SmallProf version 0.9 ================
           Profile of /usr/lib/perl5/site_perl/5.005/Mail/Address.pm   Page 442
       =================================================================
    count wall tm  cpu time line
       10 0.000153 0.000000   113: \@words;
        0 0.000000 0.000000   114:}
        0 0.000000 0.000000   115:
       23 0.000000 0.000000   116:sub _find_next {
       23 0.000126 0.000000   117: my $idx = shift;
       23 0.000078 0.000000   118: my $tokens = shift;
       23 0.000078 0.000000   119: my $len = shift;
       66 0.000174 0.000000   120: while($idx < $len) {
       56 0.000234 0.000000   121:   my $c = $tokens->[$idx];
       56 0.000321 0.000000   122:   return $c if($c eq "," || $c eq "<");
       43 0.000080 0.000000   123:   $idx++;
        0 0.000000 0.000000   124: }
       10 0.000102 0.000000   125: return "";
        0 0.000000 0.000000   126:}
        0 0.000000 0.000000   127:
       13 0.000000 0.000000   128:sub _complete {
       13 0.000069 0.000000   129: my $pkg = shift;
       13 0.000056 0.000000   130: my $phrase = shift;
       13 0.000046 0.000000   131: my $address = shift;
       13 0.000043 0.000000   132: my $comment = shift;
       13 0.000035 0.000000   133: my $o = undef;
        0 0.000000 0.000000   134:
       45 0.000146 0.000000   135: if(@{$phrase} || @{$comment} || @{$address})
       20 0.000152 0.000000   136:  $o = $pkg->new(join(" ",@{$phrase}),
       10 0.000822 0.000000   137:                 join("", @{$address}),
       10 0.000032 0.000000   138:                 join(" ",@{$comment}));
       20 0.000092 0.000000   139:  @{$phrase} = ();
       20 0.000121 0.000000   140:  @{$address} = ();
       20 0.000090 0.000000   141:  @{$comment} = ();
        0 0.000000 0.000000   142: }
        0 0.000000 0.000000   143:
       13 0.000112 0.000000   144: return $o;
        0 0.000000 0.000000   145:}
        0 0.000000 0.000000   146:
        0 0.000000 0.000000   147:
       10 0.000000 0.000000   148:sub new {
       10 0.000049 0.000000   149: my $pkg = shift;
       10 0.000182 0.000000   150: my $me = bless [@_], $pkg;
       10 0.000096 0.000000   151: return $me;
        0 0.000000 0.000000   152:}
        0 0.000000 0.000000   153:
        0 0.000000 0.000000   154:
       10 0.000000 0.000000   155:sub parse {
       10 0.000056 0.000000   156: my $pkg = shift;
        0 0.000000 0.000000   157:
       10 0.000035 0.000000   158: local $_;
        0 0.000000 0.000000   159:
       10 0.000051 0.000000   160: my @phrase  = ();
       10 0.000044 0.000000   161: my @comment = ();
       10 0.000038 0.000000   162: my @address = ();
       10 0.000041 0.000000   163: my @objs    = ();
       10 0.000033 0.000000   164: my $depth   = 0;
       10 0.000028 0.000000   165: my $idx = 0;
       20 0.000797 0.000000   166: my $tokens = _tokenise(grep { defined $_}
       20 0.000070 0.000000   167: my $len = scalar(@{$tokens});
       10 0.000804 0.000000   168: my $next = _find_next($idx,$tokens,$len);
            ================ SmallProf version 0.9 ================
           Profile of /usr/lib/perl5/site_perl/5.005/Mail/Address.pm   Page 443
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   169:
       85 0.000196 0.000000   170: for( ; $idx < $len ; $idx++) {
       75 0.000329 0.000000   171:  $_ = $tokens->[$idx];
        0 0.000000 0.000000   172:
       75 0.000267 0.000000   173:  if(substr($_,0,1) eq "(") {
        1 0.000008 0.000000   174:   push(@comment,$_);
        0 0.000000 0.000000   175:  }
       74 0.000146 0.000000   176:  elsif($_ eq '<') {
        3 0.000009 0.000000   177:   $depth++;
        0 0.000000 0.000000   178:  }
       71 0.000138 0.000000   179:  elsif($_ eq '>') {
        3 0.000010 0.000000   180:   $depth-- if($depth);
        3 0.000009 0.000000   181:   unless($depth) {
        3 0.000261 0.000000   182:    my $o = _complete($pkg,\@phrase,
        3 0.000025 0.000000   183:    push(@objs, $o) if(defined $o);
        3 0.000007 0.000000   184:    $depth = 0;
        3 0.000238 0.000000   185:    $next = _find_next($idx,$tokens,$len);
        0 0.000000 0.000000   186:   }
        0 0.000000 0.000000   187:  }
       68 0.000173 0.010000   188:  elsif($_ eq ',') {
       10 0.000019 0.000000   189:   warn "Unmatched '<>'" if($depth);
       10 0.000810 0.000000   190:   my $o = _complete($pkg,\@phrase,
       10 0.000045 0.000000   191:   push(@objs, $o) if(defined $o);
       10 0.000023 0.000000   192:   $depth = 0;
       10 0.000715 0.000000   193:   $next = _find_next($idx+1,$tokens,$len);
        0 0.000000 0.000000   194:  }
       58 0.000104 0.000000   195:  elsif($depth) {
       19 0.000167 0.000000   196:   push(@address,$_);
        0 0.000000 0.000000   197:  }
       39 0.000077 0.000000   198:  elsif($next eq "<") {
        4 0.000038 0.000000   199:   push(@phrase,$_);
        0 0.000000 0.000000   200:  }
       35 0.000299 0.000000   201:  elsif($_ =~ /\A[\Q.\@:;\E]\Z/ ||
       35 0.000240 0.000000   202:   push(@address,$_);
        0 0.000000 0.000000   203:  }
        0 0.000000 0.000000   204:  else {
        0 0.000000 0.000000   205:   warn "Unmatched '<>'" if($depth);
        0 0.000000 0.000000   206:   my $o = _complete($pkg,\@phrase,
        0 0.000000 0.000000   207:   push(@objs, $o) if(defined $o);
        0 0.000000 0.000000   208:   $depth = 0;
        0 0.000000 0.000000   209:   push(@address,$_);
        0 0.000000 0.000000   210:  }
        0 0.000000 0.000000   211: }
       10 0.000244 0.000000   212: @objs;
        0 0.000000 0.000000   213:}
        0 0.000000 0.000000   214:
       10 0.000000 0.000000   215:sub set_or_get {
       10 0.000044 0.000000   216: my $me = shift;
       10 0.000034 0.000000   217: my $i = shift;
       10 0.000046 0.000000   218: my $val = $me->[$i];
        0 0.000000 0.000000   219:
       10 0.000048 0.010000   220: $me->[$i] = shift if(@_);
        0 0.000000 0.000000   221:
       10 0.000123 0.000000   222: $val;
        0 0.000000 0.000000   223:}
        0 0.000000 0.000000   224:
            ================ SmallProf version 0.9 ================
           Profile of /usr/lib/perl5/site_perl/5.005/Mail/Address.pm   Page 444
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   225:
        0 0.000000 0.000000   226:sub phrase  { set_or_get(shift,0,@_) }
       20 0.000693 0.000000   227:sub address { set_or_get(shift,1,@_) }
        0 0.000000 0.000000   228:sub comment { set_or_get(shift,2,@_) }
        0 0.000000 0.000000   229:
        0 0.000000 0.000000   230:
        0 0.000000 0.000000   231:sub format {
        0 0.000000 0.000000   232: my @fmts = ();
        0 0.000000 0.000000   233: my $me;
        0 0.000000 0.000000   234:
        0 0.000000 0.000000   235: foreach $me (@_) {
        0 0.000000 0.000000   236:   my($phrase,$addr,$comment) = @{$me};
        0 0.000000 0.000000   237:   my @tmp = ();
        0 0.000000 0.000000   238:
        0 0.000000 0.000000   239:   if(defined $phrase && length($phrase)) {
        0 0.000000 0.000000   240:    push(@tmp, $phrase);
        0 0.000000 0.000000   241:    push(@tmp, "<" . $addr . ">") if(defined
        0 0.000000 0.000000   242:   }
        0 0.000000 0.000000   243:   else {
        0 0.000000 0.000000   244:    push(@tmp, $addr) if(defined $addr &&
        0 0.000000 0.000000   245:   }
        0 0.000000 0.000000   246:   if(defined($comment) && $comment =~ /\S/)
        0 0.000000 0.000000   247:    $comment =~ s/^\s*\(?/(/;
        0 0.000000 0.000000   248:    $comment =~ s/\)?\s*$/)/;
        0 0.000000 0.000000   249:   }
        0 0.000000 0.000000   250:   push(@tmp, $comment) if(defined $comment
        0 0.000000 0.000000   251:   push(@fmts, join(" ", @tmp))
        0 0.000000 0.000000   252: }
        0 0.000000 0.000000   253:
        0 0.000000 0.000000   254: return join(", ", @fmts);
        0 0.000000 0.000000   255:}
        0 0.000000 0.000000   256:
        0 0.000000 0.000000   257:
        0 0.000000 0.000000   258:sub name
        0 0.000000 0.000000   259:{
        0 0.000000 0.000000   260:    my $me = shift;
        0 0.000000 0.000000   261:    my $phrase = $me->phrase;
        0 0.000000 0.000000   262:    my $addr = $me->address;
        0 0.000000 0.000000   263:
        0 0.000000 0.000000   264:    $phrase = $me->comment
        0 0.000000 0.000000   265:
        0 0.000000 0.000000   266:    my $name = _extract_name($phrase);
        0 0.000000 0.000000   267:
        0 0.000000 0.000000   268:    # first.last@domain address
        0 0.000000 0.000000   269:    if($name eq '' && $addr =~
        0 0.000000 0.000000   270:    {
        0 0.000000 0.000000   271: ($name = $1) =~ s/[\._]+/ /go;
        0 0.000000 0.000000   272: $name = _extract_name($name);
        0 0.000000 0.000000   273:    }
        0 0.000000 0.000000   274:
        0 0.000000 0.000000   275:    if($name eq '' && $addr =~ m#/g=#oi)
        0 0.000000 0.000000   276:    # X400 style address
        0 0.000000 0.000000   277:    {
        0 0.000000 0.000000   278: my ($f) = $addr =~ m#g=([^/]*)#oi;
        0 0.000000 0.000000   279: my ($l) = $addr =~ m#s=([^/]*)#io;
        0 0.000000 0.000000   280:
            ================ SmallProf version 0.9 ================
           Profile of /usr/lib/perl5/site_perl/5.005/Mail/Address.pm   Page 445
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   281: $name = _extract_name($f . " " . $l);
        0 0.000000 0.000000   282:    }
        0 0.000000 0.000000   283:
        0 0.000000 0.000000   284:       return length($name) ? $name : undef;
        0 0.000000 0.000000   285:}
        0 0.000000 0.000000   286:
        0 0.000000 0.000000   287:
        0 0.000000 0.000000   288:sub host {
        0 0.000000 0.000000   289: my $me = shift;
        0 0.000000 0.000000   290: my $addr = $me->address;
        0 0.000000 0.000000   291: my $i = rindex($addr,'@');
        0 0.000000 0.000000   292:
        0 0.000000 0.000000   293: my $host = ($i >= 0) ? substr($addr,$i+1) :
        0 0.000000 0.000000   294:
        0 0.000000 0.000000   295: return $host;
        0 0.000000 0.000000   296:}
        0 0.000000 0.000000   297:
        0 0.000000 0.000000   298:
        0 0.000000 0.000000   299:sub user {
        0 0.000000 0.000000   300: my $me = shift;
        0 0.000000 0.000000   301: my $addr = $me->address;
        0 0.000000 0.000000   302: my $i = index($addr,'@');
        0 0.000000 0.000000   303:
        0 0.000000 0.000000   304: my $user = ($i >= 0) ? substr($addr,0,$i) :
        0 0.000000 0.000000   305:
        0 0.000000 0.000000   306: return $user;
        0 0.000000 0.000000   307:}
        0 0.000000 0.000000   308:
        0 0.000000 0.000000   309:
        0 0.000000 0.000000   310:sub path {
        0 0.000000 0.000000   311: return ();
        0 0.000000 0.000000   312:}
        0 0.000000 0.000000   313:
        0 0.000000 0.000000   314:
        0 0.000000 0.000000   315:sub canon {
        0 0.000000 0.000000   316: my $me = shift;
        0 0.000000 0.000000   317: return ($me->host, $me->user, $me->path);
        0 0.000000 0.000000   318:}
        0 0.000000 0.000000   319:
        0 0.000000 0.000000   320:1;
        0 0.000000 0.000000   321:
        0 0.000000 0.000000   322:
        0 0.000000 0.000000   323:__END__
            ================ SmallProf version 0.9 ================
           Profile of /usr/lib/perl5/site_perl/5.005/Mail/Mailer.pm    Page 446
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000     1:#
        0 0.000000 0.000000     2:
        0 0.000000 0.000000     3:package Mail::Mailer;
        0 0.000000 0.000000     4:
        0 0.000000 0.000000     5:=head1 NAME
        0 0.000000 0.000000     6:
        0 0.000000 0.000000     7:
        0 0.000000 0.000000     8:
        0 0.000000 0.000000     9:
        0 0.000000 0.000000    10:
        0 0.000000 0.000000    11:
        0 0.000000 0.000000    12:
        0 0.000000 0.000000    13:
        0 0.000000 0.000000    14:
        0 0.000000 0.000000    15:
        0 0.000000 0.000000    16:
        0 0.000000 0.000000    17:
        0 0.000000 0.000000    18:
        0 0.000000 0.000000    19:
        0 0.000000 0.000000    20:
        0 0.000000 0.000000    21:
        0 0.000000 0.000000    22:
        0 0.000000 0.000000    23:
        0 0.000000 0.000000    24:
        0 0.000000 0.000000    25:
        0 0.000000 0.000000    26:
        0 0.000000 0.000000    27:
        0 0.000000 0.000000    28:
        0 0.000000 0.000000    29:
        0 0.000000 0.000000    30:
        0 0.000000 0.000000    31:
        0 0.000000 0.000000    32:
        0 0.000000 0.000000    33:
        0 0.000000 0.000000    34:
        0 0.000000 0.000000    35:
        0 0.000000 0.000000    36:
        0 0.000000 0.000000    37:
        0 0.000000 0.000000    38:
        0 0.000000 0.000000    39:
        0 0.000000 0.000000    40:
        0 0.000000 0.000000    41:
        0 0.000000 0.000000    42:
        0 0.000000 0.000000    43:
        0 0.000000 0.000000    44:
        0 0.000000 0.000000    45:
        0 0.000000 0.000000    46:
        0 0.000000 0.000000    47:
        0 0.000000 0.000000    48:
        0 0.000000 0.000000    49:
        0 0.000000 0.000000    50:
        0 0.000000 0.000000    51:
        0 0.000000 0.000000    52:
        0 0.000000 0.000000    53:
        0 0.000000 0.000000    54:
        0 0.000000 0.000000    55:
        0 0.000000 0.000000    56:
            ================ SmallProf version 0.9 ================
           Profile of /usr/lib/perl5/site_perl/5.005/Mail/Mailer.pm    Page 447
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000    57:
        0 0.000000 0.000000    58:
        0 0.000000 0.000000    59:
        0 0.000000 0.000000    60:
        0 0.000000 0.000000    61:
        0 0.000000 0.000000    62:
        0 0.000000 0.000000    63:
        0 0.000000 0.000000    64:
        0 0.000000 0.000000    65:
        0 0.000000 0.000000    66:
        0 0.000000 0.000000    67:
        0 0.000000 0.000000    68:
        0 0.000000 0.000000    69:
        0 0.000000 0.000000    70:
        0 0.000000 0.000000    71:
        0 0.000000 0.000000    72:
        0 0.000000 0.000000    73:
        0 0.000000 0.000000    74:
        0 0.000000 0.000000    75:
        0 0.000000 0.000000    76:
        0 0.000000 0.000000    77:
        0 0.000000 0.000000    78:
        0 0.000000 0.000000    79:
        0 0.000000 0.000000    80:
        0 0.000000 0.000000    81:
        0 0.000000 0.000000    82:
        0 0.000000 0.000000    83:
        0 0.000000 0.000000    84:
        0 0.000000 0.000000    85:
        0 0.000000 0.000000    86:
        0 0.000000 0.000000    87:
        0 0.000000 0.000000    88:
        0 0.000000 0.000000    89:
        0 0.000000 0.000000    90:
        0 0.000000 0.000000    91:
        0 0.000000 0.000000    92:
        0 0.000000 0.000000    93:
        0 0.000000 0.000000    94:
        0 0.000000 0.000000    95:
        0 0.000000 0.000000    96:
        0 0.000000 0.000000    97:
        0 0.000000 0.000000    98:
        0 0.000000 0.000000    99:
        0 0.000000 0.000000   100:
        0 0.000000 0.000000   101:
        0 0.000000 0.000000   102:
        0 0.000000 0.000000   103:
        0 0.000000 0.000000   104:
        0 0.000000 0.000000   105:
        0 0.000000 0.000000   106:
        0 0.000000 0.000000   107:
        0 0.000000 0.000000   108:
        0 0.000000 0.000000   109:
        0 0.000000 0.000000   110:
        0 0.000000 0.000000   111:
        0 0.000000 0.000000   112:
            ================ SmallProf version 0.9 ================
           Profile of /usr/lib/perl5/site_perl/5.005/Mail/Mailer.pm    Page 448
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   113:
        0 0.000000 0.000000   114:
        0 0.000000 0.000000   115:
        0 0.000000 0.000000   116:
        0 0.000000 0.000000   117:
        0 0.000000 0.000000   118:use Carp;
        0 0.000000 0.000000   119:use IO::Handle;
        0 0.000000 0.000000   120:use vars qw(@ISA $VERSION $MailerBinary
        0 0.000000 0.000000   121:use Config;
        0 0.000000 0.000000   122:use strict;
        0 0.000000 0.000000   123:
        0 0.000000 0.000000   124:$VERSION = "1.21"; # $Id:
        0 0.000000 0.000000   125:
        0 0.000000 0.000000   126:sub Version { $VERSION }
        0 0.000000 0.000000   127:
        0 0.000000 0.000000   128:@ISA = qw(IO::Handle);
        0 0.000000 0.000000   129:
        0 0.000000 0.000000   130:# Suggested binaries for types?  Should this
        0 0.000000 0.000000   131:@Mailers = (
        0 0.000000 0.000000   132:
        0 0.000000 0.000000   133:    # Body on stdin with tilde escapes
        0 0.000000 0.000000   134:    'mail' =>  'mail',
        0 0.000000 0.000000   135:
        0 0.000000 0.000000   136:    # Headers-blank-Body all on stdin
        0 0.000000 0.000000   137:    'sendmail'  =>
        0 0.000000 0.000000   138:
        0 0.000000 0.000000   139:    'smtp' =>  undef,
        0 0.000000 0.000000   140:    'test' =>  'test'
        0 0.000000 0.000000   141:);
        0 0.000000 0.000000   142:
        0 0.000000 0.000000   143:# There are several flavours of mail, which
        0 0.000000 0.000000   144:
        0 0.000000 0.000000   145:{
        0 0.000000 0.000000   146:    my $cmd = is_exe('mailx;Mail;mail');
        0 0.000000 0.000000   147:    my $osname = $Config{'osname'};
        0 0.000000 0.000000   148:
        0 0.000000 0.000000   149:    if($osname =~ /(?:dgux)|(?:solaris)/io) {
        0 0.000000 0.000000   150: $cmd .= " -~";
        0 0.000000 0.000000   151:    }
        0 0.000000 0.000000   152:    elsif($osname =~
        0 0.000000 0.000000   153: $cmd .= " -I";
        0 0.000000 0.000000   154:    }
        0 0.000000 0.000000   155:    push @Mailers, 'mail', $cmd;
        0 0.000000 0.000000   156:}
        0 0.000000 0.000000   157:
        0 0.000000 0.000000   158:push(@Mailers, split(/:/,$ENV{PERL_MAILERS}))
        0 0.000000 0.000000   159:
        0 0.000000 0.000000   160:%Mailers = @Mailers;
        0 0.000000 0.000000   161:
        0 0.000000 0.000000   162:$MailerBinary = undef;
        0 0.000000 0.000000   163:
        0 0.000000 0.000000   164:# does this really need to be done? or should
        0 0.000000 0.000000   165:
        0 0.000000 0.000000   166:if($^O eq 'MacOS' || $^O eq 'VMS' || $^O eq
        0 0.000000 0.000000   167:    $MailerType = 'smtp';
        0 0.000000 0.000000   168:    $MailerBinary = $Mailers{$MailerType};
            ================ SmallProf version 0.9 ================
           Profile of /usr/lib/perl5/site_perl/5.005/Mail/Mailer.pm    Page 449
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   169:}
        0 0.000000 0.000000   170:else {
        0 0.000000 0.000000   171:    my $i;
        0 0.000000 0.000000   172:    for($i = 0 ; $i < @Mailers ; $i += 2) {
        0 0.000000 0.000000   173: $MailerType = $Mailers[$i];
        0 0.000000 0.000000   174: my $binary;
        0 0.000000 0.000000   175: if($binary = is_exe($Mailers{$MailerType}))
        0 0.000000 0.000000   176:     $MailerBinary = $binary;
        0 0.000000 0.000000   177:     last;
        0 0.000000 0.000000   178: }
        0 0.000000 0.000000   179:    }
        0 0.000000 0.000000   180:}
        0 0.000000 0.000000   181:
        0 0.000000 0.000000   182:sub import {
        0 0.000000 0.000000   183:    shift;
        0 0.000000 0.000000   184:
        0 0.000000 0.000000   185:    if(@_) {
        0 0.000000 0.000000   186: my $type = shift;
        0 0.000000 0.000000   187: my $exe = shift || $Mailers{$type};
        0 0.000000 0.000000   188:
        0 0.000000 0.000000   189:        carp "Cannot locate '$exe'"
        0 0.000000 0.000000   190:            unless is_exe($exe);
        0 0.000000 0.000000   191:
        0 0.000000 0.000000   192:        $MailerType = $type;
        0 0.000000 0.000000   193:        $Mailers{$MailerType} = $exe;
        0 0.000000 0.000000   194:    }
        0 0.000000 0.000000   195:}
        0 0.000000 0.000000   196:
        0 0.000000 0.000000   197:sub to_array {
        0 0.000000 0.000000   198:    my($self, $thing) = @_;
        0 0.000000 0.000000   199:    if (ref($thing)) {
        0 0.000000 0.000000   200: return @$thing;
        0 0.000000 0.000000   201:    } else {
        0 0.000000 0.000000   202: return ($thing);
        0 0.000000 0.000000   203:    }
        0 0.000000 0.000000   204:}
        0 0.000000 0.000000   205:
        2 0.000000 0.000000   206:sub is_exe {
        0 0.000000 0.000000   207:    my $exe = shift;
        0 0.000000 0.000000   208:    my $cmd;
        0 0.000000 0.000000   209:
        0 0.000000 0.000000   210:    foreach $cmd (split /;/, $exe) {
        0 0.000000 0.000000   211: $cmd =~ s/^\s+//;
        0 0.000000 0.000000   212:
        0 0.000000 0.000000   213: # remove any options
        0 0.000000 0.000000   214: my $name = ($cmd =~ /^(\S+)/)[0];
        0 0.000000 0.000000   215:
        0 0.000000 0.000000   216: # check for absolute or relative path
        0 0.000000 0.000000   217: return ($cmd)
        0 0.000000 0.000000   218:     if (-x $name and ! -d $name and $name =~
        0 0.000000 0.000000   219:
        0 0.000000 0.000000   220: if (defined $ENV{PATH}) {
        0 0.000000 0.000000   221:     my $dir;
        0 0.000000 0.000000   222:     foreach $dir (split(/:/, $ENV{PATH})) {
        0 0.000000 0.000000   223:  return "$dir/$cmd"
        0 0.000000 0.000000   224:      if (-x "$dir/$name" && ! -d
            ================ SmallProf version 0.9 ================
           Profile of /usr/lib/perl5/site_perl/5.005/Mail/Mailer.pm    Page 450
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   225:     }
        0 0.000000 0.000000   226: }
        0 0.000000 0.000000   227:    }
        0 0.000000 0.000000   228:    0;
        0 0.000000 0.000000   229:}
        0 0.000000 0.000000   230:
        0 0.000000 0.000000   231:sub new {
        0 0.000000 0.000000   232:    my($class, $type, @args) = @_;
        0 0.000000 0.000000   233:
        0 0.000000 0.000000   234:    $type = $MailerType unless $type;
        0 0.000000 0.000000   235:    croak "Mailer '$type' not known, please
        0 0.000000 0.000000   236: unless $type;
        0 0.000000 0.000000   237:
        0 0.000000 0.000000   238:    my $exe = $Mailers{$type};
        0 0.000000 0.000000   239:
        0 0.000000 0.000000   240:    if(defined($exe)) {
        0 0.000000 0.000000   241: $exe = is_exe ($exe) if defined $type;
        0 0.000000 0.000000   242:
        0 0.000000 0.000000   243: $exe  = $MailerBinary  unless $exe;
        0 0.000000 0.000000   244: croak "No mailer type specified (and no
        0 0.000000 0.000000   245:     unless $exe;
        0 0.000000 0.000000   246:    }
        0 0.000000 0.000000   247:
        0 0.000000 0.000000   248:    $class = "Mail::Mailer::$type";
        0 0.000000 0.000000   249:    eval "require $class" or die $@;
        0 0.000000 0.000000   250:    my $glob = $class->SUPER::new; #
        0 0.000000 0.000000   251:
        0 0.000000 0.000000   252:    %{*$glob} = (Exe  => $exe,
        0 0.000000 0.000000   253:   Args => [ @args ]
        0 0.000000 0.000000   254:  );
        0 0.000000 0.000000   255:
        0 0.000000 0.000000   256:    $glob; # bless $glob, $class;
        0 0.000000 0.000000   257:}
        0 0.000000 0.000000   258:
        0 0.000000 0.000000   259:
        0 0.000000 0.000000   260:sub open {
        0 0.000000 0.000000   261:    my($self, $hdrs) = @_;
        0 0.000000 0.000000   262:    my $exe = *$self->{Exe}; # || Carp::croak
        0 0.000000 0.000000   263:    my $args = *$self->{Args};
        0 0.000000 0.000000   264:    _cleanup_hdrs($hdrs);
        0 0.000000 0.000000   265:    my @to = $self->who_to($hdrs);
        0 0.000000 0.000000   266:
        0 0.000000 0.000000   267:    $self->close; # just in case;
        0 0.000000 0.000000   268:
        0 0.000000 0.000000   269:    # Fork and start a mailer
        0 0.000000 0.000000   270:    (defined($exe) && open($self,"|-"))
        0 0.000000 0.000000   271: || $self->exec($exe, $args, \@to)
        0 0.000000 0.000000   272: || die $!;
        0 0.000000 0.000000   273:
        0 0.000000 0.000000   274:    # Set the headers
        0 0.000000 0.000000   275:    $self->set_headers($hdrs);
        0 0.000000 0.000000   276:
        0 0.000000 0.000000   277:    # return self (a FileHandle) ready to
        0 0.000000 0.000000   278:    $self;
        0 0.000000 0.000000   279:}
        0 0.000000 0.000000   280:
            ================ SmallProf version 0.9 ================
           Profile of /usr/lib/perl5/site_perl/5.005/Mail/Mailer.pm    Page 451
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   281:
        0 0.000000 0.000000   282:sub _cleanup_hdrs {
        0 0.000000 0.000000   283:  my $hdrs = shift;
        0 0.000000 0.000000   284:  my $h;
        0 0.000000 0.000000   285:  foreach $h (values %$hdrs) {
        0 0.000000 0.000000   286:    foreach (ref($h) ? @{$h} : $h) {
        0 0.000000 0.000000   287:      s/\n//;
        0 0.000000 0.000000   288:    }
        0 0.000000 0.000000   289:  }
        0 0.000000 0.000000   290:}
        0 0.000000 0.000000   291:
        0 0.000000 0.000000   292:
        0 0.000000 0.000000   293:sub exec {
        0 0.000000 0.000000   294:    my($self, $exe, $args, $to) = @_;
        0 0.000000 0.000000   295:    # Fork and exec the mailer (no shell
        0 0.000000 0.000000   296:    my @exe = split(/\s+/,$exe);
        0 0.000000 0.000000   297:
        0 0.000000 0.000000   298:    exec(@exe, @$args, @$to);
        0 0.000000 0.000000   299:}
        0 0.000000 0.000000   300:
        0 0.000000 0.000000   301:sub can_cc { 1 } # overridden in subclass for
        0 0.000000 0.000000   302:
        0 0.000000 0.000000   303:sub who_to {
        0 0.000000 0.000000   304:    my($self, $hdrs) = @_;
        0 0.000000 0.000000   305:    my @to = $self->to_array($hdrs->{To});
        0 0.000000 0.000000   306:    if (!$self->can_cc) {  # Can't cc/bcc so
        0 0.000000 0.000000   307: push(@to, $self->to_array($hdrs->{Cc})) if
        0 0.000000 0.000000   308: push(@to, $self->to_array($hdrs->{Bcc})) if
        0 0.000000 0.000000   309:    }
        0 0.000000 0.000000   310:    @to;
        0 0.000000 0.000000   311:}
        0 0.000000 0.000000   312:
        0 0.000000 0.000000   313:sub epilogue {
        0 0.000000 0.000000   314:    # This could send a .signature, also see
        0 0.000000 0.000000   315:}
        0 0.000000 0.000000   316:
        0 0.000000 0.000000   317:sub close {
        0 0.000000 0.000000   318:    my($self, @to) = @_;
        0 0.000000 0.000000   319:    if (fileno($self)) {
        0 0.000000 0.000000   320: $self->epilogue;
        0 0.000000 0.000000   321: close($self)
        0 0.000000 0.000000   322:    }
        0 0.000000 0.000000   323:}
        0 0.000000 0.000000   324:
        0 0.000000 0.000000   325:
        0 0.000000 0.000000   326:sub DESTROY {
        0 0.000000 0.000000   327:    my $self = shift;
        0 0.000000 0.000000   328:    $self->close;
        0 0.000000 0.000000   329:}
        0 0.000000 0.000000   330:
        0 0.000000 0.000000   331:1;
        0 0.000000 0.000000   332:
            ================ SmallProf version 0.9 ================
         Profile of /usr/lib/perl5/site_perl/5.005/i686-linux/DBD/mysq Page 452
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000     1:#   Our beloved Emacs will give us -*- perl -
        0 0.000000 0.000000     2:#
        0 0.000000 0.000000     3:#   $Id: dbd.pm.in,v 1.6 1999/10/21 20:05:43
        0 0.000000 0.000000     4:#
        0 0.000000 0.000000     5:#   Copyright (c) 1994,1995,1996,1997
        0 0.000000 0.000000     6:#
        0 0.000000 0.000000     7:#   You may distribute under the terms of
        0 0.000000 0.000000     8:#   License or the Artistic License, as
        0 0.000000 0.000000     9:
        0 0.000000 0.000000    10:package DBD::mysql;
        0 0.000000 0.000000    11:use strict;
        0 0.000000 0.000000    12:use vars qw(@ISA $VERSION $err $errstr $drh);
        0 0.000000 0.000000    13:
        0 0.000000 0.000000    14:use DBI ();
        0 0.000000 0.000000    15:use DynaLoader();
        0 0.000000 0.000000    16:use Carp ();
        0 0.000000 0.000000    17:@ISA = qw(DynaLoader);
        0 0.000000 0.000000    18:
        0 0.000000 0.000000    19:$VERSION = '2.0415';
        0 0.000000 0.000000    20:
        0 0.000000 0.000000    21:bootstrap DBD::mysql $VERSION;
        0 0.000000 0.000000    22:
        0 0.000000 0.000000    23:
        0 0.000000 0.000000    24:$err = 0; # holds error code   for DBI::err
        0 0.000000 0.000000    25:$errstr = ""; # holds error string for
        0 0.000000 0.000000    26:$drh = undef; # holds driver handle once
        0 0.000000 0.000000    27:
        1 0.000000 0.000000    28:sub driver{
        1 0.000005 0.000000    29:    return $drh if $drh;
        1 0.000007 0.000000    30:    my($class, $attr) = @_;
        0 0.000000 0.000000    31:
        1 0.000007 0.000000    32:    $class .= "::dr";
        0 0.000000 0.000000    33:
        0 0.000000 0.000000    34:    # not a 'my' since we use it above to
        1 0.000102 0.000000    35:    $drh = DBI::_new_drh($class, { 'Name' =>
        0 0.000000 0.000000    36:       'Version' => $VERSION,
        0 0.000000 0.000000    37:       'Err'    => \$DBD::mysql::err,
        0 0.000000 0.000000    38:       'Errstr' => \$DBD::mysql::errstr,
        0 0.000000 0.000000    39:       'Attribution' => 'DBD::mysql by Jochen
        0 0.000000 0.000000    40:     });
        0 0.000000 0.000000    41:
        1 0.000013 0.000000    42:    $drh;
        0 0.000000 0.000000    43:}
        0 0.000000 0.000000    44:
        1 0.000000 0.000000    45:sub _OdbcParse($$$) {
        1 0.000010 0.000000    46:    my($class, $dsn, $hash, $args) = @_;
        1 0.000004 0.000000    47:    my($var, $val);
        1 0.000003 0.000000    48:    if (!defined($dsn)) {
        0 0.000000 0.000000    49: return;
        0 0.000000 0.000000    50:    }
        3 0.000020 0.000000    51:    while (length($dsn)) {
        2 0.000049 0.000000    52: if ($dsn =~ /([^:;]*)[:;](.*)/) {
        1 0.000009 0.000000    53:     $val = $1;
        1 0.000010 0.000000    54:     $dsn = $2;
        0 0.000000 0.000000    55: } else {
        1 0.000005 0.000000    56:     $val = $dsn;
            ================ SmallProf version 0.9 ================
         Profile of /usr/lib/perl5/site_perl/5.005/i686-linux/DBD/mysq Page 453
       =================================================================
    count wall tm  cpu time line
        1 0.000004 0.000000    57:     $dsn = '';
        0 0.000000 0.000000    58: }
        2 0.000021 0.000000    59: if ($val =~ /([^=]*)=(.*)/) {
        2 0.000018 0.000000    60:     $var = $1;
        2 0.000012 0.000000    61:     $val = $2;
        2 0.000009 0.000000    62:     if ($var eq 'hostname'  ||  $var eq
        1 0.000011 0.000000    63:  $hash->{'host'} = $val;
        1 0.000006 0.000000    64:     } elsif ($var eq 'db'  ||  $var eq
        0 0.000000 0.000000    65:  $hash->{'database'} = $val;
        0 0.000000 0.000000    66:     } else {
        1 0.000011 0.000000    67:  $hash->{$var} = $val;
        0 0.000000 0.000000    68:     }
        0 0.000000 0.000000    69: } else {
        0 0.000000 0.000000    70:     foreach $var (@$args) {
        0 0.000000 0.000000    71:  if (!defined($hash->{$var})) {
        0 0.000000 0.000000    72:      $hash->{$var} = $val;
        0 0.000000 0.000000    73:      last;
        0 0.000000 0.000000    74:  }
        0 0.000000 0.000000    75:     }
        0 0.000000 0.000000    76: }
        0 0.000000 0.000000    77:    }
        0 0.000000 0.000000    78:}
        0 0.000000 0.000000    79:
        0 0.000000 0.000000    80:sub _OdbcParseHost ($$) {
        0 0.000000 0.000000    81:    my($class, $dsn) = @_;
        0 0.000000 0.000000    82:    my($hash) = {};
        0 0.000000 0.000000    83:    $class->_OdbcParse($dsn, $hash, ['host',
        0 0.000000 0.000000    84:    ($hash->{'host'}, $hash->{'port'});
        0 0.000000 0.000000    85:}
        0 0.000000 0.000000    86:
        0 0.000000 0.000000    87:sub AUTOLOAD {
        0 0.000000 0.000000    88:    my ($meth) = $DBD::mysql::AUTOLOAD;
        0 0.000000 0.000000    89:    my ($smeth) = $meth;
        0 0.000000 0.000000    90:    $smeth =~ s/(.*)\:\://;
        0 0.000000 0.000000    91:
        0 0.000000 0.000000    92:    my $val = constant($smeth, @_ ? $_[0] :
        0 0.000000 0.000000    93:    if ($! == 0) { eval "sub $meth { $val }";
        0 0.000000 0.000000    94:
        0 0.000000 0.000000    95:    Carp::croak "$meth: Not defined";
        0 0.000000 0.000000    96:}
        0 0.000000 0.000000    97:
        0 0.000000 0.000000    98:1;
        0 0.000000 0.000000    99:
        0 0.000000 0.000000   100:
        0 0.000000 0.000000   101:package DBD::mysql::dr; # ====== DRIVER
        0 0.000000 0.000000   102:use strict;
        0 0.000000 0.000000   103:
        1 0.000000 0.000000   104:sub connect {
        1 0.000012 0.000000   105:    my($drh, $dsn, $username, $password,
        1 0.000002 0.000000   106:    my($port);
        1 0.000003 0.000000   107:    my($cWarn);
        0 0.000000 0.000000   108:
        0 0.000000 0.000000   109:    # Avoid warnings for undefined values
        1 0.000003 0.000000   110:    $username ||= '';
        1 0.000002 0.000000   111:    $password ||= '';
        0 0.000000 0.000000   112:
            ================ SmallProf version 0.9 ================
         Profile of /usr/lib/perl5/site_perl/5.005/i686-linux/DBD/mysq Page 454
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   113:    # create a 'blank' dbh
        1 0.000003 0.000000   114:    my($this, $privateAttrHash);
        1 0.000019 0.000000   115:    $privateAttrHash = {
        0 0.000000 0.000000   116: 'Name' => $dsn,
        0 0.000000 0.000000   117: 'user' => $username,
        0 0.000000 0.000000   118: 'password' => $password
        0 0.000000 0.000000   119:    };
        0 0.000000 0.000000   120:
        1 0.000087 0.000000   121:    DBD::mysql->_OdbcParse($dsn,
        0 0.000000 0.000000   122:        ['database', 'host', 'port']);
        0 0.000000 0.000000   123:
        1 0.000081 0.000000   124:    if (!defined($this = DBI::_new_dbh($drh,
        0 0.000000 0.000000   125:           $privateAttrHash))) {
        0 0.000000 0.000000   126: return undef;
        0 0.000000 0.000000   127:    }
        0 0.000000 0.000000   128:
        0 0.000000 0.000000   129:    # Call msqlConnect func in mSQL.xs file
        0 0.000000 0.000000   130:    # and populate internal handle data.
        1 0.010008 0.010000   131:    DBD::mysql::db::_login($this, $dsn,
        0 0.000000 0.000000   132:   or $this = undef;
        1 0.000043 0.000000   133:    $this;
        0 0.000000 0.000000   134:}
        0 0.000000 0.000000   135:
        0 0.000000 0.000000   136:sub data_sources {
        0 0.000000 0.000000   137:    my($self) = shift;
        0 0.000000 0.000000   138:    my(@dsn) = $self->func('', '_ListDBs');
        0 0.000000 0.000000   139:    my($i);
        0 0.000000 0.000000   140:    for ($i = 0;  $i < @dsn;  $i++) {
        0 0.000000 0.000000   141: $dsn[$i] = "DBI:mysql:$dsn[$i]";
        0 0.000000 0.000000   142:    }
        0 0.000000 0.000000   143:    @dsn;
        0 0.000000 0.000000   144:}
        0 0.000000 0.000000   145:
        0 0.000000 0.000000   146:sub admin {
        0 0.000000 0.000000   147:    my($drh) = shift;
        0 0.000000 0.000000   148:    my($command) = shift;
        0 0.000000 0.000000   149:    my($dbname) = ($command eq 'createdb'  ||
        0 0.000000 0.000000   150: shift : '';
        0 0.000000 0.000000   151:    my($host, $port) = DBD::mysql-
        0 0.000000 0.000000   152:    my($user) = shift || '';
        0 0.000000 0.000000   153:    my($password) = shift || '';
        0 0.000000 0.000000   154:
        0 0.000000 0.000000   155:    $drh->func(undef, $command,
        0 0.000000 0.000000   156:        $dbname || '',
        0 0.000000 0.000000   157:        $host || '',
        0 0.000000 0.000000   158:        $port || '',
        0 0.000000 0.000000   159:        $user, $password, '_admin_internal');
        0 0.000000 0.000000   160:}
        0 0.000000 0.000000   161:
        0 0.000000 0.000000   162:package DBD::mysql::db; # ====== DATABASE
        0 0.000000 0.000000   163:use strict;
        0 0.000000 0.000000   164:
        0 0.000000 0.000000   165:%DBD::mysql::db::db2ANSI = ("INT"   =>
        0 0.000000 0.000000   166:      "CHAR"  =>  "CHAR",
        0 0.000000 0.000000   167:      "REAL"  =>  "REAL",
        0 0.000000 0.000000   168:      "IDENT" =>  "DECIMAL"
            ================ SmallProf version 0.9 ================
         Profile of /usr/lib/perl5/site_perl/5.005/i686-linux/DBD/mysq Page 455
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   169:                          );
        0 0.000000 0.000000   170:
        0 0.000000 0.000000   171:### ANSI datatype mapping to mSQL datatypes
        0 0.000000 0.000000   172:%DBD::mysql::db::ANSI2db = ("CHAR"
        0 0.000000 0.000000   173:      "VARCHAR"       => "CHAR",
        0 0.000000 0.000000   174:      "LONGVARCHAR"   => "CHAR",
        0 0.000000 0.000000   175:      "NUMERIC"       => "INTEGER",
        0 0.000000 0.000000   176:      "DECIMAL"       => "INTEGER",
        0 0.000000 0.000000   177:      "BIT"           => "INTEGER",
        0 0.000000 0.000000   178:      "TINYINT"       => "INTEGER",
        0 0.000000 0.000000   179:      "SMALLINT"      => "INTEGER",
        0 0.000000 0.000000   180:      "INTEGER"       => "INTEGER",
        0 0.000000 0.000000   181:      "BIGINT"        => "INTEGER",
        0 0.000000 0.000000   182:      "REAL"          => "REAL",
        0 0.000000 0.000000   183:      "FLOAT"         => "REAL",
        0 0.000000 0.000000   184:      "DOUBLE"        => "REAL",
        0 0.000000 0.000000   185:      "BINARY"        => "CHAR",
        0 0.000000 0.000000   186:      "VARBINARY"     => "CHAR",
        0 0.000000 0.000000   187:      "LONGVARBINARY" => "CHAR",
        0 0.000000 0.000000   188:      "DATE"          => "CHAR",
        0 0.000000 0.000000   189:      "TIME"          => "CHAR",
        0 0.000000 0.000000   190:      "TIMESTAMP"     => "CHAR"
        0 0.000000 0.000000   191:     );
        0 0.000000 0.000000   192:
      157 0.000000 0.000000   193:sub prepare {
      157 0.001974 0.010000   194:    my($dbh, $statement, $attribs)= @_;
        0 0.000000 0.000000   195:
        0 0.000000 0.000000   196:    # create a 'blank' dbh
      157 0.014454 0.020000   197:    my $sth = DBI::_new_sth($dbh,
        0 0.000000 0.000000   198:
        0 0.000000 0.000000   199:    # Populate internal handle data.
      157 0.008289 0.000000   200:    if (!DBD::mysql::st::_prepare($sth,
        0 0.000000 0.000000   201: $sth = undef;
        0 0.000000 0.000000   202:    }
        0 0.000000 0.000000   203:
      157 0.002260 0.000000   204:    $sth;
        0 0.000000 0.000000   205:}
        0 0.000000 0.000000   206:
        0 0.000000 0.000000   207:sub db2ANSI {
        0 0.000000 0.000000   208:    my $self = shift;
        0 0.000000 0.000000   209:    my $type = shift;
        0 0.000000 0.000000   210:    return $DBD::mysql::db::db2ANSI{"$type"};
        0 0.000000 0.000000   211:}
        0 0.000000 0.000000   212:
        0 0.000000 0.000000   213:sub ANSI2db {
        0 0.000000 0.000000   214:    my $self = shift;
        0 0.000000 0.000000   215:    my $type = shift;
        0 0.000000 0.000000   216:    return $DBD::mysql::db::ANSI2db{"$type"};
        0 0.000000 0.000000   217:}
        0 0.000000 0.000000   218:
        0 0.000000 0.000000   219:sub admin {
        0 0.000000 0.000000   220:    my($dbh) = shift;
        0 0.000000 0.000000   221:    my($command) = shift;
        0 0.000000 0.000000   222:    my($dbname) = ($command eq 'createdb'  ||
        0 0.000000 0.000000   223: shift : '';
        0 0.000000 0.000000   224:    $dbh->{'Driver'}->func($dbh, $command,
            ================ SmallProf version 0.9 ================
         Profile of /usr/lib/perl5/site_perl/5.005/i686-linux/DBD/mysq Page 456
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   225:      '_admin_internal');
        0 0.000000 0.000000   226:}
        0 0.000000 0.000000   227:
        0 0.000000 0.000000   228:sub _SelectDB ($$) {
        0 0.000000 0.000000   229:    die "_SelectDB is removed from this
        0 0.000000 0.000000   230:}
        0 0.000000 0.000000   231:
        0 0.000000 0.000000   232:{
        0 0.000000 0.000000   233:    my $names = ['TABLE_CAT', 'TABLE_SCHEM',
        0 0.000000 0.000000   234:   'TABLE_TYPE', 'REMARKS'];
        0 0.000000 0.000000   235:
        0 0.000000 0.000000   236:    sub table_info ($) {
        0 0.000000 0.000000   237: my $dbh = shift;
        0 0.000000 0.000000   238: my @tables = map { [ undef, undef, $_,
        0 0.000000 0.000000   239:    } $dbh->func('_ListTables');
        0 0.000000 0.000000   240: my $dbh2;
        0 0.000000 0.000000   241: if (!($dbh2 = $dbh-
        0 0.000000 0.000000   242:     $dbh2 = $dbh-
        0 0.000000 0.000000   243:  DBI->connect("DBI:Sponge:");
        0 0.000000 0.000000   244:     if (!$dbh2) {
        0 0.000000 0.000000   245:         DBI::set_err($dbh, 1, $DBI::errstr);
        0 0.000000 0.000000   246:  return undef;
        0 0.000000 0.000000   247:     }
        0 0.000000 0.000000   248: }
        0 0.000000 0.000000   249: my $sth = $dbh2->prepare("LISTTABLES", {
        0 0.000000 0.000000   250:       'NAME' => $names });
        0 0.000000 0.000000   251: if (!$sth) {
        0 0.000000 0.000000   252:     DBI::set_err($sth, $dbh2->err(), $dbh2-
        0 0.000000 0.000000   253: }
        0 0.000000 0.000000   254: $sth;
        0 0.000000 0.000000   255:    }
        0 0.000000 0.000000   256:}
        0 0.000000 0.000000   257:
        0 0.000000 0.000000   258:package DBD::mysql::st; # ====== STATEMENT
        0 0.000000 0.000000   259:use strict;
        0 0.000000 0.000000   260:
        0 0.000000 0.000000   261:1;
        0 0.000000 0.000000   262:
        0 0.000000 0.000000   263:
        0 0.000000 0.000000   264:__END__
            ================ SmallProf version 0.9 ================
          Profile of /usr/lib/perl5/site_perl/5.005/i686-linux/DBI.pm  Page 457
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000     1:# $Id: DBI.pm,v 10.32 2000/06/14 20:04:03
        0 0.000000 0.000000     2:#
        0 0.000000 0.000000     3:# Copyright (c) 1994-2000  Tim Bunce  England
        0 0.000000 0.000000     4:#
        0 0.000000 0.000000     5:# See COPYRIGHT section in pod text below for
        0 0.000000 0.000000     6:#
        0 0.000000 0.000000     7:
        0 0.000000 0.000000     8:require 5.004;
        0 0.000000 0.000000     9:
        0 0.000000 0.000000    10:BEGIN {
        0 0.000000 0.000000    11:$DBI::VERSION = "1.14"; # ==> ALSO update the
        0 0.000000 0.000000    12:}
        0 0.000000 0.000000    13:
        0 0.000000 0.000000    14:=head1 NAME
        0 0.000000 0.000000    15:
        0 0.000000 0.000000    16:
        0 0.000000 0.000000    17:
        0 0.000000 0.000000    18:
        0 0.000000 0.000000    19:
        0 0.000000 0.000000    20:
        0 0.000000 0.000000    21:
        0 0.000000 0.000000    22:
        0 0.000000 0.000000    23:
        0 0.000000 0.000000    24:
        0 0.000000 0.000000    25:
        0 0.000000 0.000000    26:
        0 0.000000 0.000000    27:
        0 0.000000 0.000000    28:
        0 0.000000 0.000000    29:
        0 0.000000 0.000000    30:
        0 0.000000 0.000000    31:
        0 0.000000 0.000000    32:
        0 0.000000 0.000000    33:
        0 0.000000 0.000000    34:
        0 0.000000 0.000000    35:
        0 0.000000 0.000000    36:
        0 0.000000 0.000000    37:
        0 0.000000 0.000000    38:
        0 0.000000 0.000000    39:
        0 0.000000 0.000000    40:
        0 0.000000 0.000000    41:
        0 0.000000 0.000000    42:
        0 0.000000 0.000000    43:
        0 0.000000 0.000000    44:
        0 0.000000 0.000000    45:
        0 0.000000 0.000000    46:
        0 0.000000 0.000000    47:
        0 0.000000 0.000000    48:
        0 0.000000 0.000000    49:
        0 0.000000 0.000000    50:
        0 0.000000 0.000000    51:
        0 0.000000 0.000000    52:
        0 0.000000 0.000000    53:
        0 0.000000 0.000000    54:
        0 0.000000 0.000000    55:
        0 0.000000 0.000000    56:
            ================ SmallProf version 0.9 ================
          Profile of /usr/lib/perl5/site_perl/5.005/i686-linux/DBI.pm  Page 458
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000    57:
        0 0.000000 0.000000    58:
        0 0.000000 0.000000    59:
        0 0.000000 0.000000    60:
        0 0.000000 0.000000    61:
        0 0.000000 0.000000    62:
        0 0.000000 0.000000    63:
        0 0.000000 0.000000    64:
        0 0.000000 0.000000    65:
        0 0.000000 0.000000    66:
        0 0.000000 0.000000    67:
        0 0.000000 0.000000    68:
        0 0.000000 0.000000    69:
        0 0.000000 0.000000    70:
        0 0.000000 0.000000    71:
        0 0.000000 0.000000    72:
        0 0.000000 0.000000    73:
        0 0.000000 0.000000    74:
        0 0.000000 0.000000    75:
        0 0.000000 0.000000    76:
        0 0.000000 0.000000    77:
        0 0.000000 0.000000    78:
        0 0.000000 0.000000    79:
        0 0.000000 0.000000    80:
        0 0.000000 0.000000    81:
        0 0.000000 0.000000    82:
        0 0.000000 0.000000    83:
        0 0.000000 0.000000    84:
        0 0.000000 0.000000    85:
        0 0.000000 0.000000    86:
        0 0.000000 0.000000    87:
        0 0.000000 0.000000    88:
        0 0.000000 0.000000    89:
        0 0.000000 0.000000    90:
        0 0.000000 0.000000    91:
        0 0.000000 0.000000    92:
        0 0.000000 0.000000    93:
        0 0.000000 0.000000    94:
        0 0.000000 0.000000    95:
        0 0.000000 0.000000    96:
        0 0.000000 0.000000    97:
        0 0.000000 0.000000    98:
        0 0.000000 0.000000    99:
        0 0.000000 0.000000   100:
        0 0.000000 0.000000   101:
        0 0.000000 0.000000   102:
        0 0.000000 0.000000   103:
        0 0.000000 0.000000   104:
        0 0.000000 0.000000   105:
        0 0.000000 0.000000   106:
        0 0.000000 0.000000   107:
        0 0.000000 0.000000   108:
        0 0.000000 0.000000   109:
        0 0.000000 0.000000   110:
        0 0.000000 0.000000   111:
        0 0.000000 0.000000   112:
            ================ SmallProf version 0.9 ================
          Profile of /usr/lib/perl5/site_perl/5.005/i686-linux/DBI.pm  Page 459
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   113:
        0 0.000000 0.000000   114:
        0 0.000000 0.000000   115:
        0 0.000000 0.000000   116:
        0 0.000000 0.000000   117:
        0 0.000000 0.000000   118:
        0 0.000000 0.000000   119:
        0 0.000000 0.000000   120:
        0 0.000000 0.000000   121:
        0 0.000000 0.000000   122:
        0 0.000000 0.000000   123:
        0 0.000000 0.000000   124:
        0 0.000000 0.000000   125:
        0 0.000000 0.000000   126:
        0 0.000000 0.000000   127:
        0 0.000000 0.000000   128:
        0 0.000000 0.000000   129:
        0 0.000000 0.000000   130:
        0 0.000000 0.000000   131:
        0 0.000000 0.000000   132:
        0 0.000000 0.000000   133:
        0 0.000000 0.000000   134:
        0 0.000000 0.000000   135:
        0 0.000000 0.000000   136:# The POD text continues at the end of the
        0 0.000000 0.000000   137:
        0 0.000000 0.000000   138:# DBI file-private variables
        0 0.000000 0.000000   139:my %installed_rootclass;
        0 0.000000 0.000000   140:
        0 0.000000 0.000000   141:
        0 0.000000 0.000000   142:{
        0 0.000000 0.000000   143:package DBI;
        0 0.000000 0.000000   144:
        0 0.000000 0.000000   145:my $Revision = substr(q$Revision: 10.32 $,
        0 0.000000 0.000000   146:
        0 0.000000 0.000000   147:
        0 0.000000 0.000000   148:use Carp;
        0 0.000000 0.000000   149:use DynaLoader ();
        0 0.000000 0.000000   150:use Exporter ();
        0 0.000000 0.000000   151:
        0 0.000000 0.000000   152:BEGIN {
        0 0.000000 0.000000   153:@ISA = qw(Exporter DynaLoader);
        0 0.000000 0.000000   154:
        0 0.000000 0.000000   155:# Make some utility functions available if
        0 0.000000 0.000000   156:@EXPORT    = ();  # we export nothing by
        0 0.000000 0.000000   157:@EXPORT_OK = ('%DBI'); # populated by
        0 0.000000 0.000000   158:%EXPORT_TAGS = (
        0 0.000000 0.000000   159:   sql_types => [ qw(
        0 0.000000 0.000000   160:    SQL_ALL_TYPES
        0 0.000000 0.000000   161: SQL_CHAR SQL_NUMERIC SQL_DECIMAL SQL_INTEGER
        0 0.000000 0.000000   162: SQL_FLOAT SQL_REAL SQL_DOUBLE SQL_VARCHAR
        0 0.000000 0.000000   163: SQL_DATE SQL_TIME SQL_TIMESTAMP
        0 0.000000 0.000000   164: SQL_LONGVARCHAR SQL_BINARY SQL_VARBINARY
        0 0.000000 0.000000   165: SQL_BIGINT SQL_TINYINT
        0 0.000000 0.000000   166: SQL_WCHAR SQL_WVARCHAR SQL_WLONGVARCHAR
        0 0.000000 0.000000   167: SQL_BIT
        0 0.000000 0.000000   168:   ) ],
            ================ SmallProf version 0.9 ================
          Profile of /usr/lib/perl5/site_perl/5.005/i686-linux/DBI.pm  Page 460
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   169:   utils     => [ qw(
        0 0.000000 0.000000   170: neat neat_list dump_results
        0 0.000000 0.000000   171:   ) ],
        0 0.000000 0.000000   172:);
        0 0.000000 0.000000   173:Exporter::export_ok_tags('sql_types',
        0 0.000000 0.000000   174:
        0 0.000000 0.000000   175:$DBI::dbi_debug = $ENV{DBI_TRACE} ||
        0 0.000000 0.000000   176:
        0 0.000000 0.000000   177:# If you get an error here like "Can't find
        0 0.000000 0.000000   178:# then you haven't installed the DBI
        0 0.000000 0.000000   179:# then install it again.
        0 0.000000 0.000000   180:bootstrap DBI;
        0 0.000000 0.000000   181:
        0 0.000000 0.000000   182:}
        0 0.000000 0.000000   183:*trace_msg = \&DBD::_::common::trace_msg;
        0 0.000000 0.000000   184:
        0 0.000000 0.000000   185:use strict;
        0 0.000000 0.000000   186:
        0 0.000000 0.000000   187:my $connect_via = "connect";
        0 0.000000 0.000000   188:
        0 0.000000 0.000000   189:# check if user wants a persistent database
        0 0.000000 0.000000   190:if ($INC{'Apache/DBI.pm'} &&
        0 0.000000 0.000000   191:    $connect_via = "Apache::DBI::connect";
        0 0.000000 0.000000   192:    DBI->trace_msg("DBI connect via
        0 0.000000 0.000000   193:}
        0 0.000000 0.000000   194:
        0 0.000000 0.000000   195:
        0 0.000000 0.000000   196:if ($DBI::dbi_debug) {
        0 0.000000 0.000000   197:    @DBI::dbi_debug = ($DBI::dbi_debug);
        0 0.000000 0.000000   198:
        0 0.000000 0.000000   199:    if ($DBI::dbi_debug !~ m/^\d$/) {
        0 0.000000 0.000000   200: # dbi_debug is a file name to write trace
        0 0.000000 0.000000   201: # Default level is 2 but if file starts with
        0 0.000000 0.000000   202: # digits (and equals) are stripped off and
        0 0.000000 0.000000   203: unshift @DBI::dbi_debug, 2;
        0 0.000000 0.000000   204: @DBI::dbi_debug = ($1,$2) if $DBI::dbi_debug
        0 0.000000 0.000000   205:    }
        0 0.000000 0.000000   206:    DBI->trace(@DBI::dbi_debug);
        0 0.000000 0.000000   207:}
        0 0.000000 0.000000   208:
        0 0.000000 0.000000   209:%DBI::installed_drh = ();  # maps driver
        0 0.000000 0.000000   210:
        0 0.000000 0.000000   211:
        0 0.000000 0.000000   212:# Setup special DBI dynamic variables. See
        0 0.000000 0.000000   213:# These are dynamically associated with the
        0 0.000000 0.000000   214:tie $DBI::err,    'DBI::var', '*err';    #
        0 0.000000 0.000000   215:tie $DBI::state,  'DBI::var', '"state';  #
        0 0.000000 0.000000   216:tie $DBI::lasth,  'DBI::var', '!lasth';  #
        0 0.000000 0.000000   217:tie $DBI::errstr, 'DBI::var', '&errstr'; #
        0 0.000000 0.000000   218:tie $DBI::rows,   'DBI::var', '&rows';   #
        5 0.000000 0.000000   219:sub DBI::var::TIESCALAR{ my $var = $_[1];
        0 0.000000 0.000000   220:sub DBI::var::STORE    { Carp::croak("Can't
        0 0.000000 0.000000   221:sub DBI::var::DESTROY  { }
        0 0.000000 0.000000   222:
        0 0.000000 0.000000   223:{   package DBI::DBI_tie; # used to catch
        1 0.000000 0.000000   224:    sub TIEHASH { bless {} }
            ================ SmallProf version 0.9 ================
          Profile of /usr/lib/perl5/site_perl/5.005/i686-linux/DBI.pm  Page 461
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   225:    sub STORE   { Carp::carp("DBI->{$_[1]} is
        0 0.000000 0.000000   226:    *FETCH = \&STORE;
        0 0.000000 0.000000   227:}
        0 0.000000 0.000000   228:tie %DBI::DBI => 'DBI::DBI_tie';
        0 0.000000 0.000000   229:
        0 0.000000 0.000000   230:
        0 0.000000 0.000000   231:# --- Dynamically create the DBI Standard
        0 0.000000 0.000000   232:
        0 0.000000 0.000000   233:my $std = undef;
        0 0.000000 0.000000   234:my $keeperr = { O=>0x04 };
        0 0.000000 0.000000   235:
        0 0.000000 0.000000   236:my @TieHash_IF = ( # Generic Tied Hash
        0 0.000000 0.000000   237: 'STORE'   => { O=>0x10 },
        0 0.000000 0.000000   238: 'FETCH'   => $keeperr,
        0 0.000000 0.000000   239: 'FIRSTKEY'=> $keeperr,
        0 0.000000 0.000000   240: 'NEXTKEY' => $keeperr,
        0 0.000000 0.000000   241: 'EXISTS'  => $keeperr,
        0 0.000000 0.000000   242: 'CLEAR'   => $keeperr,
        0 0.000000 0.000000   243: 'DESTROY' => undef, # hardwired internally
        0 0.000000 0.000000   244:);
        0 0.000000 0.000000   245:my @Common_IF = ( # Interface functions
        0 0.000000 0.000000   246: func    => {    O=>0x06 },
        0 0.000000 0.000000   247: event   => { U =>[2,0,'$type, @args'],
        0 0.000000 0.000000   248: 'trace' => { U =>[1,3,'[$trace_level,
        0 0.000000 0.000000   249: trace_msg => { U =>[2,3,'$message_text [,
        0 0.000000 0.000000   250: debug   => { U =>[1,2,'[$debug_level]'],
        0 0.000000 0.000000   251: private_data => { U =>[1,1],   O=>0x04 },
        0 0.000000 0.000000   252: err     => $keeperr,
        0 0.000000 0.000000   253: errstr  => $keeperr,
        0 0.000000 0.000000   254: state   => { U =>[1,1], O=>0x04 },
        0 0.000000 0.000000   255: _not_impl => $std,
        0 0.000000 0.000000   256:);
        0 0.000000 0.000000   257:
        0 0.000000 0.000000   258:my %DBI_IF = ( # Define the DBI Interface:
        0 0.000000 0.000000   259:
        0 0.000000 0.000000   260:    dr => {  # Database Driver Interface
        0 0.000000 0.000000   261: @Common_IF,
        0 0.000000 0.000000   262: @TieHash_IF,
        0 0.000000 0.000000   263: 'connect'  => { U =>[1,5,'[$db [,$user
        0 0.000000 0.000000   264: 'connect_cached'=>{U=>[1,5,'[$db [,$user
        0 0.000000 0.000000   265: 'disconnect_all'=>{ U =>[1,1] },
        0 0.000000 0.000000   266: data_sources => { U =>[1,2,'[\%attr]' ] },
        0 0.000000 0.000000   267: default_user => { U =>[3,4,'$user, $pass [,
        0 0.000000 0.000000   268:    },
        0 0.000000 0.000000   269:    db => {  # Database Session Class
        0 0.000000 0.000000   270: @Common_IF,
        0 0.000000 0.000000   271: @TieHash_IF,
        0 0.000000 0.000000   272: commit      => { U =>[1,1] },
        0 0.000000 0.000000   273: rollback    => { U =>[1,1] },
        0 0.000000 0.000000   274: 'do'        => { U =>[2,0,'$statement [,
        0 0.000000 0.000000   275: prepare     => { U =>[2,3,'$statement [,
        0 0.000000 0.000000   276: prepare_cached => { U =>[2,4,'$statement [,
        0 0.000000 0.000000   277: selectrow_array => { U =>[2,0,'$statement [,
        0 0.000000 0.000000   278: selectall_arrayref=>{U =>[2,0,'$statement [,
        0 0.000000 0.000000   279: selectcol_arrayref=>{U =>[2,0,'$statement [,
        0 0.000000 0.000000   280: handler     => { U =>[2,2,'\&handler'] },
            ================ SmallProf version 0.9 ================
          Profile of /usr/lib/perl5/site_perl/5.005/i686-linux/DBI.pm  Page 462
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   281: ping        => { U =>[1,1] },
        0 0.000000 0.000000   282: disconnect  => { U =>[1,1] },
        0 0.000000 0.000000   283: quote       => { U =>[2,3, '$string [,
        0 0.000000 0.000000   284: rows        => $keeperr,
        0 0.000000 0.000000   285:
        0 0.000000 0.000000   286: tables          => { U =>[1,2,'[ \%attr ]' ]
        0 0.000000 0.000000   287: table_info      => { U =>[1,2,'[ \%attr ]' ]
        0 0.000000 0.000000   288: type_info_all => { U =>[1,1] },
        0 0.000000 0.000000   289: type_info => { U =>[1,2] },
        0 0.000000 0.000000   290: get_info => { U =>[2,2] },
        0 0.000000 0.000000   291:    },
        0 0.000000 0.000000   292:    st => {  # Statement Class Interface
        0 0.000000 0.000000   293: @Common_IF,
        0 0.000000 0.000000   294: @TieHash_IF,
        0 0.000000 0.000000   295: bind_col => { U =>[3,4,'$column, \\$var [,
        0 0.000000 0.000000   296: bind_columns => { U =>[2,0,'\\$var1 [,
        0 0.000000 0.000000   297: bind_param => { U =>[3,4,'$parameter, $var
        0 0.000000 0.000000   298: bind_param_inout=> { U =>[4,5,'$parameter,
        0 0.000000 0.000000   299: execute  => { U =>[1,0,'[@args]'] },
        0 0.000000 0.000000   300:
        0 0.000000 0.000000   301: fetch       => undef, # alias for
        0 0.000000 0.000000   302: fetchrow_arrayref => undef,
        0 0.000000 0.000000   303: fetchrow_hashref  => undef,
        0 0.000000 0.000000   304: fetchrow_array    => undef,
        0 0.000000 0.000000   305: fetchrow      => undef, # old alias for
        0 0.000000 0.000000   306:
        0 0.000000 0.000000   307: fetchall_arrayref => { U =>[1,2] },
        0 0.000000 0.000000   308:
        0 0.000000 0.000000   309: blob_read  => { U =>[4,5,'$field, $offset,
        0 0.000000 0.000000   310: blob_copy_to_file => { U =>[3,3,'$field,
        0 0.000000 0.000000   311: dump_results => { U =>[1,5,'$maxfieldlen,
        0 0.000000 0.000000   312: more_results => { U =>[1,1] },
        0 0.000000 0.000000   313: finish     =>  { U =>[1,1] },
        0 0.000000 0.000000   314: cancel     =>  { U =>[1,1] },
        0 0.000000 0.000000   315: rows       => $keeperr,
        0 0.000000 0.000000   316:
        0 0.000000 0.000000   317: _get_fbav => undef,
        0 0.000000 0.000000   318: _set_fbav => { T=>6 },
        0 0.000000 0.000000   319:    },
        0 0.000000 0.000000   320:);
        0 0.000000 0.000000   321:
        0 0.000000 0.000000   322:my($class, $method);
        0 0.000000 0.000000   323:foreach $class (keys %DBI_IF){
        0 0.000000 0.000000   324:    my %pkgif = %{$DBI_IF{$class}};
        0 0.000000 0.000000   325:    foreach $method (keys %pkgif){
        0 0.000000 0.000000   326: DBI-
        0 0.000000 0.000000   327:   $pkgif{$method});
        0 0.000000 0.000000   328:    }
        0 0.000000 0.000000   329:}
        0 0.000000 0.000000   330:
        0 0.000000 0.000000   331:# End of init code
        0 0.000000 0.000000   332:
        0 0.000000 0.000000   333:
        0 0.000000 0.000000   334:END {
        1 0.000008 0.000000   335:    return unless defined &DBI::trace_msg; #
        1 0.000060 0.000000   336:    local ($!,$?);
            ================ SmallProf version 0.9 ================
          Profile of /usr/lib/perl5/site_perl/5.005/i686-linux/DBI.pm  Page 463
       =================================================================
    count wall tm  cpu time line
        1 0.000047 0.000000   337:    DBI->trace_msg("    -- DBI::END\n", 2);
        0 0.000000 0.000000   338:    # Let drivers know why we are calling
        1 0.000004 0.000000   339:    $DBI::PERL_ENDING = $DBI::PERL_ENDING =
        1 0.000095 0.000000   340:    DBI->disconnect_all() if
        0 0.000000 0.000000   341:}
        0 0.000000 0.000000   342:
        0 0.000000 0.000000   343:
        0 0.000000 0.000000   344:
        0 0.000000 0.000000   345:# --- The DBI->connect Front Door methods
        0 0.000000 0.000000   346:
        0 0.000000 0.000000   347:sub connect_cached {
        0 0.000000 0.000000   348:    # XXX we expect Apache::DBI users to
        0 0.000000 0.000000   349:    return shift->connect(@_[0..4],
        0 0.000000 0.000000   350:}
        0 0.000000 0.000000   351:
        1 0.000000 0.000000   352:sub connect {
        1 0.000006 0.000000   353:    my $class = shift;
        1 0.000010 0.000000   354:    my($dsn, $user, $pass, $attr,
        1 0.000006 0.000000   355:    $connect_meth ||= $connect_via; #
        1 0.000001 0.000000   356:    my $driver;
        1 0.000002 0.000000   357:    my $dbh;
        0 0.000000 0.000000   358:
        0 0.000000 0.000000   359:    # switch $old_driver<->$attr if called in
        1 0.000003 0.000000   360:    ($old_driver, $attr) = ($attr,
        0 0.000000 0.000000   361:
        1 0.000003 0.000000   362:    $dsn ||= $ENV{DBI_DSN} ||
        0 0.000000 0.000000   363:
        1 0.000003 0.000000   364:    if ($DBI::dbi_debug) {
        0 0.000000 0.000000   365: local $^W = 0;
        0 0.000000 0.000000   366: pop @_ if $connect_meth ne 'connect';
        0 0.000000 0.000000   367: my @args = @_; $args[2] = '****'; # hide
        0 0.000000 0.000000   368: DBI->trace_msg("    -> $class-
        0 0.000000 0.000000   369:    }
        1 0.000004 0.000000   370:    Carp::croak('Usage: $class->connect([$dsn
        0 0.000000 0.000000   371: if (ref $old_driver or ($attr and not ref
        0 0.000000 0.000000   372:
        0 0.000000 0.000000   373:    # extract dbi:driver prefix from $dsn
        1 0.000027 0.000000   374:    $dsn =~ s/^dbi:(\w*?)(?:\((.*?)\))?://i
        0 0.000000 0.000000   375:   or '' =~ /()/; # ensure $1 etc are empty
        1 0.000011 0.000000   376:    my $driver_attrib_spec = $2;
        0 0.000000 0.000000   377:
        0 0.000000 0.000000   378:    # Set $driver. Old style driver, if
        1 0.000012 0.000000   379:    $driver = $old_driver || $1 ||
        0 0.000000 0.000000   380: or Carp::croak("Can't connect(@_), no
        0 0.000000 0.000000   381:  ."and DBI_DSN env var not set");
        0 0.000000 0.000000   382:
        1 0.000006 0.000000   383:    if ($ENV{DBI_AUTOPROXY} && $driver ne
        0 0.000000 0.000000   384: $dsn =
        0 0.000000 0.000000   385: $driver = 'Proxy';
        0 0.000000 0.000000   386: DBI->trace_msg("       DBI_AUTOPROXY:
        0 0.000000 0.000000   387:    }
        0 0.000000 0.000000   388:
        1 0.000002 0.000000   389:    unless ($old_driver) { # new-style
        1 0.000002 0.000000   390: $driver_attrib_spec = { split
        0 0.000000 0.000000   391:     if $driver_attrib_spec;
        1 0.000017 0.000000   392: $attr = {
            ================ SmallProf version 0.9 ================
          Profile of /usr/lib/perl5/site_perl/5.005/i686-linux/DBI.pm  Page 464
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   393:     PrintError=>1, AutoCommit=>1,
        0 0.000000 0.000000   394:     ref $attr ? %$attr : (),
        0 0.000000 0.000000   395:     ref $driver_attrib_spec ?
        0 0.000000 0.000000   396: };
        0 0.000000 0.000000   397: # XXX to be enabled for DBI v2.0
        0 0.000000 0.000000   398: #Carp::carp("AutoCommit attribute not
        0 0.000000 0.000000   399: #    if $^W && !defined($attr-
        0 0.000000 0.000000   400:    }
        0 0.000000 0.000000   401:
        1 0.000087 0.000000   402:    my $drh = $class->install_driver($driver)
        0 0.000000 0.000000   403: || die "panic: install_driver($driver)
        0 0.000000 0.000000   404:
        1 0.000003 0.000000   405:    ($user, $pass) = $drh-
        0 0.000000 0.000000   406: if !(defined $user && defined $pass);
        0 0.000000 0.000000   407:
        1 0.000160 0.000000   408:    unless ($dbh = $drh->$connect_meth($dsn,
        0 0.000000 0.000000   409: my $msg = "$class->connect($dsn) failed:
        0 0.000000 0.000000   410: if (ref $attr) {
        0 0.000000 0.000000   411:     Carp::croak($msg) if $attr-
        0 0.000000 0.000000   412:     Carp::carp ($msg) if $attr-
        0 0.000000 0.000000   413: }
        0 0.000000 0.000000   414: DBI->trace_msg("       $msg\n");
        0 0.000000 0.000000   415: $! = 0; # for the daft people who do DBI-
        0 0.000000 0.000000   416: return undef;
        0 0.000000 0.000000   417:    }
        0 0.000000 0.000000   418:
        0 0.000000 0.000000   419:    # XXX this is inelegant but practical in
        1 0.000009 0.000000   420:    if ($installed_rootclass{$class}) {
        1 0.000143 0.000000   421: $dbh->{RootClass} = $class;
        1 0.000032 0.000000   422: bless $dbh => $class.'::db';
        1 0.000034 0.000000   423: my ($outer, $inner) = DBI::_handles($dbh);
        1 0.000010 0.000000   424: bless $inner => $class.'::db';
        0 0.000000 0.000000   425:    }
        0 0.000000 0.000000   426:
        1 0.000006 0.000000   427:    if (ref $attr) {
        1 0.000022 0.000000   428: my %a = %$attr;
        1 0.000003 0.000000   429: my $a;
        0 0.000000 0.000000   430: # handle these attributes first
        3 0.000034 0.000000   431: foreach $a (qw(RaiseError PrintError
        3 0.000014 0.000000   432:     next unless exists $a{$a};
        2 0.000130 0.000000   433:     $dbh->{$a} = $a{$a};
        2 0.000013 0.000000   434:     delete $a{$a};
        0 0.000000 0.000000   435: }
        1 0.000014 0.000000   436: foreach $a (keys %a) {
        0 0.000000 0.000000   437:     $dbh->{$a} = $a{$a};
        0 0.000000 0.000000   438: }
        0 0.000000 0.000000   439:    }
        1 0.000004 0.000000   440:    DBI->trace_msg("    <- connect= $dbh\n")
        0 0.000000 0.000000   441:
        1 0.000022 0.000000   442:    $dbh;
        0 0.000000 0.000000   443:}
        0 0.000000 0.000000   444:
        0 0.000000 0.000000   445:
        1 0.000000 0.000000   446:sub disconnect_all {
        2 0.000046 0.000000   447:    foreach(keys %DBI::installed_drh){
        1 0.000006 0.000000   448: my $drh = $DBI::installed_drh{$_};
            ================ SmallProf version 0.9 ================
          Profile of /usr/lib/perl5/site_perl/5.005/i686-linux/DBI.pm  Page 465
       =================================================================
    count wall tm  cpu time line
        1 0.000007 0.000000   449: next unless ref $drh; # avoid problems on
        1 0.000080 0.000000   450: $drh->disconnect_all();
        0 0.000000 0.000000   451:    }
        0 0.000000 0.000000   452:}
        0 0.000000 0.000000   453:
        0 0.000000 0.000000   454:
        2 0.000000 0.000000   455:sub install_driver {  # croaks on failure
        2 0.000016 0.000000   456:    my $class = shift;
        2 0.000015 0.000000   457:    my($driver, $attr) = @_;
        2 0.000006 0.000000   458:    my $drh;
        2 0.000006 0.000000   459:    local $@;
        0 0.000000 0.000000   460:
        2 0.000006 0.000000   461:    $driver ||= $ENV{DBI_DRIVER} || '';
        0 0.000000 0.000000   462:
        0 0.000000 0.000000   463:    # allow driver to be specified as a
        2 0.000014 0.000000   464:    $driver = $1 if $driver =~
        0 0.000000 0.000000   465:
        2 0.000013 0.000000   466:    Carp::croak("usage: $class-
        0 0.000000 0.000000   467:  unless ($driver and @_<=3);
        0 0.000000 0.000000   468:
        0 0.000000 0.000000   469:    # already installed
        2 0.000019 0.000000   470:    return $drh if $drh =
        0 0.000000 0.000000   471:
        1 0.000004 0.000000   472:    DBI->trace_msg("    -> $class-
        0 0.000000 0.000000   473:   .") for perl=$] pid=$$ ruid=$< euid=$>\n")
        0 0.000000 0.000000   474: if $DBI::dbi_debug;
        0 0.000000 0.000000   475:
        0 0.000000 0.000000   476:    # --- load the code
        1 0.000009 0.000000   477:    my $driver_class = "DBD::$driver";
        1 0.000218 0.000000   478:    eval "package DBI::_firesafe; require
        1 0.000004 0.000000   479:    if ($@) {
        0 0.000000 0.000000   480: my $err = $@;
        0 0.000000 0.000000   481: my $advice = "";
        0 0.000000 0.000000   482: if ($err =~ /Can't find loadable object/) {
        0 0.000000 0.000000   483:     $advice = "Perhaps DBD::$driver was
        0 0.000000 0.000000   484:   ."\nIn which case you need to use that new
        0 0.000000 0.000000   485:   ."\nOr perhaps only the .pm file was
        0 0.000000 0.000000   486: }
        0 0.000000 0.000000   487: elsif ($err =~ /Can't
        0 0.000000 0.000000   488:     my @drv = DBI->available_drivers(1);
        0 0.000000 0.000000   489:     $advice = "Perhaps the DBD::$driver perl
        0 0.000000 0.000000   490:       ."or perhaps the capitalisation of
        0 0.000000 0.000000   491:       ."Available drivers: ".join(", ",
        0 0.000000 0.000000   492: }
        0 0.000000 0.000000   493: elsif ($err =~ /Can't load .*? for module
        0 0.000000 0.000000   494:     $advice = "Perhaps a required shared
        0 0.000000 0.000000   495: }
        0 0.000000 0.000000   496: elsif ($err =~ /Can't locate .*? in \@INC/)
        0 0.000000 0.000000   497:     $advice = "Perhaps a module that
        0 0.000000 0.000000   498: }
        0 0.000000 0.000000   499: Carp::croak("install_driver($driver) failed:
        0 0.000000 0.000000   500:    }
        1 0.000003 0.000000   501:    if ($DBI::dbi_debug) {
        0 0.000000 0.000000   502: no strict 'refs';
        0 0.000000 0.000000   503: my $dbd_ver = ${"$driver_class\::VERSION"}
        0 0.000000 0.000000   504: DBI->trace_msg("       install_driver:
            ================ SmallProf version 0.9 ================
          Profile of /usr/lib/perl5/site_perl/5.005/i686-linux/DBI.pm  Page 466
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   505:    }
        0 0.000000 0.000000   506:
        0 0.000000 0.000000   507:    # --- do some behind-the-scenes checks
        1 0.000080 0.000000   508:    _setup_driver($driver_class);
        0 0.000000 0.000000   509:
        0 0.000000 0.000000   510:    # --- run the driver function
        2 0.000094 0.000000   511:    $drh = eval { $driver_class->driver($attr
        1 0.000008 0.000000   512:    unless ($drh && ref $drh && !$@) {
        0 0.000000 0.000000   513: my $advice = "";
        0 0.000000 0.000000   514: # catch people on case in-sensitive systems
        0 0.000000 0.000000   515: $advice = "\nPerhaps the capitalisation of
        0 0.000000 0.000000   516:  if $@ =~ /locate object method/;
        0 0.000000 0.000000   517: croak("$driver_class initialisation failed:
        0 0.000000 0.000000   518:    }
        0 0.000000 0.000000   519:
        1 0.000011 0.000000   520:    $DBI::installed_drh{$driver} = $drh;
        1 0.000004 0.000000   521:    DBI->trace_msg("    <- install_driver=
        1 0.000015 0.000000   522:    $drh;
        0 0.000000 0.000000   523:}
        0 0.000000 0.000000   524:
        0 0.000000 0.000000   525:*driver = \&install_driver; # currently an
        0 0.000000 0.000000   526:
        0 0.000000 0.000000   527:
        2 0.000000 0.000000   528:sub _setup_driver {
        1 0.000006 0.000000   529:    my $driver_class = shift;
        1 0.000002 0.000000   530:    my $type;
        4 0.000032 0.000000   531:    foreach $type (qw(dr db st)){
        3 0.000017 0.000000   532: my $class = $driver_class."::$type";
        0 0.000000 0.000000   533: no strict 'refs';
        6 0.000075 0.000000   534: push @{"${class}::ISA"},
        6 0.000093 0.000000   535: push @{"${class}_mem::ISA"},
        0 0.000000 0.000000   536:    }
        0 0.000000 0.000000   537:}
        0 0.000000 0.000000   538:
        0 0.000000 0.000000   539:
        1 0.000000 0.000000   540:sub init_rootclass {
        0 0.000000 0.000000   541:    my $rootclass = shift;
        0 0.000000 0.000000   542:    no strict 'refs';
        0 0.000000 0.000000   543:    croak("Can't init '$rootclass' without
        0 0.000000 0.000000   544: unless defined ${"$rootclass\::db::"}{ISA};
        0 0.000000 0.000000   545:
        0 0.000000 0.000000   546:    $installed_rootclass{$rootclass} = 1;
        0 0.000000 0.000000   547:    # may do checks on ::db and ::st classes
        0 0.000000 0.000000   548:    return 1;
        0 0.000000 0.000000   549:}
        0 0.000000 0.000000   550:
        0 0.000000 0.000000   551:
        0 0.000000 0.000000   552:*internal = \&DBD::Switch::dr::driver;
        0 0.000000 0.000000   553:#sub internal { return
        0 0.000000 0.000000   554:
        0 0.000000 0.000000   555:
        0 0.000000 0.000000   556:sub available_drivers {
        0 0.000000 0.000000   557:    my($quiet) = @_;
        0 0.000000 0.000000   558:    my(@drivers, $d, $f);
        0 0.000000 0.000000   559:    local(*DBI::DIR, $@);
        0 0.000000 0.000000   560:    my(%seen_dir, %seen_dbd);
            ================ SmallProf version 0.9 ================
          Profile of /usr/lib/perl5/site_perl/5.005/i686-linux/DBI.pm  Page 467
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   561:    my $haveFileSpec = eval { require
        0 0.000000 0.000000   562:    foreach $d (@INC){
        0 0.000000 0.000000   563: chomp($d); # Perl 5 beta 3 bug in #!./perl -
        0 0.000000 0.000000   564: my $dbd_dir =
        0 0.000000 0.000000   565:     ($haveFileSpec ? File::Spec->catdir($d,
        0 0.000000 0.000000   566: next unless -d $dbd_dir;
        0 0.000000 0.000000   567: next if $seen_dir{$d};
        0 0.000000 0.000000   568: $seen_dir{$d} = 1;
        0 0.000000 0.000000   569: # XXX we have a problem here with case
        0 0.000000 0.000000   570: # XXX since we can't tell what case must be
        0 0.000000 0.000000   571: opendir(DBI::DIR, $dbd_dir) || Carp::carp
        0 0.000000 0.000000   572: foreach $f (readdir(DBI::DIR)){
        0 0.000000 0.000000   573:     next unless $f =~ s/\.pm$//;
        0 0.000000 0.000000   574:     next if $f eq 'NullP' || $f eq 'Sponge';
        0 0.000000 0.000000   575:     if ($seen_dbd{$f}){
        0 0.000000 0.000000   576:  Carp::carp "DBD::$f in $d is hidden by
        0 0.000000 0.000000   577:      unless $quiet;
        0 0.000000 0.000000   578:            } else {
        0 0.000000 0.000000   579:  push(@drivers, $f);
        0 0.000000 0.000000   580:     }
        0 0.000000 0.000000   581:     $seen_dbd{$f} = $d;
        0 0.000000 0.000000   582: }
        0 0.000000 0.000000   583: closedir(DBI::DIR);
        0 0.000000 0.000000   584:    }
        0 0.000000 0.000000   585:    return sort @drivers;
        0 0.000000 0.000000   586:}
        0 0.000000 0.000000   587:
        0 0.000000 0.000000   588:sub data_sources {
        0 0.000000 0.000000   589:    my ($class, $driver, @attr) = @_;
        0 0.000000 0.000000   590:    my $drh = $class-
        0 0.000000 0.000000   591:    my @ds = $drh->data_sources(@attr);
        0 0.000000 0.000000   592:    return @ds;
        0 0.000000 0.000000   593:}
        0 0.000000 0.000000   594:
        0 0.000000 0.000000   595:sub neat_list {
        0 0.000000 0.000000   596:    my ($listref, $maxlen, $sep) = @_;
        0 0.000000 0.000000   597:    $maxlen = 0 unless defined $maxlen; # 0
        0 0.000000 0.000000   598:    $sep = ", " unless defined $sep;
        0 0.000000 0.000000   599:    join($sep, map { neat($_,$maxlen) }
        0 0.000000 0.000000   600:}
        0 0.000000 0.000000   601:
        0 0.000000 0.000000   602:
        0 0.000000 0.000000   603:sub dump_results { # also aliased as a method
        0 0.000000 0.000000   604:    my ($sth, $maxlen, $lsep, $fsep, $fh) =
        0 0.000000 0.000000   605:    return 0 unless $sth;
        0 0.000000 0.000000   606:    $maxlen ||= 35;
        0 0.000000 0.000000   607:    $lsep   ||= "\n";
        0 0.000000 0.000000   608:    $fh ||= \*STDOUT;
        0 0.000000 0.000000   609:    my $rows = 0;
        0 0.000000 0.000000   610:    my $ref;
        0 0.000000 0.000000   611:    while($ref = $sth->fetch) {
        0 0.000000 0.000000   612: print $fh $lsep if $rows++ and $lsep;
        0 0.000000 0.000000   613: my $str = neat_list($ref,$maxlen,$fsep);
        0 0.000000 0.000000   614: print $fh $str; # done on two lines to avoid
        0 0.000000 0.000000   615:    }
        0 0.000000 0.000000   616:    print $fh "\n$rows rows".($DBI::err ? "
            ================ SmallProf version 0.9 ================
          Profile of /usr/lib/perl5/site_perl/5.005/i686-linux/DBI.pm  Page 468
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   617:    $rows;
        0 0.000000 0.000000   618:}
        0 0.000000 0.000000   619:
        0 0.000000 0.000000   620:
        0 0.000000 0.000000   621:
        0 0.000000 0.000000   622:sub connect_test_perf {
        0 0.000000 0.000000   623:    my($class, $dsn,$dbuser,$dbpass, $attr) =
        0 0.000000 0.000000   624: croak("connect_test_perf needs hash ref as
        0 0.000000 0.000000   625:    # these are non standard attributes just
        0 0.000000 0.000000   626:    my $loops ||= $attr->{dbi_loops} || 5;
        0 0.000000 0.000000   627:    my $par   ||= $attr->{dbi_par}   || 1; #
        0 0.000000 0.000000   628:    my $verb  ||= $attr->{dbi_verb}  || 1;
        0 0.000000 0.000000   629:    print "$dsn: testing $loops sets of $par
        0 0.000000 0.000000   630:    require Benchmark;
        0 0.000000 0.000000   631:    require "FileHandle.pm"; # don't let
        0 0.000000 0.000000   632:    $| = 1;
        0 0.000000 0.000000   633:    my $t0 = new Benchmark;  # not currently
        0 0.000000 0.000000   634:    my $drh = $class->install_driver($dsn) or
        0 0.000000 0.000000   635:    my $t1 = new Benchmark;
        0 0.000000 0.000000   636:    my $loop;
        0 0.000000 0.000000   637:    for $loop (1..$loops) {
        0 0.000000 0.000000   638: my @cons;
        0 0.000000 0.000000   639: print "Connecting... " if $verb;
        0 0.000000 0.000000   640: for (1..$par) {
        0 0.000000 0.000000   641:     print "$_ ";
        0 0.000000 0.000000   642:     push @cons, ($drh-
        0 0.000000 0.000000   643:      or Carp::croak("Can't connect # $_:
        0 0.000000 0.000000   644: }
        0 0.000000 0.000000   645: print "\nDisconnecting...\n" if $verb;
        0 0.000000 0.000000   646: for (@cons) {
        0 0.000000 0.000000   647:     $_->disconnect or warn "bad disconnect
        0 0.000000 0.000000   648: }
        0 0.000000 0.000000   649:    }
        0 0.000000 0.000000   650:    my $t2 = new Benchmark;
        0 0.000000 0.000000   651:    my $td = Benchmark::timediff($t2, $t1);
        0 0.000000 0.000000   652:    printf "Made %2d connections in %s\n",
        0 0.000000 0.000000   653: print "\n";
        0 0.000000 0.000000   654:    return $td;
        0 0.000000 0.000000   655:}
        0 0.000000 0.000000   656:
        0 0.000000 0.000000   657:
        0 0.000000 0.000000   658:# Help people doing DBI->errstr, might even
        0 0.000000 0.000000   659:# XXX probably best moved to cheaper XS code
        0 0.000000 0.000000   660:sub err    { $DBI::err    }
        0 0.000000 0.000000   661:sub errstr { $DBI::errstr }
        0 0.000000 0.000000   662:
        0 0.000000 0.000000   663:
        0 0.000000 0.000000   664:# --- Private Internal Function for Creating
        0 0.000000 0.000000   665:
      159 0.000000 0.000000   666:sub _new_handle {
      159 0.001460 0.000000   667:    my($class, $parent, $attr, $imp_data) =
        0 0.000000 0.000000   668:
      159 0.002723 0.010000   669:    Carp::croak('Usage: DBI::_new_handle'
        0 0.000000 0.000000   670:     .'($class_name, parent_handle, \%attr,
        0 0.000000 0.000000   671:     .'got: ('.join(", ",$class, $parent,
        0 0.000000 0.000000   672: unless(@_ == 4 and (!$parent or ref $parent)
            ================ SmallProf version 0.9 ================
          Profile of /usr/lib/perl5/site_perl/5.005/i686-linux/DBI.pm  Page 469
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   673:   and ref $attr eq 'HASH');
        0 0.000000 0.000000   674:
      159 0.001188 0.010000   675:    my $imp_class = $attr->{ImplementorClass}
        0 0.000000 0.000000   676: Carp::croak("_new_handle($class):
        0 0.000000 0.000000   677:
      159 0.000876 0.000000   678:    DBI->trace_msg("    New $class (for
        0 0.000000 0.000000   679: if $DBI::dbi_debug >= 3;
        0 0.000000 0.000000   680:
        0 0.000000 0.000000   681:    # This is how we create a DBI style
      159 0.001460 0.000000   682:    my(%hash, $i, $h);
      159 0.014549 0.010000   683:    $i = tie    %hash, $class, $attr;  # ref
      159 0.001246 0.000000   684:    $h = bless \%hash, $class;         # ref
        0 0.000000 0.000000   685:    # The above tie and bless may migrate
        0 0.000000 0.000000   686:    # Now add magic so DBI method dispatch
      159 0.015317 0.000000   687:    DBI::_setup_handle($h, $imp_class,
        0 0.000000 0.000000   688:
      159 0.004007 0.000000   689:    return $h unless wantarray;
        0 0.000000 0.000000   690:    ($h, $i);
        0 0.000000 0.000000   691:}
        0 0.000000 0.000000   692:# minimum constructors for the tie's (alias
      318 0.003502 0.000000   693:sub DBI::st::TIEHASH { bless $_[1] => $_[0]
        0 0.000000 0.000000   694:*DBI::dr::TIEHASH = \&DBI::st::TIEHASH;
        0 0.000000 0.000000   695:*DBI::db::TIEHASH = \&DBI::st::TIEHASH;
        0 0.000000 0.000000   696:
        0 0.000000 0.000000   697:
        0 0.000000 0.000000   698:# These three special constructors are called
        0 0.000000 0.000000   699:# The way they are called is likey to change.
        0 0.000000 0.000000   700:
        1 0.000000 0.000000   701:sub _new_drh { # called by
        1 0.000008 0.000000   702:    my ($class, $initial_attr, $imp_data) =
        0 0.000000 0.000000   703:    # Provide default storage for State,Err
        0 0.000000 0.000000   704:    # Note that these are shared by all child
        0 0.000000 0.000000   705:    # State must be undef to get automatic
        1 0.000007 0.000000   706:    my ($h_state_store, $h_err_store,
        1 0.000089 0.000000   707:    my $attr = {
        0 0.000000 0.000000   708: 'ImplementorClass' => $class,
        0 0.000000 0.000000   709: # these attributes get copied down to child
        0 0.000000 0.000000   710: 'Handlers' => [],
        0 0.000000 0.000000   711: 'State'  => \$h_state_store,  # Holder for
        0 0.000000 0.000000   712: 'Err'  => \$h_err_store,    # Holder for
        0 0.000000 0.000000   713: 'Errstr' => \$h_errstr_store, # Holder for
        0 0.000000 0.000000   714: 'Debug'  => 0,
        0 0.000000 0.000000   715: %$initial_attr,
        0 0.000000 0.000000   716: 'Type'=>'dr',
        0 0.000000 0.000000   717:    };
        1 0.000080 0.000000   718:    _new_handle('DBI::dr', '', $attr,
        0 0.000000 0.000000   719:}
        0 0.000000 0.000000   720:
        1 0.000000 0.000000   721:sub _new_dbh { # called by
        1 0.000010 0.000000   722:    my ($drh, $initial_attr, $imp_data) = @_;
        1 0.000008 0.000000   723:    my $imp_class = $drh->{ImplementorClass}
        0 0.000000 0.000000   724: || Carp::croak("DBI _new_dbh: $drh has no
        1 0.000015 0.000000   725:    substr($imp_class,-4,4) = '::db';
        1 0.000006 0.000000   726:    my $app_class  = ref $drh;
        1 0.000007 0.000000   727:    substr($app_class,-4,4) = '::db';
        1 0.000067 0.000000   728:    my $attr = {
            ================ SmallProf version 0.9 ================
          Profile of /usr/lib/perl5/site_perl/5.005/i686-linux/DBI.pm  Page 470
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   729: 'ImplementorClass' => $imp_class,
        0 0.000000 0.000000   730: %$initial_attr,
        0 0.000000 0.000000   731: 'Type'   => 'db',
        0 0.000000 0.000000   732: 'Driver' => (DBI::_handles($drh))[0],
        0 0.000000 0.000000   733:    };
        1 0.000075 0.000000   734:    _new_handle($app_class, $drh, $attr,
        0 0.000000 0.000000   735:}
        0 0.000000 0.000000   736:
      157 0.000000 0.000000   737:sub _new_sth { # called by
      157 0.001115 0.000000   738:    my ($dbh, $initial_attr, $imp_data) = @_;
      157 0.001537 0.000000   739:    my $imp_class = $dbh->{ImplementorClass}
        0 0.000000 0.000000   740: || Carp::croak("DBI _new_sth: $dbh has no
      157 0.002111 0.000000   741:    substr($imp_class,-4,4) = '::st';
      157 0.000932 0.000000   742:    my $app_class  = ref $dbh;
      157 0.001179 0.000000   743:    substr($app_class,-4,4) = '::st';
      157 0.004878 0.010000   744:    my $attr = {
        0 0.000000 0.000000   745: 'ImplementorClass' => $imp_class,
        0 0.000000 0.000000   746: %$initial_attr,
        0 0.000000 0.000000   747: 'Type'     => 'st',
        0 0.000000 0.000000   748: 'Database' => $dbh,
        0 0.000000 0.000000   749:    };
      157 0.012276 0.030000   750:    _new_handle($app_class, $dbh, $attr,
        0 0.000000 0.000000   751:}
        0 0.000000 0.000000   752:
        0 0.000000 0.000000   753:
        0 0.000000 0.000000   754:} # end of DBI package scope
        0 0.000000 0.000000   755:
        0 0.000000 0.000000   756:
        0 0.000000 0.000000   757:
        0 0.000000 0.000000   758:# -------------------------------------------
        0 0.000000 0.000000   759:# === The internal DBI Switch pseudo 'driver'
        0 0.000000 0.000000   760:
        0 0.000000 0.000000   761:{   package DBD::Switch::dr;
        0 0.000000 0.000000   762:    DBI::_setup_driver('DBD::Switch'); # sets
        0 0.000000 0.000000   763:    require Carp;
        0 0.000000 0.000000   764:
        0 0.000000 0.000000   765:    $imp_data_size = 0;
        0 0.000000 0.000000   766:    $imp_data_size = 0; # avoid typo warning
        0 0.000000 0.000000   767:    $err = 0;
        0 0.000000 0.000000   768:
        0 0.000000 0.000000   769:    sub driver {
        0 0.000000 0.000000   770: return $drh if $drh; # a package global
        0 0.000000 0.000000   771:
        0 0.000000 0.000000   772: my $inner;
        0 0.000000 0.000000   773: ($drh, $inner) =
        0 0.000000 0.000000   774:  'Name'    => 'Switch',
        0 0.000000 0.000000   775:  'Version' => $DBI::VERSION,
        0 0.000000 0.000000   776:  # the Attribution is defined as a sub as an
        0 0.000000 0.000000   777:  'Attribution' => sub { "DBI $DBI::VERSION
        0 0.000000 0.000000   778:     }, \$err);
        0 0.000000 0.000000   779: Carp::croak("DBD::Switch init failed!")
        0 0.000000 0.000000   780: return $drh;
        0 0.000000 0.000000   781:    }
        0 0.000000 0.000000   782:
        0 0.000000 0.000000   783:    sub FETCH {
        0 0.000000 0.000000   784: my($drh, $key) = @_;
            ================ SmallProf version 0.9 ================
          Profile of /usr/lib/perl5/site_perl/5.005/i686-linux/DBI.pm  Page 471
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   785: return DBI->trace if $key eq
        0 0.000000 0.000000   786: return undef if $key eq 'DebugLog'; # not
        0 0.000000 0.000000   787: return $drh->DBD::_::dr::FETCH($key);
        0 0.000000 0.000000   788: undef;
        0 0.000000 0.000000   789:    }
        0 0.000000 0.000000   790:    sub STORE {
        0 0.000000 0.000000   791: my($drh, $key, $value) = @_;
        0 0.000000 0.000000   792: if ($key eq 'DebugDispatch') {
        0 0.000000 0.000000   793:     DBI->trace($value);
        0 0.000000 0.000000   794: } elsif ($key eq 'DebugLog') {
        0 0.000000 0.000000   795:     DBI->trace(-1, $value);
        0 0.000000 0.000000   796: } else {
        0 0.000000 0.000000   797:     $drh->DBD::_::dr::STORE($key, $value);
        0 0.000000 0.000000   798: }
        0 0.000000 0.000000   799:    }
        0 0.000000 0.000000   800:}
        0 0.000000 0.000000   801:
        0 0.000000 0.000000   802:
        0 0.000000 0.000000   803:# -------------------------------------------
        0 0.000000 0.000000   804:# === OPTIONAL MINIMAL BASE CLASSES FOR DBI
        0 0.000000 0.000000   805:
        0 0.000000 0.000000   806:# We only define default methods for harmless
        0 0.000000 0.000000   807:# We don't, for example, define a
        0 0.000000 0.000000   808:
        0 0.000000 0.000000   809:{   package DBD::_::common; # ====== Common
        0 0.000000 0.000000   810:    use strict;
        0 0.000000 0.000000   811:
        0 0.000000 0.000000   812:    # methods common to all handle types:
        0 0.000000 0.000000   813:
        0 0.000000 0.000000   814:    sub _not_impl {
        0 0.000000 0.000000   815: my ($h, $method) = @_;
        0 0.000000 0.000000   816: $h->trace_msg("Driver does not implement the
        0 0.000000 0.000000   817: return; # empty list / undef
        0 0.000000 0.000000   818:    }
        0 0.000000 0.000000   819:
        0 0.000000 0.000000   820:    # generic TIEHASH default methods:
        0 0.000000 0.000000   821:    sub FIRSTKEY { }
        0 0.000000 0.000000   822:    sub NEXTKEY  { }
        0 0.000000 0.000000   823:    sub EXISTS   { defined($_[0]-
        0 0.000000 0.000000   824:    sub CLEAR    { Carp::carp "Can't CLEAR
        0 0.000000 0.000000   825:}
        0 0.000000 0.000000   826:
        0 0.000000 0.000000   827:
        0 0.000000 0.000000   828:{   package DBD::_::dr;  # ====== DRIVER
        0 0.000000 0.000000   829:    @ISA = qw(DBD::_::common);
        0 0.000000 0.000000   830:    use strict;
        0 0.000000 0.000000   831:
        0 0.000000 0.000000   832:    sub default_user {
        0 0.000000 0.000000   833: my ($drh, $user, $pass) = @_;
        0 0.000000 0.000000   834: unless (defined $user) {
        0 0.000000 0.000000   835:     $user = $ENV{DBI_USER};
        0 0.000000 0.000000   836:     carp("DBI connect: user not defined and
        0 0.000000 0.000000   837:  if 0 && !defined $user && $drh->{Warn}; #
        0 0.000000 0.000000   838: }
        0 0.000000 0.000000   839: unless (defined $pass) {
        0 0.000000 0.000000   840:     $pass = $ENV{DBI_PASS};
            ================ SmallProf version 0.9 ================
          Profile of /usr/lib/perl5/site_perl/5.005/i686-linux/DBI.pm  Page 472
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   841:     carp("DBI connect: password not defined
        0 0.000000 0.000000   842:  if 0 && !defined $pass && $drh->{Warn}; #
        0 0.000000 0.000000   843: }
        0 0.000000 0.000000   844: return ($user, $pass);
        0 0.000000 0.000000   845:    }
        0 0.000000 0.000000   846:
        0 0.000000 0.000000   847:    sub connect { # normally overridden, but
        0 0.000000 0.000000   848: my ($drh, $dsn, $user, $auth) = @_;
        0 0.000000 0.000000   849: my ($this) = DBI::_new_dbh($drh, {
        0 0.000000 0.000000   850:     'Name' => $dsn,
        0 0.000000 0.000000   851:     'User' => $user,
        0 0.000000 0.000000   852: });
        0 0.000000 0.000000   853: $this;
        0 0.000000 0.000000   854:    }
        0 0.000000 0.000000   855:
        0 0.000000 0.000000   856:
        0 0.000000 0.000000   857:    sub connect_cached {
        0 0.000000 0.000000   858: my $drh = shift;
        0 0.000000 0.000000   859: my ($dsn, $user, $auth, $attr)= @_;
        0 0.000000 0.000000   860:
        0 0.000000 0.000000   861: # Needs support at dbh level to clear cache
        0 0.000000 0.000000   862: # active children. The XS template code does
        0 0.000000 0.000000   863: # the template must handle clearing the
        0 0.000000 0.000000   864: my $cache = $drh->FETCH('CachedKids');
        0 0.000000 0.000000   865: $drh->STORE('CachedKids', $cache = {})
        0 0.000000 0.000000   866:
        0 0.000000 0.000000   867: my $key = join "~", $dsn, $user||'',
        0 0.000000 0.000000   868: my $dbh = $cache->{$key};
        0 0.000000 0.000000   869: return $dbh if $dbh && $dbh->FETCH('Active')
        0 0.000000 0.000000   870: $dbh = $drh->connect(@_);
        0 0.000000 0.000000   871: $cache->{$key} = $dbh; # replace, even if it
        0 0.000000 0.000000   872: return $dbh;
        0 0.000000 0.000000   873:    }
        0 0.000000 0.000000   874:
        0 0.000000 0.000000   875:
        0 0.000000 0.000000   876:    sub disconnect_all { # Driver must take
        0 0.000000 0.000000   877: # XXX Umm, may change later.
        0 0.000000 0.000000   878: Carp::croak("Driver has not implemented the
        0 0.000000 0.000000   879:    }
        0 0.000000 0.000000   880:
        0 0.000000 0.000000   881:    sub data_sources {
        0 0.000000 0.000000   882: shift->_not_impl('data_sources');
        0 0.000000 0.000000   883:    }
        0 0.000000 0.000000   884:
        0 0.000000 0.000000   885:}
        0 0.000000 0.000000   886:
        0 0.000000 0.000000   887:
        0 0.000000 0.000000   888:{   package DBD::_::db;  # ====== DATABASE
        0 0.000000 0.000000   889:    @ISA = qw(DBD::_::common);
        0 0.000000 0.000000   890:    use strict;
        0 0.000000 0.000000   891:
        0 0.000000 0.000000   892:    sub disconnect  {
        0 0.000000 0.000000   893: shift->_not_impl('disconnect');
        0 0.000000 0.000000   894:    }
        0 0.000000 0.000000   895:
        0 0.000000 0.000000   896:    # Drivers are required to implement
            ================ SmallProf version 0.9 ================
          Profile of /usr/lib/perl5/site_perl/5.005/i686-linux/DBI.pm  Page 473
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   897:    sub DESTROY  { Carp::croak("Driver has
        0 0.000000 0.000000   898:
        0 0.000000 0.000000   899:    sub quote {
        0 0.000000 0.000000   900: my ($dbh, $str, $data_type) = @_;
        0 0.000000 0.000000   901: return "NULL" unless defined $str;
        0 0.000000 0.000000   902: unless ($data_type) {
        0 0.000000 0.000000   903:     $str =~ s/'/''/g;  # ISO SQL2
        0 0.000000 0.000000   904:     return "'$str'";
        0 0.000000 0.000000   905: }
        0 0.000000 0.000000   906: # Optimise for standard numerics which need
        0 0.000000 0.000000   907: return $str if $data_type ==
        0 0.000000 0.000000   908:      || $data_type == DBI::SQL_SMALLINT
        0 0.000000 0.000000   909:      || $data_type == DBI::SQL_DECIMAL
        0 0.000000 0.000000   910:      || $data_type == DBI::SQL_FLOAT
        0 0.000000 0.000000   911:      || $data_type == DBI::SQL_REAL
        0 0.000000 0.000000   912:      || $data_type == DBI::SQL_DOUBLE
        0 0.000000 0.000000   913:      || $data_type == DBI::SQL_NUMERIC;
        0 0.000000 0.000000   914: my $ti = $dbh->type_info($data_type);
        0 0.000000 0.000000   915: # XXX needs checking
        0 0.000000 0.000000   916: my $lp = $ti ? $ti->{LITERAL_PREFIX} || "" :
        0 0.000000 0.000000   917: my $ls = $ti ? $ti->{LITERAL_SUFFIX} || "" :
        0 0.000000 0.000000   918: # XXX don't know what the standard says
        0 0.000000 0.000000   919: # in the 'general case' (where $lp != "'").
        0 0.000000 0.000000   920: # So we just do this and hope:
        0 0.000000 0.000000   921: $str =~ s/$lp/$lp$lp/g
        0 0.000000 0.000000   922:  if $lp && $lp eq $ls && ($lp eq "'" || $lp
        0 0.000000 0.000000   923: return "$lp$str$ls";
        0 0.000000 0.000000   924:    }
        0 0.000000 0.000000   925:
        0 0.000000 0.000000   926:    sub rows { -1 } # here so $DBI::rows
        0 0.000000 0.000000   927:
        0 0.000000 0.000000   928:    sub do {
        0 0.000000 0.000000   929: my($dbh, $statement, $attr, @params) = @_;
        0 0.000000 0.000000   930: my $sth = $dbh->prepare($statement, $attr)
        0 0.000000 0.000000   931: $sth->execute(@params) or return undef;
        0 0.000000 0.000000   932: my $rows = $sth->rows;
        0 0.000000 0.000000   933: ($rows == 0) ? "0E0" : $rows;
        0 0.000000 0.000000   934:    }
        0 0.000000 0.000000   935:
        0 0.000000 0.000000   936:    sub selectrow_array {
        0 0.000000 0.000000   937: my ($dbh, $stmt, $attr, @bind) = @_;
        0 0.000000 0.000000   938: my $sth = (ref $stmt) ? $stmt
        0 0.000000 0.000000   939:         : $dbh->prepare($stmt, $attr);
        0 0.000000 0.000000   940: return unless $sth;
        0 0.000000 0.000000   941: $sth->execute(@bind) || return;
        0 0.000000 0.000000   942: my @row = $sth->fetchrow_array;
        0 0.000000 0.000000   943: $sth->finish;
        0 0.000000 0.000000   944: return $row[0] unless wantarray;
        0 0.000000 0.000000   945: return @row;
        0 0.000000 0.000000   946:    }
        0 0.000000 0.000000   947:
        0 0.000000 0.000000   948:    sub selectall_arrayref {
        0 0.000000 0.000000   949: my ($dbh, $stmt, $attr, @bind) = @_;
        0 0.000000 0.000000   950: my $sth = (ref $stmt) ? $stmt
        0 0.000000 0.000000   951:         : $dbh->prepare($stmt, $attr);
        0 0.000000 0.000000   952: return unless $sth;
            ================ SmallProf version 0.9 ================
          Profile of /usr/lib/perl5/site_perl/5.005/i686-linux/DBI.pm  Page 474
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   953: $sth->execute(@bind) || return;
        0 0.000000 0.000000   954: my $slice = $attr-
        0 0.000000 0.000000   955: return $sth->fetchall_arrayref($slice);
        0 0.000000 0.000000   956:    }
        0 0.000000 0.000000   957:
        0 0.000000 0.000000   958:    sub selectcol_arrayref {
        0 0.000000 0.000000   959: my ($dbh, $stmt, $attr, @bind) = @_;
        0 0.000000 0.000000   960: my $sth = (ref $stmt) ? $stmt
        0 0.000000 0.000000   961:         : $dbh->prepare($stmt, $attr);
        0 0.000000 0.000000   962: return unless $sth;
        0 0.000000 0.000000   963: $sth->execute(@bind) || return;
        0 0.000000 0.000000   964: my $column = 1;
        0 0.000000 0.000000   965: my $value;
        0 0.000000 0.000000   966: $sth->bind_col($column, \$value) || return;
        0 0.000000 0.000000   967: my @col;
        0 0.000000 0.000000   968: push @col, $value while $sth->fetch;
        0 0.000000 0.000000   969: return \@col;
        0 0.000000 0.000000   970:    }
        0 0.000000 0.000000   971:
        0 0.000000 0.000000   972:    sub prepare_cached {
        0 0.000000 0.000000   973: my ($dbh, $statement, $attr, $allow_active)
        0 0.000000 0.000000   974: # Needs support at dbh level to clear cache
        0 0.000000 0.000000   975: # active children. The XS template code does
        0 0.000000 0.000000   976: # the template must handle clearing the
        0 0.000000 0.000000   977: my $cache = $dbh->FETCH('CachedKids');
        0 0.000000 0.000000   978: $dbh->STORE('CachedKids', $cache = {})
        0 0.000000 0.000000   979: my $key = ($attr) ? join(" | ", $statement,
        0 0.000000 0.000000   980: my $sth = $cache->{$key};
        0 0.000000 0.000000   981: if ($sth) {
        0 0.000000 0.000000   982:     if ($sth->FETCH('Active')) {
        0 0.000000 0.000000   983:  Carp::carp("prepare_cached($statement)
        0 0.000000 0.000000   984:      if !$allow_active;
        0 0.000000 0.000000   985:  $sth->finish;
        0 0.000000 0.000000   986:     }
        0 0.000000 0.000000   987:     return $sth;
        0 0.000000 0.000000   988: }
        0 0.000000 0.000000   989: $sth = $dbh->prepare($statement, $attr);
        0 0.000000 0.000000   990: $cache->{$key} = $sth if $sth;
        0 0.000000 0.000000   991: return $sth;
        0 0.000000 0.000000   992:    }
        0 0.000000 0.000000   993:
        0 0.000000 0.000000   994:    sub ping {
        0 0.000000 0.000000   995: shift->_not_impl('ping');
        0 0.000000 0.000000   996: "0 but true"; # special kind of true 0
        0 0.000000 0.000000   997:    }
        0 0.000000 0.000000   998:
        0 0.000000 0.000000   999:    sub commit {
        0 0.000000 0.000000  1000: shift->_not_impl('commit');
        0 0.000000 0.000000  1001:    }
        0 0.000000 0.000000  1002:    sub rollback {
        0 0.000000 0.000000  1003: shift->_not_impl('rollback');
        0 0.000000 0.000000  1004:    }
        0 0.000000 0.000000  1005:
        0 0.000000 0.000000  1006:    sub get_info {
        0 0.000000 0.000000  1007: shift->_not_impl("get_info @_");
        0 0.000000 0.000000  1008:    }
            ================ SmallProf version 0.9 ================
          Profile of /usr/lib/perl5/site_perl/5.005/i686-linux/DBI.pm  Page 475
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000  1009:
        0 0.000000 0.000000  1010:    sub table_info {
        0 0.000000 0.000000  1011: shift->_not_impl('table_info');
        0 0.000000 0.000000  1012:    }
        0 0.000000 0.000000  1013:
        0 0.000000 0.000000  1014:    sub tables {
        0 0.000000 0.000000  1015: my ($dbh, @args) = @_;
        0 0.000000 0.000000  1016: my $sth = $dbh->table_info(@args);
        0 0.000000 0.000000  1017: return unless $sth;
        0 0.000000 0.000000  1018: my ($row, @tables);
        0 0.000000 0.000000  1019: while($row = $sth->fetch) {
        0 0.000000 0.000000  1020:     my $name = $row->[2];
        0 0.000000 0.000000  1021:     if ($row->[1]) {
        0 0.000000 0.000000  1022:  my $schema = $row->[1];
        0 0.000000 0.000000  1023:  # a little hack
        0 0.000000 0.000000  1024:  my $quote = ($schema eq uc($schema)) ? '' :
        0 0.000000 0.000000  1025:  $name = "$quote$schema$quote.$name"
        0 0.000000 0.000000  1026:     }
        0 0.000000 0.000000  1027:     push @tables, $name;
        0 0.000000 0.000000  1028: }
        0 0.000000 0.000000  1029: return @tables;
        0 0.000000 0.000000  1030:    }
        0 0.000000 0.000000  1031:
        0 0.000000 0.000000  1032:    sub type_info_all {
        0 0.000000 0.000000  1033: my ($dbh) = @_;
        0 0.000000 0.000000  1034: $dbh->_not_impl('type_info_all');
        0 0.000000 0.000000  1035: my $ti = [ {} ];
        0 0.000000 0.000000  1036: return $ti;
        0 0.000000 0.000000  1037:    }
        0 0.000000 0.000000  1038:
        0 0.000000 0.000000  1039:    sub type_info {
        0 0.000000 0.000000  1040: my ($dbh, $data_type) = @_;
        0 0.000000 0.000000  1041: my $tia = $dbh->type_info_all;
        0 0.000000 0.000000  1042: return unless @$tia;
        0 0.000000 0.000000  1043: my $idx_hash = shift @$tia;
        0 0.000000 0.000000  1044: my $dt_idx   = $idx_hash->{DATA_TYPE}
        0 0.000000 0.000000  1045:  or Carp::croak("No DATA_TYPE field in
        0 0.000000 0.000000  1046:
        0 0.000000 0.000000  1047: # --- simple DATA_TYPE match filter
        0 0.000000 0.000000  1048: my @ti;
        0 0.000000 0.000000  1049: my @data_type_list = (ref $data_type) ?
        0 0.000000 0.000000  1050: foreach $data_type (@data_type_list) {
        0 0.000000 0.000000  1051:     if (defined($data_type) && $data_type !=
        0 0.000000 0.000000  1052:  push @ti, grep { $_->[$dt_idx] ==
        0 0.000000 0.000000  1053:     }
        0 0.000000 0.000000  1054:     else { # SQL_ALL_TYPES
        0 0.000000 0.000000  1055:  push @ti, @$tia;
        0 0.000000 0.000000  1056:     }
        0 0.000000 0.000000  1057:     last if @ti; # found at least one match
        0 0.000000 0.000000  1058: }
        0 0.000000 0.000000  1059:
        0 0.000000 0.000000  1060: # --- format results into list of hash refs
        0 0.000000 0.000000  1061: my $idx_fields =   keys %$idx_hash;
        0 0.000000 0.000000  1062: my @idx_names  =   keys %$idx_hash;
        0 0.000000 0.000000  1063: my @idx_values = values %$idx_hash;
        0 0.000000 0.000000  1064: my @out = map {
            ================ SmallProf version 0.9 ================
          Profile of /usr/lib/perl5/site_perl/5.005/i686-linux/DBI.pm  Page 476
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000  1065:     Carp::croak
        0 0.000000 0.000000  1066:  "type_info_all result has $idx_fields keys
        0 0.000000 0.000000  1067:  if @$_ != $idx_fields;
        0 0.000000 0.000000  1068:     my %h; @h{@idx_names} = @{$_}[
        0 0.000000 0.000000  1069: } @ti;
        0 0.000000 0.000000  1070: return $out[0] unless wantarray;
        0 0.000000 0.000000  1071: return @out;
        0 0.000000 0.000000  1072:    }
        0 0.000000 0.000000  1073:}
        0 0.000000 0.000000  1074:
        0 0.000000 0.000000  1075:
        0 0.000000 0.000000  1076:{   package DBD::_::st;  # ====== STATEMENT
        0 0.000000 0.000000  1077:    @ISA = qw(DBD::_::common);
        0 0.000000 0.000000  1078:    use strict;
        0 0.000000 0.000000  1079:
        0 0.000000 0.000000  1080:    sub cancel  { undef }
        0 0.000000 0.000000  1081:    sub bind_param { Carp::croak("Can't
        0 0.000000 0.000000  1082:
      206 0.000000 0.000000  1083:    sub fetchrow_hashref {
      206 0.000944 0.020000  1084: my $sth = shift;
      206 0.000837 0.000000  1085: my $name = shift || 'NAME';
        0 0.000000 0.000000  1086: # This may be recoded in XS. It could work
        0 0.000000 0.000000  1087: # Probably best to add an AV*fields_hvav to
        0 0.000000 0.000000  1088: # on the first call to fetchhash which
        0 0.000000 0.000000  1089: # This implementation is just rather simple
        0 0.000000 0.000000  1090: # Notes for XS implementation: since apps
        0 0.000000 0.000000  1091: # before the next fetch we need to check the
        0 0.000000 0.000000  1092: # scan the hash and delete inappropriate
      206 0.009530 0.000000  1093: my $row = $sth->fetch or return undef;
      168 0.000398 0.000000  1094: my %hash;
      336 0.010807 0.010000  1095: @hash{ @{ $sth->FETCH($name) } } = @$row;
      168 0.002569 0.000000  1096: return \%hash;
        0 0.000000 0.000000  1097:    }
        0 0.000000 0.000000  1098:
        0 0.000000 0.000000  1099:    sub fetchall_arrayref {
        0 0.000000 0.000000  1100: my $sth = shift;
        0 0.000000 0.000000  1101: my $slice= shift || [];
        0 0.000000 0.000000  1102: my $mode = ref $slice;
        0 0.000000 0.000000  1103: my @rows;
        0 0.000000 0.000000  1104: my $row;
        0 0.000000 0.000000  1105: if ($mode eq 'ARRAY') {
        0 0.000000 0.000000  1106:     # we copy the array here because fetch
        0 0.000000 0.000000  1107:     # returns the same array ref. XXX
        0 0.000000 0.000000  1108:     if (@$slice) {
        0 0.000000 0.000000  1109:  push @rows, [ @{$row}[ @$slice] ]
        0 0.000000 0.000000  1110:     }
        0 0.000000 0.000000  1111:     else {
        0 0.000000 0.000000  1112:  push @rows, [ @$row ] while($row = $sth-
        0 0.000000 0.000000  1113:     }
        0 0.000000 0.000000  1114: }
        0 0.000000 0.000000  1115: elsif ($mode eq 'HASH') {
        0 0.000000 0.000000  1116:     my @o_keys = keys %$slice;
        0 0.000000 0.000000  1117:     if (@o_keys) {
        0 0.000000 0.000000  1118:  my %i_names = map {  (lc($_)=>$_) } @{
        0 0.000000 0.000000  1119:  my @i_keys  = map { $i_names{lc($_)} }
        0 0.000000 0.000000  1120:  while ($row = $sth->fetchrow_hashref) {
            ================ SmallProf version 0.9 ================
          Profile of /usr/lib/perl5/site_perl/5.005/i686-linux/DBI.pm  Page 477
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000  1121:      my %hash;
        0 0.000000 0.000000  1122:      @hash{@o_keys} = @{$row}{@i_keys};
        0 0.000000 0.000000  1123:      push @rows, \%hash;
        0 0.000000 0.000000  1124:  }
        0 0.000000 0.000000  1125:     }
        0 0.000000 0.000000  1126:     else {
        0 0.000000 0.000000  1127:  # XXX assumes new ref each fetchhash
        0 0.000000 0.000000  1128:  push @rows, $row while ($row = $sth-
        0 0.000000 0.000000  1129:     }
        0 0.000000 0.000000  1130: }
        0 0.000000 0.000000  1131: else { Carp::croak("fetchall_arrayref($mode)
        0 0.000000 0.000000  1132: return \@rows;
        0 0.000000 0.000000  1133:    }
        0 0.000000 0.000000  1134:
        0 0.000000 0.000000  1135:    *dump_results = \&DBI::dump_results;
        0 0.000000 0.000000  1136:
        0 0.000000 0.000000  1137:    sub blob_copy_to_file { # returns length
        0 0.000000 0.000000  1138: my($self, $field, $filename_or_handleref,
        0 0.000000 0.000000  1139: my $fh = $filename_or_handleref;
        0 0.000000 0.000000  1140: my($len, $buf) = (0, "");
        0 0.000000 0.000000  1141: $blocksize ||= 512; # not too ambitious
        0 0.000000 0.000000  1142: local(*FH);
        0 0.000000 0.000000  1143: unless(ref $fh) {
        0 0.000000 0.000000  1144:     open(FH, ">$fh") || return undef;
        0 0.000000 0.000000  1145:     $fh = \*FH;
        0 0.000000 0.000000  1146: }
        0 0.000000 0.000000  1147: while(defined($self->blob_read($field, $len,
        0 0.000000 0.000000  1148:     print $fh $buf;
        0 0.000000 0.000000  1149:     $len += length $buf;
        0 0.000000 0.000000  1150: }
        0 0.000000 0.000000  1151: close(FH);
        0 0.000000 0.000000  1152: $len;
        0 0.000000 0.000000  1153:    }
        0 0.000000 0.000000  1154:
        0 0.000000 0.000000  1155:    sub more_results {
        0 0.000000 0.000000  1156: shift->{syb_more_results}; # handy
        0 0.000000 0.000000  1157:    }
        0 0.000000 0.000000  1158:
        0 0.000000 0.000000  1159:    # Drivers are required to implement
        0 0.000000 0.000000  1160:    sub DESTROY  { Carp::croak("Driver has
        0 0.000000 0.000000  1161:}
        0 0.000000 0.000000  1162:
        0 0.000000 0.000000  1163:{   # See install_driver
        0 0.000000 0.000000  1164:    { package DBD::_mem::dr; @ISA =
        0 0.000000 0.000000  1165:    { package DBD::_mem::db; @ISA =
        0 0.000000 0.000000  1166:    { package DBD::_mem::st; @ISA =
        0 0.000000 0.000000  1167:    # DBD::_mem::common::DESTROY is
        0 0.000000 0.000000  1168:}
        0 0.000000 0.000000  1169:
        0 0.000000 0.000000  1170:1;
        0 0.000000 0.000000  1171:__END__
            ================ SmallProf version 0.9 ================
         Profile of /usr/lib/perl5/site_perl/5.005/i686-linux/HTML/Ent Page 478
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000     1:package HTML::Entities;
        0 0.000000 0.000000     2:
        0 0.000000 0.000000     3:# $Id: Entities.pm,v 1.21 2001/02/23 07:07:01
        0 0.000000 0.000000     4:
        0 0.000000 0.000000     5:=head1 NAME
        0 0.000000 0.000000     6:
        0 0.000000 0.000000     7:
        0 0.000000 0.000000     8:
        0 0.000000 0.000000     9:
        0 0.000000 0.000000    10:
        0 0.000000 0.000000    11:
        0 0.000000 0.000000    12:
        0 0.000000 0.000000    13:
        0 0.000000 0.000000    14:
        0 0.000000 0.000000    15:
        0 0.000000 0.000000    16:
        0 0.000000 0.000000    17:
        0 0.000000 0.000000    18:
        0 0.000000 0.000000    19:
        0 0.000000 0.000000    20:
        0 0.000000 0.000000    21:
        0 0.000000 0.000000    22:
        0 0.000000 0.000000    23:
        0 0.000000 0.000000    24:
        0 0.000000 0.000000    25:
        0 0.000000 0.000000    26:
        0 0.000000 0.000000    27:
        0 0.000000 0.000000    28:
        0 0.000000 0.000000    29:
        0 0.000000 0.000000    30:
        0 0.000000 0.000000    31:
        0 0.000000 0.000000    32:
        0 0.000000 0.000000    33:
        0 0.000000 0.000000    34:
        0 0.000000 0.000000    35:
        0 0.000000 0.000000    36:
        0 0.000000 0.000000    37:
        0 0.000000 0.000000    38:
        0 0.000000 0.000000    39:
        0 0.000000 0.000000    40:
        0 0.000000 0.000000    41:
        0 0.000000 0.000000    42:
        0 0.000000 0.000000    43:
        0 0.000000 0.000000    44:
        0 0.000000 0.000000    45:
        0 0.000000 0.000000    46:
        0 0.000000 0.000000    47:
        0 0.000000 0.000000    48:
        0 0.000000 0.000000    49:
        0 0.000000 0.000000    50:
        0 0.000000 0.000000    51:
        0 0.000000 0.000000    52:
        0 0.000000 0.000000    53:
        0 0.000000 0.000000    54:
        0 0.000000 0.000000    55:
        0 0.000000 0.000000    56:
            ================ SmallProf version 0.9 ================
         Profile of /usr/lib/perl5/site_perl/5.005/i686-linux/HTML/Ent Page 479
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000    57:
        0 0.000000 0.000000    58:
        0 0.000000 0.000000    59:
        0 0.000000 0.000000    60:
        0 0.000000 0.000000    61:
        0 0.000000 0.000000    62:
        0 0.000000 0.000000    63:
        0 0.000000 0.000000    64:
        0 0.000000 0.000000    65:use strict;
        0 0.000000 0.000000    66:use vars qw(@ISA @EXPORT @EXPORT_OK
        0 0.000000 0.000000    67:use vars qw(%entity2char %char2entity);
        0 0.000000 0.000000    68:
        0 0.000000 0.000000    69:require 5.004;
        0 0.000000 0.000000    70:require Exporter;
        0 0.000000 0.000000    71:@ISA = qw(Exporter);
        0 0.000000 0.000000    72:
        0 0.000000 0.000000    73:@EXPORT = qw(encode_entities decode_entities
        0 0.000000 0.000000    74:@EXPORT_OK = qw(%entity2char %char2entity);
        0 0.000000 0.000000    75:
        0 0.000000 0.000000    76:$VERSION = sprintf("%d.%02d", q$Revision:
        0 0.000000 0.000000    77:sub Version { $VERSION; }
        0 0.000000 0.000000    78:
        0 0.000000 0.000000    79:require HTML::Parser;  # for fast XS
        0 0.000000 0.000000    80:
        0 0.000000 0.000000    81:
        0 0.000000 0.000000    82:%entity2char = (
        0 0.000000 0.000000    83: # Some normal chars that have special
        0 0.000000 0.000000    84: amp    => '&',  # ampersand
        0 0.000000 0.000000    85:'gt'    => '>',  # greater than
        0 0.000000 0.000000    86:'lt'    => '<',  # less than
        0 0.000000 0.000000    87: quot   => '"',  # double quote
        0 0.000000 0.000000    88:
        0 0.000000 0.000000    89: # PUBLIC ISO 8879-1986//ENTITIES Added Latin
        0 0.000000 0.000000    90: AElig => '',  # capital AE diphthong
        0 0.000000 0.000000    91: Aacute => '',  # capital A, acute accent
        0 0.000000 0.000000    92: Acirc => '',  # capital A, circumflex
        0 0.000000 0.000000    93: Agrave => '',  # capital A, grave accent
        0 0.000000 0.000000    94: Aring => '',  # capital A, ring
        0 0.000000 0.000000    95: Atilde => '',  # capital A, tilde
        0 0.000000 0.000000    96: Auml => '',  # capital A, dieresis or
        0 0.000000 0.000000    97: Ccedil => '',  # capital C, cedilla
        0 0.000000 0.000000    98: ETH => '',  # capital Eth, Icelandic
        0 0.000000 0.000000    99: Eacute => '',  # capital E, acute accent
        0 0.000000 0.000000   100: Ecirc => '',  # capital E, circumflex
        0 0.000000 0.000000   101: Egrave => '',  # capital E, grave accent
        0 0.000000 0.000000   102: Euml => '',  # capital E, dieresis or
        0 0.000000 0.000000   103: Iacute => '',  # capital I, acute accent
        0 0.000000 0.000000   104: Icirc => '',  # capital I, circumflex
        0 0.000000 0.000000   105: Igrave => '',  # capital I, grave accent
        0 0.000000 0.000000   106: Iuml => '',  # capital I, dieresis or
        0 0.000000 0.000000   107: Ntilde => '',  # capital N, tilde
        0 0.000000 0.000000   108: Oacute => '',  # capital O, acute accent
        0 0.000000 0.000000   109: Ocirc => '',  # capital O, circumflex
        0 0.000000 0.000000   110: Ograve => '',  # capital O, grave accent
        0 0.000000 0.000000   111: Oslash => '',  # capital O, slash
        0 0.000000 0.000000   112: Otilde => '',  # capital O, tilde
            ================ SmallProf version 0.9 ================
         Profile of /usr/lib/perl5/site_perl/5.005/i686-linux/HTML/Ent Page 480
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   113: Ouml => '',  # capital O, dieresis or
        0 0.000000 0.000000   114: THORN => '',  # capital THORN, Icelandic
        0 0.000000 0.000000   115: Uacute => '',  # capital U, acute accent
        0 0.000000 0.000000   116: Ucirc => '',  # capital U, circumflex
        0 0.000000 0.000000   117: Ugrave => '',  # capital U, grave accent
        0 0.000000 0.000000   118: Uuml => '',  # capital U, dieresis or
        0 0.000000 0.000000   119: Yacute => '',  # capital Y, acute accent
        0 0.000000 0.000000   120: aacute => '',  # small a, acute accent
        0 0.000000 0.000000   121: acirc => '',  # small a, circumflex accent
        0 0.000000 0.000000   122: aelig => '',  # small ae diphthong
        0 0.000000 0.000000   123: agrave => '',  # small a, grave accent
        0 0.000000 0.000000   124: aring => '',  # small a, ring
        0 0.000000 0.000000   125: atilde => '',  # small a, tilde
        0 0.000000 0.000000   126: auml => '',  # small a, dieresis or umlaut
        0 0.000000 0.000000   127: ccedil => '',  # small c, cedilla
        0 0.000000 0.000000   128: eacute => '',  # small e, acute accent
        0 0.000000 0.000000   129: ecirc => '',  # small e, circumflex accent
        0 0.000000 0.000000   130: egrave => '',  # small e, grave accent
        0 0.000000 0.000000   131: eth => '',  # small eth, Icelandic
        0 0.000000 0.000000   132: euml => '',  # small e, dieresis or umlaut
        0 0.000000 0.000000   133: iacute => '',  # small i, acute accent
        0 0.000000 0.000000   134: icirc => '',  # small i, circumflex accent
        0 0.000000 0.000000   135: igrave => '',  # small i, grave accent
        0 0.000000 0.000000   136: iuml => '',  # small i, dieresis or umlaut
        0 0.000000 0.000000   137: ntilde => '',  # small n, tilde
        0 0.000000 0.000000   138: oacute => '',  # small o, acute accent
        0 0.000000 0.000000   139: ocirc => '',  # small o, circumflex accent
        0 0.000000 0.000000   140: ograve => '',  # small o, grave accent
        0 0.000000 0.000000   141: oslash => '',  # small o, slash
        0 0.000000 0.000000   142: otilde => '',  # small o, tilde
        0 0.000000 0.000000   143: ouml => '',  # small o, dieresis or umlaut
        0 0.000000 0.000000   144: szlig => '',  # small sharp s, German (sz
        0 0.000000 0.000000   145: thorn => '',  # small thorn, Icelandic
        0 0.000000 0.000000   146: uacute => '',  # small u, acute accent
        0 0.000000 0.000000   147: ucirc => '',  # small u, circumflex accent
        0 0.000000 0.000000   148: ugrave => '',  # small u, grave accent
        0 0.000000 0.000000   149: uuml => '',  # small u, dieresis or umlaut
        0 0.000000 0.000000   150: yacute => '',  # small y, acute accent
        0 0.000000 0.000000   151: yuml => '',  # small y, dieresis or umlaut
        0 0.000000 0.000000   152:
        0 0.000000 0.000000   153: # Some extra Latin 1 chars that are listed
        0 0.000000 0.000000   154: copy   => '',  # copyright sign
        0 0.000000 0.000000   155: reg    => '',  # registered sign
        0 0.000000 0.000000   156: nbsp   => "\240", # non breaking space
        0 0.000000 0.000000   157:
        0 0.000000 0.000000   158: # Additional ISO-8859/1 entities listed in
        0 0.000000 0.000000   159: iexcl  => '',
        0 0.000000 0.000000   160: cent   => '',
        0 0.000000 0.000000   161: pound  => '',
        0 0.000000 0.000000   162: curren => '',
        0 0.000000 0.000000   163: yen    => '',
        0 0.000000 0.000000   164: brvbar => '',
        0 0.000000 0.000000   165: sect   => '',
        0 0.000000 0.000000   166: uml    => '',
        0 0.000000 0.000000   167: ordf   => '',
        0 0.000000 0.000000   168: laquo  => '',
            ================ SmallProf version 0.9 ================
         Profile of /usr/lib/perl5/site_perl/5.005/i686-linux/HTML/Ent Page 481
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   169:'not'   => '',    # not is a keyword in perl
        0 0.000000 0.000000   170: shy    => '',
        0 0.000000 0.000000   171: macr   => '',
        0 0.000000 0.000000   172: deg    => '',
        0 0.000000 0.000000   173: plusmn => '',
        0 0.000000 0.000000   174: sup1   => '',
        0 0.000000 0.000000   175: sup2   => '',
        0 0.000000 0.000000   176: sup3   => '',
        0 0.000000 0.000000   177: acute  => '',
        0 0.000000 0.000000   178: micro  => '',
        0 0.000000 0.000000   179: para   => '',
        0 0.000000 0.000000   180: middot => '',
        0 0.000000 0.000000   181: cedil  => '',
        0 0.000000 0.000000   182: ordm   => '',
        0 0.000000 0.000000   183: raquo  => '',
        0 0.000000 0.000000   184: frac14 => '',
        0 0.000000 0.000000   185: frac12 => '',
        0 0.000000 0.000000   186: frac34 => '',
        0 0.000000 0.000000   187: iquest => '',
        0 0.000000 0.000000   188:'times' => '',    # times is a keyword in
        0 0.000000 0.000000   189: divide => '',
        0 0.000000 0.000000   190:
        0 0.000000 0.000000   191: ( $] >= 5.006 ? (
        0 0.000000 0.000000   192:   OElig    => chr(338),
        0 0.000000 0.000000   193:   oelig    => chr(339),
        0 0.000000 0.000000   194:   Scaron   => chr(352),
        0 0.000000 0.000000   195:   scaron   => chr(353),
        0 0.000000 0.000000   196:   Yuml     => chr(376),
        0 0.000000 0.000000   197:   fnof     => chr(402),
        0 0.000000 0.000000   198:   circ     => chr(710),
        0 0.000000 0.000000   199:   tilde    => chr(732),
        0 0.000000 0.000000   200:   Alpha    => chr(913),
        0 0.000000 0.000000   201:   Beta     => chr(914),
        0 0.000000 0.000000   202:   Gamma    => chr(915),
        0 0.000000 0.000000   203:   Delta    => chr(916),
        0 0.000000 0.000000   204:   Epsilon  => chr(917),
        0 0.000000 0.000000   205:   Zeta     => chr(918),
        0 0.000000 0.000000   206:   Eta      => chr(919),
        0 0.000000 0.000000   207:   Theta    => chr(920),
        0 0.000000 0.000000   208:   Iota     => chr(921),
        0 0.000000 0.000000   209:   Kappa    => chr(922),
        0 0.000000 0.000000   210:   Lambda   => chr(923),
        0 0.000000 0.000000   211:   Mu       => chr(924),
        0 0.000000 0.000000   212:   Nu       => chr(925),
        0 0.000000 0.000000   213:   Xi       => chr(926),
        0 0.000000 0.000000   214:   Omicron  => chr(927),
        0 0.000000 0.000000   215:   Pi       => chr(928),
        0 0.000000 0.000000   216:   Rho      => chr(929),
        0 0.000000 0.000000   217:   Sigma    => chr(931),
        0 0.000000 0.000000   218:   Tau      => chr(932),
        0 0.000000 0.000000   219:   Upsilon  => chr(933),
        0 0.000000 0.000000   220:   Phi      => chr(934),
        0 0.000000 0.000000   221:   Chi      => chr(935),
        0 0.000000 0.000000   222:   Psi      => chr(936),
        0 0.000000 0.000000   223:   Omega    => chr(937),
        0 0.000000 0.000000   224:   alpha    => chr(945),
            ================ SmallProf version 0.9 ================
         Profile of /usr/lib/perl5/site_perl/5.005/i686-linux/HTML/Ent Page 482
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   225:   beta     => chr(946),
        0 0.000000 0.000000   226:   gamma    => chr(947),
        0 0.000000 0.000000   227:   delta    => chr(948),
        0 0.000000 0.000000   228:   epsilon  => chr(949),
        0 0.000000 0.000000   229:   zeta     => chr(950),
        0 0.000000 0.000000   230:   eta      => chr(951),
        0 0.000000 0.000000   231:   theta    => chr(952),
        0 0.000000 0.000000   232:   iota     => chr(953),
        0 0.000000 0.000000   233:   kappa    => chr(954),
        0 0.000000 0.000000   234:   lambda   => chr(955),
        0 0.000000 0.000000   235:   mu       => chr(956),
        0 0.000000 0.000000   236:   nu       => chr(957),
        0 0.000000 0.000000   237:   xi       => chr(958),
        0 0.000000 0.000000   238:   omicron  => chr(959),
        0 0.000000 0.000000   239:   pi       => chr(960),
        0 0.000000 0.000000   240:   rho      => chr(961),
        0 0.000000 0.000000   241:   sigmaf   => chr(962),
        0 0.000000 0.000000   242:   sigma    => chr(963),
        0 0.000000 0.000000   243:   tau      => chr(964),
        0 0.000000 0.000000   244:   upsilon  => chr(965),
        0 0.000000 0.000000   245:   phi      => chr(966),
        0 0.000000 0.000000   246:   chi      => chr(967),
        0 0.000000 0.000000   247:   psi      => chr(968),
        0 0.000000 0.000000   248:   omega    => chr(969),
        0 0.000000 0.000000   249:   thetasym => chr(977),
        0 0.000000 0.000000   250:   upsih    => chr(978),
        0 0.000000 0.000000   251:   piv      => chr(982),
        0 0.000000 0.000000   252:   ensp     => chr(8194),
        0 0.000000 0.000000   253:   emsp     => chr(8195),
        0 0.000000 0.000000   254:   thinsp   => chr(8201),
        0 0.000000 0.000000   255:   zwnj     => chr(8204),
        0 0.000000 0.000000   256:   zwj      => chr(8205),
        0 0.000000 0.000000   257:   lrm      => chr(8206),
        0 0.000000 0.000000   258:   rlm      => chr(8207),
        0 0.000000 0.000000   259:   ndash    => chr(8211),
        0 0.000000 0.000000   260:   mdash    => chr(8212),
        0 0.000000 0.000000   261:   lsquo    => chr(8216),
        0 0.000000 0.000000   262:   rsquo    => chr(8217),
        0 0.000000 0.000000   263:   sbquo    => chr(8218),
        0 0.000000 0.000000   264:   ldquo    => chr(8220),
        0 0.000000 0.000000   265:   rdquo    => chr(8221),
        0 0.000000 0.000000   266:   bdquo    => chr(8222),
        0 0.000000 0.000000   267:   dagger   => chr(8224),
        0 0.000000 0.000000   268:   Dagger   => chr(8225),
        0 0.000000 0.000000   269:   bull     => chr(8226),
        0 0.000000 0.000000   270:   hellip   => chr(8230),
        0 0.000000 0.000000   271:   permil   => chr(8240),
        0 0.000000 0.000000   272:   prime    => chr(8242),
        0 0.000000 0.000000   273:   Prime    => chr(8243),
        0 0.000000 0.000000   274:   lsaquo   => chr(8249),
        0 0.000000 0.000000   275:   rsaquo   => chr(8250),
        0 0.000000 0.000000   276:   oline    => chr(8254),
        0 0.000000 0.000000   277:   frasl    => chr(8260),
        0 0.000000 0.000000   278:   euro     => chr(8364),
        0 0.000000 0.000000   279:   image    => chr(8465),
        0 0.000000 0.000000   280:   weierp   => chr(8472),
            ================ SmallProf version 0.9 ================
         Profile of /usr/lib/perl5/site_perl/5.005/i686-linux/HTML/Ent Page 483
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   281:   real     => chr(8476),
        0 0.000000 0.000000   282:   trade    => chr(8482),
        0 0.000000 0.000000   283:   alefsym  => chr(8501),
        0 0.000000 0.000000   284:   larr     => chr(8592),
        0 0.000000 0.000000   285:   uarr     => chr(8593),
        0 0.000000 0.000000   286:   rarr     => chr(8594),
        0 0.000000 0.000000   287:   darr     => chr(8595),
        0 0.000000 0.000000   288:   harr     => chr(8596),
        0 0.000000 0.000000   289:   crarr    => chr(8629),
        0 0.000000 0.000000   290:   lArr     => chr(8656),
        0 0.000000 0.000000   291:   uArr     => chr(8657),
        0 0.000000 0.000000   292:   rArr     => chr(8658),
        0 0.000000 0.000000   293:   dArr     => chr(8659),
        0 0.000000 0.000000   294:   hArr     => chr(8660),
        0 0.000000 0.000000   295:   forall   => chr(8704),
        0 0.000000 0.000000   296:   part     => chr(8706),
        0 0.000000 0.000000   297:   exist    => chr(8707),
        0 0.000000 0.000000   298:   empty    => chr(8709),
        0 0.000000 0.000000   299:   nabla    => chr(8711),
        0 0.000000 0.000000   300:   isin     => chr(8712),
        0 0.000000 0.000000   301:   notin    => chr(8713),
        0 0.000000 0.000000   302:   ni       => chr(8715),
        0 0.000000 0.000000   303:   prod     => chr(8719),
        0 0.000000 0.000000   304:   sum      => chr(8721),
        0 0.000000 0.000000   305:   minus    => chr(8722),
        0 0.000000 0.000000   306:   lowast   => chr(8727),
        0 0.000000 0.000000   307:   radic    => chr(8730),
        0 0.000000 0.000000   308:   prop     => chr(8733),
        0 0.000000 0.000000   309:   infin    => chr(8734),
        0 0.000000 0.000000   310:   ang      => chr(8736),
        0 0.000000 0.000000   311:  'and'     => chr(8743),
        0 0.000000 0.000000   312:  'or'      => chr(8744),
        0 0.000000 0.000000   313:   cap      => chr(8745),
        0 0.000000 0.000000   314:   cup      => chr(8746),
        0 0.000000 0.000000   315:  'int'     => chr(8747),
        0 0.000000 0.000000   316:   there4   => chr(8756),
        0 0.000000 0.000000   317:   sim      => chr(8764),
        0 0.000000 0.000000   318:   cong     => chr(8773),
        0 0.000000 0.000000   319:   asymp    => chr(8776),
        0 0.000000 0.000000   320:  'ne'      => chr(8800),
        0 0.000000 0.000000   321:   equiv    => chr(8801),
        0 0.000000 0.000000   322:  'le'      => chr(8804),
        0 0.000000 0.000000   323:  'ge'      => chr(8805),
        0 0.000000 0.000000   324:  'sub'     => chr(8834),
        0 0.000000 0.000000   325:   sup      => chr(8835),
        0 0.000000 0.000000   326:   nsub     => chr(8836),
        0 0.000000 0.000000   327:   sube     => chr(8838),
        0 0.000000 0.000000   328:   supe     => chr(8839),
        0 0.000000 0.000000   329:   oplus    => chr(8853),
        0 0.000000 0.000000   330:   otimes   => chr(8855),
        0 0.000000 0.000000   331:   perp     => chr(8869),
        0 0.000000 0.000000   332:   sdot     => chr(8901),
        0 0.000000 0.000000   333:   lceil    => chr(8968),
        0 0.000000 0.000000   334:   rceil    => chr(8969),
        0 0.000000 0.000000   335:   lfloor   => chr(8970),
        0 0.000000 0.000000   336:   rfloor   => chr(8971),
            ================ SmallProf version 0.9 ================
         Profile of /usr/lib/perl5/site_perl/5.005/i686-linux/HTML/Ent Page 484
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   337:   lang     => chr(9001),
        0 0.000000 0.000000   338:   rang     => chr(9002),
        0 0.000000 0.000000   339:   loz      => chr(9674),
        0 0.000000 0.000000   340:   spades   => chr(9824),
        0 0.000000 0.000000   341:   clubs    => chr(9827),
        0 0.000000 0.000000   342:   hearts   => chr(9829),
        0 0.000000 0.000000   343:   diams    => chr(9830),
        0 0.000000 0.000000   344: ) : ())
        0 0.000000 0.000000   345:);
        0 0.000000 0.000000   346:
        0 0.000000 0.000000   347:
        0 0.000000 0.000000   348:# Make the oposite mapping
        0 0.000000 0.000000   349:while (my($entity, $char) =
        0 0.000000 0.000000   350:    $char2entity{$char} = "&$entity;";
        0 0.000000 0.000000   351:}
        0 0.000000 0.000000   352:
        0 0.000000 0.000000   353:# Fill inn missing entities
        0 0.000000 0.000000   354:for (0 .. 255) {
        0 0.000000 0.000000   355:    next if exists $char2entity{chr($_)};
        0 0.000000 0.000000   356:    $char2entity{chr($_)} = "&#$_;";
        0 0.000000 0.000000   357:}
        0 0.000000 0.000000   358:
        0 0.000000 0.000000   359:my %subst;  # compiled encoding regexps
        0 0.000000 0.000000   360:
        0 0.000000 0.000000   361:sub decode_entities_old
        0 0.000000 0.000000   362:{
        0 0.000000 0.000000   363:    my $array;
        0 0.000000 0.000000   364:    if (defined wantarray) {
        0 0.000000 0.000000   365: $array = [@_]; # copy
        0 0.000000 0.000000   366:    } else {
        0 0.000000 0.000000   367: $array = \@_;  # modify in-place
        0 0.000000 0.000000   368:    }
        0 0.000000 0.000000   369:    my $c;
        0 0.000000 0.000000   370:    for (@$array) {
        0 0.000000 0.000000   371: s/(&\#(\d+);?)/$2 < 256 ? chr($2) : $1/eg;
        0 0.000000 0.000000   372: s/(&\#[xX]([0-9a-fA-F]+);?)/$c = hex($2); $c
        0 0.000000 0.000000   373: s/(&(\w+);?)/$entity2char{$2} || $1/eg;
        0 0.000000 0.000000   374:    }
        0 0.000000 0.000000   375:    wantarray ? @$array : $array->[0];
        0 0.000000 0.000000   376:}
        0 0.000000 0.000000   377:
       15 0.000000 0.000000   378:sub encode_entities
        0 0.000000 0.000000   379:{
       15 0.000042 0.000000   380:    my $ref;
       15 0.000046 0.000000   381:    if (defined wantarray) {
       15 0.000147 0.000000   382: my $x = $_[0];
       15 0.000075 0.000000   383: $ref = \$x;     # copy
        0 0.000000 0.000000   384:    } else {
        0 0.000000 0.000000   385: $ref = \$_[0];  # modify in-place
        0 0.000000 0.000000   386:    }
       15 0.000040 0.000000   387:    if (defined $_[1]) {
        0 0.000000 0.000000   388: unless (exists $subst{$_[1]}) {
        0 0.000000 0.000000   389:     # Because we can't compile regex we fake
        0 0.000000 0.000000   390:     $subst{$_[1]} =
        0 0.000000 0.000000   391:       eval "sub {\$_[0] =~
        0 0.000000 0.000000   392:     die $@ if $@;
            ================ SmallProf version 0.9 ================
         Profile of /usr/lib/perl5/site_perl/5.005/i686-linux/HTML/Ent Page 485
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   393: }
        0 0.000000 0.000000   394: &{$subst{$_[1]}}($$ref);
        0 0.000000 0.000000   395:    } else {
        0 0.000000 0.000000   396: # Encode control chars, high bit chars and
       73 0.001458 0.000000   397: $$ref =~ s/([^\n\t !\#\$%\'-;=?-
        0 0.000000 0.000000   398:    }
       15 0.000290 0.000000   399:    $$ref;
        0 0.000000 0.000000   400:}
        0 0.000000 0.000000   401:
        0 0.000000 0.000000   402:sub num_entity {
        0 0.000000 0.000000   403:    sprintf "&#x%X;", ord($_[0]);
        0 0.000000 0.000000   404:}
        0 0.000000 0.000000   405:
        0 0.000000 0.000000   406:# Set up aliases
        0 0.000000 0.000000   407:*encode = \&encode_entities;
        0 0.000000 0.000000   408:*decode = \&decode_entities;
        0 0.000000 0.000000   409:
        0 0.000000 0.000000   410:1;
            ================ SmallProf version 0.9 ================
         Profile of /usr/lib/perl5/site_perl/5.005/i686-linux/Mysql.pm Page 486
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000     1:# -*- perl -*-
        0 0.000000 0.000000     2:
        0 0.000000 0.000000     3:package Mysql;
        0 0.000000 0.000000     4:
        0 0.000000 0.000000     5:use 5.004;
        0 0.000000 0.000000     6:use strict;
        0 0.000000 0.000000     7:
        0 0.000000 0.000000     8:require Carp;
        0 0.000000 0.000000     9:require DynaLoader;
        0 0.000000 0.000000    10:require Exporter;
        0 0.000000 0.000000    11:require DBI;
        0 0.000000 0.000000    12:require Mysql::Statement;
        0 0.000000 0.000000    13:require DBD::mysql;
        0 0.000000 0.000000    14:
        0 0.000000 0.000000    15:use vars qw($QUIET @ISA @EXPORT @EXPORT_OK
        0 0.000000 0.000000    16:
        0 0.000000 0.000000    17:$db_errstr = '';
        0 0.000000 0.000000    18:$QUIET  = 0;
        0 0.000000 0.000000    19:@ISA    = qw(DBI); # Inherits Exporter and
        0 0.000000 0.000000    20:$VERSION = '1.2215';
        0 0.000000 0.000000    21:
        0 0.000000 0.000000    22:# @EXPORT is a relict from old times...
        0 0.000000 0.000000    23:@EXPORT = qw(
        0 0.000000 0.000000    24:      CHAR_TYPE
        0 0.000000 0.000000    25:      INT_TYPE
        0 0.000000 0.000000    26:      REAL_TYPE
        0 0.000000 0.000000    27:     );
        0 0.000000 0.000000    28:@EXPORT_OK = qw(
        0 0.000000 0.000000    29:  IDENT_TYPE
        0 0.000000 0.000000    30:  NULL_TYPE
        0 0.000000 0.000000    31:  TEXT_TYPE
        0 0.000000 0.000000    32:  DATE_TYPE
        0 0.000000 0.000000    33:  UINT_TYPE
        0 0.000000 0.000000    34:  MONEY_TYPE
        0 0.000000 0.000000    35:  TIME_TYPE
        0 0.000000 0.000000    36:  IDX_TYPE
        0 0.000000 0.000000    37:  SYSVAR_TYPE
        0 0.000000 0.000000    38:        );
        0 0.000000 0.000000    39:
        0 0.000000 0.000000    40:my $FETCH_map = {
        0 0.000000 0.000000    41:    'HOST' => '_host',
        0 0.000000 0.000000    42:    'DATABASE' => 'database'
        0 0.000000 0.000000    43:};
        0 0.000000 0.000000    44:
        0 0.000000 0.000000    45:sub FETCH ($$) {
        0 0.000000 0.000000    46:    my($self, $key) = @_;
        0 0.000000 0.000000    47:    if ($key eq 'COMPATIBILITY') {
        0 0.000000 0.000000    48: return $self->{'COMPATIBILITY'};
        0 0.000000 0.000000    49:    }
        0 0.000000 0.000000    50:    if (exists($FETCH_map->{$key})) {
        0 0.000000 0.000000    51: $key = $FETCH_map->{$key};
        0 0.000000 0.000000    52:    }
        0 0.000000 0.000000    53:    my($dbh) = $self->{'dbh'};
        0 0.000000 0.000000    54:    $dbh->{$key};
        0 0.000000 0.000000    55:}
        0 0.000000 0.000000    56:
            ================ SmallProf version 0.9 ================
         Profile of /usr/lib/perl5/site_perl/5.005/i686-linux/Mysql.pm Page 487
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000    57:sub STORE ($$$) {
        0 0.000000 0.000000    58:    my($self, $key, $val) = @_;
        0 0.000000 0.000000    59:    if ($key eq 'COMPATIBILITY') {
        0 0.000000 0.000000    60: $self->{'COMPATIBILITY'} = $val;
        0 0.000000 0.000000    61:    } else {
        0 0.000000 0.000000    62: $self->{'dbh'}->{$key} = $val;
        0 0.000000 0.000000    63:    }
        0 0.000000 0.000000    64:}
        0 0.000000 0.000000    65:
        1 0.000000 0.000000    66:sub connect ($;$$$$) {
        1 0.000013 0.000000    67:    my($class, $host, $db, $user, $password)
        1 0.000030 0.000000    68:    my($self) = { 'host' => ($host || ''),
        0 0.000000 0.000000    69:    'user' => $user,
        0 0.000000 0.000000    70:    'password' => $password,
        0 0.000000 0.000000    71:    'db' => $db,
        0 0.000000 0.000000    72:           'driver' => 'mysql',
        0 0.000000 0.000000    73:           'COMPATIBILITY' => 1 };
        1 0.000027 0.000000    74:    bless($self, $class);
        1 0.000090 0.000000    75:    $self->{'drh'} = DBI-
        1 0.000028 0.010000    76:    if ($db) {
        1 0.000012 0.000000    77: my $dsn =
        1 0.000122 0.000000    78: my $dbh = $class->SUPER::connect($dsn,
        1 0.000004 0.000000    79: if (!$dbh) {
        0 0.000000 0.000000    80:     $db_errstr = $DBI::errstr;
        0 0.000000 0.000000    81:     return undef;
        0 0.000000 0.000000    82: }
        1 0.000012 0.000000    83: $self->{'dbh'} = $dbh;
        1 0.000044 0.000000    84: $dbh->{'CompatMode'} = 1;
        1 0.000046 0.000000    85: $dbh->{'PrintError'} = !$Mysql::QUIET;
        0 0.000000 0.000000    86:    }
        1 0.000024 0.000000    87:    $self;
        0 0.000000 0.000000    88:}
        0 0.000000 0.000000    89:
        0 0.000000 0.000000    90:sub DESTROY {
        0 0.000000 0.000000    91:    my $self = shift;
        0 0.000000 0.000000    92:    my $dbh = $self->{'dbh'};
        0 0.000000 0.000000    93:    if ($dbh) {
        0 0.000000 0.000000    94: local $SIG{'__WARN__'} = sub {};
        0 0.000000 0.000000    95: $dbh->disconnect();
        0 0.000000 0.000000    96:    }
        0 0.000000 0.000000    97:}
        0 0.000000 0.000000    98:
        0 0.000000 0.000000    99:sub selectdb ($$) {
        0 0.000000 0.000000   100:    my($self, $db) = @_;
        0 0.000000 0.000000   101:    my $dsn = "DBI:mysql:database=$db:host="
        0 0.000000 0.000000   102:    my $dbh = DBI->connect($dsn, $self-
        0 0.000000 0.000000   103:    if (!$dbh) {
        0 0.000000 0.000000   104: $db_errstr = $self->{'errstr'} =
        0 0.000000 0.000000   105: $self->{'errno'} = $DBI::err;
        0 0.000000 0.000000   106: undef;
        0 0.000000 0.000000   107:    } else {
        0 0.000000 0.000000   108: if ($self->{'dbh'}) {
        0 0.000000 0.000000   109:     local $SIG{'__WARN__'} = sub {};
        0 0.000000 0.000000   110:     $self->{'dbh'}->disconnect();
        0 0.000000 0.000000   111: }
        0 0.000000 0.000000   112: $self->{'dbh'} = $dbh;
            ================ SmallProf version 0.9 ================
         Profile of /usr/lib/perl5/site_perl/5.005/i686-linux/Mysql.pm Page 488
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   113: $self->{'db'} = $db;
        0 0.000000 0.000000   114: $self;
        0 0.000000 0.000000   115:    }
        0 0.000000 0.000000   116:}
        0 0.000000 0.000000   117:
        0 0.000000 0.000000   118:sub listdbs ($) {
        0 0.000000 0.000000   119:    my($self) = shift;
        0 0.000000 0.000000   120:    my $drh = $self->{'drh'};
        0 0.000000 0.000000   121:    my @dbs = $drh->func($self->{'host'},
        0 0.000000 0.000000   122:    $db_errstr = $drh->errstr();
        0 0.000000 0.000000   123:    @dbs;
        0 0.000000 0.000000   124:}
        0 0.000000 0.000000   125:
        0 0.000000 0.000000   126:sub listtables ($) {
        0 0.000000 0.000000   127:    my($self) = shift;
        0 0.000000 0.000000   128:    $self->{'dbh'}->func('_ListTables');
        0 0.000000 0.000000   129:}
        0 0.000000 0.000000   130:
        2 0.000000 0.000000   131:sub quote ($$) {
        2 0.000010 0.000000   132:    my($self) = shift;
        2 0.000018 0.000000   133:    my $obj = (ref($self) && $self->{'dbh'})
        0 0.000000 0.000000   134: $self->{'dbh'} : 'DBD::mysql::db';
        2 0.000304 0.000000   135:    $obj->quote(shift);
        0 0.000000 0.000000   136:}
        0 0.000000 0.000000   137:
        0 0.000000 0.000000   138:sub errmsg ($) {
        0 0.000000 0.000000   139:    my $self = shift;
        0 0.000000 0.000000   140:    if (!ref($self)) {
        0 0.000000 0.000000   141: $DBI::errstr || $db_errstr;
        0 0.000000 0.000000   142:    } elsif ($self->{'dbh'}) {
        0 0.000000 0.000000   143: $self->{'dbh'}->errstr();
        0 0.000000 0.000000   144:    } else {
        0 0.000000 0.000000   145: $self->{'drh'}->errstr();
        0 0.000000 0.000000   146:    }
        0 0.000000 0.000000   147:}
        0 0.000000 0.000000   148:
        0 0.000000 0.000000   149:sub errno ($) {
        0 0.000000 0.000000   150:    my $self = shift;
        0 0.000000 0.000000   151:    if ($self->{'dbh'}) {
        0 0.000000 0.000000   152: $self->{'dbh'}->err();
        0 0.000000 0.000000   153:    } else {
        0 0.000000 0.000000   154: $self->{'drh'}->err();
        0 0.000000 0.000000   155:    }
        0 0.000000 0.000000   156:}
        0 0.000000 0.000000   157:
        0 0.000000 0.000000   158:sub listfields ($$) {
        0 0.000000 0.000000   159:    my($self, $table) = @_;
        0 0.000000 0.000000   160:    $self->query("LISTFIELDS $table");
        0 0.000000 0.000000   161:}
        0 0.000000 0.000000   162:
      157 0.000000 0.000000   163:sub query ($$) {
      157 0.001755 0.000000   164:    my($self, $statement) = @_;
      157 0.000949 0.000000   165:    my $dbh = $self->{'dbh'};
      157 0.022302 0.010000   166:    my $sth = $dbh->prepare($statement);
      157 0.000575 0.000000   167:    if (!$sth) {
        0 0.000000 0.000000   168: $db_errstr = $dbh->errstr();
            ================ SmallProf version 0.9 ================
         Profile of /usr/lib/perl5/site_perl/5.005/i686-linux/Mysql.pm Page 489
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   169: return undef;
        0 0.000000 0.000000   170:    }
      157 0.011371 0.000000   171:    $sth->{'PrintError'} = !$Mysql::QUIET;
      157 1.383231 0.060000   172:    my $result = $sth->execute();
      157 0.001925 0.010000   173:    if (!$result) {
        0 0.000000 0.000000   174: $db_errstr = $sth->errstr();
        0 0.000000 0.000000   175: return undef;
        0 0.000000 0.000000   176:    }
      157 0.014461 0.030000   177:    $sth->{'CompatMode'} = 1;
      157 0.002981 0.010000   178:    bless($sth, ref($self) . "::Statement");
      157 0.000841 0.010000   179:    undef $db_errstr;
      157 0.003568 0.000000   180:    $sth;
        0 0.000000 0.000000   181:}
        0 0.000000 0.000000   182:
        0 0.000000 0.000000   183:sub shutdown ($) {
        0 0.000000 0.000000   184:    my($self) = shift;
        0 0.000000 0.000000   185:    if ($self->{'dbh'}) {
        0 0.000000 0.000000   186: $self->{'dbh'}->admin('shutdown', 'admin');
        0 0.000000 0.000000   187:    } else {
        0 0.000000 0.000000   188: $self->{'drh'}->func('shutdown', $self-
        0 0.000000 0.000000   189:        $self->{'password'}, 'admin');
        0 0.000000 0.000000   190:    }
        0 0.000000 0.000000   191:}
        0 0.000000 0.000000   192:
        0 0.000000 0.000000   193:sub createdb ($$) {
        0 0.000000 0.000000   194:    my($self, $db) = @_;
        0 0.000000 0.000000   195:    if ($self->{'dbh'}) {
        0 0.000000 0.000000   196: $self->{'dbh'}->admin('createdb', $db,
        0 0.000000 0.000000   197:    } else {
        0 0.000000 0.000000   198: $self->{'drh'}->func('createdb', $db, $self-
        0 0.000000 0.000000   199:        $self->{'user'}, $self->{'password'},
        0 0.000000 0.000000   200:    }
        0 0.000000 0.000000   201:}
        0 0.000000 0.000000   202:
        0 0.000000 0.000000   203:sub dropdb ($$) {
        0 0.000000 0.000000   204:    my($self, $db) = @_;
        0 0.000000 0.000000   205:    if ($self->{'dbh'}) {
        0 0.000000 0.000000   206: $self->{'dbh'}->admin('dropdb', $db,
        0 0.000000 0.000000   207:    } else {
        0 0.000000 0.000000   208: $self->{'drh'}->func('dropdb', $db, $self-
        0 0.000000 0.000000   209:        $self->{'user'}, $self->{'password'},
        0 0.000000 0.000000   210:    }
        0 0.000000 0.000000   211:}
        0 0.000000 0.000000   212:
        0 0.000000 0.000000   213:sub host     ($) { shift->{'host'} }
        0 0.000000 0.000000   214:sub database ($) { shift->{'db'} }
        0 0.000000 0.000000   215:sub info ($) { shift->{'dbh'}->{'info'} }
        0 0.000000 0.000000   216:sub sock ($) { shift->{'dbh'}->{'sock'} }
        0 0.000000 0.000000   217:sub sockfd ($) { shift->{'dbh'}->{'sockfd'} }
        0 0.000000 0.000000   218:
        0 0.000000 0.000000   219:
      158 0.000000 0.000000   220:sub AUTOLOAD {
      158 0.000713 0.000000   221:    my $meth = $Mysql::AUTOLOAD;
      158 0.000630 0.010000   222:    my $converted = 0;
        0 0.000000 0.000000   223:
      158 0.000349 0.000000   224:    my $class;
            ================ SmallProf version 0.9 ================
         Profile of /usr/lib/perl5/site_perl/5.005/i686-linux/Mysql.pm Page 490
       =================================================================
    count wall tm  cpu time line
      158 0.002095 0.000000   225:    if ($meth =~ /(.*)::(.*)/) {
      158 0.001532 0.010000   226: $meth = $2;
      158 0.001469 0.000000   227: $class = $1;
        0 0.000000 0.000000   228:    } else {
        0 0.000000 0.000000   229: $class = "main";
        0 0.000000 0.000000   230:    }
        0 0.000000 0.000000   231:
        0 0.000000 0.000000   232:
      158 0.009609 0.010000   233:    TRY: {
      158 0.000511 0.010000   234: my $val = DBD::mysql::constant($meth, @_ ?
      158 0.008103 0.010000   235: if ($! == 0) {
        0 0.000000 0.000000   236:     eval "sub $Mysql::AUTOLOAD { $val }";
        0 0.000000 0.000000   237:     return $val;
        0 0.000000 0.000000   238: }
        0 0.000000 0.000000   239:
      158 0.000652 0.000000   240: if (!$converted) {
      158 0.000893 0.000000   241:     $meth =~ s/_//g;
      158 0.000632 0.000000   242:     $meth = lc($meth);
      158 0.000521 0.000000   243:     $converted = 1;
        0 0.000000 0.000000   244: }
        0 0.000000 0.000000   245:
      158 0.001068 0.000000   246: if (defined &$meth) {
        0 0.000000 0.000000   247:     no strict 'refs';
      316 0.003223 0.030000   248:     *$meth = \&{$meth};
      158 0.012687 0.010000   249:     return &$meth(@_);
        0 0.000000 0.000000   250: } elsif ($meth =~
        0 0.000000 0.000000   251:     # Try to determine the type that was
        0 0.000000 0.000000   252:     # translating inttype to INT_TYPE Not
        0 0.000000 0.000000   253:     # good style to write inttype, but we
        0 0.000000 0.000000   254:     # so...
        0 0.000000 0.000000   255:     redo TRY;
        0 0.000000 0.000000   256: }
        0 0.000000 0.000000   257:    }
        0 0.000000 0.000000   258:
        0 0.000000 0.000000   259:  Carp::croak("$Mysql::AUTOLOAD: Not defined
        0 0.000000 0.000000   260:       . " autoloadable (last try $meth)");
        0 0.000000 0.000000   261:}
        0 0.000000 0.000000   262:
        0 0.000000 0.000000   263:
        0 0.000000 0.000000   264:sub gethostinfo ($) { shift->{'dbh'}-
        0 0.000000 0.000000   265:sub getprotoinfo ($) { shift->{'dbh'}-
        0 0.000000 0.000000   266:sub getserverinfo ($) { shift->{'dbh'}-
        0 0.000000 0.000000   267:sub getserverstats ($) { shift->{'dbh'}-
        0 0.000000 0.000000   268:
        0 0.000000 0.000000   269:
        0 0.000000 0.000000   270:Mysql->init_rootclass();
        0 0.000000 0.000000   271:
        0 0.000000 0.000000   272:package Mysql::dr;
        0 0.000000 0.000000   273:@Mysql::dr::ISA = qw(DBI::dr);
        0 0.000000 0.000000   274:
        0 0.000000 0.000000   275:package Mysql::db;
        0 0.000000 0.000000   276:@Mysql::db::ISA = qw(DBI::db);
        0 0.000000 0.000000   277:
        0 0.000000 0.000000   278:package Mysql::st;
        0 0.000000 0.000000   279:@Mysql::st::ISA = qw(Mysql::Statement);
        0 0.000000 0.000000   280:
            ================ SmallProf version 0.9 ================
         Profile of /usr/lib/perl5/site_perl/5.005/i686-linux/Mysql.pm Page 491
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   281:1;
        0 0.000000 0.000000   282:__END__
            ================ SmallProf version 0.9 ================
         Profile of /usr/lib/perl5/site_perl/5.005/i686-linux/Mysql/St Page 492
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000     1:# -*- perl -*-
        0 0.000000 0.000000     2:
        0 0.000000 0.000000     3:package Mysql::Statement;
        0 0.000000 0.000000     4:
        0 0.000000 0.000000     5:@Mysql::Statement::ISA = qw(DBI::st);
        0 0.000000 0.000000     6:
        0 0.000000 0.000000     7:use strict;
        0 0.000000 0.000000     8:use vars qw($VERSION $AUTOLOAD);
        0 0.000000 0.000000     9:
        0 0.000000 0.000000    10:$VERSION = '1.2215';
        0 0.000000 0.000000    11:
     3977 0.000000 0.000000    12:sub fetchrow ($) {
     3977 0.034603 0.130000    13:    my $self = shift;
     3977 0.141429 0.210000    14:    my $ref = $self->fetchrow_arrayref;
     3977 0.011867 0.070000    15:    if ($ref) {
     3862 0.043933 0.100000    16: wantarray ? @$ref : $ref->[0];
        0 0.000000 0.000000    17:    } else {
      115 0.001416 0.000000    18: ();
        0 0.000000 0.000000    19:    }
        0 0.000000 0.000000    20:}
        0 0.000000 0.000000    21:sub fetchhash ($) {
        0 0.000000 0.000000    22:    my($self) = shift;
        0 0.000000 0.000000    23:    my($ref) = $self->fetchrow_hashref;
        0 0.000000 0.000000    24:    if ($ref) {
        0 0.000000 0.000000    25: %$ref;
        0 0.000000 0.000000    26:    } else {
        0 0.000000 0.000000    27: ();
        0 0.000000 0.000000    28:    }
        0 0.000000 0.000000    29:}
        0 0.000000 0.000000    30:sub fetchcol ($$) {
        0 0.000000 0.000000    31:    my($self, $colNum) = @_;
        0 0.000000 0.000000    32:    my(@col);
        0 0.000000 0.000000    33:    $self->dataseek(0);
        0 0.000000 0.000000    34:    my($ref);
        0 0.000000 0.000000    35:    while ($ref = $self->fetchrow_arrayref) {
        0 0.000000 0.000000    36: push(@col, $ref->[$colNum]);
        0 0.000000 0.000000    37:    }
        0 0.000000 0.000000    38:    @col;
        0 0.000000 0.000000    39:}
        0 0.000000 0.000000    40:sub dataseek ($$) {
        0 0.000000 0.000000    41:    my($self, $pos) = @_;
        0 0.000000 0.000000    42:    $self->func($pos, 'dataseek');
        0 0.000000 0.000000    43:}
        0 0.000000 0.000000    44:
     1425 0.058625 0.040000    45:sub numrows { my($self) = shift; $self-
        0 0.000000 0.000000    46:sub numfields { my($self) = shift; $self-
        0 0.000000 0.000000    47:sub arrAttr ($$) {
        0 0.000000 0.000000    48:    my($self, $attr) = @_;
        0 0.000000 0.000000    49:    my $arr = $self->{$attr};
        0 0.000000 0.000000    50:    wantarray ? @$arr : $arr
        0 0.000000 0.000000    51:}
        0 0.000000 0.000000    52:sub table ($) { shift->arrAttr('mysql_table')
        0 0.000000 0.000000    53:sub name ($) { shift->arrAttr('NAME') }
        0 0.000000 0.000000    54:*affectedrows = \&numrows;
        3 0.000084 0.000000    55:sub insertid { my($self) = shift; $self-
        0 0.000000 0.000000    56:sub type ($) { shift->arrAttr('mysql_type') }
            ================ SmallProf version 0.9 ================
         Profile of /usr/lib/perl5/site_perl/5.005/i686-linux/Mysql/St Page 493
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000    57:sub isnotnull ($) {
        0 0.000000 0.000000    58:    my $arr = [map {!$_} @{shift()-
        0 0.000000 0.000000    59:    wantarray ? @$arr : $arr;
        0 0.000000 0.000000    60:}
        0 0.000000 0.000000    61:sub isprikey ($) { shift-
        0 0.000000 0.000000    62:sub isnum ($) { shift-
        0 0.000000 0.000000    63:sub isblob ($) { shift-
        0 0.000000 0.000000    64:sub length ($) { shift->arrAttr('PRECISION')
        0 0.000000 0.000000    65:
        0 0.000000 0.000000    66:sub maxlength  {
        0 0.000000 0.000000    67:    my $sth = shift;
        0 0.000000 0.000000    68:    my $result;
        0 0.000000 0.000000    69:    if (!($result = $sth-
        0 0.000000 0.000000    70: $result = [];
        0 0.000000 0.000000    71: for (my $i = 0;  $i < $sth->numfields();
        0 0.000000 0.000000    72:     $result->[$i] = 0;
        0 0.000000 0.000000    73: }
        0 0.000000 0.000000    74: $sth->dataseek(0);
        0 0.000000 0.000000    75: my $numRows = $sth->numrows();
        0 0.000000 0.000000    76: for (my $j = 0;  $j < $numRows;  $j++) {
        0 0.000000 0.000000    77:     my @row = $sth->fetchrow;
        0 0.000000 0.000000    78:     for (my $i = 0;  $i < @row;  $i++) {
        0 0.000000 0.000000    79:  my $col = $row[$i];
        0 0.000000 0.000000    80:  my $s;
        0 0.000000 0.000000    81:  if (defined($col)) {
        0 0.000000 0.000000    82:      $s = unctrl($col);
        0 0.000000 0.000000    83:      my $l = CORE::length($s);
        0 0.000000 0.000000    84:      # New in 2.0: a string is longer than
        0 0.000000 0.000000    85:      if (defined &Msql::TEXT_TYPE  &&
        0 0.000000 0.000000    86:   $sth->type->[$i] == &Msql::TEXT_TYPE  &&
        0 0.000000 0.000000    87:   $l > $sth->length->[$i] + 5) {
        0 0.000000 0.000000    88:   substr($s,$sth->length->[$i]) = "...($l)";
        0 0.000000 0.000000    89:   $l = CORE::length($s);
        0 0.000000 0.000000    90:      }
        0 0.000000 0.000000    91:      $result->[$i] = $l if $l > $result-
        0 0.000000 0.000000    92:  } else {
        0 0.000000 0.000000    93:      $s = "NULL";
        0 0.000000 0.000000    94:  }
        0 0.000000 0.000000    95:     }
        0 0.000000 0.000000    96: }
        0 0.000000 0.000000    97: $sth->dataseek(0);
        0 0.000000 0.000000    98:    }
        0 0.000000 0.000000    99:    return wantarray ? @$result : $result;
        0 0.000000 0.000000   100:}
        0 0.000000 0.000000   101:
        0 0.000000 0.000000   102:sub listindices {
        0 0.000000 0.000000   103:    my($sth) = shift;
        0 0.000000 0.000000   104:    my(@result,$i);
        0 0.000000 0.000000   105:    return ();
        0 0.000000 0.000000   106:}
        0 0.000000 0.000000   107:
        2 0.000000 0.000000   108:sub AUTOLOAD {
        2 0.000011 0.000000   109:    my $meth = $AUTOLOAD;
        2 0.000029 0.000000   110:    $meth =~ s/^.*:://;
        2 0.000019 0.000000   111:    $meth =~ s/_//g;
        2 0.000012 0.000000   112:    $meth = lc($meth);
            ================ SmallProf version 0.9 ================
         Profile of /usr/lib/perl5/site_perl/5.005/i686-linux/Mysql/St Page 494
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   113:
        0 0.000000 0.000000   114:    # Allow them to say fetch_row or FetchRow
        0 0.000000 0.000000   115:    no strict;
        2 0.000014 0.000000   116:    if (defined &$meth) {
        4 0.000032 0.000000   117: *$AUTOLOAD = \&{$meth};
        2 0.000143 0.000000   118: return &$AUTOLOAD(@_);
        0 0.000000 0.000000   119:    }
        0 0.000000 0.000000   120:    Carp::croak ("$AUTOLOAD not defined and
        0 0.000000 0.000000   121:}
        0 0.000000 0.000000   122:
        0 0.000000 0.000000   123:sub unctrl {
        0 0.000000 0.000000   124:    my($x) = @_;
        0 0.000000 0.000000   125:    $x =~ s/\\/\\\\/g;
        0 0.000000 0.000000   126:    $x =~ s/([\001-
        0 0.000000 0.000000   127:    $x;
        0 0.000000 0.000000   128:}
        0 0.000000 0.000000   129:
        0 0.000000 0.000000   130:
        0 0.000000 0.000000   131:sub as_string {
        0 0.000000 0.000000   132:    my($sth) = @_;
        0 0.000000 0.000000   133:    my($plusline,$titline,$sprintf) =
        0 0.000000 0.000000   134:    my($result,$s,$l);
        0 0.000000 0.000000   135:    if ($sth->numfields == 0) {
        0 0.000000 0.000000   136: return '';
        0 0.000000 0.000000   137:    }
        0 0.000000 0.000000   138:    for (0..$sth->numfields-1) {
        0 0.000000 0.000000   139: $l=CORE::length($sth->name->[$_]);
        0 0.000000 0.000000   140: if ($l < $sth->maxlength->[$_]) {
        0 0.000000 0.000000   141:     $l= $sth->maxlength->[$_];
        0 0.000000 0.000000   142: }
        0 0.000000 0.000000   143: if (!$sth->isnotnull  &&  $l < 4) {
        0 0.000000 0.000000   144:     $l = 4;
        0 0.000000 0.000000   145: }
        0 0.000000 0.000000   146: $plusline .= sprintf "%$ {l}s+", "-" x $l;
        0 0.000000 0.000000   147: $l= -$l  if (!$sth->isnum->[$_]);
        0 0.000000 0.000000   148: $titline .= sprintf "%$ {l}s|", $sth->name-
        0 0.000000 0.000000   149: $sprintf .= "%$ {l}s|";
        0 0.000000 0.000000   150:    }
        0 0.000000 0.000000   151:    $sprintf .= "\n";
        0 0.000000 0.000000   152:    $result =
        0 0.000000 0.000000   153:    $sth->dataseek(0);
        0 0.000000 0.000000   154:    my(@row);
        0 0.000000 0.000000   155:    while (@row = $sth->fetchrow) {
        0 0.000000 0.000000   156: my ($col, $pcol, @prow, $i, $j);
        0 0.000000 0.000000   157: for ($i = 0;  $i < $sth->numfields;  $i++) {
        0 0.000000 0.000000   158:     $col = $row[$i];
        0 0.000000 0.000000   159:     $j = @prow;
        0 0.000000 0.000000   160:     $pcol = defined $col ? unctrl($col) :
        0 0.000000 0.000000   161:     push(@prow, $pcol);
        0 0.000000 0.000000   162: }
        0 0.000000 0.000000   163: $result .= sprintf $sprintf, @prow;
        0 0.000000 0.000000   164:    }
        0 0.000000 0.000000   165:    $result .= "$plusline\n";
        0 0.000000 0.000000   166:    $s = $sth->numrows == 1 ? "" : "s";
        0 0.000000 0.000000   167:    $result .= $sth->numrows . " row$s
        0 0.000000 0.000000   168:    return $result;
            ================ SmallProf version 0.9 ================
         Profile of /usr/lib/perl5/site_perl/5.005/i686-linux/Mysql/St Page 495
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000   169:}
        0 0.000000 0.000000   170:
        0 0.000000 0.000000   171:1;
            ================ SmallProf version 0.9 ================
                               Profile of bugcgi                       Page 496
       =================================================================
    count wall tm  cpu time line
        0 0.000000 0.000000     1:#!/usr/bin/perl
        0 0.000000 0.000000     2:# Perlbug web frontend
        0 0.000000 0.000000     3:# (C) 1999 Richard Foley RFI perlbug@rfi.net
        0 0.000000 0.000000     4:# $Id: bugcgi,v 1.4 2001/04/21 20:48:48
        0 0.000000 0.000000     5:#
        0 0.000000 0.000000     6:use strict;
        0 0.000000 0.000000     7:use vars qw($VERSION);
        3 0.000091 0.010000     8:$VERSION = do { my @r = (q$Revision: 1.4 $ =~
        0 0.000000 0.000000     9:# $| = 1;
        0 0.000000 0.000000    10:
        0 0.000000 0.000000    11:use FindBin;
        0 0.000000 0.000000    12:use lib ("$FindBin::Bin/..",
        0 0.000000 0.000000    13:use Perlbug::Interface::Web;
        0 0.000000 0.000000    14:
        1 0.000132 0.000000    15:my $o_pb = Perlbug::Interface::Web-
        1 0.000098 0.000000    16:my $req = $o_pb->switch();
        0 0.000000 0.000000    17:
        1 0.000083 0.000000    18:print $o_pb->start($req);  # header - html -
        0 0.000000 0.000000    19:
        1 0.000097 0.000000    20:print $o_pb->request($req); # <-- doit
        0 0.000000 0.000000    21:
        1 0.000102 0.000000    22:print $o_pb->finish($req);  # form - html
        1 0.000118 0.000000    23:$o_pb->clean_up;
        0 0.000000 0.000000    24:
        1 0.000079 0.000000    25:exit(0);
        0 0.000000 0.000000    26:
